{"version":3,"sources":["webpack:///./app/views/asyncView.tsx","webpack:///./app/views/vstsOrganizationLink.jsx"],"names":["AsyncView","title","this","getTitle","renderComponent","AsyncComponent","VSTSOrganizationLink","organizations","form","$","attr","submit","className","submitLabel","t","onSubmit","type","name","value","getCookie","CSRF_COOKIE_NAME","targetId","targetName","deprecatedSelectControl","choices","clearable","defaultChoice","label","props","location","query","state","map","o","slug"],"mappings":"8fAQqBA,E,8RAKjB,MAAO,K,+BAIP,IAAMC,EAAQC,KAAKC,WACnB,OACE,YAAC,IAAD,CAAeF,MAAK,UAAKA,EAAQ,GAAH,OAAMA,EAAN,OAAmB,GAA7B,WACjBC,KAAKE,uB,GATJC,KAHWL,E,khBCEAM,E,kSAEjB,MAAO,CAAC,CAAC,gBAAiB,sB,iCAI1B,MAAO,8B,wCAIP,MAAO,CACLC,cAAe,M,iCAsBjB,IAAMC,EAAOC,IAAE,kBACfD,EAAKE,KAAK,SAAU,QACpBF,EAAKE,KAAK,SAAU,+BACpBF,EAAKG,W,+BAIL,OACE,YAAC,IAAD,KACE,YAAC,OAAD,CACEC,UAAU,gBACVC,YAAaC,YAAE,YACfC,SAAUb,KAAKa,UAEf,qBACEC,KAAK,SACLC,KAAK,sBACLC,MAAOC,YAAUC,OAGnB,qBAAOJ,KAAK,SAASC,KAAK,UAAUC,MAAOhB,KAAKmB,WAChD,qBAAOL,KAAK,SAASC,KAAK,YAAYC,MAAOhB,KAAKoB,aAElD,YAAC,cAAD,CACEC,yBAAuB,EACvBC,QAAStB,KAAKK,cACdkB,WAAW,EACXP,MAAOhB,KAAKwB,cACZT,KAAK,eACLU,MAAOb,YAAE,+C,+BA9CjB,OAAOZ,KAAK0B,MAAMC,SAASC,MAAMT,W,iCAIjC,OAAOnB,KAAK0B,MAAMC,SAASC,MAAMR,a,oCAIjC,OAAOpB,KAAK6B,MAAMxB,cAAcyB,KAAI,SAAAC,GAAC,MAAI,CAACA,EAAEC,KAAMD,EAAEhB,W,oCAIpD,OAASf,KAAKK,cAAc,GAAKL,KAAKK,cAAc,GAAG,GAAK,O,GA5BdP,KAA7BM,E","file":"VSTSOrganizationLink.js","sourcesContent":["import DocumentTitle from 'react-document-title';\nimport React from 'react';\n\nimport AsyncComponent from 'app/components/asyncComponent';\n\ntype AsyncViewState = AsyncComponent['state'];\ntype AsyncViewProps = AsyncComponent['props'];\n\nexport default class AsyncView<\n  P extends AsyncViewProps = AsyncViewProps,\n  S extends AsyncViewState = AsyncViewState\n> extends AsyncComponent<P, S> {\n  getTitle() {\n    return '';\n  }\n\n  render() {\n    const title = this.getTitle();\n    return (\n      <DocumentTitle title={`${title ? `${title} - ` : ''}Sentry`}>\n        {this.renderComponent()}\n      </DocumentTitle>\n    );\n  }\n}\n","import $ from 'jquery';\nimport React from 'react';\n\nimport {t} from 'app/locale';\nimport {CSRF_COOKIE_NAME} from 'app/constants';\nimport AsyncView from 'app/views/asyncView';\nimport NarrowLayout from 'app/components/narrowLayout';\nimport {Form, SelectField} from 'app/components/forms';\nimport getCookie from 'app/utils/getCookie';\n\nexport default class VSTSOrganizationLink extends AsyncView {\n  getEndpoints() {\n    return [['organizations', '/organizations/']];\n  }\n\n  getTitle() {\n    return 'Link Organization to VSTS';\n  }\n\n  getDefaultState() {\n    return {\n      organizations: [],\n    };\n  }\n\n  get targetId() {\n    return this.props.location.query.targetId;\n  }\n\n  get targetName() {\n    return this.props.location.query.targetName;\n  }\n\n  get organizations() {\n    return this.state.organizations.map(o => [o.slug, o.name]);\n  }\n\n  get defaultChoice() {\n    return !!this.organizations[0] ? this.organizations[0][0] : '';\n  }\n\n  onSubmit() {\n    // Because Form can't also just be a normal form.\n    const form = $('.link-org-form');\n    form.attr('method', 'POST');\n    form.attr('action', '/extensions/vsts/configure/');\n    form.submit();\n  }\n\n  render() {\n    return (\n      <NarrowLayout>\n        <Form\n          className=\"link-org-form\"\n          submitLabel={t('Continue')}\n          onSubmit={this.onSubmit}\n        >\n          <input\n            type=\"hidden\"\n            name=\"csrfmiddlewaretoken\"\n            value={getCookie(CSRF_COOKIE_NAME)}\n          />\n\n          <input type=\"hidden\" name=\"vsts_id\" value={this.targetId} />\n          <input type=\"hidden\" name=\"vsts_name\" value={this.targetName} />\n\n          <SelectField\n            deprecatedSelectControl\n            choices={this.organizations}\n            clearable={false}\n            value={this.defaultChoice}\n            name=\"organization\"\n            label={t('Organization to use with Azure DevOps')}\n          />\n        </Form>\n      </NarrowLayout>\n    );\n  }\n}\n"],"sourceRoot":""}