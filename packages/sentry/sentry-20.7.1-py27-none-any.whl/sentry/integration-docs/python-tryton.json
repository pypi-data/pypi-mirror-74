{
  "html": "<p>The Tryton integration adds support for the <a href=\"https://www.tryton.org/\">Tryton Framework Server</a>.</p>\n\n<p>To configure the SDK, initialize it with the integration in a custom wsgi.py script:</p>\n\n<pre class=\"highlight\"><code><span class=\"c1\"># wsgi.py\n</span><span class=\"kn\">import</span> <span class=\"nn\">sentry_sdk</span>\n<span class=\"kn\">import</span> <span class=\"nn\">sentry_sdk.integrations.trytond</span>\n\n<span class=\"n\">sentry_sdk</span><span class=\"o\">.</span><span class=\"n\">init</span><span class=\"p\">(</span>\n    <span class=\"n\">desn</span><span class=\"o\">=</span><span class=\"s\">\"___PUBLIC_DSN___\"</span><span class=\"p\">,</span>\n    <span class=\"n\">integrations</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"n\">sentry_sdk</span><span class=\"o\">.</span><span class=\"n\">integrations</span><span class=\"o\">.</span><span class=\"n\">trytond</span><span class=\"o\">.</span><span class=\"n\">TrytondWSGIIntegration</span><span class=\"p\">()]</span>\n<span class=\"p\">)</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">trytond.application</span> <span class=\"kn\">import</span> <span class=\"n\">app</span> <span class=\"k\">as</span> <span class=\"n\">application</span>\n\n<span class=\"c1\"># ...\n</span></code></pre>\n\n<p>In Tryton&gt;=5.4 an error handler can be registered to respond the client\nwith a custom error message including the Sentry event id instead of a traceback.</p>\n\n<pre class=\"highlight\"><code><span class=\"c1\"># wsgi.py\n# ...\n</span>\n<span class=\"kn\">from</span> <span class=\"nn\">trytond.exceptions</span> <span class=\"kn\">import</span> <span class=\"n\">TrytonException</span>\n<span class=\"kn\">from</span> <span class=\"nn\">trytond.exceptions</span> <span class=\"kn\">import</span> <span class=\"n\">UserError</span>\n\n<span class=\"o\">@</span><span class=\"n\">application</span><span class=\"o\">.</span><span class=\"n\">error_handler</span>\n<span class=\"k\">def</span> <span class=\"nf\">_</span><span class=\"p\">(</span><span class=\"n\">app</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">e</span><span class=\"p\">):</span>\n    <span class=\"k\">if</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">e</span><span class=\"p\">,</span> <span class=\"n\">TrytonException</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span>\n    <span class=\"k\">else</span><span class=\"p\">:</span>\n        <span class=\"n\">event_id</span> <span class=\"o\">=</span> <span class=\"n\">sentry_sdk</span><span class=\"o\">.</span><span class=\"n\">last_event_id</span><span class=\"p\">()</span>\n        <span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">UserError</span><span class=\"p\">(</span><span class=\"s\">'Custom message'</span><span class=\"p\">,</span> <span class=\"n\">f</span><span class=\"s\">'{event_id}</span><span class=\"se\">\\n</span><span class=\"s\">{e}'</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">make_response</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">data</span><span class=\"p\">)</span>\n\n</code></pre>", 
  "link": "https://docs.sentry.io/platforms/python/tryton/", 
  "id": "python-tryton", 
  "name": "Tryton"
}
