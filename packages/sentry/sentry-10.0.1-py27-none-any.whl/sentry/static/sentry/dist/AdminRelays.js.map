{"version":3,"sources":["webpack:///./app/components/links/linkWithConfirmation.jsx","webpack:///./app/components/resultGrid.jsx","webpack:///./app/views/admin/adminRelays.jsx"],"names":["LinkWithConfirmation","args","state","isModalOpen","this","props","className","disabled","title","children","otherProps","classNames","onClick","onToggle","React","PureComponent","Filter","getCurrentLabel","selected","options","filter","item","value","name","getDefaultItem","query","$","extend","location","cursor","queryKey","key","isActive","to","path","getSelector","map","filterQuery","length","Component","SortBy","getCurrentSortLabel","getSortBySelector","sortBy","ResultGrid","createReactClass","displayName","getDefaultProps","endpoint","method","columns","sortOptions","filters","defaultSort","keyForRow","row","id","columnsForRow","defaultParams","per_page","hasPagination","hasSearch","getInitialState","queryParams","rows","loading","error","pageLinks","Object","assign","componentWillMount","fetchData","componentWillReceiveProps","nextProps","setState","remountComponent","refresh","api","request","data","success","_","jqXHR","getResponseHeader","onSearch","e","targetQueryParams","jQuery","preventDefault","browserHistory","push","pathname","onQueryChange","evt","target","renderLoading","colSpan","renderError","renderNoResults","renderResults","render","onSubmit","type","placeholder","style","width","autoComplete","onChange","keys","filterKey","withApi","prettyDate","x","moment","format","AdminRelays","onDelete","getRow","relayId","publicKey","textAlign","firstSeen","lastSeen","message","t","onConfirm"],"mappings":"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","file":"AdminRelays.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nimport Confirm from 'app/components/confirm';\n\n/**\n * <Confirm> is a more generic version of this component\n */\nclass LinkWithConfirmation extends React.PureComponent {\n  static propTypes = {\n    disabled: PropTypes.bool,\n    message: PropTypes.node.isRequired,\n    title: PropTypes.node.isRequired,\n    onConfirm: PropTypes.func.isRequired,\n  };\n\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isModalOpen: false,\n    };\n  }\n\n  render() {\n    const {className, disabled, title, children, ...otherProps} = this.props;\n    return (\n      <Confirm {...otherProps} disabled={disabled}>\n        <a\n          className={classNames(className || '', {disabled})}\n          disabled={disabled}\n          onClick={this.onToggle}\n          title={title}\n        >\n          {children}\n        </a>\n      </Confirm>\n    );\n  }\n}\n\nexport default LinkWithConfirmation;\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport createReactClass from 'create-react-class';\nimport $ from 'jquery';\nimport {browserHistory} from 'react-router';\n\nimport withApi from 'app/utils/withApi';\nimport DropdownLink from 'app/components/dropdownLink';\nimport MenuItem from 'app/components/menuItem';\nimport Pagination from 'app/components/pagination';\n\nclass Filter extends React.Component {\n  static propTypes = {\n    name: PropTypes.string.isRequired,\n    queryKey: PropTypes.string.isRequired,\n    options: PropTypes.array.isRequired,\n    path: PropTypes.string.isRequired,\n    value: PropTypes.any,\n  };\n\n  getCurrentLabel = () => {\n    const selected = this.props.options.filter(item => {\n      return item[0] === (this.props.value || '');\n    })[0];\n    if (selected) {\n      return this.props.name + ': ' + selected[1];\n    }\n    return this.props.name + ': ' + 'Any';\n  };\n\n  getDefaultItem = () => {\n    const query = $.extend({}, this.props.location.query, {\n      cursor: '',\n    });\n    delete query[this.props.queryKey];\n\n    return (\n      <MenuItem\n        key=\"\"\n        isActive={this.props.value === '' || !this.props.value}\n        to={this.props.path}\n        query={query}\n      >\n        Any\n      </MenuItem>\n    );\n  };\n\n  getSelector = () => {\n    return (\n      <DropdownLink title={this.getCurrentLabel()}>\n        {this.getDefaultItem()}\n        {this.props.options.map(item => {\n          const filterQuery = {};\n          filterQuery[this.props.queryKey] = item[0];\n          filterQuery.cursor = '';\n          const query = $.extend({}, this.props.location.query, filterQuery);\n          return (\n            <MenuItem\n              key={item[0]}\n              isActive={this.props.value === item[0]}\n              to={this.props.path}\n              query={query}\n            >\n              {item[1]}\n            </MenuItem>\n          );\n        })}\n      </DropdownLink>\n    );\n  };\n\n  render() {\n    return (\n      <div className=\"filter-options\">\n        {this.props.options.length === 1 ? (\n          <strong>{this.getCurrentLabel()}</strong>\n        ) : (\n          this.getSelector()\n        )}\n      </div>\n    );\n  }\n}\n\nclass SortBy extends React.Component {\n  static propTypes = {\n    options: PropTypes.array.isRequired,\n    path: PropTypes.string.isRequired,\n    location: PropTypes.object,\n    value: PropTypes.any,\n  };\n\n  getCurrentSortLabel = () => {\n    return this.props.options.filter(item => {\n      return item[0] === this.props.value;\n    })[0][1];\n  };\n\n  getSortBySelector = () => {\n    return (\n      <DropdownLink title={this.getCurrentSortLabel()} className=\"sorted-by\">\n        {this.props.options.map(item => {\n          const query = $.extend({}, this.props.location.query, {\n            sortBy: item[0],\n            cursor: '',\n          });\n          return (\n            <MenuItem\n              isActive={this.props.value === item[0]}\n              key={item[0]}\n              to={this.props.path}\n              query={query}\n            >\n              {item[1]}\n            </MenuItem>\n          );\n        })}\n      </DropdownLink>\n    );\n  };\n\n  render() {\n    if (this.props.options.length === 0) {\n      return null;\n    }\n\n    return (\n      <div className=\"sort-options\">\n        Showing results sorted by\n        {this.props.options.length === 1 ? (\n          <strong className=\"sorted-by\">{this.getCurrentSortLabel()}</strong>\n        ) : (\n          this.getSortBySelector()\n        )}\n      </div>\n    );\n  }\n}\n\nconst ResultGrid = createReactClass({\n  displayName: 'ResultGrid',\n\n  propTypes: {\n    api: PropTypes.object,\n    columns: PropTypes.array,\n    columnsForRow: PropTypes.func,\n    defaultSort: PropTypes.string,\n    defaultParams: PropTypes.object,\n    endpoint: PropTypes.string,\n    filters: PropTypes.object,\n    hasPagination: PropTypes.bool,\n    hasSearch: PropTypes.bool,\n    keyForRow: PropTypes.func,\n    location: PropTypes.object,\n    method: PropTypes.string,\n    options: PropTypes.array,\n    path: PropTypes.string,\n    sortOptions: PropTypes.array,\n  },\n\n  getDefaultProps() {\n    return {\n      path: '',\n      endpoint: '',\n      method: 'GET',\n      columns: [],\n      sortOptions: [],\n      filters: {},\n      defaultSort: '',\n      keyForRow: function(row) {\n        return row.id;\n      },\n      columnsForRow: function(row) {\n        return [];\n      },\n      defaultParams: {\n        per_page: 50,\n      },\n      hasPagination: true,\n      hasSearch: false,\n    };\n  },\n\n  getInitialState() {\n    const queryParams = (this.props.location || {}).query || {};\n\n    return {\n      rows: [],\n      loading: true,\n      error: false,\n      pageLinks: null,\n      query: queryParams.query || '',\n      sortBy: queryParams.sortBy || this.props.defaultSort,\n      filters: Object.assign({}, queryParams),\n    };\n  },\n\n  componentWillMount() {\n    this.fetchData();\n  },\n\n  componentWillReceiveProps(nextProps) {\n    const queryParams = (nextProps.location || {}).query || {};\n    this.setState(\n      {\n        query: queryParams.query || '',\n        sortBy: queryParams.sortBy || this.props.defaultSort,\n        filters: Object.assign({}, queryParams),\n        pageLinks: null,\n        loading: true,\n        error: false,\n      },\n      this.fetchData\n    );\n  },\n\n  remountComponent() {\n    this.setState(this.getInitialState(), this.fetchData);\n  },\n\n  refresh() {\n    this.setState(\n      {\n        loading: true,\n      },\n      this.fetchData()\n    );\n  },\n\n  fetchData() {\n    // TODO(dcramer): this should whitelist filters/sortBy/cursor/perPage\n    const queryParams = $.extend(\n      {},\n      this.props.defaultParams,\n      {sortBy: this.state.sortBy},\n      (this.props.location || {}).query || {}\n    );\n\n    this.props.api.request(this.props.endpoint, {\n      method: this.props.method,\n      data: queryParams,\n      success: (data, _, jqXHR) => {\n        this.setState({\n          loading: false,\n          error: false,\n          rows: data,\n          pageLinks: jqXHR.getResponseHeader('Link'),\n        });\n      },\n      error: () => {\n        this.setState({\n          loading: false,\n          error: true,\n        });\n      },\n    });\n  },\n\n  onSearch(e) {\n    const location = this.props.location || {};\n    const {query} = this.state;\n    const targetQueryParams = jQuery.extend({}, location.query || {}, {\n      query,\n      cursor: '',\n    });\n\n    e.preventDefault();\n\n    browserHistory.push({\n      pathname: this.props.path,\n      query: targetQueryParams,\n    });\n  },\n\n  onQueryChange(evt) {\n    this.setState({query: evt.target.value});\n  },\n\n  renderLoading() {\n    return (\n      <tr>\n        <td colSpan={this.props.columns.length}>\n          <div className=\"loading\">\n            <div className=\"loading-indicator\" />\n            <div className=\"loading-message\">Hold on to your butts!</div>\n          </div>\n        </td>\n      </tr>\n    );\n  },\n\n  renderError() {\n    return (\n      <tr>\n        <td colSpan={this.props.columns.length}>\n          <div className=\"alert-block alert-error\">Something bad happened :(</div>\n        </td>\n      </tr>\n    );\n  },\n\n  renderNoResults() {\n    return (\n      <tr>\n        <td colSpan={this.props.columns.length}>No results found.</td>\n      </tr>\n    );\n  },\n\n  renderResults() {\n    return this.state.rows.map(row => {\n      return <tr key={this.props.keyForRow(row)}>{this.props.columnsForRow(row)}</tr>;\n    });\n  },\n\n  render() {\n    const {filters} = this.props;\n    return (\n      <div className=\"result-grid\">\n        <div className=\"table-options\">\n          {this.props.hasSearch && (\n            <div className=\"result-grid-search\">\n              <form onSubmit={this.onSearch}>\n                <div className=\"form-group\">\n                  <input\n                    type=\"text\"\n                    className=\"form-control input-search\"\n                    placeholder=\"search\"\n                    style={{width: 300}}\n                    name=\"query\"\n                    autoComplete=\"off\"\n                    value={this.state.query}\n                    onChange={this.onQueryChange}\n                  />\n                  <button type=\"submit\" className=\"btn btn-sm btn-primary\">\n                    <span className=\"icon-search\" />\n                  </button>\n                </div>\n              </form>\n            </div>\n          )}\n          <SortBy\n            options={this.props.sortOptions}\n            value={this.state.sortBy}\n            path={this.props.path}\n            location={this.props.location}\n          />\n          {Object.keys(filters).map(filterKey => {\n            return (\n              <Filter\n                key={filterKey}\n                queryKey={filterKey}\n                value={this.state.filters[filterKey]}\n                path={this.props.path}\n                location={this.props.location}\n                {...filters[filterKey]}\n              />\n            );\n          })}\n        </div>\n\n        <table className=\"table table-grid\">\n          <thead>\n            <tr>{this.props.columns}</tr>\n          </thead>\n          <tbody>\n            {this.state.loading\n              ? this.renderLoading()\n              : this.state.error\n              ? this.renderError()\n              : this.state.rows.length === 0\n              ? this.renderNoResults()\n              : this.renderResults()}\n          </tbody>\n        </table>\n        {this.props.hasPagination && this.state.pageLinks && (\n          <Pagination pageLinks={this.state.pageLinks} />\n        )}\n      </div>\n    );\n  },\n});\n\nexport {ResultGrid};\n\nexport default withApi(ResultGrid);\n","/* eslint-disable react/jsx-key */\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport moment from 'moment';\nimport createReactClass from 'create-react-class';\n\nimport {t} from 'app/locale';\nimport withApi from 'app/utils/withApi';\n\nimport ResultGrid from 'app/components/resultGrid';\nimport LinkWithConfirmation from 'app/components/links/linkWithConfirmation';\n\nconst prettyDate = function(x) {\n  return moment(x).format('ll LTS');\n};\n\nconst AdminRelays = createReactClass({\n  displayName: 'GroupEventDetails',\n\n  propTypes: {\n    api: PropTypes.object,\n  },\n\n  getInitialState() {\n    return {\n      loading: false,\n    };\n  },\n\n  onDelete(key) {\n    this.setState({\n      loading: true,\n    });\n    this.props.api.request(`/relays/${key}/`, {\n      method: 'DELETE',\n      success: () => {\n        this.setState({\n          loading: false,\n        });\n      },\n      error: () => {\n        this.setState({\n          loading: false,\n        });\n      },\n    });\n  },\n\n  getRow(row) {\n    return [\n      <td>\n        <strong>{row.relayId}</strong>\n      </td>,\n      <td>{row.publicKey}</td>,\n      <td style={{textAlign: 'right'}}>{prettyDate(row.firstSeen)}</td>,\n      <td style={{textAlign: 'right'}}>{prettyDate(row.lastSeen)}</td>,\n      <td style={{textAlign: 'right'}}>\n        <span className=\"editor-tools\">\n          <LinkWithConfirmation\n            className=\"danger\"\n            title=\"Remove\"\n            message={t('Are you sure you wish to delete this relay?')}\n            onConfirm={() => this.onDelete(row.id)}\n          >\n            {t('Remove')}\n          </LinkWithConfirmation>\n        </span>\n      </td>,\n    ];\n  },\n\n  render() {\n    const columns = [\n      <th style={{width: 350, textAlign: 'left'}}>Relay</th>,\n      <th>Public Key</th>,\n      <th style={{width: 150, textAlign: 'right'}}>First seen</th>,\n      <th style={{width: 150, textAlign: 'right'}}>Last seen</th>,\n      <th />,\n    ];\n\n    return (\n      <div>\n        <h3>{t('Relays')}</h3>\n        <ResultGrid\n          path=\"/manage/relays/\"\n          endpoint=\"/relays/\"\n          method=\"GET\"\n          columns={columns}\n          columnsForRow={this.getRow}\n          hasSearch={false}\n          sortOptions={[\n            ['firstSeen', 'First seen'],\n            ['lastSeen', 'Last seen'],\n            ['relayId', 'Relay ID'],\n          ]}\n          defaultSort=\"firstSeen\"\n          {...this.props}\n        />\n      </div>\n    );\n  },\n});\n\nexport {AdminRelays};\n\nexport default withApi(AdminRelays);\n"],"sourceRoot":""}