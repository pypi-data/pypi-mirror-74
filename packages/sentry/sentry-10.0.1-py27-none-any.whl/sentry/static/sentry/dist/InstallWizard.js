(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[89],{2627:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return O}));var a=n(6),r=n.n(a),i=n(7),l=n.n(i),o=n(9),s=n.n(o),u=n(8),c=n.n(u),d=n(173),m=n.n(d),p=n(10),f=n.n(p),y=n(0),v=n.n(y),h=n(251),b=n.n(h),E=n(1610),g=n(4),k=n(33),w=n(29),j=n(2082),O=function(e){function t(){return r()(this,t),s()(this,c()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"componentWillMount",value:function(){m()(c()(t.prototype),"componentWillMount",this).call(this),document.body.classList.add("install-wizard")}},{key:"componentWillUnmount",value:function(){m()(c()(t.prototype),"componentWillUnmount",this).call(this),document.body.classList.remove("install-wizard")}},{key:"getEndpoints",value:function(){return[["data","/internal/options/?query=is:required"]]}},{key:"renderFormFields",value:function(){var e=this.state.data,t=new Set(Object.keys(e).filter((function(t){return!e[t].field.isSet})));0===t.size&&(t=new Set(Object.keys(e)));var n={},a=!0,r=!1,i=void 0;try{for(var l,o=t[Symbol.iterator]();!(a=(l=o.next()).done);a=!0){var s=l.value,u=e[s];u.field.disabled||(n[s]=Object(j.d)(s,u.field))}}catch(e){r=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return Object(j.a)(n)}},{key:"getInitialData",value:function(){var e=this.state.data,t={};return Object.keys(e).forEach((function(n){var a=e[n];if(!a.field.disabled){var r=a.value||Object(j.c)(n);"beacon.anonymous"===n||a.field.isSet||void 0===r||(t[n]=r)}})),t}},{key:"getTitle",value:function(){return Object(g.b)("Setup Sentry")}},{key:"render",value:function(){var e=k.default.get("version");return v.a.createElement(b.a,{title:this.getTitle()},v.a.createElement("div",{className:"app"},v.a.createElement("div",{className:"pattern"}),v.a.createElement("div",{className:"setup-wizard"},v.a.createElement("h1",null,v.a.createElement("span",null,Object(g.b)("Welcome to Sentry")),v.a.createElement("small",null,e.current)),this.state.loading?this.renderLoading():this.state.error?this.renderError(new Error("Unable to load all required endpoints")):this.renderBody())))}},{key:"renderError",value:function(){return v.a.createElement("div",{className:"loading-error"},v.a.createElement("span",{className:"icon-exclamation"}),Object(g.b)("We were unable to load the required configuration from the Sentry server. Please take a look at the service logs."))}},{key:"renderBody",value:function(){return v.a.createElement(w.ApiForm,{apiMethod:"PUT",apiEndpoint:this.getEndpoints()[0][1],submitLabel:Object(g.b)("Continue"),initialData:this.getInitialData(),onSubmitSuccess:this.props.onConfigured},v.a.createElement("p",null,Object(g.b)("Complete setup by filling out the required configuration.")),this.renderFormFields())}}]),t}(E.a);O.displayName="InstallWizard"}}]);
//# sourceMappingURL=InstallWizard.js.map