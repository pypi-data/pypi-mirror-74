(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[48],{1609:function(e,t,r){"use strict";var n,a,s=r(2),o=r(44),i=r.n(o),c=r(1),u=r.n(c),l=r(0),p=r.n(l),h=r(35),d=r(289),f=r(47),m=r(28),v=r(4),g=r(5),y=r(105),b=r.n(y),E=r(3),j=r(336),S=r(50),O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={query:"",busy:!1},t.immediateQuery=function(e){return Object(s.b)(t,void 0,void 0,(function(){var t,r,n,a,o,i;return Object(s.e)(this,(function(c){switch(c.label){case 0:t=this.props,r=t.location,n=t.api,this.setState({busy:!0}),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,n.requestPromise(""+this.props.url,{includeAllArgs:!0,method:"GET",query:Object(s.a)(Object(s.a)({},r.query),{query:e})})];case 2:return a=s.g.apply(void 0,[c.sent(),3]),o=a[0],i=a[2],this.state.query===e&&this.props.onSuccess(o,i),[3,4];case 3:return c.sent(),this.props.onError(),[3,4];case 4:return this.setState({busy:!1}),[2]}}))}))},t.query=b()(t.immediateQuery,t.props.debounceWait),t.handleChange=function(e){t.query(e),t.setState({query:e})},t.handleInputChange=function(e){return t.handleChange(e.target.value)},t.handleSearch=function(e){var r=t.props,n=r.updateRoute,a=r.onSearchSubmit;if(e.preventDefault(),n){var s=t.props,o=s.router,i=s.location;o.push({pathname:i.pathname,query:{query:t.state.query}})}"function"==typeof a&&a(t.state.query,e)},t}return Object(s.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.placeholder,r=e.children,n=e.className,a=this.state,s=a.busy,o=a.query,i=p.a.createElement(R,{onSubmit:this.handleSearch},p.a.createElement(j.a,{value:o,onChange:this.handleInputChange,className:n,placeholder:t}),s&&p.a.createElement(x,{size:18,hideMessage:!0,mini:!0}));return void 0===r?i:r({defaultSearchBar:i,busy:s,value:o,handleChange:this.handleChange})},t.defaultProps={placeholder:"Search...",debounceWait:200},t}(p.a.Component),x=Object(E.c)(S.default,{target:"e6xwo0"})(n||(n=Object(s.f)(["\n  position: absolute;\n  right: 25px;\n  top: 50%;\n  transform: translateY(-13px);\n"],["\n  position: absolute;\n  right: 25px;\n  top: 50%;\n  transform: translateY(-13px);\n"]))),R=Object(E.c)("form",{target:"e6xwo1"})(a||(a=Object(s.f)(["\n  position: relative;\n"],["\n  position: relative;\n"]))),q=g.withRouter(O),D=r(159),w=r(6),C=r.n(w),k=r(7),T=r.n(k),N=r(9),P=r.n(N),M=r(8),W=r.n(M),I=r(10),_=r.n(I),A=r(251),F=r.n(A),L=r(104),z=r(73),B=function(e){function t(){return C()(this,t),P()(this,W()(t).apply(this,arguments))}return _()(t,e),T()(t,[{key:"componentDidMount",value:function(){var e=this.props.routes,t=this.context,r=t.organization,n=t.project,a=Object(z.a)(e);h.l((function(e){e.setFingerprint(["Permission Denied",a]),e.setExtra("route",a),e.setExtra("orgFeatures",r&&r.features||[]),e.setExtra("orgAccess",r&&r.access||[]),e.setExtra("projectFeatures",n&&n.features||[]),h.c(new Error("".concat("Permission Denied").concat(a?" : ".concat(a):"")))}))}},{key:"render",value:function(){return p.a.createElement(F.a,{title:Object(v.b)("Permission Denied")},p.a.createElement(D.a,{message:Object(v.c)("Your role does not have the necessary permissions to access this resource, please read more about [link:organizational roles]",{link:p.a.createElement(L.a,{href:"https://docs.sentry.io/learn/membership/"})})}))}}]),t}(p.a.Component);B.displayName="PermissionDenied",B.contextTypes={organization:u.a.object,project:u.a.object};var K=Object(g.withRouter)(B),H=r(569);function J(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{return t.apply(void 0,Object(s.i)(r))}catch(t){return console.error(t),setTimeout((function(){throw t})),e.setState({error:t}),null}}}var G=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.reloadOnVisible=!1,n.shouldReloadOnVisible=!1,n.shouldReload=!1,n.shouldRenderBadRequests=!1,n.api=new f.a,n.markShouldMeasure=function(e){var t=void 0===e?{}:e,r=t.remainingRequests,a=t.error;n._measurement.hasMeasured||(n._measurement.finished=0===r,n._measurement.error=a||n._measurement.error)},n.remountComponent=function(){n.shouldReload?n.reloadData():n.setState(n.getDefaultState(),n.fetchData)},n.visibilityReloader=function(){return n.shouldReloadOnVisible&&!n.state.loading&&!document.hidden&&n.reloadData()},n.fetchData=function(e){var t=n.getEndpoints();t.length?(n.api.clear(),n.setState(Object(s.a)({loading:!0,error:!1,remainingRequests:t.length},e)),t.forEach((function(e){var t=Object(s.g)(e,4),r=t[0],a=t[1],o=t[2],i=t[3];i=i||{};var c=n.props.location&&n.props.location.query||{},u=o&&o.query||{};(i.paginate||c.cursor)&&(u=Object(s.a)(Object(s.a)({},c),u)),n.api.request(a,Object(s.a)(Object(s.a)({method:"GET"},o),{query:u,success:function(e,t,a){n.handleRequestSuccess({stateKey:r,data:e,jqXHR:a},!0)},error:function(e){i.allowError&&i.allowError(e)&&(e=null),n.handleError(e,[r,a,o,i])}}))}))):n.setState({loading:!1,error:!1})},n.fetchData=J(n,n.fetchData.bind(n)),n.render=J(n,n.render.bind(n)),n.state=n.getDefaultState(),n._measurement={hasMeasured:!1},t.routes&&t.routes&&m.b.mark("async-component-"+Object(z.a)(t.routes)),n}return Object(s.d)(t,e),t.prototype.componentWillMount=function(){this.api=new f.a,this.fetchData(),this.reloadOnVisible&&document.addEventListener("visibilitychange",this.visibilityReloader)},t.prototype.componentWillReceiveProps=function(e,t){},t.prototype.componentDidUpdate=function(e,t){var r=!!t.router,n=void 0!==e.location,a=n?this.props.location:r?this.context.router.location:null,s=n?e.location:r?t.router.location:null;if(a&&s){if(!this._measurement.hasMeasured&&this._measurement.finished&&this.props.routes){var o=Object(z.a)(this.props.routes);m.b.measure({name:"app.component.async-component",start:"async-component-"+o,data:{route:o,error:this._measurement.error}}),this._measurement.hasMeasured=!0,"function"==typeof this.props.finishProfile&&this.props.finishProfile()}i()(this.props.params,e.params)&&a.search===s.search&&a.state===s.state||this.remountComponent()}},t.prototype.componentWillUnmount=function(){this.api.clear(),document.removeEventListener("visibilitychange",this.visibilityReloader)},t.prototype.getDefaultState=function(){var e=this.getEndpoints(),t={loading:!0,reloading:!1,error:!1,errors:{}};return e.forEach((function(e){var r=Object(s.g)(e,2),n=r[0];r[1];t[n]=null})),t},t.prototype.reloadData=function(){this.fetchData({reloading:!0})},t.prototype.onRequestSuccess=function(e){},t.prototype.onRequestError=function(e,t){},t.prototype.handleRequestSuccess=function(e,t){var r=this,n=e.stateKey,a=e.data,s=e.jqXHR;this.setState((function(e){var o,i=((o={})[n]=a,o[n+"PageLinks"]=s&&s.getResponseHeader("Link"),o);return t&&(i.remainingRequests=e.remainingRequests-1,i.loading=e.remainingRequests>1,i.reloading=e.reloading&&i.loading,r.markShouldMeasure({remainingRequests:i.remainingRequests})),i})),this.onRequestSuccess({stateKey:n,data:a,jqXHR:s})},t.prototype.handleError=function(e,t){var r=this,n=Object(s.g)(t,1)[0];e&&e.responseText&&h.a({message:e.responseText,category:"xhr",level:d.a.Error}),this.setState((function(t){var a,o,i=t.remainingRequests>1,c=((a={})[n]=null,a.errors=Object(s.a)(Object(s.a)({},t.errors),((o={})[n]=e,o)),a.error=t.error||!!e,a.remainingRequests=t.remainingRequests-1,a.loading=i,a.reloading=t.reloading&&i,a);return r.markShouldMeasure({remainingRequests:c.remainingRequests,error:!0}),c})),this.onRequestError(e,t)},t.prototype.getEndpointParams=function(){return console.warn("getEndpointParams is deprecated"),{}},t.prototype.getEndpoint=function(){return console.warn("getEndpoint is deprecated"),null},t.prototype.getEndpoints=function(){var e=this.getEndpoint();return e?[["data",e,this.getEndpointParams()]]:[]},t.prototype.renderSearchInput=function(e){var t=this,r=e.stateKey,n=e.url,a=Object(s.h)(e,["stateKey","url"]),o=Object(s.g)(this.getEndpoints()||[null],1)[0],i=r||o&&o[0],c=n||o&&o[1];return p.a.createElement(q,Object(s.a)({url:c},a,{api:this.api,onSuccess:function(e,r){t.handleRequestSuccess({stateKey:i,data:e,jqXHR:r})},onError:function(){t.renderError(new Error("Error with AsyncComponentSearchInput"))}}))},t.prototype.renderLoading=function(){return p.a.createElement(S.default,null)},t.prototype.renderError=function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);var n=this.state.errors,a=Object.values(n).find((function(e){return e&&401===e.status})),s=Object.values(n).find((function(e){return e&&403===e.status})),o=!!Object.values(n).find((function(e){return e&&0!==e.status}))||t;if(a)return p.a.createElement(D.a,{message:Object(v.b)("You are not authorized to access this resource.")});if(s)return p.a.createElement(K,null);if(this.shouldRenderBadRequests){var i=Object.values(n).filter((function(e){return e&&400===e.status&&e.responseJSON&&e.responseJSON.detail})).map((function(e){return e.responseJSON.detail}));if(i.length)return p.a.createElement(D.a,{message:i.join("\n")})}return p.a.createElement(H.a,{error:e,component:this,disableLogSentry:!o,disableReport:r,onRetry:this.remountComponent})},t.prototype.renderComponent=function(){return!this.state.loading||this.shouldReload&&this.state.reloading?this.state.error?this.renderError(new Error("Unable to load all required endpoints")):this.renderBody():this.renderLoading()},t.prototype.renderBody=function(){throw new Error("Not implemented")},t.prototype.render=function(){return this.renderComponent()},t.propTypes={location:u.a.object,router:u.a.object},t.contextTypes={router:u.a.object},t}(p.a.Component);t.a=G},1610:function(e,t,r){"use strict";var n=r(2),a=r(251),s=r.n(a),o=r(0),i=r.n(o),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(n.d)(t,e),t.prototype.getTitle=function(){return""},t.prototype.render=function(){var e=this.getTitle();return i.a.createElement(s.a,{title:(e?e+" - ":"")+"Sentry"},this.renderComponent())},t}(r(1609).a);t.a=c},2661:function(e,t,r){"use strict";r.r(t);var n=r(6),a=r.n(n),s=r(7),o=r.n(s),i=r(9),c=r.n(i),u=r(8),l=r.n(u),p=r(10),h=r.n(p),d=r(0),f=r.n(d),m=r(4),v=r(1610),g=r(22),y=r.n(g),b=r(159),E=r(50),j=r(582),S=r(61),O=y()({displayName:"ApiChart",getInitialState:function(){return{error:!1,loading:!0,rawData:{"client-api.all-versions.responses.2xx":null,"client-api.all-versions.responses.4xx":null,"client-api.all-versions.responses.5xx":null}}},componentWillMount:function(){this.fetchData()},componentWillReceiveProps:function(e){this.props.since!==e.since&&this.setState(this.getInitialState(),this.fetchData)},fetchData:function(){var e=this;["client-api.all-versions.responses.2xx","client-api.all-versions.responses.4xx","client-api.all-versions.responses.5xx"].forEach((function(t){e.props.api.request("/internal/stats/",{method:"GET",data:{since:e.props.since,resolution:e.props.resolution,key:t},success:function(r){e.setState((function(e){var n=e.rawData;return n[t]=r,{rawData:n}}),e.requestFinished)},error:function(t){e.setState({error:!0})}})}))},requestFinished:function(){var e=this.state.rawData;e["events.total"]&&e["events.dropped"]&&this.processOrgData(),e["client-api.all-versions.responses.2xx"]&&e["client-api.all-versions.responses.4xx"]&&e["client-api.all-versions.responses.5xx"]&&this.setState({loading:!1})},processRawSeries:function(e){return e.map((function(e){return{x:e[0],y:e[1]}}))},getChartSeries:function(){var e=this.state.rawData;return[{data:this.processRawSeries(e["client-api.all-versions.responses.4xx"]),color:"rgb(86, 175, 232)",shadowSize:0,label:"4xx"},{data:this.processRawSeries(e["client-api.all-versions.responses.5xx"]),color:"rgb(244, 63, 32)",label:"5xx"},{data:this.processRawSeries(e["client-api.all-versions.responses.2xx"]),color:"rgb(78, 222, 73)",label:"2xx"}]},render:function(){return this.state.loading?f.a.createElement(E.default,null):this.state.error?f.a.createElement(b.a,{onRetry:this.fetchData}):f.a.createElement(j.a,{series:this.getChartSeries(),height:150,className:"standard-barchart"})}}),x=Object(S.a)(O),R=y()({displayName:"eventChart",getInitialState:function(){return{error:!1,loading:!0,rawData:{"events.total":null,"events.dropped":null},stats:{received:[],rejected:[]},systemTotal:{received:0,rejected:0,accepted:0}}},componentWillMount:function(){this.fetchData()},componentWillReceiveProps:function(e){this.props.since!==e.since&&this.setState(this.getInitialState(),this.fetchData)},fetchData:function(){var e=this;["events.total","events.dropped"].forEach((function(t){e.props.api.request("/internal/stats/",{method:"GET",data:{since:e.props.since,resolution:e.props.resolution,key:t},success:function(r){e.setState((function(e){var n=e.rawData;return n[t]=r,{rawData:n}}),e.requestFinished)},error:function(t){e.setState({error:!0})}})}))},requestFinished:function(){var e=this.state.rawData;e["events.total"]&&e["events.dropped"]&&this.processOrgData()},processOrgData:function(){var e=this.state.rawData,t=0,r=0,n={},a={},s=[0,0];e["events.total"].forEach((function(o,i){var c=o[1],u=e["events.dropped"][i][1],l=o[0];void 0===n[l]?(n[l]=c,a[l]=u):(n[l]+=c,a[l]+=u),t+=c,r+=u,c>0&&(s[0]+=c,s[1]+=1)})),this.setState({systemTotal:{received:t,rejected:r,accepted:t-r,avgRate:parseInt(s[0]/s[1]/60,10)},stats:{rejected:Object.keys(a).map((function(e){return{x:e,y:a[e]||null}})),accepted:Object.keys(n).map((function(e){return{x:e,y:n[e]-a[e]}}))},loading:!1})},getChartSeries:function(){var e=this.state.stats;return[{data:e.accepted,label:"Accepted",color:"rgba(86, 175, 232, 1)"},{data:e.rejected,color:"rgba(244, 63, 32, 1)",label:"Dropped"}]},render:function(){return this.state.loading?f.a.createElement(E.default,null):this.state.error?f.a.createElement(b.a,{onRetry:this.fetchData}):f.a.createElement(j.a,{series:this.getChartSeries(),height:150,className:"standard-barchart"})}}),q=Object(S.a)(R);r.d(t,"default",(function(){return D}));var D=function(e){function t(){return a()(this,t),c()(this,l()(t).apply(this,arguments))}return h()(t,e),o()(t,[{key:"getTitle",value:function(){return"Admin Overview"}},{key:"getEndpoints",value:function(){return[]}},{key:"renderBody",value:function(){var e=(new Date).getTime()/1e3-604800;return f.a.createElement("div",null,f.a.createElement("h3",null,Object(m.b)("System Overview")),f.a.createElement("div",{className:"box"},f.a.createElement("div",{className:"box-header"},f.a.createElement("h4",null,Object(m.b)("Event Throughput"),f.a.createElement("span",{id:"rate",className:"pull-right"}))),f.a.createElement(q,{since:e,resolution:"1h"})),f.a.createElement("div",{className:"box"},f.a.createElement("div",{className:"box-header"},f.a.createElement("h4",null,Object(m.b)("API Responses"))),f.a.createElement(x,{since:e,resolution:"1h"})))}}]),t}(v.a)}}]);
//# sourceMappingURL=AdminOverview.js.map