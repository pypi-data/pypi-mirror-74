(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[20],{1616:function(t,e,r){"use strict";var n=r(2),o=r(197),i=r(1),a=r.n(i),s=r(0),l=r.n(s),u=r(3),p=r(4),c=r(27),d=r(1635),h=r(342),f=r(11);var m=function(t){function e(e,r){var n=t.call(this,e,r)||this;n.model=n.props.model||new d.a,n.onSubmit=function(t){t.preventDefault(),n.model.isSaving||(n.props.onSubmit?n.props.onSubmit(n.model.getData(),n.onSubmitSuccess,n.onSubmitError,t,n.model):n.model.saveForm())},n.onSubmitSuccess=function(t){var e=n.props.onSubmitSuccess;n.model.submitSuccess(t),e&&e(t,n.model)},n.onSubmitError=function(t){var e=n.props.onSubmitError;n.model.submitError(t),e&&e(t,n.model)};var o=e.saveOnBlur,i=e.apiEndpoint,a=e.apiMethod,s=e.resetOnError,l=e.onSubmitSuccess,u=e.onSubmitError,p=e.onFieldChange,c=e.initialData,h=e.allowUndo;return n.model.setInitialData(c),n.model.setFormOptions({resetOnError:s,allowUndo:h,onFieldChange:p,onSubmitSuccess:l,onSubmitError:u,saveOnBlur:o,apiEndpoint:i,apiMethod:a}),n}return Object(n.d)(e,t),e.prototype.getChildContext=function(){return{saveOnBlur:this.props.saveOnBlur,form:this.model}},e.prototype.componentWillUnmount=function(){this.model.reset()},e.prototype.render=function(){var t=this,e=this.props,r=e.className,n=e.children,i=e.footerClass,a=e.footerStyle,s=e.submitDisabled,u=e.submitLabel,p=e.submitPriority,d=e.cancelLabel,h=e.onCancel,f=e.extraButton,m=e.requireChanges,b=e.saveOnBlur,S=e.hideFooter,v=void 0!==S?!S:!b;return l.a.createElement("form",{onSubmit:this.onSubmit,className:r,"data-test-id":this.props["data-test-id"]},l.a.createElement("div",null,"function"==typeof n?n({model:this.model}):n),v&&l.a.createElement(g,{className:i,style:a,saveOnBlur:b},f,l.a.createElement(y,null,h&&l.a.createElement(o.a,null,(function(){return l.a.createElement(c.a,{type:"button",disabled:t.model.isSaving,onClick:h,style:{marginLeft:5}},d)})),l.a.createElement(o.a,null,(function(){return l.a.createElement(c.a,{"data-test-id":"form-submit",priority:p,disabled:t.model.isError||t.model.isSaving||s||!!m&&!t.model.formChanged,type:"submit"},u)})))))},e.propTypes={cancelLabel:a.a.string,onCancel:a.a.func,onSubmit:a.a.func,onSubmitSuccess:a.a.func,onSubmitError:a.a.func,onFieldChange:a.a.func,submitDisabled:a.a.bool,submitLabel:a.a.string,submitPriority:a.a.string,footerClass:a.a.string,footerStyle:a.a.object,extraButton:a.a.element,initialData:a.a.object,requireChanges:a.a.bool,resetOnError:a.a.bool,hideFooter:a.a.bool,allowUndo:a.a.bool,saveOnBlur:a.a.bool,model:a.a.object,apiMethod:a.a.string,apiEndpoint:a.a.string,"data-test-id":a.a.string},e.childContextTypes={saveOnBlur:a.a.bool.isRequired,form:a.a.object.isRequired},e.defaultProps={cancelLabel:Object(p.b)("Cancel"),submitLabel:Object(p.b)("Save Changes"),submitDisabled:!1,submitPriority:"primary",className:"form-stacked",requireChanges:!1,allowUndo:!1,saveOnBlur:!1},e}(l.a.Component);e.a=m;var b,S,g=Object(u.c)("div",{target:"e1r1zmbj0"})(b||(b=Object(n.f)(["\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 25px;\n  border-top: 1px solid #e9ebec;\n  background: none;\n  padding: 16px 0 0;\n  margin-bottom: 16px;\n\n  ",";\n"],["\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 25px;\n  border-top: 1px solid #e9ebec;\n  background: none;\n  padding: 16px 0 0;\n  margin-bottom: 16px;\n\n  ",";\n"])),(function(t){return!t.saveOnBlur&&"\n  "+h.a+" & {\n    margin-top: 0;\n    padding-right: 36px;\n  }\n\n  /* Better padding with form inside of a modal */\n  .modal-content & {\n    padding-right: 30px;\n    margin-left: -30px;\n    margin-right: -30px;\n    margin-bottom: -30px;\n    margin-top: 16px;\n    padding-bottom: 16px;\n  }\n  "})),y=Object(u.c)("div",{target:"e1r1zmbj1"})(S||(S=Object(n.f)(["\n  display: grid;\n  grid-gap: ",";\n  grid-auto-flow: column;\n  justify-content: flex-end;\n  flex: 1;\n"],["\n  display: grid;\n  grid-gap: ",";\n  grid-auto-flow: column;\n  justify-content: flex-end;\n  flex: 1;\n"])),Object(f.a)(1))},1635:function(t,e,r){"use strict";var n=r(2),o=r(110),i=r(44),a=r.n(i),s=r(47),l=r(51),u=r(21),p=r(4),c=r(96),d=function(){function t(t){void 0===t&&(t={});var e=t.initialData,r=Object(n.h)(t,["initialData"]);this.fields=o.l.map(),this.errors=new Map,this.fieldState=new Map,this.fieldDescriptor=new Map,this.snapshots=[],this.initialData={},this.options=r||{},e&&this.setInitialData(e),this.api=new s.a}return t.prototype.reset=function(){this.api&&this.api.clear(),this.api=null,this.fieldDescriptor.clear(),this.resetForm()},t.prototype.resetForm=function(){this.fields.clear(),this.errors.clear(),this.fieldState.clear(),this.snapshots=[],this.initialData={}},Object.defineProperty(t.prototype,"formChanged",{get:function(){return!a()(this.initialData,this.fields.toJSON())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formData",{get:function(){return this.fields},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSaving",{get:function(){return this.formState===c.a.SAVING},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isError",{get:function(){return!!this.errors.size},enumerable:!0,configurable:!0}),t.prototype.setInitialData=function(t){this.fields.replace(t||{}),this.initialData=this.fields.toJSON()||{},this.snapshots=[new Map(this.fields.entries())]},t.prototype.setFormOptions=function(t){this.options=t||{}},t.prototype.setFieldDescriptor=function(t,e){this.fieldDescriptor.set(t,e),void 0!==e.defaultValue&&void 0===this.initialData[t]&&(this.initialData[t]="function"==typeof e.defaultValue?e.defaultValue():e.defaultValue,this.fields.set(t,this.initialData[t])),"function"==typeof e.setValue&&(this.initialData[t]=e.setValue(this.initialData[t],e),this.fields.set(t,this.initialData[t]))},t.prototype.removeField=function(t){this.fieldDescriptor.delete(t),this.errors.delete(t)},t.prototype.createSnapshot=function(){var t=this,e=new Map(this.fields.entries());return function(){return t.snapshots.unshift(e)}},t.prototype.getDescriptor=function(t,e){var r=this.fieldDescriptor.has(t)&&this.fieldDescriptor.get(t);return r?r[e]:null},t.prototype.getFieldState=function(t,e){var r=this.fieldState.has(t)&&this.fieldState.get(t);return r?r[e]:null},t.prototype.getValue=function(t){return this.fields.has(t)?this.fields.get(t):""},t.prototype.getTransformedValue=function(t){var e=this.fieldDescriptor.get(t),r=e&&"function"==typeof e.getValue?e.getValue:null,n=this.getValue(t);return r?r(n):n},t.prototype.getData=function(){return this.fields.toJSON()},t.prototype.getTransformedData=function(){var t=this,e=this.getData();return Object.keys(e).map((function(e){return[e,t.getTransformedValue(e)]})).reduce((function(t,e){var r=Object(n.g)(e,2),o=r[0],i=r[1];return t[o]=i,t}),{})},t.prototype.getError=function(t){return this.errors.has(t)&&this.errors.get(t)},t.prototype.isValidRequiredField=function(t){var e=this.getDescriptor(t,"required"),r=this.getValue(t);return!e||""!==r&&Object(u.c)(r)},t.prototype.isValidField=function(t){return 0===(this.getError(t)||[]).length},t.prototype.doApiRequest=function(t){var e=this,r=t.apiEndpoint,n=t.apiMethod,o=t.data,i=r||this.options.apiEndpoint||"",a=n||this.options.apiMethod;return new Promise((function(t,r){return e.api?e.api.request(i,{method:a,data:o,success:function(e){return t(e)},error:function(t){return r(t)}}):r(new Error("Api not set"))}))},t.prototype.setValue=function(t,e){var r=this.fieldDescriptor.get(t),n=e;r&&"function"==typeof r.transformInput&&(n=r.transformInput(e)),this.fields.set(t,n),this.options.onFieldChange&&this.options.onFieldChange(t,n),this.validateField(t),this.updateShowSaveState(t,n),this.updateShowReturnButtonState(t,n)},t.prototype.validateField=function(t){var e=this,r=this.getDescriptor(t,"validate"),o=[];"function"==typeof r&&(o=r({model:this,id:t,form:this.getData()})||[]);var i=Object(p.b)("Field is required");this.isValidRequiredField(t)||o.push([t,i]),(o=0===o.length?[[t,null]]:o).forEach((function(t){var r=Object(n.g)(t,2),o=r[0],i=r[1];return e.setError(o,i)}))},t.prototype.updateShowSaveState=function(t,e){var r=e!==this.initialData[t],n=this.getDescriptor(t,"saveOnBlur");void 0===n||n||this.getFieldState(t,"showSave")!==r&&this.setFieldState(t,"showSave",r)},t.prototype.updateShowReturnButtonState=function(t,e){var r=e!==this.initialData[t];this.getDescriptor(t,"showReturnButton")&&this.getFieldState(t,"showReturnButton")!==r&&this.setFieldState(t,"showReturnButton",r)},t.prototype.undo=function(){return this.snapshots.length<2?null:(this.snapshots.shift(),this.fields.replace(this.snapshots[0]),!0)},t.prototype.saveForm=function(){var t=this;if(!this.validateForm())return null;var e=this.createSnapshot(),r=this.doApiRequest({data:this.getTransformedData()});return this.setFormSaving(),r.then((function(r){e&&(e(),e=null),t.options.onSubmitSuccess&&t.options.onSubmitSuccess(r,t)})).catch((function(r){e=null,t.options.resetOnError&&t.setInitialData({}),t.submitError(r),t.options.onSubmitError&&t.options.onSubmitError(r,t)})),r},t.prototype.saveField=function(t,e){var r=this,n=this.initialData[t],o=this.saveFieldRequest(t,e);return o?o.then((function(e){var o=r.getValue(t),i={old:n,new:o};return(void 0===r.options.allowUndo||r.options.allowUndo)&&Object(l.g)(i,r,t),r.options.onSubmitSuccess&&r.options.onSubmitSuccess(e,r,t,i),e})).catch((function(e){return r.options.onSubmitError&&r.options.onSubmitError(e,r,t),{}})):null},t.prototype.saveFieldRequest=function(t,e){var r,n=this,o=this.initialData[t];if(e===o||""===e&&!Object(u.c)(o))return null;if(this.validateField(t),!this.isValidField(t))return null;var i=this.createSnapshot();this.setSaving(t,!0);var a=this.fieldDescriptor.get(t),s="function"==typeof a.getData?a.getData:function(t){return t},p=this.doApiRequest({data:s((r={},r[t]=this.getTransformedValue(t),r),{model:this,id:t,form:this.getData()})});return p.then((function(e){return n.setSaving(t,!1),i&&(i(),i=null),n.initialData[t]=n.getValue(t),e})).catch((function(e){i=null,n.getDescriptor(t,"resetOnError")&&n.setValue(t,o),e&&e.responseJSON?Array.isArray(e.responseJSON[t])&&e.responseJSON[t].length?n.setError(t,e.responseJSON[t][0]):Array.isArray(e.responseJSON.non_field_errors)&&e.responseJSON.non_field_errors.length?(Object(l.a)(e.responseJSON.non_field_errors[0],1e4),n.setError(t,"")):n.setError(t,"Failed to save"):n.setError(t,"Failed to save"),console.error("Error saving form field",e&&e.responseJSON)})),p},t.prototype.handleBlurField=function(t,e){if(!this.options.saveOnBlur)return null;var r=this.getDescriptor(t,"saveOnBlur");return void 0===r||r?this.saveField(t,e):null},t.prototype.setFormSaving=function(){this.formState=c.a.SAVING},t.prototype.handleSaveField=function(t,e){var r=this,n=this.saveField(t,e);return n?n.then((function(){r.setFieldState(t,"showSave",!1)})):null},t.prototype.handleCancelSaveField=function(t){this.setValue(t,this.initialData[t]),this.setFieldState(t,"showSave",!1)},t.prototype.setFieldState=function(t,e,r){var o,i=Object(n.a)(Object(n.a)({},this.fieldState.get(t)||{}),((o={})[e]=r,o));this.fieldState.set(t,i)},t.prototype.setSaving=function(t,e){this.setError(t,!1),this.setFieldState(t,c.a.SAVING,e),this.setFieldState(t,c.a.READY,!e)},t.prototype.setError=function(t,e){e?(this.formState=c.a.ERROR,this.errors.set(t,e)):(this.formState=c.a.READY,this.errors.delete(t)),this.setFieldState(t,c.a.SAVING,!1)},t.prototype.validateForm=function(){var t=this;return Array.from(this.fieldDescriptor.keys()).forEach((function(e){return!t.validateField(e)})),!this.isError},t.prototype.handleErrorResponse=function(t){var e=this,r=(void 0===t?{}:t).responseJSON;r&&Object.keys(r).forEach((function(t){"non_field_errors"===t&&Array.isArray(r.non_field_errors)&&r.non_field_errors.length?Object(l.a)(r.non_field_errors[0],1e4):Array.isArray(r[t])&&r[t].length&&e.setError(t,r[t][0])}))},t.prototype.submitSuccess=function(t){this.formState=c.a.READY,this.initialData=t},t.prototype.submitError=function(t){this.formState=c.a.ERROR,this.formErrors=this.mapFormErrors(t.responseJSON),this.handleErrorResponse({responseJSON:this.formErrors})},t.prototype.mapFormErrors=function(t){return t},Object(n.c)([o.l],t.prototype,"errors",void 0),Object(n.c)([o.l],t.prototype,"fieldState",void 0),Object(n.c)([o.l],t.prototype,"formState",void 0),Object(n.c)([o.e],t.prototype,"formChanged",null),Object(n.c)([o.e],t.prototype,"formData",null),Object(n.c)([o.e],t.prototype,"isSaving",null),Object(n.c)([o.e],t.prototype,"isError",null),Object(n.c)([o.d],t.prototype,"setValue",null),Object(n.c)([o.d],t.prototype,"validateField",null),Object(n.c)([o.d],t.prototype,"updateShowSaveState",null),Object(n.c)([o.d],t.prototype,"updateShowReturnButtonState",null),Object(n.c)([o.d],t.prototype,"undo",null),Object(n.c)([o.d],t.prototype,"saveForm",null),Object(n.c)([o.d],t.prototype,"saveField",null),Object(n.c)([o.d],t.prototype,"saveFieldRequest",null),Object(n.c)([o.d],t.prototype,"handleBlurField",null),Object(n.c)([o.d],t.prototype,"setFormSaving",null),Object(n.c)([o.d],t.prototype,"handleSaveField",null),Object(n.c)([o.d],t.prototype,"handleCancelSaveField",null),Object(n.c)([o.d],t.prototype,"setFieldState",null),Object(n.c)([o.d],t.prototype,"setSaving",null),Object(n.c)([o.d],t.prototype,"setError",null),Object(n.c)([o.d],t.prototype,"validateForm",null),Object(n.c)([o.d],t.prototype,"handleErrorResponse",null),Object(n.c)([o.d],t.prototype,"submitSuccess",null),Object(n.c)([o.d],t.prototype,"submitError",null),t}();e.a=d},1687:function(t,e,r){"use strict";r.d(e,"a",(function(){return g}));var n=r(12),o=r.n(n),i=r(6),a=r.n(i),s=r(7),l=r.n(s),u=r(9),p=r.n(u),c=r(8),d=r.n(c),h=r(10),f=r.n(h),m=r(0),b=r.n(m),S=r(290),g=function(t){function e(){return a()(this,e),p()(this,d()(e).apply(this,arguments))}return f()(e,t),l()(e,[{key:"render",value:function(){return b.a.createElement(S.a,o()({},this.props,{type:"text"}))}}]),e}(b.a.Component);g.displayName="TextField"},1705:function(t,e,r){"use strict";function n(t){return"string"==typeof t?t.toLowerCase().replace(" ","-"):""}r.d(e,"a",(function(){return n}))},2151:function(t,e,r){"use strict";r.d(e,"a",(function(){return O}));var n=r(12),o=r.n(n),i=r(6),a=r.n(i),s=r(7),l=r.n(s),u=r(9),p=r.n(u),c=r(8),d=r.n(c),h=r(10),f=r.n(h),m=r(0),b=r.n(m),S=r(4),g=r(1616),y=r(1687),v=r(1705),O=function(t){function e(){var t,r;a()(this,e);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(r=p()(this,(t=d()(e)).call.apply(t,[this].concat(o)))).handleCreateTeamSuccess=function(t){var e=r.props.onSuccess;"function"==typeof e&&e(t)},r}return f()(e,t),l()(e,[{key:"render",value:function(){var t=this.props.organization;return b.a.createElement(b.a.Fragment,null,b.a.createElement("p",null,Object(S.b)("Teams group members' access to a specific focus, e.g. a major product or application that may have sub-projects.")),b.a.createElement(g.a,o()({submitLabel:Object(S.b)("Create Team"),apiEndpoint:"/organizations/".concat(t.slug,"/teams/"),apiMethod:"POST",onSubmit:this.props.onSubmit,onSubmitSuccess:this.handleCreateTeamSuccess,requireChanges:!0,"data-test-id":"create-team-form"},this.props.formProps),b.a.createElement(y.a,{name:"slug",label:Object(S.b)("Team Slug"),placeholder:Object(S.b)("e.g. operations, web-frontend, desktop"),help:Object(S.b)("May contain lowercase letters, numbers, dashes and underscores."),required:!0,stacked:!0,flexibleControlStateSize:!0,inline:!1,transformInput:v.a})))}}]),e}(b.a.Component);O.displayName="CreateTeamForm"}}]);
//# sourceMappingURL=CreateTeamModal~TeamCreate.js.map