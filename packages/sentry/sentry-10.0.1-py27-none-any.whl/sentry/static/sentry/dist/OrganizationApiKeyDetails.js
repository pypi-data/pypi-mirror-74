(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[102],{1609:function(e,t,r){"use strict";var n,a,o=r(2),s=r(44),i=r.n(s),c=r(1),u=r.n(c),l=r(0),p=r.n(l),d=r(35),h=r(289),m=r(47),f=r(28),y=r(4),b=r(5),g=r(105),v=r.n(g),E=r(3),O=r(336),j=r(50),S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={query:"",busy:!1},t.immediateQuery=function(e){return Object(o.b)(t,void 0,void 0,(function(){var t,r,n,a,s,i;return Object(o.e)(this,(function(c){switch(c.label){case 0:t=this.props,r=t.location,n=t.api,this.setState({busy:!0}),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,n.requestPromise(""+this.props.url,{includeAllArgs:!0,method:"GET",query:Object(o.a)(Object(o.a)({},r.query),{query:e})})];case 2:return a=o.g.apply(void 0,[c.sent(),3]),s=a[0],i=a[2],this.state.query===e&&this.props.onSuccess(s,i),[3,4];case 3:return c.sent(),this.props.onError(),[3,4];case 4:return this.setState({busy:!1}),[2]}}))}))},t.query=v()(t.immediateQuery,t.props.debounceWait),t.handleChange=function(e){t.query(e),t.setState({query:e})},t.handleInputChange=function(e){return t.handleChange(e.target.value)},t.handleSearch=function(e){var r=t.props,n=r.updateRoute,a=r.onSearchSubmit;if(e.preventDefault(),n){var o=t.props,s=o.router,i=o.location;s.push({pathname:i.pathname,query:{query:t.state.query}})}"function"==typeof a&&a(t.state.query,e)},t}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.placeholder,r=e.children,n=e.className,a=this.state,o=a.busy,s=a.query,i=p.a.createElement(R,{onSubmit:this.handleSearch},p.a.createElement(O.a,{value:s,onChange:this.handleInputChange,className:n,placeholder:t}),o&&p.a.createElement(q,{size:18,hideMessage:!0,mini:!0}));return void 0===r?i:r({defaultSearchBar:i,busy:o,value:s,handleChange:this.handleChange})},t.defaultProps={placeholder:"Search...",debounceWait:200},t}(p.a.Component),q=Object(E.c)(j.default,{target:"e6xwo0"})(n||(n=Object(o.f)(["\n  position: absolute;\n  right: 25px;\n  top: 50%;\n  transform: translateY(-13px);\n"],["\n  position: absolute;\n  right: 25px;\n  top: 50%;\n  transform: translateY(-13px);\n"]))),R=Object(E.c)("form",{target:"e6xwo1"})(a||(a=Object(o.f)(["\n  position: relative;\n"],["\n  position: relative;\n"]))),w=b.withRouter(S),P=r(159),D=r(6),k=r.n(D),x=r(7),C=r.n(x),N=r(9),K=r.n(N),T=r(8),M=r.n(T),W=r(10),_=r.n(W),z=r(251),I=r.n(z),L=r(104),A=r(73),B=function(e){function t(){return k()(this,t),K()(this,M()(t).apply(this,arguments))}return _()(t,e),C()(t,[{key:"componentDidMount",value:function(){var e=this.props.routes,t=this.context,r=t.organization,n=t.project,a=Object(A.a)(e);d.l((function(e){e.setFingerprint(["Permission Denied",a]),e.setExtra("route",a),e.setExtra("orgFeatures",r&&r.features||[]),e.setExtra("orgAccess",r&&r.access||[]),e.setExtra("projectFeatures",n&&n.features||[]),d.c(new Error("".concat("Permission Denied").concat(a?" : ".concat(a):"")))}))}},{key:"render",value:function(){return p.a.createElement(I.a,{title:Object(y.b)("Permission Denied")},p.a.createElement(P.a,{message:Object(y.c)("Your role does not have the necessary permissions to access this resource, please read more about [link:organizational roles]",{link:p.a.createElement(L.a,{href:"https://docs.sentry.io/learn/membership/"})})}))}}]),t}(p.a.Component);B.displayName="PermissionDenied",B.contextTypes={organization:u.a.object,project:u.a.object};var H=Object(b.withRouter)(B),J=r(569);function U(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{return t.apply(void 0,Object(o.i)(r))}catch(t){return console.error(t),setTimeout((function(){throw t})),e.setState({error:t}),null}}}var V=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.reloadOnVisible=!1,n.shouldReloadOnVisible=!1,n.shouldReload=!1,n.shouldRenderBadRequests=!1,n.api=new m.a,n.markShouldMeasure=function(e){var t=void 0===e?{}:e,r=t.remainingRequests,a=t.error;n._measurement.hasMeasured||(n._measurement.finished=0===r,n._measurement.error=a||n._measurement.error)},n.remountComponent=function(){n.shouldReload?n.reloadData():n.setState(n.getDefaultState(),n.fetchData)},n.visibilityReloader=function(){return n.shouldReloadOnVisible&&!n.state.loading&&!document.hidden&&n.reloadData()},n.fetchData=function(e){var t=n.getEndpoints();t.length?(n.api.clear(),n.setState(Object(o.a)({loading:!0,error:!1,remainingRequests:t.length},e)),t.forEach((function(e){var t=Object(o.g)(e,4),r=t[0],a=t[1],s=t[2],i=t[3];i=i||{};var c=n.props.location&&n.props.location.query||{},u=s&&s.query||{};(i.paginate||c.cursor)&&(u=Object(o.a)(Object(o.a)({},c),u)),n.api.request(a,Object(o.a)(Object(o.a)({method:"GET"},s),{query:u,success:function(e,t,a){n.handleRequestSuccess({stateKey:r,data:e,jqXHR:a},!0)},error:function(e){i.allowError&&i.allowError(e)&&(e=null),n.handleError(e,[r,a,s,i])}}))}))):n.setState({loading:!1,error:!1})},n.fetchData=U(n,n.fetchData.bind(n)),n.render=U(n,n.render.bind(n)),n.state=n.getDefaultState(),n._measurement={hasMeasured:!1},t.routes&&t.routes&&f.b.mark("async-component-"+Object(A.a)(t.routes)),n}return Object(o.d)(t,e),t.prototype.componentWillMount=function(){this.api=new m.a,this.fetchData(),this.reloadOnVisible&&document.addEventListener("visibilitychange",this.visibilityReloader)},t.prototype.componentWillReceiveProps=function(e,t){},t.prototype.componentDidUpdate=function(e,t){var r=!!t.router,n=void 0!==e.location,a=n?this.props.location:r?this.context.router.location:null,o=n?e.location:r?t.router.location:null;if(a&&o){if(!this._measurement.hasMeasured&&this._measurement.finished&&this.props.routes){var s=Object(A.a)(this.props.routes);f.b.measure({name:"app.component.async-component",start:"async-component-"+s,data:{route:s,error:this._measurement.error}}),this._measurement.hasMeasured=!0,"function"==typeof this.props.finishProfile&&this.props.finishProfile()}i()(this.props.params,e.params)&&a.search===o.search&&a.state===o.state||this.remountComponent()}},t.prototype.componentWillUnmount=function(){this.api.clear(),document.removeEventListener("visibilitychange",this.visibilityReloader)},t.prototype.getDefaultState=function(){var e=this.getEndpoints(),t={loading:!0,reloading:!1,error:!1,errors:{}};return e.forEach((function(e){var r=Object(o.g)(e,2),n=r[0];r[1];t[n]=null})),t},t.prototype.reloadData=function(){this.fetchData({reloading:!0})},t.prototype.onRequestSuccess=function(e){},t.prototype.onRequestError=function(e,t){},t.prototype.handleRequestSuccess=function(e,t){var r=this,n=e.stateKey,a=e.data,o=e.jqXHR;this.setState((function(e){var s,i=((s={})[n]=a,s[n+"PageLinks"]=o&&o.getResponseHeader("Link"),s);return t&&(i.remainingRequests=e.remainingRequests-1,i.loading=e.remainingRequests>1,i.reloading=e.reloading&&i.loading,r.markShouldMeasure({remainingRequests:i.remainingRequests})),i})),this.onRequestSuccess({stateKey:n,data:a,jqXHR:o})},t.prototype.handleError=function(e,t){var r=this,n=Object(o.g)(t,1)[0];e&&e.responseText&&d.a({message:e.responseText,category:"xhr",level:h.a.Error}),this.setState((function(t){var a,s,i=t.remainingRequests>1,c=((a={})[n]=null,a.errors=Object(o.a)(Object(o.a)({},t.errors),((s={})[n]=e,s)),a.error=t.error||!!e,a.remainingRequests=t.remainingRequests-1,a.loading=i,a.reloading=t.reloading&&i,a);return r.markShouldMeasure({remainingRequests:c.remainingRequests,error:!0}),c})),this.onRequestError(e,t)},t.prototype.getEndpointParams=function(){return console.warn("getEndpointParams is deprecated"),{}},t.prototype.getEndpoint=function(){return console.warn("getEndpoint is deprecated"),null},t.prototype.getEndpoints=function(){var e=this.getEndpoint();return e?[["data",e,this.getEndpointParams()]]:[]},t.prototype.renderSearchInput=function(e){var t=this,r=e.stateKey,n=e.url,a=Object(o.h)(e,["stateKey","url"]),s=Object(o.g)(this.getEndpoints()||[null],1)[0],i=r||s&&s[0],c=n||s&&s[1];return p.a.createElement(w,Object(o.a)({url:c},a,{api:this.api,onSuccess:function(e,r){t.handleRequestSuccess({stateKey:i,data:e,jqXHR:r})},onError:function(){t.renderError(new Error("Error with AsyncComponentSearchInput"))}}))},t.prototype.renderLoading=function(){return p.a.createElement(j.default,null)},t.prototype.renderError=function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);var n=this.state.errors,a=Object.values(n).find((function(e){return e&&401===e.status})),o=Object.values(n).find((function(e){return e&&403===e.status})),s=!!Object.values(n).find((function(e){return e&&0!==e.status}))||t;if(a)return p.a.createElement(P.a,{message:Object(y.b)("You are not authorized to access this resource.")});if(o)return p.a.createElement(H,null);if(this.shouldRenderBadRequests){var i=Object.values(n).filter((function(e){return e&&400===e.status&&e.responseJSON&&e.responseJSON.detail})).map((function(e){return e.responseJSON.detail}));if(i.length)return p.a.createElement(P.a,{message:i.join("\n")})}return p.a.createElement(J.a,{error:e,component:this,disableLogSentry:!s,disableReport:r,onRetry:this.remountComponent})},t.prototype.renderComponent=function(){return!this.state.loading||this.shouldReload&&this.state.reloading?this.state.error?this.renderError(new Error("Unable to load all required endpoints")):this.renderBody():this.renderLoading()},t.prototype.renderBody=function(){throw new Error("Not implemented")},t.prototype.render=function(){return this.renderComponent()},t.propTypes={location:u.a.object,router:u.a.object},t.contextTypes={router:u.a.object},t}(p.a.Component);t.a=V},1610:function(e,t,r){"use strict";var n=r(2),a=r(251),o=r.n(a),s=r(0),i=r.n(s),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(n.d)(t,e),t.prototype.getTitle=function(){return""},t.prototype.render=function(){var e=this.getTitle();return i.a.createElement(o.a,{title:(e?e+" - ":"")+"Sentry"},this.renderComponent())},t}(r(1609).a);t.a=c},1618:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(577),a=r.n(n),o=r(447);function s(e,t){var r,n,s=t.routes,i=t.params,c=t.location,u=t.stepBack,l=s.map((function(e){return e.path||""}));"string"!=typeof e?(n=s.indexOf(e)+1,r=a()(l.slice(0,n),(function(e){return"/"===e[0]}))):r=a()(l,(function(e){return"/"===e[0]}));var p=l.slice(r,n);void 0!==u&&(p=p.slice(0,u));var d=void 0!==c&&c.search?c.search:"",h=""+p.join("")+("string"!=typeof e?"":e)+d;return Object(o.a)(h,i)}},1743:function(e,t,r){"use strict";var n=r(12),a=r.n(n),o=r(20),s=r.n(o),i=r(0),c=r.n(i),u=r(36),l=r.n(u),p=function(e){var t=e.children,r=e.className,n=e.responsive,o=e.center,i=s()(e,["children","className","responsive","center"]),u=l()("spread-layout",r,{center:o,"allow-responsive":n});return c.a.createElement("div",a()({},i,{className:u}),t)};p.displayName="SpreadLayout",p.defaultProps={responsive:!1,center:!0},t.a=p},2672:function(e,t,r){"use strict";r.r(t);var n=r(6),a=r.n(n),o=r(7),s=r.n(o),i=r(9),c=r.n(i),u=r(8),l=r.n(u),p=r(10),d=r.n(p),h=r(5),m=r(0),f=r.n(m),y=r(24),b=r(51),g=r(4),v=r(615),E=r(616),O=r(1610),j=r(53),S=r(12),q=r.n(S),R=r(16),w=r.n(R),P=r(20),D=r.n(P),k=r(36),x=r.n(k),C=r(1743);function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(r,!0).forEach((function(t){w()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var T=function(e){var t=e.children,r=e.className,n=e.responsive,a=e.splitWidth,o=D()(e,["children","className","responsive","splitWidth"]),s=x()("split-layout",r,{"allow-responsive":n}),i=0,c=f.a.Children.count(t);return f.a.createElement(C.a,q()({},o,{className:s}),f.a.Children.map(t,(function(e){var t=e&&e.props||{},r=++i===c;return f.a.cloneElement(e,{style:K({marginRight:r?void 0:a},e.props&&e.props.style||{}),className:x()(t.className,"split-layout-child")})})))};T.displayName="SplitLayout";var M=T,W=r(351),_=r(401),z=r(1618),I=y.f.map((function(e){return[e,e]})),L=function(e){function t(){var e,r;a()(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(r=c()(this,(e=l()(t)).call.apply(e,[this].concat(o)))).handleSubmitSuccess=function(){Object(b.d)("Saved changes"),h.browserHistory.push(Object(z.a)("",{stepBack:-1,routes:r.props.routes,params:r.props.params}))},r.handleSubmitError=function(){Object(b.a)("Unable to save changes. Please try again.")},r}return d()(t,e),s()(t,[{key:"getDefaultState",value:function(){return{loading:!0,error:!1,apiKey:{}}}},{key:"componentWillReceiveProps",value:function(e){e.location.search===this.props.location.search&&e.params.orgId===this.props.params.orgId||this.remountComponent()}},{key:"getEndpoints",value:function(){return[["apiKey","/organizations/".concat(this.props.params.orgId,"/api-keys/").concat(this.props.params.apiKey,"/")]]}},{key:"getTitle",value:function(){var e=this.context.organization;return"".concat(e.name," Edit API Key")}},{key:"renderBody",value:function(){var e=this;return f.a.createElement("div",null,f.a.createElement("div",{className:"page-header"},f.a.createElement("h3",null,Object(g.b)("Edit Api Key"))),f.a.createElement(v.a,{apiMethod:"PUT",apiEndpoint:"/organizations/".concat(this.props.params.orgId,"/api-keys/").concat(this.props.params.apiKey,"/"),initialData:this.state.apiKey,onSubmitSuccess:this.handleSubmitSuccess,onSubmitError:this.handleSubmitError,onCancel:function(){return h.browserHistory.push(Object(z.a)("",{stepBack:-1,routes:e.props.routes,params:e.props.params}))}},f.a.createElement(M,{splitWidth:15},f.a.createElement(W.a,{label:Object(g.b)("Label"),name:"label"}),f.a.createElement(W.a,{label:Object(g.b)("API Key"),name:"key",disabled:!0})),f.a.createElement(E.a,{className:"api-key-details",name:"scope_list",label:Object(g.b)("Scopes"),required:!0,choices:I}),f.a.createElement(_.a,{label:Object(g.b)("Allowed Domains"),name:"allowed_origins",placeholder:"e.g. example.com or https://example.com",help:"Separate multiple entries with a newline"})))}}]),t}(O.a);L.contextTypes={organization:j.b.Organization};t.default=L}}]);
//# sourceMappingURL=OrganizationApiKeyDetails.js.map