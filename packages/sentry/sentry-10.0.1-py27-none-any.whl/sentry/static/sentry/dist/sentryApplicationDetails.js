(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[201],{1610:function(e,t,n){"use strict";var r=n(2),i=n(251),o=n.n(i),a=n(0),s=n.n(a),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.d)(t,e),t.prototype.getTitle=function(){return""},t.prototype.render=function(){var e=this.getTitle();return s.a.createElement(o.a,{title:(e?e+" - ":"")+"Sentry"},this.renderComponent())},t}(n(1609).a);t.a=c},1611:function(e,t,n){"use strict";var r,i,o,a,s,c=n(2),u=n(1),l=n.n(u),p=n(0),f=n.n(p),d=n(3),h=n(11),b=n(337),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.icon,n=e.title,r=e.action,i=e.tabs,o=e.noTitleStyles,a=Object(c.h)(e,["icon","title","action","tabs","noTitleStyles"]);return f.a.createElement("div",Object(c.a)({},a),f.a.createElement(y,null,t&&f.a.createElement(g,null,t),n&&f.a.createElement(v,{tabs:i,styled:o},f.a.createElement(b.a,null,n)),r&&f.a.createElement(O,{tabs:i},r)),i&&f.a.createElement("div",null,i))},t.propTypes={icon:l.a.node,title:l.a.node.isRequired,action:l.a.node,tabs:l.a.node,noTitleStyles:l.a.bool},t.defaultProps={noTitleStyles:!1},t}(f.a.Component),y=Object(d.c)("div",{target:"e1uay4fd0"})(r||(r=Object(c.f)(["\n  display: flex;\n  align-items: center;\n"],["\n  display: flex;\n  align-items: center;\n"]))),v=Object(d.c)("div",{target:"e1uay4fd1"})(i||(i=Object(c.f)(["\n  ",";\n  margin: ",";\n  flex: 1;\n"],["\n  ",";\n  margin: ",";\n  flex: 1;\n"])),(function(e){return!e.styled&&"\n    font-size: 20px;\n    font-weight: bold;"}),(function(e){return e.tabs?Object(h.a)(4)+" 0 "+Object(h.a)(2):Object(h.a)(4)+" 0"})),g=Object(d.c)("div",{target:"e1uay4fd2"})(o||(o=Object(c.f)(["\n  margin-right: ",";\n"],["\n  margin-right: ",";\n"])),Object(h.a)(1)),O=Object(d.c)("div",{target:"e1uay4fd3"})(a||(a=Object(c.f)(["\n  ",";\n"],["\n  ",";\n"])),(function(e){return e.tabs?"margin-top: "+Object(h.a)(2):null})),j=Object(d.c)(m,{target:"e1uay4fd4"})(s||(s=Object(c.f)(["\n  font-size: 14px;\n  margin-top: -",";\n"],["\n  font-size: 14px;\n  margin-top: -",";\n"])),Object(h.a)(4));t.a=j},1617:function(e,t,n){var r=n(1619);e.exports=function(e,t){if(t=t||{},"string"==typeof e&&(e=document.querySelector(e)),e)return r(0,function(e,t,n){var r,i=document.body,o=document.documentElement,a=e.getBoundingClientRect(),s=o.clientHeight,c=Math.max(i.scrollHeight,i.offsetHeight,o.clientHeight,o.scrollHeight,o.offsetHeight);t=t||0,r="bottom"===n?a.bottom-s:"middle"===n?a.bottom-s/2-a.height/2:a.top;var u=c-s;return Math.min(r+t+window.pageYOffset,u)}(e,t.offset,t.align),t)}},1619:function(e,t,n){var r=n(1620),i=n(1623);e.exports=function(e,t,n){n=n||{};var o={top:window.pageYOffset||document.documentElement.scrollTop,left:window.pageXOffset||document.documentElement.scrollLeft},a=r(o).ease(n.ease||"out-circ").to({top:t,left:e}).duration(n.duration||1e3);function s(){i(s),a.update()}return a.update((function(e){window.scrollTo(0|e.left,0|e.top)})),a.on("end",(function(){s=function(){}})),s(),a}},1620:function(e,t,n){var r=n(1621);function i(e){if(!(this instanceof i))return new i(e);this._from=e,this.ease("linear"),this.duration(500)}n(1622)(i.prototype),i.prototype.reset=function(){return this.isArray="[object Array]"===Object.prototype.toString.call(this._from),this._curr=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}({},this._from),this._done=!1,this._start=Date.now(),this},i.prototype.to=function(e){return this.reset(),this._to=e,this},i.prototype.duration=function(e){return this._duration=e,this},i.prototype.ease=function(e){if(!(e="function"==typeof e?e:r[e]))throw new TypeError("invalid easing function");return this._ease=e,this},i.prototype.stop=function(){return this.stopped=!0,this._done=!0,this.emit("stop"),this.emit("end"),this},i.prototype.step=function(){if(!this._done){var e=this._duration,t=Date.now();if(t-this._start>=e)return this._from=this._to,this._update(this._to),this._done=!0,this.emit("end"),this;var n=this._from,r=this._to,i=this._curr,o=(0,this._ease)((t-this._start)/e);if(this.isArray){for(var a=0;a<n.length;++a)i[a]=n[a]+(r[a]-n[a])*o;return this._update(i),this}for(var s in n)i[s]=n[s]+(r[s]-n[s])*o;return this._update(i),this}},i.prototype.update=function(e){return 0==arguments.length?this.step():(this._update=e,this)},e.exports=i},1621:function(e,t){t.linear=function(e){return e},t.inQuad=function(e){return e*e},t.outQuad=function(e){return e*(2-e)},t.inOutQuad=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},t.inCube=function(e){return e*e*e},t.outCube=function(e){return--e*e*e+1},t.inOutCube=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},t.inQuart=function(e){return e*e*e*e},t.outQuart=function(e){return 1- --e*e*e*e},t.inOutQuart=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},t.inQuint=function(e){return e*e*e*e*e},t.outQuint=function(e){return--e*e*e*e*e+1},t.inOutQuint=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},t.inSine=function(e){return 1-Math.cos(e*Math.PI/2)},t.outSine=function(e){return Math.sin(e*Math.PI/2)},t.inOutSine=function(e){return.5*(1-Math.cos(Math.PI*e))},t.inExpo=function(e){return 0==e?0:Math.pow(1024,e-1)},t.outExpo=function(e){return 1==e?e:1-Math.pow(2,-10*e)},t.inOutExpo=function(e){return 0==e?0:1==e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},t.inCirc=function(e){return 1-Math.sqrt(1-e*e)},t.outCirc=function(e){return Math.sqrt(1- --e*e)},t.inOutCirc=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},t.inBack=function(e){var t=1.70158;return e*e*((t+1)*e-t)},t.outBack=function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},t.inOutBack=function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)},t.inBounce=function(e){return 1-t.outBounce(1-e)},t.outBounce=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},t.inOutBounce=function(e){return e<.5?.5*t.inBounce(2*e):.5*t.outBounce(2*e-1)+.5},t.inElastic=function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))},t.outElastic=function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)},t.inOutElastic=function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)},t["in-quad"]=t.inQuad,t["out-quad"]=t.outQuad,t["in-out-quad"]=t.inOutQuad,t["in-cube"]=t.inCube,t["out-cube"]=t.outCube,t["in-out-cube"]=t.inOutCube,t["in-quart"]=t.inQuart,t["out-quart"]=t.outQuart,t["in-out-quart"]=t.inOutQuart,t["in-quint"]=t.inQuint,t["out-quint"]=t.outQuint,t["in-out-quint"]=t.inOutQuint,t["in-sine"]=t.inSine,t["out-sine"]=t.outSine,t["in-out-sine"]=t.inOutSine,t["in-expo"]=t.inExpo,t["out-expo"]=t.outExpo,t["in-out-expo"]=t.inOutExpo,t["in-circ"]=t.inCirc,t["out-circ"]=t.outCirc,t["in-out-circ"]=t.inOutCirc,t["in-back"]=t.inBack,t["out-back"]=t.outBack,t["in-out-back"]=t.inOutBack,t["in-bounce"]=t.inBounce,t["out-bounce"]=t.outBounce,t["in-out-bounce"]=t.inOutBounce,t["in-elastic"]=t.inElastic,t["out-elastic"]=t.outElastic,t["in-out-elastic"]=t.inOutElastic},1622:function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length},e.exports=r},1623:function(e,t,n){(function(t){for(var r=n(1624),i="undefined"==typeof window?t:window,o=["moz","webkit"],a="AnimationFrame",s=i["request"+a],c=i["cancel"+a]||i["cancelRequest"+a],u=0;!s&&u<o.length;u++)s=i[o[u]+"Request"+a],c=i[o[u]+"Cancel"+a]||i[o[u]+"CancelRequest"+a];if(!s||!c){var l=0,p=0,f=[];s=function(e){if(0===f.length){var t=r(),n=Math.max(0,1e3/60-(t-l));l=n+t,setTimeout((function(){var e=f.slice(0);f.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(l)}catch(e){setTimeout((function(){throw e}),0)}}),Math.round(n))}return f.push({handle:++p,callback:e,cancelled:!1}),p},c=function(e){for(var t=0;t<f.length;t++)f[t].handle===e&&(f[t].cancelled=!0)}}e.exports=function(e){return s.call(i,e)},e.exports.cancel=function(){c.apply(i,arguments)},e.exports.polyfill=function(e){e||(e=i),e.requestAnimationFrame=s,e.cancelAnimationFrame=c}}).call(this,n(123))},1624:function(e,t,n){(function(t){(function(){var n,r,i,o,a,s;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:null!=t&&t.hrtime?(e.exports=function(){return(n()-a)/1e6},r=t.hrtime,o=(n=function(){var e;return 1e9*(e=r())[0]+e[1]})(),s=1e9*t.uptime(),a=o-s):Date.now?(e.exports=function(){return Date.now()-i},i=Date.now()):(e.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,n(574))},1627:function(e,t,n){"use strict";t.a=function(e,t,n){void 0===n&&(n=!0);var r=e+" - "+t;return n?r+" - Sentry":r}},1628:function(e,t,n){"use strict";var r=n(2),i=n(144),o=n(1),a=n.n(o),s=n(0),c=n.n(s),u=n(35),l=n(1617),p=n.n(l),f=n(571),d=n(1625),h=n(250),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.d)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.title,i=t.fields,o=t.access,a=t.disabled,s=t.additionalFieldProps,u=t.renderFooter,l=t.renderHeader,p=Object(r.h)(t,["title","fields","access","disabled","additionalFieldProps","renderFooter","renderHeader"]);return c.a.createElement(h.a,{key:n,id:Object(f.a)(n)},n&&c.a.createElement(h.e,null,n),c.a.createElement(h.c,null,"function"==typeof l&&l({title:n,fields:i}),i.map((function(t){if("function"==typeof t)return t();t.defaultValue;var n=Object(r.h)(t,["defaultValue"]);return!0===a&&(n.disabled=!0,n.disabledReason=void 0),c.a.createElement(d.a,Object(r.a)({access:o,disabled:a,key:t.name},p,s,{field:n,highlighted:e.props.highlighted==="#"+t.name}))})),"function"==typeof u&&u({title:n,fields:i})))},t}(c.a.Component),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={highlighted:y(t.props,t.context).hash},t}return Object(r.d)(t,e),t.prototype.componentDidMount=function(){this.scrollToHash()},t.prototype.componentWillReceiveProps=function(e){if(y(this.props,this.context).hash!==y(e,this.context).hash){var t=y(e,this.context).hash;this.scrollToHash(t),this.setState({highlighted:t})}},t.prototype.scrollToHash=function(e){var t=e||y(this.props,this.context).hash;if(t)try{p()(Object(f.a)(decodeURIComponent(t)),{align:"middle",offset:-100})}catch(e){u.c(e)}},t.prototype.render=function(){var e=this.props,t=e.forms,n=e.title,o=e.fields,a=e.access,s=e.disabled,u=e.features,l=e.additionalFieldProps,p=e.renderFooter,f=e.renderHeader,d=(e.location,Object(r.h)(e,["forms","title","fields","access","disabled","features","additionalFieldProps","renderFooter","renderHeader","location"])),h={access:a,disabled:s,features:u,additionalFieldProps:l,renderFooter:p,renderHeader:f,highlighted:this.state.highlighted};return c.a.createElement(i.a,Object(r.a)({},d),void 0!==t&&t.map((function(e){return c.a.createElement(b,Object(r.a)({key:e.title,title:e.title,fields:e.fields},h))})),void 0===t&&void 0!==o&&c.a.createElement(b,Object(r.a)({title:n,fields:o},h)))},t.propTypes={forms:a.a.arrayOf(a.a.shape({title:a.a.string,fields:a.a.arrayOf(a.a.oneOfType([a.a.func,d.a.propTypes.field]))})),fields:a.a.arrayOf(a.a.oneOfType([a.a.func,d.a.propTypes.field])),title:a.a.oneOfType([a.a.string,a.a.object]),access:a.a.object,features:a.a.object,renderFooter:a.a.func,renderHeader:a.a.func,disabled:a.a.bool},t.defaultProps={additionalFieldProps:{}},t.contextTypes={location:a.a.object},t}(c.a.Component);t.a=m;function y(e,t){return e.location||t.location||{}}},1629:function(e,t,n){"use strict";var r=n(2),i=n(1),o=n.n(i),a=n(0),s=n.n(a),c=n(93),u=n.n(c),l=n(33),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getFormat=function(e){var n=e.clock24Hours,r=t.props,i=r.dateOnly,o=r.timeOnly,a=r.seconds,s=r.shortDate;return i?"LL":o?"LT":s?"MM/DD/YYYY":n?"MMMM D YYYY HH:mm:ss z":a?"ll LTS z":"lll"},t}return Object(r.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.date,n=(e.seconds,e.shortDate,e.dateOnly,e.utc),i=(e.timeOnly,Object(r.h)(e,["date","seconds","shortDate","dateOnly","utc","timeOnly"])),o=l.default.get("user"),a=o?o.options:{},c=this.getFormat(a);return s.a.createElement("time",Object(r.a)({},i),n?u.a.utc(t).format(c):u.a.tz(t,a.timezone).format(c))},t.propTypes={date:o.a.any.isRequired,dateOnly:o.a.bool,timeOnly:o.a.bool,shortDate:o.a.bool,seconds:o.a.bool,utc:o.a.bool},t.defaultProps={seconds:!0},t}(s.a.Component);t.a=p},1744:function(e,t,n){var r=n(579),i=n(799),o=Object.prototype.hasOwnProperty,a=i((function(e,t,n){o.call(e,n)?e[n].push(t):r(e,n,[t])}));e.exports=a},1966:function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return m}));var r=n(2),i=n(1967),o=n.n(i),a=n(1744),s=n.n(a),c=n(146),u=n.n(c),l={read:0,write:1,admin:2},p={project:"Project",team:"Team",release:"Release",event:"Event",org:"Organization",member:"Member"},f={Project:"no-access",Team:"no-access",Release:"no-access",Event:"no-access",Organization:"no-access",Member:"no-access"},d="project:releases",h=function(e){var t=e.split(":")[1];return l[t]},b=function(e,t){return h(e)-h(t)};function m(e){var t,n=Object(r.a)({},f),i=Object(r.i)(e);return e.includes(d)&&(n.Release="admin",i=e.filter((function(e){return e!==d}))),(t=i,Object.values(s()(t,(function(e){return e.split(":")[0]}))).map((function(e){return e.sort(b)})).map((function(e){return e.pop()}))).forEach((function(e){if(e){var t=Object(r.g)(e.split(":"),2),i=t[0],o=t[1];n[p[i]]=o}})),n}function y(e){var t=m(e),n=u()(o()(t),["read","write","admin"]);return Object(r.a)(Object(r.a)({},{read:[],write:[],admin:[]}),n)}},1967:function(e,t,n){var r=n(196),i=n(1968),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,c=i((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=s.call(t)),a.call(e,t)?e[t].push(n):e[t]=[n]}),r);e.exports=c},1968:function(e,t,n){var r=n(1969);e.exports=function(e,t){return function(n,i){return r(n,e,t(i),{})}}},1969:function(e,t,n){var r=n(798);e.exports=function(e,t,n,i){return r(e,(function(e,r,o){t(i,n(e),r,o)})),i}},2258:function(e,t,n){var r=n(2259)(n(765));e.exports=r},2259:function(e,t,n){var r=n(196),i=n(291),o=n(295);e.exports=function(e){return function(t,n,a){var s=Object(t);if(!i(t)){var c=r(n,3);t=o(t),n=function(e){return c(s[e],e,s)}}var u=e(t,n,a);return u>-1?s[c?t[u]:u]:void 0}}},2643:function(e,t,n){"use strict";n.r(t);var r,i,o,a,s,c,u,l,p=n(2),f=n(0),d=n.n(f),h=n(5),b=n(197),m=n(195),y=n.n(m),v=n(145),g=n.n(v),O=n(1617),j=n.n(O),w=n(51),E=n(250),k=n(4),x=n(1610),C=n(1616),S=n(1635),T=n(588),P=n(1628),M=n(1611),R=n(1),D=n.n(R),_=n(1966),q=n(2258),I=n.n(q),z=n(589),F=n.n(z),L=n(24),A=n(583),H=function(e){function t(t){var n=e.call(this,t)||this;return n.onChange=function(e,t){var r=n.state.permissions;r[e]=t,n.save(r)},n.save=function(e){n.setState({permissions:e}),n.props.onChange(e),n.context.form.setValue("scopes",n.permissionStateToList())},n.state={permissions:n.props.permissions},n}return Object(p.d)(t,e),t.prototype.permissionStateToList=function(){var e=this.state.permissions;return F()(Object.entries(e),(function(e){var t=Object(p.g)(e,2),n=t[0],r=t[1];return g()(function(e){return I()(L.C,["resource",e])}(n),"choices["+r+"].scopes")}))},t.prototype.render=function(){var e=this,t=this.state.permissions;return d.a.createElement(d.a.Fragment,null,L.C.map((function(n){var r=Object.entries(n.choices).map((function(e){var t=Object(p.g)(e,2);return[t[0],t[1].label]})),i=t[n.resource];return d.a.createElement(A.a,{name:n.resource+"--permission",key:n.resource,choices:r,help:Object(k.b)(n.help),label:Object(k.b)(n.label||n.resource),onChange:e.onChange.bind(e,n.resource),value:i,defaultValue:i,disabled:e.props.appPublished,disabledReason:Object(k.b)("Cannot update permissions on a published integration")})})))},t.contextTypes={router:D.a.object.isRequired,form:D.a.object},t.propTypes={permissions:D.a.object.isRequired,onChange:D.a.func.isRequired,appPublished:D.a.bool},t}(d.a.Component),U=["issue","error"],B={issue:"created, resolved, assigned",error:"created"},Q={issue:"Event",error:"Event"},Y=n(3),N=n(255),V=n(39),J=n(86),W=n(53),$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(e){var n=e.target.checked,r=t.props.resource;t.props.onChange(r,n)},t}return Object(p.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.resource,n=e.organization,r=e.webhookDisabled,i=e.checked,o=new Set(n.features),a=this.props.disabledFromPermissions||r,s="Must have at least 'Read' permissions enabled for "+t;return"error"!==t||o.has("integrations-event-hooks")||(a=!0,s="Your organization does not have access to the error subscription resource."),r&&(s="Cannot enable webhook subscription without specifying a webhook url"),d.a.createElement(d.a.Fragment,null,d.a.createElement(Z,{key:t},d.a.createElement(V.a,{disabled:!a,title:s},d.a.createElement(K,{disabled:a},d.a.createElement(G,null,d.a.createElement(te,null,Object(k.b)(""+t)),d.a.createElement(ee,null,Object(k.b)(""+B[t]))),d.a.createElement(N.a,{key:""+t+i,disabled:a,id:t,value:t,checked:i,onChange:this.onChange})))))},t.propTypes={resource:D.a.string.isRequired,disabledFromPermissions:D.a.bool.isRequired,webhookDisabled:D.a.bool.isRequired,checked:D.a.bool.isRequired,onChange:D.a.func.isRequired,organization:W.b.Organization},t.defaultProps={webhookDisabled:!1},t}(d.a.Component),X=Object(J.a)($),G=Object(Y.c)("div",{target:"e146sawj0"})(r||(r=Object(p.f)(["\n  display: flex;\n  flex-direction: column;\n"],["\n  display: flex;\n  flex-direction: column;\n"]))),K=Object(Y.c)("div",{target:"e146sawj1"})(i||(i=Object(p.f)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  background: ",";\n  opacity: ",";\n  border-radius: 3px;\n  flex: 1;\n  padding: 12px;\n  height: 100%;\n"],["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  background: ",";\n  opacity: ",";\n  border-radius: 3px;\n  flex: 1;\n  padding: 12px;\n  height: 100%;\n"])),(function(e){return e.theme.whiteDark}),(function(e){return e.disabled?.3:1})),Z=Object(Y.c)("div",{target:"e146sawj2"})(o||(o=Object(p.f)(["\n  padding: 12px;\n  width: 33%;\n"],["\n  padding: 12px;\n  width: 33%;\n"]))),ee=Object(Y.c)("div",{target:"e146sawj3"})(a||(a=Object(p.f)(["\n  font-size: 12px;\n  line-height: 1;\n  color: ",";\n  white-space: nowrap;\n"],["\n  font-size: 12px;\n  line-height: 1;\n  color: ",";\n  white-space: nowrap;\n"])),(function(e){return e.theme.gray2})),te=Object(Y.c)("div",{target:"e146sawj4"})(s||(s=Object(p.f)(["\n  font-size: 16px;\n  line-height: 1;\n  color: ",";\n  white-space: nowrap;\n  margin-bottom: 5px;\n"],["\n  font-size: 16px;\n  line-height: 1;\n  color: ",";\n  white-space: nowrap;\n  margin-bottom: 5px;\n"])),(function(e){return e.theme.textColor})),ne=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.onChange=function(e,t){var n=new Set(r.props.events);t?n.add(e):n.delete(e),r.save(Array.from(n))},r.save=function(e){r.props.onChange(e),r.context.form.setValue("events",e)},r.context.form.setValue("events",r.props.events),r}return Object(p.d)(t,e),t.prototype.componentWillReceiveProps=function(e){e.webhookDisabled&&this.props.events.length&&this.save([])},t.prototype.componentDidUpdate=function(){var e=this.props,t=e.permissions,n=e.events,r=n.filter((function(e){return"no-access"!==t[Q[e]]}));JSON.stringify(n)!==JSON.stringify(r)&&this.save(r)},t.prototype.render=function(){var e=this,t=this.props,n=t.permissions,r=t.webhookDisabled,i=t.events;return d.a.createElement(re,null,U.map((function(t){var o="no-access"===n[Q[t]];return d.a.createElement(d.a.Fragment,{key:t},d.a.createElement(X,{key:t,disabledFromPermissions:o,webhookDisabled:r,checked:i.includes(t)&&!o,resource:t,onChange:e.onChange}))})))},t.contextTypes={router:D.a.object.isRequired,form:D.a.object},t.propTypes={permissions:D.a.object.isRequired,events:D.a.array.isRequired,onChange:D.a.func.isRequired,webhookDisabled:D.a.bool.isRequired},t.defaultProps={webhookDisabled:!1},t}(d.a.Component),re=Object(Y.c)("div",{target:"eglb30u0"})(c||(c=Object(p.f)(["\n  display: flex;\n  flex-wrap: wrap;\n"],["\n  display: flex;\n  flex-wrap: wrap;\n"]))),ie=function(e){function t(t){var n=e.call(this,t)||this;return n.onPermissionChange=function(e){n.setState({permissions:e})},n.onEventChange=function(e){n.setState({events:e})},n.state={permissions:n.scopeListToPermissionState(),events:n.props.events},n}return Object(p.d)(t,e),t.prototype.scopeListToPermissionState=function(){return Object(_.b)(this.props.scopes)},t.prototype.render=function(){var e=this.state,t=e.permissions,n=e.events;return d.a.createElement(d.a.Fragment,null,d.a.createElement(E.a,null,d.a.createElement(E.e,null,Object(k.b)("Permissions")),d.a.createElement(E.c,null,d.a.createElement(H,{permissions:t,onChange:this.onPermissionChange,appPublished:this.props.appPublished}))),d.a.createElement(E.a,null,d.a.createElement(E.e,null,Object(k.b)("Webhooks")),d.a.createElement(E.c,null,d.a.createElement(ne,{permissions:t,events:n,onChange:this.onEventChange,webhookDisabled:this.props.webhookDisabled}))))},t.contextTypes={router:D.a.object.isRequired,form:D.a.object},t.propTypes={scopes:D.a.arrayOf(D.a.string).isRequired,events:D.a.arrayOf(D.a.string).isRequired,webhookDisabled:D.a.bool.isRequired,appPublished:D.a.bool.isRequired},t.defaultProps={webhookDisabled:!1,appPublished:!1},t}(d.a.Component),oe=n(1684),ae=n(21),se=function(){return[{name:"name",type:"string",required:!0,placeholder:"e.g. My Integration",label:"Name",help:"Human readable name of your Integration."},{name:"author",type:"string",required:!0,placeholder:"e.g. Acme Software",label:"Author",help:"The company or person who built and maintains this Integration."},{name:"webhookUrl",type:"string",required:!0,label:"Webhook URL",placeholder:"e.g. https://example.com/sentry/webhook/",help:"The URL Sentry will send requests to for events such as installation changes and any Resource Subscriptions the Integration subscribes to."},{name:"redirectUrl",type:"string",label:"Redirect URL",placeholder:"e.g. https://example.com/sentry/setup/",help:"The URL Sentry will redirect users to after installation."},{name:"verifyInstall",label:"Verify Installation",type:"boolean",help:"If enabled, installations will need to be verified before becoming installed."},{name:"isAlertable",type:"boolean",label:"Alert Rule Action",disabled:function(e){return e.webhookDisabled},disabledReason:"Cannot enable alert rule action without a webhook url",help:Object(k.c)("If enabled, this integration will be an action under alert rules in Sentry. The notification destination is the Webhook URL specified above. More on actions [learn_more:Here].",{learn_more:d.a.createElement("a",{href:"https://docs.sentry.io/product/notifications/#actions"})})},{name:"schema",type:"textarea",label:"Schema",autosize:!0,help:"Schema for your UI components",getValue:function(e){return""===e?{}:JSON.parse(e)},setValue:function(e){var t=JSON.stringify(e,null,2);return"{}"===t?"":t},validate:function(e){var t=e.id,n=e.form;if(!n.schema)return[];try{JSON.parse(n.schema)}catch(e){return[[t,"Invalid JSON"]]}return[]}},{name:"overview",type:"textarea",label:"Overview",autosize:!0,help:"Description of your Integration and its functionality."},{name:"allowedOrigins",type:"string",multiline:!0,placeholder:"e.g. example.com",label:"Authorized JavaScript Origins",help:"Separate multiple entries with a newline.",getValue:function(e){return Object(ae.h)(e)},setValue:function(e){return e&&"function"==typeof e.join&&e.join("\n")||""}}]},ce=[{title:"Public Integration Details",fields:se()}],ue=[{title:"Internal Integration Details",fields:(u=se().filter((function(e){return!["redirectUrl","verifyInstall","author"].includes(e.name||"")})),l=u.find((function(e){return"webhookUrl"===e.name})),l&&(l.required=!1),u)}],le=n(338),pe=n(1627),fe=n(1629),de=n(27),he=n(570);function be(e,t){return Object(p.b)(this,void 0,void 0,(function(){var n,r;return Object(p.e)(this,(function(i){switch(i.label){case 0:Object(w.b)(),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e.requestPromise("/sentry-apps/"+t.slug+"/api-tokens/",{method:"POST"})];case 2:return n=i.sent(),Object(w.d)(Object(k.b)("Token successfully added.")),[2,n];case 3:throw r=i.sent(),Object(w.a)(Object(k.b)("Unable to create token")),r;case 4:return[2]}}))}))}function me(e,t,n){return Object(p.b)(this,void 0,void 0,(function(){var r;return Object(p.e)(this,(function(i){switch(i.label){case 0:Object(w.b)(),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e.requestPromise("/sentry-apps/"+t.slug+"/api-tokens/"+n+"/",{method:"DELETE"})];case 2:return i.sent(),Object(w.d)(Object(k.b)("Token successfully deleted.")),[2];case 3:throw r=i.sent(),Object(w.a)(Object(k.b)("Unable to delete token")),r;case 4:return[2]}}))}))}var ye,ve,ge,Oe,je=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(p.d)(t,e),t.prototype.getData=function(){return Object.entries(this.fields.toJSON()).reduce((function(e,t){var n=Object(p.g)(t,2),r=n[0],i=n[1];return r.endsWith("--permission")||(e[r]=i),e}),{})},t.prototype.mapFormErrors=function(e){if(!e)return e;var t=y()(e,["scopes"]);return e.scopes&&e.scopes.forEach((function(e){var n=e.match(/Requested permission of (\w+:\w+)/);if(n){var r=function(e){var t,n;try{for(var r=Object(p.j)(L.C),i=r.next();!i.done;i=r.next()){var o=i.value;if(Object.values(o.choices).reduce((function(e,t){return e.concat(g()(t,"scopes",[]))}),[]).includes(e))return o.resource}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}(n[1]);r&&(t[r+"--permission"]=[e])}})),t},t}(S.a),we=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.form=new je,t.handleSubmitSuccess=function(e){var n=t.state.app,r="/settings/"+t.props.params.orgId+"/developer-settings/",i=n?r:""+r+e.slug+"/";n?Object(w.d)(Object(k.b)("%s successfully saved.",e.name)):Object(w.d)(Object(k.b)("%s successfully created.",e.name)),h.browserHistory.push(i)},t.handleSubmitError=function(e){var n=Object(k.b)("Unknown Error");if(e.status>=400&&e.status<500&&(n=g()(e,"responseJSON.detail",n)),Object(w.a)(n),t.form.formErrors){var r=Object.keys(t.form.formErrors)[0];r&&j()("#"+r,{align:"middle"})}},t.onAddToken=function(e){return Object(p.b)(t,void 0,void 0,(function(){var t,n,r,i,o;return Object(p.e)(this,(function(a){switch(a.label){case 0:return e.preventDefault(),t=this.state,n=t.app,r=t.tokens,n?[4,be(this.api,n)]:[2];case 1:return i=a.sent(),o=r.concat(i),this.setState({tokens:o}),[2]}}))}))},t.onRemoveToken=function(e,n){return Object(p.b)(t,void 0,void 0,(function(){var t,r,i,o,a;return Object(p.e)(this,(function(s){switch(s.label){case 0:return n.preventDefault(),t=this.state,r=t.app,i=t.tokens,r?(o=this.api,a=i.filter((function(t){return t.token!==e.token})),[4,me(o,r,e.token)]):[2];case 1:return s.sent(),this.setState({tokens:a}),[2]}}))}))},t.renderTokens=function(){var e=t.state.tokens;return e.length>0?e.map((function(e){return d.a.createElement(Ee,{key:e.token},d.a.createElement(ke,null,d.a.createElement(V.a,{disabled:t.showAuthInfo,position:"right",containerDisplayMode:"inline",title:Object(k.b)("You do not have access to view these credentials because the permissions for this integration exceed those of your role.")},d.a.createElement(oe.a,null,Object(le.a)({value:e.token,fixed:"xxxxxx"})))),d.a.createElement(Ce,null,d.a.createElement(xe,null,"Created:"),d.a.createElement(fe.a,{date:Object(le.a)({value:e.dateCreated,fixed:new Date(150820808e4)})})),d.a.createElement(de.a,{onClick:t.onRemoveToken.bind(t,e),size:"small",icon:"icon-trash","data-test-id":"token-delete",type:"button"},Object(k.b)("Revoke")))})):d.a.createElement(he.a,{description:Object(k.b)("No tokens created yet.")})},t.onFieldChange=function(e,n){"webhookUrl"===e&&!n&&t.isInternal&&t.form.setValue("isAlertable",!1)},t}return Object(p.d)(t,e),t.prototype.getDefaultState=function(){return Object(p.a)(Object(p.a)({},e.prototype.getDefaultState.call(this)),{app:null,tokens:[]})},t.prototype.getEndpoints=function(){var e=this.props.params.appSlug;return e?[["app","/sentry-apps/"+e+"/"],["tokens","/sentry-apps/"+e+"/api-tokens/"]]:[]},t.prototype.getTitle=function(){var e=this.props.params.orgId;return Object(pe.a)(Object(k.b)("Sentry Integration Details"),e,!1)},t.prototype.normalize=function(e){return 0===e.length?e:e.map((function(e){return e.split(".").shift()}))},Object.defineProperty(t.prototype,"isInternal",{get:function(){var e=this.state.app;return e?"internal"===e.status:"new-internal/"===this.props.route.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showAuthInfo",{get:function(){var e=this.state.app;return!e||!e.clientSecret||"*"!==e.clientSecret[0]},enumerable:!0,configurable:!0}),t.prototype.renderBody=function(){var e,t=this,n=this.props.params.orgId,r=this.state.app,i=r&&Object(p.i)(r.scopes)||[],o=r&&this.normalize(r.events)||[],a=r?"PUT":"POST",s=r?"/sentry-apps/"+r.slug+"/":"/sentry-apps/",c=this.isInternal?ue:ce;return e=!this.isInternal&&(!r||r.verifyInstall),d.a.createElement("div",null,d.a.createElement(M.a,{title:this.getTitle()}),d.a.createElement(C.a,{apiMethod:a,apiEndpoint:s,allowUndo:!0,initialData:Object(p.a)(Object(p.a)({organization:n,isAlertable:!1,isInternal:this.isInternal,schema:{},scopes:[]},r),{verifyInstall:e}),model:this.form,onSubmitSuccess:this.handleSubmitSuccess,onSubmitError:this.handleSubmitError,onFieldChange:this.onFieldChange},d.a.createElement(b.a,null,(function(){var e=t.isInternal&&!t.form.getValue("webhookUrl");return d.a.createElement(d.a.Fragment,null,d.a.createElement(P.a,{location:t.props.location,additionalFieldProps:{webhookDisabled:e},forms:c}),d.a.createElement(ie,{webhookDisabled:e,appPublished:!!r&&"published"===r.status,scopes:i,events:o}))})),r&&"internal"===r.status&&d.a.createElement(E.a,null,d.a.createElement(E.e,{hasButtons:!0},Object(k.b)("Tokens"),d.a.createElement(de.a,{size:"xsmall",icon:"icon-circle-add",onClick:function(e){return t.onAddToken(e)},"data-test-id":"token-add",type:"button"},Object(k.b)("New Token"))),d.a.createElement(E.c,null,this.renderTokens())),r&&d.a.createElement(E.a,null,d.a.createElement(E.e,null,Object(k.b)("Credentials")),d.a.createElement(E.c,null,"internal"!==r.status&&d.a.createElement(T.a,{name:"clientId",label:"Client ID",overflow:!0},(function(e){var t=e.value;return d.a.createElement(oe.a,null,Object(le.a)({value:t,fixed:"PERCY_CLIENT_ID"}))})),d.a.createElement(T.a,{overflow:!0,name:"clientSecret",label:"Client Secret"},(function(e){var n=e.value;return n?d.a.createElement(V.a,{disabled:t.showAuthInfo,position:"right",containerDisplayMode:"inline",title:Object(k.b)("You do not have access to view these credentials because the permissions for this integration exceed those of your role.")},d.a.createElement(oe.a,null,Object(le.a)({value:n,fixed:"PERCY_CLIENT_SECRET"}))):d.a.createElement("em",null,"hidden")}))))))},t}(x.a),Ee=(t.default=we,Object(Y.c)(E.f,{target:"e13hfg1z0"})(ye||(ye=Object(p.f)(["\n  display: flex;\n  justify-content: space-between;\n"],["\n  display: flex;\n  justify-content: space-between;\n"])))),ke=Object(Y.c)("div",{target:"e13hfg1z1"})(ve||(ve=Object(p.f)(["\n  width: 70%;\n"],["\n  width: 70%;\n"]))),xe=Object(Y.c)("span",{target:"e13hfg1z2"})(ge||(ge=Object(p.f)(["\n  color: ",";\n  margin-bottom: 2px;\n"],["\n  color: ",";\n  margin-bottom: 2px;\n"])),(function(e){return e.theme.gray2})),Ce=Object(Y.c)("div",{target:"e13hfg1z3"})(Oe||(Oe=Object(p.f)(["\n  display: flex;\n  flex-direction: column;\n  font-size: 14px;\n  margin: 0 10px;\n"],["\n  display: flex;\n  flex-direction: column;\n  font-size: 14px;\n  margin: 0 10px;\n"])))}}]);
//# sourceMappingURL=sentryApplicationDetails.js.map