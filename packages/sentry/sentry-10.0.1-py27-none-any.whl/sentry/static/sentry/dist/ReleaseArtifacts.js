(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[164],{1682:function(e,t,a){"use strict";var n=a(12),r=a.n(n),i=a(20),s=a.n(i),l=a(6),c=a.n(l),o=a(7),u=a.n(o),d=a(9),m=a.n(d),f=a(8),p=a.n(f),b=a(10),h=a.n(b),E=a(0),v=a.n(E),g=a(36),y=a.n(g),j=a(252),O=function(e){function t(){var e,a;c()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=m()(this,(e=p()(t)).call.apply(e,[this].concat(r)))).state={isModalOpen:!1},a}return h()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.disabled,n=e.title,i=e.children,l=s()(e,["className","disabled","title","children"]);return v.a.createElement(j.a,r()({},l,{disabled:a}),v.a.createElement("a",{className:y()(t||"",{disabled:a}),disabled:a,onClick:this.onToggle,title:n},i))}}]),t}(v.a.PureComponent);O.displayName="LinkWithConfirmation",t.a=O},1686:function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(21),s=a(338);t.a=function(e){var t=e.className,a=e.bytes;return r.a.createElement("span",{className:t},Object(s.a)({value:Object(i.i)(a),fixed:"xx KB"}))}},2623:function(e,t,a){"use strict";a.r(t),a.d(t,"ReleaseArtifacts",(function(){return S}));var n=a(6),r=a.n(n),i=a(7),s=a.n(i),l=a(9),c=a.n(l),o=a(8),u=a.n(o),d=a(10),m=a.n(d),f=a(144),p=a(195),b=a.n(p),h=a(0),E=a.n(h),v=a(250),g=a(56),y=a(4),j=a(575),O=a(1686),k=a(68),N=a(1682),w=a(159),L=a(50),x=a(572),R=a(39),D=a(61),C=a(86),S=function(e){function t(){var e;return r()(this,t),(e=c()(this,u()(t).call(this))).fetchData=function(){e.setState({loading:!0,error:!1}),e.props.api.request(e.getFilesEndpoint(),{method:"GET",data:b()(e.props.location.query,Object.values(g.e)),success:function(t,a,n){e.setState({error:!1,loading:!1,fileList:t,pageLinks:n.getResponseHeader("Link")})},error:function(){e.setState({error:!0,loading:!1})}})},e.state={loading:!0,error:!1,fileList:[],pageLinks:null},e}return m()(t,e),s()(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"getFilesEndpoint",value:function(){var e=this.props.params,t=e.orgId,a=e.projectId,n=e.version,r=encodeURIComponent(n);return a?"/projects/".concat(t,"/").concat(a,"/releases/").concat(r,"/files/"):"/organizations/".concat(t,"/releases/").concat(r,"/files/")}},{key:"handleRemove",value:function(e){var t=this,a=k.a.add(Object(y.b)("Removing artifact.."));this.props.api.request(this.getFilesEndpoint()+"".concat(e,"/"),{method:"DELETE",success:function(){var a=t.state.fileList.filter((function(t){return t.id!==e}));t.setState({fileList:a}),k.a.add(Object(y.b)("Artifact removed."),"success",{duration:4e3})},error:function(){k.a.add(Object(y.b)("Unable to remove artifact. Please try again."),"error",{duration:4e3})},complete:function(){k.a.remove(a)}})}},{key:"render",value:function(){var e=this;if(this.state.loading)return E.a.createElement(L.default,null);if(this.state.error)return E.a.createElement(w.a,{onRetry:this.fetchData});if(0===this.state.fileList.length)return E.a.createElement(v.a,null,E.a.createElement(j.a,null,E.a.createElement("p",null,Object(y.b)("There are no artifacts uploaded for this release."))));var t=new Set(this.props.organization.access);return E.a.createElement("div",null,E.a.createElement(v.a,null,E.a.createElement(v.e,null,E.a.createElement(f.b,{flex:"7",pr:2},Object(y.b)("Name")),E.a.createElement(f.b,{flex:"2"},Object(y.b)("Distribution")),E.a.createElement(f.b,{flex:"3"},Object(y.b)("Size"))),E.a.createElement(v.c,null,this.state.fileList.map((function(a){return E.a.createElement(v.f,{key:a.id},E.a.createElement(f.b,{flex:"7",pr:2,style:{wordWrap:"break-word",wordBreak:"break-all"}},E.a.createElement("strong",null,a.name||"(empty)")),E.a.createElement(f.b,{flex:"2"},a.dist||E.a.createElement("span",{className:"text-light"},Object(y.b)("None"))),E.a.createElement(f.b,{flex:"3",justify:"space-between"},E.a.createElement(O.a,{bytes:a.size}),E.a.createElement(f.b,{align:"center"},t.has("project:write")?E.a.createElement("a",{href:e.props.api.baseUrl+e.getFilesEndpoint()+"".concat(a.id,"/?download=1"),className:"btn btn-sm btn-default"},E.a.createElement("span",{className:"icon icon-open"})):E.a.createElement(R.a,{title:Object(y.b)("You do not have the required permission to download this artifact.")},E.a.createElement("div",{className:"btn btn-sm btn-default disabled"},E.a.createElement("span",{className:"icon icon-open"}))),E.a.createElement("div",{style:{marginLeft:5}},E.a.createElement(N.a,{className:"btn btn-sm btn-default",title:Object(y.b)("Delete artifact"),message:Object(y.b)("Are you sure you want to remove this artifact?"),onConfirm:e.handleRemove.bind(e,a.id)},E.a.createElement("span",{className:"icon icon-trash"}))))))})))),E.a.createElement(x.a,{pageLinks:this.state.pageLinks}))}}]),t}(E.a.Component);S.displayName="ReleaseArtifacts",t.default=Object(C.a)(Object(D.a)(S))}}]);
//# sourceMappingURL=ReleaseArtifacts.js.map