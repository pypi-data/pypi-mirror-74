(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[19],{1609:function(e,t,n){"use strict";var r,a,o=n(2),i=n(44),s=n.n(i),c=n(1),l=n.n(c),u=n(0),p=n.n(u),d=n(35),h=n(289),m=n(47),f=n(28),g=n(4),b=n(5),y=n(105),v=n.n(y),j=n(3),O=n(336),E=n(50),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={query:"",busy:!1},t.immediateQuery=function(e){return Object(o.b)(t,void 0,void 0,(function(){var t,n,r,a,i,s;return Object(o.e)(this,(function(c){switch(c.label){case 0:t=this.props,n=t.location,r=t.api,this.setState({busy:!0}),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,r.requestPromise(""+this.props.url,{includeAllArgs:!0,method:"GET",query:Object(o.a)(Object(o.a)({},n.query),{query:e})})];case 2:return a=o.g.apply(void 0,[c.sent(),3]),i=a[0],s=a[2],this.state.query===e&&this.props.onSuccess(i,s),[3,4];case 3:return c.sent(),this.props.onError(),[3,4];case 4:return this.setState({busy:!1}),[2]}}))}))},t.query=v()(t.immediateQuery,t.props.debounceWait),t.handleChange=function(e){t.query(e),t.setState({query:e})},t.handleInputChange=function(e){return t.handleChange(e.target.value)},t.handleSearch=function(e){var n=t.props,r=n.updateRoute,a=n.onSearchSubmit;if(e.preventDefault(),r){var o=t.props,i=o.router,s=o.location;i.push({pathname:s.pathname,query:{query:t.state.query}})}"function"==typeof a&&a(t.state.query,e)},t}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.placeholder,n=e.children,r=e.className,a=this.state,o=a.busy,i=a.query,s=p.a.createElement(S,{onSubmit:this.handleSearch},p.a.createElement(O.a,{value:i,onChange:this.handleInputChange,className:r,placeholder:t}),o&&p.a.createElement(x,{size:18,hideMessage:!0,mini:!0}));return void 0===n?s:n({defaultSearchBar:s,busy:o,value:i,handleChange:this.handleChange})},t.defaultProps={placeholder:"Search...",debounceWait:200},t}(p.a.Component),x=Object(j.c)(E.default,{target:"e6xwo0"})(r||(r=Object(o.f)(["\n  position: absolute;\n  right: 25px;\n  top: 50%;\n  transform: translateY(-13px);\n"],["\n  position: absolute;\n  right: 25px;\n  top: 50%;\n  transform: translateY(-13px);\n"]))),S=Object(j.c)("form",{target:"e6xwo1"})(a||(a=Object(o.f)(["\n  position: relative;\n"],["\n  position: relative;\n"]))),C=b.withRouter(w),R=n(159),k=n(6),q=n.n(k),M=n(7),T=n.n(M),P=n(9),D=n.n(P),U=n(8),z=n.n(U),A=n(10),I=n.n(A),N=n(251),V=n.n(N),L=n(104),B=n(73),W=function(e){function t(){return q()(this,t),D()(this,z()(t).apply(this,arguments))}return I()(t,e),T()(t,[{key:"componentDidMount",value:function(){var e=this.props.routes,t=this.context,n=t.organization,r=t.project,a=Object(B.a)(e);d.l((function(e){e.setFingerprint(["Permission Denied",a]),e.setExtra("route",a),e.setExtra("orgFeatures",n&&n.features||[]),e.setExtra("orgAccess",n&&n.access||[]),e.setExtra("projectFeatures",r&&r.features||[]),d.c(new Error("".concat("Permission Denied").concat(a?" : ".concat(a):"")))}))}},{key:"render",value:function(){return p.a.createElement(V.a,{title:Object(g.b)("Permission Denied")},p.a.createElement(R.a,{message:Object(g.c)("Your role does not have the necessary permissions to access this resource, please read more about [link:organizational roles]",{link:p.a.createElement(L.a,{href:"https://docs.sentry.io/learn/membership/"})})}))}}]),t}(p.a.Component);W.displayName="PermissionDenied",W.contextTypes={organization:l.a.object,project:l.a.object};var K=Object(b.withRouter)(W),J=n(569);function _(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return t.apply(void 0,Object(o.i)(n))}catch(t){return console.error(t),setTimeout((function(){throw t})),e.setState({error:t}),null}}}var H=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.reloadOnVisible=!1,r.shouldReloadOnVisible=!1,r.shouldReload=!1,r.shouldRenderBadRequests=!1,r.api=new m.a,r.markShouldMeasure=function(e){var t=void 0===e?{}:e,n=t.remainingRequests,a=t.error;r._measurement.hasMeasured||(r._measurement.finished=0===n,r._measurement.error=a||r._measurement.error)},r.remountComponent=function(){r.shouldReload?r.reloadData():r.setState(r.getDefaultState(),r.fetchData)},r.visibilityReloader=function(){return r.shouldReloadOnVisible&&!r.state.loading&&!document.hidden&&r.reloadData()},r.fetchData=function(e){var t=r.getEndpoints();t.length?(r.api.clear(),r.setState(Object(o.a)({loading:!0,error:!1,remainingRequests:t.length},e)),t.forEach((function(e){var t=Object(o.g)(e,4),n=t[0],a=t[1],i=t[2],s=t[3];s=s||{};var c=r.props.location&&r.props.location.query||{},l=i&&i.query||{};(s.paginate||c.cursor)&&(l=Object(o.a)(Object(o.a)({},c),l)),r.api.request(a,Object(o.a)(Object(o.a)({method:"GET"},i),{query:l,success:function(e,t,a){r.handleRequestSuccess({stateKey:n,data:e,jqXHR:a},!0)},error:function(e){s.allowError&&s.allowError(e)&&(e=null),r.handleError(e,[n,a,i,s])}}))}))):r.setState({loading:!1,error:!1})},r.fetchData=_(r,r.fetchData.bind(r)),r.render=_(r,r.render.bind(r)),r.state=r.getDefaultState(),r._measurement={hasMeasured:!1},t.routes&&t.routes&&f.b.mark("async-component-"+Object(B.a)(t.routes)),r}return Object(o.d)(t,e),t.prototype.componentWillMount=function(){this.api=new m.a,this.fetchData(),this.reloadOnVisible&&document.addEventListener("visibilitychange",this.visibilityReloader)},t.prototype.componentWillReceiveProps=function(e,t){},t.prototype.componentDidUpdate=function(e,t){var n=!!t.router,r=void 0!==e.location,a=r?this.props.location:n?this.context.router.location:null,o=r?e.location:n?t.router.location:null;if(a&&o){if(!this._measurement.hasMeasured&&this._measurement.finished&&this.props.routes){var i=Object(B.a)(this.props.routes);f.b.measure({name:"app.component.async-component",start:"async-component-"+i,data:{route:i,error:this._measurement.error}}),this._measurement.hasMeasured=!0,"function"==typeof this.props.finishProfile&&this.props.finishProfile()}s()(this.props.params,e.params)&&a.search===o.search&&a.state===o.state||this.remountComponent()}},t.prototype.componentWillUnmount=function(){this.api.clear(),document.removeEventListener("visibilitychange",this.visibilityReloader)},t.prototype.getDefaultState=function(){var e=this.getEndpoints(),t={loading:!0,reloading:!1,error:!1,errors:{}};return e.forEach((function(e){var n=Object(o.g)(e,2),r=n[0];n[1];t[r]=null})),t},t.prototype.reloadData=function(){this.fetchData({reloading:!0})},t.prototype.onRequestSuccess=function(e){},t.prototype.onRequestError=function(e,t){},t.prototype.handleRequestSuccess=function(e,t){var n=this,r=e.stateKey,a=e.data,o=e.jqXHR;this.setState((function(e){var i,s=((i={})[r]=a,i[r+"PageLinks"]=o&&o.getResponseHeader("Link"),i);return t&&(s.remainingRequests=e.remainingRequests-1,s.loading=e.remainingRequests>1,s.reloading=e.reloading&&s.loading,n.markShouldMeasure({remainingRequests:s.remainingRequests})),s})),this.onRequestSuccess({stateKey:r,data:a,jqXHR:o})},t.prototype.handleError=function(e,t){var n=this,r=Object(o.g)(t,1)[0];e&&e.responseText&&d.a({message:e.responseText,category:"xhr",level:h.a.Error}),this.setState((function(t){var a,i,s=t.remainingRequests>1,c=((a={})[r]=null,a.errors=Object(o.a)(Object(o.a)({},t.errors),((i={})[r]=e,i)),a.error=t.error||!!e,a.remainingRequests=t.remainingRequests-1,a.loading=s,a.reloading=t.reloading&&s,a);return n.markShouldMeasure({remainingRequests:c.remainingRequests,error:!0}),c})),this.onRequestError(e,t)},t.prototype.getEndpointParams=function(){return console.warn("getEndpointParams is deprecated"),{}},t.prototype.getEndpoint=function(){return console.warn("getEndpoint is deprecated"),null},t.prototype.getEndpoints=function(){var e=this.getEndpoint();return e?[["data",e,this.getEndpointParams()]]:[]},t.prototype.renderSearchInput=function(e){var t=this,n=e.stateKey,r=e.url,a=Object(o.h)(e,["stateKey","url"]),i=Object(o.g)(this.getEndpoints()||[null],1)[0],s=n||i&&i[0],c=r||i&&i[1];return p.a.createElement(C,Object(o.a)({url:c},a,{api:this.api,onSuccess:function(e,n){t.handleRequestSuccess({stateKey:s,data:e,jqXHR:n})},onError:function(){t.renderError(new Error("Error with AsyncComponentSearchInput"))}}))},t.prototype.renderLoading=function(){return p.a.createElement(E.default,null)},t.prototype.renderError=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=this.state.errors,a=Object.values(r).find((function(e){return e&&401===e.status})),o=Object.values(r).find((function(e){return e&&403===e.status})),i=!!Object.values(r).find((function(e){return e&&0!==e.status}))||t;if(a)return p.a.createElement(R.a,{message:Object(g.b)("You are not authorized to access this resource.")});if(o)return p.a.createElement(K,null);if(this.shouldRenderBadRequests){var s=Object.values(r).filter((function(e){return e&&400===e.status&&e.responseJSON&&e.responseJSON.detail})).map((function(e){return e.responseJSON.detail}));if(s.length)return p.a.createElement(R.a,{message:s.join("\n")})}return p.a.createElement(J.a,{error:e,component:this,disableLogSentry:!i,disableReport:n,onRetry:this.remountComponent})},t.prototype.renderComponent=function(){return!this.state.loading||this.shouldReload&&this.state.reloading?this.state.error?this.renderError(new Error("Unable to load all required endpoints")):this.renderBody():this.renderLoading()},t.prototype.renderBody=function(){throw new Error("Not implemented")},t.prototype.render=function(){return this.renderComponent()},t.propTypes={location:l.a.object,router:l.a.object},t.contextTypes={router:l.a.object},t}(p.a.Component);t.a=H},2160:function(e,t,n){"use strict";var r=n(6),a=n.n(r),o=n(7),i=n.n(o),s=n(9),c=n.n(s),l=n(8),u=n.n(l),p=n(10),d=n.n(p),h=n(144),m=n(0),f=n.n(m),g=n(3),b=n(1926),y=n.n(b),v=n(47),j=n(117),O=n(140),E=n(27),w=n(51),x=n(4),S=n(584),C=n(132),R=n(224),k=n(19),q=n(336),M=n(52),T=n(23),P=n.n(T),D=n(34),U=n.n(D),z=n(16),A=n.n(z),I=n(26),N=n.n(I),V=n(105),L=n.n(V),B=n(43),W=n.n(B),K=n(18),J=n.n(K),_=n(349),H=n(21),Y=n(161),F=n(345),X=n(12),G=n.n(X),Q=n(137),Z=f.a.forwardRef((function(e,t){return f.a.createElement(Q.a,G()({forwardedRef:t},e,{multiple:!0}))})),$=n(612),ee=n(39);function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(n,!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var re=function(e){function t(){var e,n;a()(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=c()(this,(e=u()(t)).call.apply(e,[this].concat(o)))).handleClick=function(){n.props.onRemove(n.props.value)},n}return d()(t,e),i()(t,[{key:"render",value:function(){return f.a.createElement("a",{onClick:this.handleClick},f.a.createElement($.a,{actor:this.props.value.actor,size:28}))}}]),t}(f.a.Component);re.displayName="ValueComponent";var ae=function(e){return"".concat(e.email&&e.email.toLowerCase()," ").concat(e.name&&e.name.toLowerCase())},oe=function(e){function t(){var e,n;a()(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=c()(this,(e=u()(t)).call.apply(e,[this].concat(o)))).state={loading:!1,inputValue:""},n.renderUserBadge=function(e){return f.a.createElement(F.a,{avatarSize:24,user:e,hideEmail:!0,useLink:!1})},n.createMentionableUser=function(e){return{value:Object(H.b)(e.id),label:n.renderUserBadge(e),searchKey:ae(e),actor:{type:"user",id:e.id,name:e.name}}},n.createUnmentionableUser=function(e){var t=e.user;return ne({},n.createMentionableUser(t),{disabled:!0,label:f.a.createElement(ie,null,f.a.createElement(ee.a,{position:"left",title:Object(x.b)("%s is not a member of project",t.name||t.email)},n.renderUserBadge(t)))})},n.createMentionableTeam=function(e){return{value:Object(H.a)(e.id),label:f.a.createElement(F.a,{team:e}),searchKey:"#".concat(e.slug),actor:{type:"team",id:e.id,name:e.slug}}},n.createUnmentionableTeam=function(e){var t=n.props.organization.access.includes("project:write");return ne({},n.createMentionableTeam(e),{disabled:!0,label:f.a.createElement(h.b,{justify:"space-between"},f.a.createElement(ie,null,f.a.createElement(ee.a,{position:"left",title:Object(x.b)("%s is not a member of project","#".concat(e.slug))},f.a.createElement(F.a,{team:e}))),f.a.createElement(ee.a,{title:t?Object(x.b)("Add %s to project","#".concat(e.slug)):Object(x.b)("You do not have permission to add team to project.")},f.a.createElement(se,{size:"zero",borderless:!0,disabled:!t,onClick:n.handleAddTeamToProject.bind(N()(n),e)},f.a.createElement(k.a,{src:"icon-circle-add"}))))})},n.handleChange=function(e){n.props.onChange(e)},n.handleInputChange=function(e){n.setState({inputValue:e}),n.props.onInputChange&&n.props.onInputChange(e)},n.queryMembers=L()((function(e,t){var r=n.props.organization;return n.api?n.api.requestPromise("/organizations/".concat(r.slug,"/members/"),{query:{query:e}}).then((function(e){return t(null,e)}),(function(e){return t(e)})):null}),250),n.handleLoadOptions=function(){var e=n.getMentionableUsers(),t=n.getMentionableTeams(),r=n.getTeamsNotInProject(t),a=e.map((function(e){return e.actor.id}));return new Promise((function(e,t){n.queryMembers(n.state.inputValue,(function(n,r){n?t(n):e(r)}))})).then((function(e){return e?e.filter((function(e){var t=e.user;return t&&-1===a.indexOf(t.id)})).map(n.createUnmentionableUser):[]})).then((function(n){return{options:[].concat(U()(e),U()(t),U()(r),U()(n))}}))},n.api=new v.a,n.projectsStoreMixin=J.a.listenTo(O.a,(function(){n.closeSelectMenu()})),n}return d()(t,e),i()(t,[{key:"componentDidMount",value:function(){this.projectsStoreMixin&&this.projectsStoreMixin.componentDidMount()}},{key:"componentWillUnmount",value:function(){this.api=null,this.projectsStoreMixin&&this.projectsStoreMixin.componentWillUnmount()}},{key:"getMentionableUsers",value:function(){return j.a.getAll().map(this.createMentionableUser)}},{key:"getMentionableTeams",value:function(){var e=this.props.project,t=O.a.getBySlug(e.slug);return t?t.teams.map(this.createMentionableTeam):[]}},{key:"getTeamsNotInProject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Y.a.getAll()||[],n=e.map((function(e){return e.actor.id}));return t.filter((function(e){return-1===n.indexOf(e.id)})).map(this.createUnmentionableTeam)}},{key:"closeSelectMenu",value:function(){if(this.selectRef){var e=W.a.findDOMNode(this.selectRef).querySelector(".Select-input input");e&&e.blur()}}},{key:"handleAddTeamToProject",value:function(e){var t,n,r,a,o;return P.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=this.props,n=t.organization,r=t.project,a=t.value,o=U()(a),this.props.onChange([].concat(U()(this.props.value),[this.createMentionableTeam(e)])),i.prev=3,i.next=6,P.a.awrap(Object(_.a)(this.api,n.slug,r.slug,e));case 6:i.next=12;break;case 8:i.prev=8,i.t0=i.catch(3),this.props.onChange(o),this.closeSelectMenu();case 12:case"end":return i.stop()}}),null,this,[[3,8]])}},{key:"render",value:function(){var e=this;return f.a.createElement(Z,{filterOptions:function(e,t){return e.filter((function(e){return e.searchKey.indexOf(t)>-1}))},ref:function(t){return e.selectRef=t},loadOptions:this.handleLoadOptions,defaultOptions:!0,async:!0,clearable:!0,disabled:this.props.disabled,cache:!1,valueComponent:re,placeholder:Object(x.b)("owners"),onInputChange:this.handleInputChange,onChange:this.handleChange,value:this.props.value,className:Object(M.css)({width:200})})}}]),t}(f.a.Component);oe.displayName="SelectOwners";var ie=Object(g.c)("div",{target:"ez8xng90"})("opacity:0.5;overflow:hidden;"),se=Object(g.c)(E.a,{target:"ez8xng91"})("flex-shrink:0;"),ce=n(11),le={text:"",type:"path",owners:[],isValid:!1},ue=function(e){function t(e){var n;return a()(this,t),(n=c()(this,u()(t).call(this,e))).checkIsValid=function(){n.setState((function(e){return{isValid:!!e.text&&e.owners&&!!e.owners.length}}))},n.handleTypeChange=function(e){n.setState({type:e}),n.checkIsValid()},n.handleChangeValue=function(e){n.setState({text:e.target.value}),n.checkIsValid()},n.handleChangeOwners=function(e){n.setState({owners:e}),n.checkIsValid()},n.handleAddRule=function(){var e=n.state,t=e.type,r=e.text,a=e.owners;if(e.isValid){var o=a.map((function(e){return"team"===e.actor.type?"#".concat(e.actor.name):j.a.getById(e.actor.id).email})).join(" "),i="".concat(t,":").concat(r," ").concat(o);n.props.onAddRule(i),n.setState(le)}else Object(w.a)("A rule needs a type, a value, and one or more issue owners.")},n.handleSelectCandidate=function(e,t){n.setState({text:e,type:t}),n.checkIsValid()},n.state=le,n}return d()(t,e),i()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.urls,r=t.paths,a=t.disabled,o=t.project,i=t.organization,s=this.state,c=s.type,l=s.text,u=s.owners,p=s.isValid;return f.a.createElement(f.a.Fragment,null,(r||n)&&f.a.createElement(pe,null,r&&r.map((function(t){return f.a.createElement(me,{key:t,onClick:function(){return e.handleSelectCandidate(t,"path")}},f.a.createElement(fe,{src:"icon-circle-add"}),f.a.createElement(he,null,t),f.a.createElement(de,null,"[PATH]"))})),n&&n.map((function(t){return f.a.createElement(me,{key:t,onClick:function(){return e.handleSelectCandidate(t,"url")}},f.a.createElement(fe,{src:"icon-circle-add"}),f.a.createElement(he,null,t),f.a.createElement(de,null,"[URL]"))}))),f.a.createElement(ge,null,f.a.createElement(be,{name:"select-type",value:c,showSearch:!1,onChange:this.handleTypeChange,options:[{value:"path",label:Object(x.b)("Path")},{value:"url",label:Object(x.b)("URL")}],style:{width:140},clearable:!1,disabled:a}),f.a.createElement(ye,{controlled:!0,value:l,onChange:this.handleChangeValue,disabled:a,placeholder:"path"===c?"src/example/*":"https://example.com/settings/*"}),f.a.createElement(ve,{src:"icon-chevron-right"}),f.a.createElement(h.b,{flex:"1",align:"center",mr:1},f.a.createElement(oe,{organization:i,project:o,value:u,onChange:this.handleChangeOwners,disabled:a})),f.a.createElement(je,{priority:"primary",disabled:!p,onClick:this.handleAddRule,icon:"icon-circle-add",size:"small"})))}}]),t}(f.a.Component);ue.displayName="RuleBuilder";var pe=Object(g.c)("div",{target:"e1hyuoc70"})("margin-bottom:10px;"),de=Object(g.c)("div",{target:"e1hyuoc71"})("color:",(function(e){return e.theme.borderDark}),";"),he=Object(g.c)(R.a,{target:"e1hyuoc72"})("flex:1;"),me=Object(g.c)("div",{target:"e1hyuoc73"})("font-family:",(function(e){return e.theme.text.familyMono}),";border:1px solid ",(function(e){return e.theme.borderDark}),";background-color:#f8fafd;padding-left:5px;margin-bottom:3px;cursor:pointer;overflow:hidden;display:flex;align-items:center;"),fe=Object(g.c)(k.a,{target:"e1hyuoc74"})("color:",(function(e){return e.theme.borderDark}),";margin-right:5px;flex-shrink:0;"),ge=Object(g.c)("div",{target:"e1hyuoc75"})("display:flex;height:40px;align-items:center;margin-bottom:",Object(ce.a)(2),";"),be=Object(g.c)(C.a,{target:"e1hyuoc76"})("margin-right:10px;width:80px;flex-shrink:0;"),ye=Object(g.c)(q.a,{target:"e1hyuoc77"})("padding:",Object(ce.a)(1),";line-height:19px;margin-right:5px;"),ve=Object(g.c)(k.a,{target:"e1hyuoc78"})("color:",(function(e){return e.theme.borderDark}),";flex-shrink:0;margin-right:5px;"),je=Object(g.c)(E.a,{target:"e1hyuoc79"})("padding:",Object(ce.a)(.5),";"),Oe=ue,Ee=function(e){function t(e){var n;return a()(this,t),(n=c()(this,u()(t).call(this,e))).handleUpdateOwnership=function(){var e=n.props,t=e.organization,r=e.project,a=n.state.text;n.setState({error:null});var o=(new v.a).requestPromise("/projects/".concat(t.slug,"/").concat(r.slug,"/ownership/"),{method:"PUT",data:{raw:a||""}});return o.then((function(){Object(w.d)(Object(x.b)("Updated issue ownership rules")),n.setState({initialText:a})})).catch((function(e){n.setState({error:e.responseJSON}),403===e.status?Object(w.a)(Object(x.b)("You don't have permission to modify issue ownership rules for this project")):400===e.status&&e.responseJSON.raw&&e.responseJSON.raw[0].startsWith("Invalid rule owners:")?Object(w.a)(Object(x.b)("Unable to save issue ownership rule changes: "+e.responseJSON.raw[0])):Object(w.a)(Object(x.b)("Unable to save issue ownership rule changes"))})),o},n.handleChange=function(e){n.setState({text:e.target.value})},n.handleAddRule=function(e){n.setState((function(t){return{text:t.text+"\n"+e}}),n.handleUpdateOwnership)},n.state={text:e.initialText,initialText:e.initialText,error:null},n}return d()(t,e),i()(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.initialText;t!==this.state.initialText&&this.setState({initialText:t})}},{key:"parseError",value:function(e){var t=e&&e.raw&&e.raw[0];return t?t.startsWith("Invalid rule owners:")?f.a.createElement(Ce,null,t):f.a.createElement(we,{line:t.match(/line (\d*),/)[1]-1}):null}},{key:"mentionableUsers",value:function(){return j.a.getAll().map((function(e){return{id:e.id,display:e.email,email:e.email}}))}},{key:"mentionableTeams",value:function(){var e=this.props.project;return(O.a.getBySlug(e.slug)||{teams:[]}).teams.map((function(e){return{id:e.id,display:"#".concat(e.slug),email:e.id}}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.organization,a=t.disabled,o=t.urls,i=t.paths,s=this.state,c=s.text,l=s.error,u=s.initialText;return f.a.createElement(f.a.Fragment,null,f.a.createElement(Oe,{urls:o,paths:i,organization:r,project:n,onAddRule:this.handleAddRule.bind(this),disabled:a}),f.a.createElement("div",{style:{position:"relative"},onKeyDown:function(t){t.metaKey&&"Enter"===t.key&&e.handleUpdateOwnership()}},f.a.createElement(Se,{placeholder:"#example usage\npath:src/example/pipeline/* person@sentry.io #infra\nurl:http://example.com/settings/* #product",onChange:this.handleChange,disabled:a,value:c,spellCheck:"false",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off"}),f.a.createElement(h.b,{align:"center",justify:"space-between"},f.a.createElement("div",null,this.parseError(l)),f.a.createElement(xe,null,f.a.createElement(E.a,{size:"small",priority:"primary",onClick:this.handleUpdateOwnership,disabled:a||c===u},Object(x.b)("Save Changes"))))))}}]),t}(f.a.Component);Ee.displayName="OwnerInput";var we=Object(g.c)("div",{target:"en3n9di0"})(S.a,";width:100%;height:",24,"px;background-color:red;opacity:0.1;pointer-events:none;position:absolute;top:",(function(e){return 4+24*e.line}),"px;"),xe=Object(g.c)("div",{target:"en3n9di1"})("text-align:end;padding-top:10px;"),Se=Object(g.c)(y.a,{target:"en3n9di2"})(S.a,";min-height:140px;overflow:auto;outline:0;width:100%;resize:none;margin:0;font-family:",(function(e){return e.theme.text.familyMono}),";word-break:break-all;white-space:pre-wrap;padding-top:",4,"px;line-height:",24,"px;"),Ce=Object(g.c)("div",{target:"en3n9di3"})("color:",(function(e){return e.theme.error}),";font-weight:bold;margin-top:12px;");t.a=Ee}}]);
//# sourceMappingURL=CreateOwnershipRuleModal~ProjectOwnership.js.map