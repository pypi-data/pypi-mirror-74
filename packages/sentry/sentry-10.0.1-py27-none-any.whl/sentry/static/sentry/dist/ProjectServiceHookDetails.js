(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[154],{1610:function(e,t,n){"use strict";var a=n(2),r=n(251),o=n.n(r),c=n(0),i=n.n(c),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.d)(t,e),t.prototype.getTitle=function(){return""},t.prototype.render=function(){var e=this.getTitle();return i.a.createElement(o.a,{title:(e?e+" - ":"")+"Sentry"},this.renderComponent())},t}(n(1609).a);t.a=l},1611:function(e,t,n){"use strict";var a,r,o,c,i,l=n(2),s=n(1),u=n.n(s),p=n(0),d=n.n(p),b=n(3),h=n(11),m=n(337),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.icon,n=e.title,a=e.action,r=e.tabs,o=e.noTitleStyles,c=Object(l.h)(e,["icon","title","action","tabs","noTitleStyles"]);return d.a.createElement("div",Object(l.a)({},c),d.a.createElement(v,null,t&&d.a.createElement(g,null,t),n&&d.a.createElement(y,{tabs:r,styled:o},d.a.createElement(m.a,null,n)),a&&d.a.createElement(j,{tabs:r},a)),r&&d.a.createElement("div",null,r))},t.propTypes={icon:u.a.node,title:u.a.node.isRequired,action:u.a.node,tabs:u.a.node,noTitleStyles:u.a.bool},t.defaultProps={noTitleStyles:!1},t}(d.a.Component),v=Object(b.c)("div",{target:"e1uay4fd0"})(a||(a=Object(l.f)(["\n  display: flex;\n  align-items: center;\n"],["\n  display: flex;\n  align-items: center;\n"]))),y=Object(b.c)("div",{target:"e1uay4fd1"})(r||(r=Object(l.f)(["\n  ",";\n  margin: ",";\n  flex: 1;\n"],["\n  ",";\n  margin: ",";\n  flex: 1;\n"])),(function(e){return!e.styled&&"\n    font-size: 20px;\n    font-weight: bold;"}),(function(e){return e.tabs?Object(h.a)(4)+" 0 "+Object(h.a)(2):Object(h.a)(4)+" 0"})),g=Object(b.c)("div",{target:"e1uay4fd2"})(o||(o=Object(l.f)(["\n  margin-right: ",";\n"],["\n  margin-right: ",";\n"])),Object(h.a)(1)),j=Object(b.c)("div",{target:"e1uay4fd3"})(c||(c=Object(l.f)(["\n  ",";\n"],["\n  ",";\n"])),(function(e){return e.tabs?"margin-top: "+Object(h.a)(2):null})),E=Object(b.c)(f,{target:"e1uay4fd4"})(i||(i=Object(l.f)(["\n  font-size: 14px;\n  margin-top: -",";\n"],["\n  font-size: 14px;\n  margin-top: -",";\n"])),Object(h.a)(4));t.a=E},1813:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var a=n(12),r=n.n(a),o=n(20),c=n.n(o),i=n(6),l=n.n(i),s=n(7),u=n.n(s),p=n(9),d=n.n(p),b=n(8),h=n.n(b),m=n(10),f=n.n(m),v=n(0),y=n.n(v),g=n(47),j=n(68),E=n(1616),O=n(4),k=function(e){function t(e,n){var a;return l()(this,t),(a=d()(this,h()(t).call(this,e,n))).onSubmit=function(e,t,n){a.props.onSubmit&&a.props.onSubmit(e);var r=j.a.add(Object(O.b)("Saving changes.."));a.api.request(a.props.apiEndpoint,{method:a.props.apiMethod,data:e,success:function(){j.a.remove(r),t.apply(void 0,arguments)},error:function(){j.a.remove(r),n.apply(void 0,arguments)}})},a.api=new g.a,a}return f()(t,e),u()(t,[{key:"componentWillUnmount",value:function(){this.api.clear()}},{key:"render",value:function(){var e=this.props,t=(e.onSubmit,e.apiMethod,e.apiEndpoint,c()(e,["onSubmit","apiMethod","apiEndpoint"]));return y.a.createElement(E.a,r()({onSubmit:this.onSubmit},t))}}]),t}(y.a.Component);k.displayName="ApiForm"},1814:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var a=n(45),r=n.n(a),o=n(34),c=n.n(o),i=n(6),l=n.n(i),s=n(7),u=n.n(s),p=n(9),d=n.n(p),b=n(8),h=n.n(b),m=n(10),f=n.n(m),v=n(144),y=n(0),g=n.n(y),j=n(3),E=n(21),O=Object(j.c)("div",{target:"e18jwynw0"})("display:flex;flex-wrap:wrap;"),k=Object(j.c)("label",{target:"e18jwynw1"})("font-weight:normal;white-space:nowrap;margin-right:10px;margin-bottom:10px;width:20%;"),w=Object(j.c)("span",{target:"e18jwynw2"})("margin-left:3px;"),S=function(e){function t(){var e,n;l()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=d()(this,(e=h()(t)).call.apply(e,[this].concat(r)))).onChange=function(e,t){var a=n.props,r=a.value,o=a.onChange;"function"==typeof o&&o(t.target.checked?r?[].concat(c()(r),[e]):[r]:r.filter((function(t){return t!==e})),t)},n}return f()(t,e),u()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.disabled,a=t.choices,o=t.value;return g.a.createElement(O,null,a.map((function(t){var a=r()(t,2),c=a[0],i=a[1];return g.a.createElement(v.a,{key:c,w:[1,.5,1/3,.25]},g.a.createElement(k,null,g.a.createElement("input",{type:"checkbox",value:c,onChange:e.onChange.bind(e,c),disabled:n,checked:Object(E.c)(o)&&-1!==o.indexOf(c)}),g.a.createElement(w,null,i)))})))}}]),t}(g.a.Component);S.displayName="MultipleCheckbox"},1954:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var a=n(6),r=n.n(a),o=n(7),c=n.n(o),i=n(9),l=n.n(i),s=n(8),u=n.n(s),p=n(10),d=n.n(p),b=n(5),h=n(0),m=n.n(h),f=n(4),v=n(1813),y=n(1880),g=n(588),j=n(1687),E=n(1814),O=n(250),k=["event.alert","event.created"].map((function(e){return[e,e]})),w=function(e){function t(){var e,n;r()(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=l()(this,(e=u()(t)).call.apply(e,[this].concat(o)))).onSubmitSuccess=function(){var e=n.props,t=e.orgId,a=e.projectId;b.browserHistory.push("/settings/".concat(t,"/projects/").concat(a,"/hooks/"))},n}return d()(t,e),c()(t,[{key:"render",value:function(){var e=this.props,t=e.initialData,n=e.orgId,a=e.projectId,r=e.hookId,o=r?"/projects/".concat(n,"/").concat(a,"/hooks/").concat(r,"/"):"/projects/".concat(n,"/").concat(a,"/hooks/");return m.a.createElement(O.a,null,m.a.createElement(v.a,{apiMethod:r?"PUT":"POST",apiEndpoint:o,initialData:t,onSubmitSuccess:this.onSubmitSuccess,footerStyle:{marginTop:0,paddingRight:20},submitLabel:r?Object(f.b)("Save Changes"):Object(f.b)("Create Hook")},m.a.createElement(O.e,null,Object(f.b)("Hook Configuration")),m.a.createElement(O.c,null,m.a.createElement(y.a,{name:"isActive",label:Object(f.b)("Active")}),m.a.createElement(j.a,{name:"url",label:Object(f.b)("URL"),required:!0,help:Object(f.b)("The URL which will receive events.")}),m.a.createElement(g.a,{name:"events",choices:k,label:Object(f.b)("Events"),inline:!1,help:Object(f.b)("The event types you wish to subscribe to.")},(function(e){var t=e.value,n=e.onChange;return m.a.createElement(E.a,{onChange:n,value:t,choices:k})})))))}}]),t}(m.a.Component);w.displayName="ServiceHookSettingsForm"},2570:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return U}));var a=n(12),r=n.n(a),o=n(16),c=n.n(o),i=n(45),l=n.n(i),s=n(6),u=n.n(s),p=n(7),d=n.n(p),b=n(9),h=n.n(b),m=n(8),f=n.n(m),v=n(10),y=n.n(v),g=n(5),j=n(0),E=n.n(j),O=n(4),k=n(1609),w=n(1610),S=n(250),x=n(27),C=n(570),I=n(194),T=n(576),D=n(338),H=n(68),P=n(1611),A=n(582),M=n(1684),N=n(1954);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=function(e){function t(){return u()(this,t),h()(this,f()(t).apply(this,arguments))}return y()(t,e),d()(t,[{key:"getEndpoints",value:function(){var e=Math.floor((new Date).getTime()/1e3),t=e-2592e3,n=this.props.params,a=n.hookId,r=n.orgId,o=n.projectId;return[["stats","/projects/".concat(r,"/").concat(o,"/hooks/").concat(a,"/stats/"),{query:{since:t,until:e,resolution:"1d"}}]]}},{key:"renderTooltip",value:function(e,t,n){var a=n.getTimeLabel(e),r=l()(e.y,1)[0],o="".concat(r.toLocaleString()," events");return E.a.createElement("div",{style:{width:"150px"}},E.a.createElement("div",{className:"time-label"},a),E.a.createElement("div",{className:"value-label"},o))}},{key:"renderBody",value:function(){var e=!0,t=this.state.stats.map((function(t){return t.total&&(e=!1),{x:t.ts,y:[t.total]}}));return E.a.createElement(S.a,null,E.a.createElement(S.e,null,Object(O.b)("Events in the last 30 days (by day)")),E.a.createElement(S.c,null,e?E.a.createElement(C.a,{title:Object(O.b)("Nothing recorded in the last 30 days."),description:Object(O.b)("Total webhooks fired for this configuration.")}):E.a.createElement(A.a,{points:t,height:150,label:"events",barClasses:["total"],className:"standard-barchart",style:{border:"none"},tooltip:this.renderTooltip})))}}]),t}(k.a),U=function(e){function t(){var e,n;u()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=h()(this,(e=f()(t)).call.apply(e,[this].concat(r)))).onDelete=function(){var e=n.props.params,t=e.orgId,a=e.projectId,r=e.hookId,o=H.a.add(Object(O.b)("Saving changes.."));n.api.request("/projects/".concat(t,"/").concat(a,"/hooks/").concat(r,"/"),{method:"DELETE",success:function(){H.a.remove(o),g.browserHistory.push("/settings/".concat(t,"/projects/").concat(a,"/hooks/"))},error:function(){H.a.remove(o),H.a.add(Object(O.b)("Unable to remove application. Please try again."),"error",{duration:3e3})}})},n}return y()(t,e),d()(t,[{key:"getEndpoints",value:function(){var e=this.props.params,t=e.orgId,n=e.projectId,a=e.hookId;return[["hook","/projects/".concat(t,"/").concat(n,"/hooks/").concat(a,"/")]]}},{key:"renderBody",value:function(){var e=this.props.params,t=e.orgId,n=e.projectId,a=e.hookId,o=this.state.hook;return E.a.createElement("div",null,E.a.createElement(P.a,{title:Object(O.b)("Service Hook Details")}),E.a.createElement(I.a,null,E.a.createElement(R,{params:this.props.params})),E.a.createElement(N.a,r()({},this.props,{orgId:t,projectId:n,hookId:a,initialData:q({},o,{isActive:"disabled"!==o.status})})),E.a.createElement(S.a,null,E.a.createElement(S.e,null,Object(O.b)("Event Validation")),E.a.createElement(S.c,null,E.a.createElement(S.b,{type:"info",icon:"icon-circle-exclamation"},"Sentry will send the ",E.a.createElement("code",null,"X-ServiceHook-Signature")," header built using"," ",E.a.createElement("code",null,"HMAC(SHA256, [secret], [payload])"),". You should always verify this signature before trusting the information provided in the webhook."),E.a.createElement(T.a,{label:Object(O.b)("Secret"),flexibleControlStateSize:!0,inline:!1,help:Object(O.b)("The shared secret used for generating event HMAC signatures.")},E.a.createElement(M.a,null,Object(D.a)({value:o.secret,fixed:"a dynamic secret value"}))))),E.a.createElement(S.a,null,E.a.createElement(S.e,null,Object(O.b)("Delete Hook")),E.a.createElement(S.c,null,E.a.createElement(T.a,{label:Object(O.b)("Delete Hook"),help:Object(O.b)("Removing this hook is immediate and permanent.")},E.a.createElement("div",null,E.a.createElement(x.a,{priority:"danger",onClick:this.onDelete},"Delete Hook"))))))}}]),t}(w.a)}}]);
//# sourceMappingURL=ProjectServiceHookDetails.js.map