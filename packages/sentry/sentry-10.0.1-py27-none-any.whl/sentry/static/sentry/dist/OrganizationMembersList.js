(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[118],{1609:function(e,t,n){"use strict";var r,a,o=n(2),i=n(44),s=n.n(i),c=n(1),u=n.n(c),l=n(0),d=n.n(l),m=n(35),p=n(289),b=n(47),h=n(28),f=n(4),g=n(5),v=n(105),j=n.n(v),y=n(3),O=n(336),E=n(50),x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={query:"",busy:!1},t.immediateQuery=function(e){return Object(o.b)(t,void 0,void 0,(function(){var t,n,r,a,i,s;return Object(o.e)(this,(function(c){switch(c.label){case 0:t=this.props,n=t.location,r=t.api,this.setState({busy:!0}),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,r.requestPromise(""+this.props.url,{includeAllArgs:!0,method:"GET",query:Object(o.a)(Object(o.a)({},n.query),{query:e})})];case 2:return a=o.g.apply(void 0,[c.sent(),3]),i=a[0],s=a[2],this.state.query===e&&this.props.onSuccess(i,s),[3,4];case 3:return c.sent(),this.props.onError(),[3,4];case 4:return this.setState({busy:!1}),[2]}}))}))},t.query=j()(t.immediateQuery,t.props.debounceWait),t.handleChange=function(e){t.query(e),t.setState({query:e})},t.handleInputChange=function(e){return t.handleChange(e.target.value)},t.handleSearch=function(e){var n=t.props,r=n.updateRoute,a=n.onSearchSubmit;if(e.preventDefault(),r){var o=t.props,i=o.router,s=o.location;i.push({pathname:s.pathname,query:{query:t.state.query}})}"function"==typeof a&&a(t.state.query,e)},t}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.placeholder,n=e.children,r=e.className,a=this.state,o=a.busy,i=a.query,s=d.a.createElement(w,{onSubmit:this.handleSearch},d.a.createElement(O.a,{value:i,onChange:this.handleInputChange,className:r,placeholder:t}),o&&d.a.createElement(S,{size:18,hideMessage:!0,mini:!0}));return void 0===n?s:n({defaultSearchBar:s,busy:o,value:i,handleChange:this.handleChange})},t.defaultProps={placeholder:"Search...",debounceWait:200},t}(d.a.Component),S=Object(y.c)(E.default,{target:"e6xwo0"})(r||(r=Object(o.f)(["\n  position: absolute;\n  right: 25px;\n  top: 50%;\n  transform: translateY(-13px);\n"],["\n  position: absolute;\n  right: 25px;\n  top: 50%;\n  transform: translateY(-13px);\n"]))),w=Object(y.c)("form",{target:"e6xwo1"})(a||(a=Object(o.f)(["\n  position: relative;\n"],["\n  position: relative;\n"]))),z=g.withRouter(x),R=n(159),q=n(6),k=n.n(q),L=n(7),N=n.n(L),C=n(9),D=n.n(C),I=n(8),A=n.n(I),M=n(10),P=n.n(M),T=n(251),B=n.n(T),F=n(104),_=n(73),W=function(e){function t(){return k()(this,t),D()(this,A()(t).apply(this,arguments))}return P()(t,e),N()(t,[{key:"componentDidMount",value:function(){var e=this.props.routes,t=this.context,n=t.organization,r=t.project,a=Object(_.a)(e);m.l((function(e){e.setFingerprint(["Permission Denied",a]),e.setExtra("route",a),e.setExtra("orgFeatures",n&&n.features||[]),e.setExtra("orgAccess",n&&n.access||[]),e.setExtra("projectFeatures",r&&r.features||[]),m.c(new Error("".concat("Permission Denied").concat(a?" : ".concat(a):"")))}))}},{key:"render",value:function(){return d.a.createElement(B.a,{title:Object(f.b)("Permission Denied")},d.a.createElement(R.a,{message:Object(f.c)("Your role does not have the necessary permissions to access this resource, please read more about [link:organizational roles]",{link:d.a.createElement(F.a,{href:"https://docs.sentry.io/learn/membership/"})})}))}}]),t}(d.a.Component);W.displayName="PermissionDenied",W.contextTypes={organization:u.a.object,project:u.a.object};var Y=Object(g.withRouter)(W),K=n(569);function U(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return t.apply(void 0,Object(o.i)(n))}catch(t){return console.error(t),setTimeout((function(){throw t})),e.setState({error:t}),null}}}var X=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.reloadOnVisible=!1,r.shouldReloadOnVisible=!1,r.shouldReload=!1,r.shouldRenderBadRequests=!1,r.api=new b.a,r.markShouldMeasure=function(e){var t=void 0===e?{}:e,n=t.remainingRequests,a=t.error;r._measurement.hasMeasured||(r._measurement.finished=0===n,r._measurement.error=a||r._measurement.error)},r.remountComponent=function(){r.shouldReload?r.reloadData():r.setState(r.getDefaultState(),r.fetchData)},r.visibilityReloader=function(){return r.shouldReloadOnVisible&&!r.state.loading&&!document.hidden&&r.reloadData()},r.fetchData=function(e){var t=r.getEndpoints();t.length?(r.api.clear(),r.setState(Object(o.a)({loading:!0,error:!1,remainingRequests:t.length},e)),t.forEach((function(e){var t=Object(o.g)(e,4),n=t[0],a=t[1],i=t[2],s=t[3];s=s||{};var c=r.props.location&&r.props.location.query||{},u=i&&i.query||{};(s.paginate||c.cursor)&&(u=Object(o.a)(Object(o.a)({},c),u)),r.api.request(a,Object(o.a)(Object(o.a)({method:"GET"},i),{query:u,success:function(e,t,a){r.handleRequestSuccess({stateKey:n,data:e,jqXHR:a},!0)},error:function(e){s.allowError&&s.allowError(e)&&(e=null),r.handleError(e,[n,a,i,s])}}))}))):r.setState({loading:!1,error:!1})},r.fetchData=U(r,r.fetchData.bind(r)),r.render=U(r,r.render.bind(r)),r.state=r.getDefaultState(),r._measurement={hasMeasured:!1},t.routes&&t.routes&&h.b.mark("async-component-"+Object(_.a)(t.routes)),r}return Object(o.d)(t,e),t.prototype.componentWillMount=function(){this.api=new b.a,this.fetchData(),this.reloadOnVisible&&document.addEventListener("visibilitychange",this.visibilityReloader)},t.prototype.componentWillReceiveProps=function(e,t){},t.prototype.componentDidUpdate=function(e,t){var n=!!t.router,r=void 0!==e.location,a=r?this.props.location:n?this.context.router.location:null,o=r?e.location:n?t.router.location:null;if(a&&o){if(!this._measurement.hasMeasured&&this._measurement.finished&&this.props.routes){var i=Object(_.a)(this.props.routes);h.b.measure({name:"app.component.async-component",start:"async-component-"+i,data:{route:i,error:this._measurement.error}}),this._measurement.hasMeasured=!0,"function"==typeof this.props.finishProfile&&this.props.finishProfile()}s()(this.props.params,e.params)&&a.search===o.search&&a.state===o.state||this.remountComponent()}},t.prototype.componentWillUnmount=function(){this.api.clear(),document.removeEventListener("visibilitychange",this.visibilityReloader)},t.prototype.getDefaultState=function(){var e=this.getEndpoints(),t={loading:!0,reloading:!1,error:!1,errors:{}};return e.forEach((function(e){var n=Object(o.g)(e,2),r=n[0];n[1];t[r]=null})),t},t.prototype.reloadData=function(){this.fetchData({reloading:!0})},t.prototype.onRequestSuccess=function(e){},t.prototype.onRequestError=function(e,t){},t.prototype.handleRequestSuccess=function(e,t){var n=this,r=e.stateKey,a=e.data,o=e.jqXHR;this.setState((function(e){var i,s=((i={})[r]=a,i[r+"PageLinks"]=o&&o.getResponseHeader("Link"),i);return t&&(s.remainingRequests=e.remainingRequests-1,s.loading=e.remainingRequests>1,s.reloading=e.reloading&&s.loading,n.markShouldMeasure({remainingRequests:s.remainingRequests})),s})),this.onRequestSuccess({stateKey:r,data:a,jqXHR:o})},t.prototype.handleError=function(e,t){var n=this,r=Object(o.g)(t,1)[0];e&&e.responseText&&m.a({message:e.responseText,category:"xhr",level:p.a.Error}),this.setState((function(t){var a,i,s=t.remainingRequests>1,c=((a={})[r]=null,a.errors=Object(o.a)(Object(o.a)({},t.errors),((i={})[r]=e,i)),a.error=t.error||!!e,a.remainingRequests=t.remainingRequests-1,a.loading=s,a.reloading=t.reloading&&s,a);return n.markShouldMeasure({remainingRequests:c.remainingRequests,error:!0}),c})),this.onRequestError(e,t)},t.prototype.getEndpointParams=function(){return console.warn("getEndpointParams is deprecated"),{}},t.prototype.getEndpoint=function(){return console.warn("getEndpoint is deprecated"),null},t.prototype.getEndpoints=function(){var e=this.getEndpoint();return e?[["data",e,this.getEndpointParams()]]:[]},t.prototype.renderSearchInput=function(e){var t=this,n=e.stateKey,r=e.url,a=Object(o.h)(e,["stateKey","url"]),i=Object(o.g)(this.getEndpoints()||[null],1)[0],s=n||i&&i[0],c=r||i&&i[1];return d.a.createElement(z,Object(o.a)({url:c},a,{api:this.api,onSuccess:function(e,n){t.handleRequestSuccess({stateKey:s,data:e,jqXHR:n})},onError:function(){t.renderError(new Error("Error with AsyncComponentSearchInput"))}}))},t.prototype.renderLoading=function(){return d.a.createElement(E.default,null)},t.prototype.renderError=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=this.state.errors,a=Object.values(r).find((function(e){return e&&401===e.status})),o=Object.values(r).find((function(e){return e&&403===e.status})),i=!!Object.values(r).find((function(e){return e&&0!==e.status}))||t;if(a)return d.a.createElement(R.a,{message:Object(f.b)("You are not authorized to access this resource.")});if(o)return d.a.createElement(Y,null);if(this.shouldRenderBadRequests){var s=Object.values(r).filter((function(e){return e&&400===e.status&&e.responseJSON&&e.responseJSON.detail})).map((function(e){return e.responseJSON.detail}));if(s.length)return d.a.createElement(R.a,{message:s.join("\n")})}return d.a.createElement(K.a,{error:e,component:this,disableLogSentry:!i,disableReport:n,onRetry:this.remountComponent})},t.prototype.renderComponent=function(){return!this.state.loading||this.shouldReload&&this.state.reloading?this.state.error?this.renderError(new Error("Unable to load all required endpoints")):this.renderBody():this.renderLoading()},t.prototype.renderBody=function(){throw new Error("Not implemented")},t.prototype.render=function(){return this.renderComponent()},t.propTypes={location:u.a.object,router:u.a.object},t.contextTypes={router:u.a.object},t}(d.a.Component);t.a=X},1610:function(e,t,n){"use strict";var r=n(2),a=n(251),o=n.n(a),i=n(0),s=n.n(i),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.d)(t,e),t.prototype.getTitle=function(){return""},t.prototype.render=function(){var e=this.getTitle();return s.a.createElement(o.a,{title:(e?e+" - ":"")+"Sentry"},this.renderComponent())},t}(n(1609).a);t.a=c},1618:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(577),a=n.n(r),o=n(447);function i(e,t){var n,r,i=t.routes,s=t.params,c=t.location,u=t.stepBack,l=i.map((function(e){return e.path||""}));"string"!=typeof e?(r=i.indexOf(e)+1,n=a()(l.slice(0,r),(function(e){return"/"===e[0]}))):n=a()(l,(function(e){return"/"===e[0]}));var d=l.slice(n,r);void 0!==u&&(d=d.slice(0,u));var m=void 0!==c&&c.search?c.search:"",p=""+d.join("")+("string"!=typeof e?"":e)+m;return Object(o.a)(p,s)}},1627:function(e,t,n){"use strict";t.a=function(e,t,n){void 0===n&&(n=!0);var r=e+" - "+t;return n?r+" - Sentry":r}},1699:function(e,t,n){"use strict";var r=n(2),a=n(0),o=n.n(a),i=n(3),s=function(e){var t=e.size,n=e.isActive,r=e.isLoading,a=e.isDisabled,i=e.toggle,s=e.id,c=e.className;return o.a.createElement(b,{id:s,type:"button",className:c,onClick:a?void 0:i,role:"checkbox","aria-checked":n,isLoading:r,isDisabled:a,isActive:n,size:t,"data-test-id":"switch"},o.a.createElement(h,{isDisabled:a,isActive:n,size:t}))};s.defaultProps={size:"sm"};var c,u,l=function(e){return"sm"===e.size?16:24},d=function(e){return l(e)-("sm"===e.size?6:10)},m=function(e){return"sm"===e.size?2:4},p=function(e){return e.isActive?m(e)+l(e):m(e)},b=Object(i.c)("button",{target:"ezmyi9u0"})(c||(c=Object(r.f)(["\n  display: inline-block;\n  background: none;\n  padding: 0;\n  border: 1px solid ",";\n  position: relative;\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.04);\n  transition: 0.15s border ease;\n  cursor: ",";\n  pointer-events: ",";\n  height: ","px;\n  width: ","px;\n  border-radius: ","px;\n\n  &:hover,\n  &:focus {\n    outline: none;\n    border-color: ",";\n  }\n\n  &:focus,\n  &.focus-visible {\n    outline: none;\n    box-shadow: rgba(209, 202, 216, 0.5) 0 0 0 3px;\n  }\n"],["\n  display: inline-block;\n  background: none;\n  padding: 0;\n  border: 1px solid ",";\n  position: relative;\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.04);\n  transition: 0.15s border ease;\n  cursor: ",";\n  pointer-events: ",";\n  height: ","px;\n  width: ","px;\n  border-radius: ","px;\n\n  &:hover,\n  &:focus {\n    outline: none;\n    border-color: ",";\n  }\n\n  &:focus,\n  &.focus-visible {\n    outline: none;\n    box-shadow: rgba(209, 202, 216, 0.5) 0 0 0 3px;\n  }\n"])),(function(e){return e.isActive?e.theme.borderDark:e.theme.borderLight}),(function(e){return e.isLoading||e.isDisabled?"not-allowed":"pointer"}),(function(e){return e.isLoading||e.isDisabled?"none":null}),l,(function(e){return 2*l(e)}),l,(function(e){return e.theme.borderDark})),h=Object(i.c)("span",{target:"ezmyi9u1"})(u||(u=Object(r.f)(["\n  display: block;\n  position: absolute;\n  border-radius: 50%;\n  transition: 0.25s all ease;\n  top: ","px;\n  transform: translateX(","px);\n  width: ","px;\n  height: ","px;\n  background: ",";\n  opacity: ",";\n"],["\n  display: block;\n  position: absolute;\n  border-radius: 50%;\n  transition: 0.25s all ease;\n  top: ","px;\n  transform: translateX(","px);\n  width: ","px;\n  height: ","px;\n  background: ",";\n  opacity: ",";\n"])),m,p,d,d,(function(e){return e.isActive?e.theme.green:e.theme.gray6}),(function(e){return e.isDisabled?.4:null}));t.a=s},1961:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));var r=n(2),a=n(589),o=n.n(a);function i(e){var t,n,a,o,i=function(e){var t=Array.from(e),n=[],r="",a="",o="",i=!1;t.forEach((function(e,s){var u=t.length-1>s?t[s+1]:null;r+=e,null!==u&&!c(e)&&c(u)&&(a=e),!c(e)||i||":"===a||c(r)||(n.push(r.trim()),r=""),!["'",'"'].includes(e)||i&&o!==e||(i=!i)&&(o=e)}));var s=r.trim();""!==s&&n.push(s);return n}(e),s={query:[],tags:[]},d=function(e){var t=Array.from(e),n="query";t.forEach((function(e,r){var a=t.length>r?t[r+1]:null;0===r&&[":"," "].includes(e)||":"!==e||(n=[":"," "].includes(null!==a?a:"")?"query":"tags")})),s[n].push(e)};try{for(var m=Object(r.j)(i),p=m.next();!p.done;p=m.next()){d(p.value)}}catch(e){t={error:e}}finally{try{p&&!p.done&&(n=m.return)&&n.call(m)}finally{if(t)throw t.error}}var b={query:s.query.map(l)};try{for(var h=Object(r.j)(s.tags),f=h.next();!f.done;f=h.next()){var g=f.value,v=Object(r.g)(u(g),2),j=v[0],y=v[1];b[j]=Array.isArray(b[j])?Object(r.i)(b[j],[y]):[y]}}catch(e){a={error:e}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(a)throw a.error}}return b}function s(e){var t=e.query,n=Object(r.h)(e,["query"]),a=o()(Object.entries(n),(function(e){var t=Object(r.g)(e,2),n=t[0];return t[1].map((function(e){return n+":"+(/\s/g.test(e)?'"'+e+'"':e)}))}));return(t.join(" ")+" "+a.join(" ")).trim()}function c(e){return""===e.trim()}function u(e){var t=e.indexOf(":");return[e.slice(0,t).replace(/^"+|"+$/g,""),e.slice(t+1).replace(/^"+|"+$/g,"")]}function l(e){return e.replace(/^"+|"+$/g,"")}},2663:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),o=n.n(a),i=n(3),s=n(250),c=n(51),u=n(4),l=n(1610),d=n(570),m=n(33),p=n(572),b=n(1627),h=n(53),f=n(225),g=n(450),v=n(86),j=n(27),y=n(119),O=n(11),E=n(24),x=n(41),S=n(12),w=n.n(S),z=n(6),R=n.n(z),q=n(7),k=n.n(q),L=n(9),N=n.n(L),C=n(8),D=n.n(C),I=n(10),A=n.n(I),M=n(193),P=n(252),T=n(19),B=n(98),F=n(50),_=n(1618),W=function(e){function t(){var e,n;R()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=N()(this,(e=D()(t)).call.apply(e,[this].concat(a)))).state={busy:!1},n.handleRemove=function(e){var t=n.props.onRemove;"function"==typeof t&&(n.setState({busy:!0}),t(n.props.member,e))},n.handleLeave=function(e){var t=n.props.onLeave;"function"==typeof t&&(n.setState({busy:!0}),t(n.props.member,e))},n.handleSendInvite=function(e){var t=n.props,r=t.onSendInvite,a=t.member;"function"==typeof r&&r(a,e)},n}return A()(t,e),k()(t,[{key:"render",value:function(){var e=this.props,t=e.params,n=e.routes,r=e.member,a=e.orgName,i=e.status,s=e.requireLink,c=e.memberCanLeave,l=e.currentUser,d=e.canRemoveMembers,m=e.canAddMembers,p=r.id,b=r.flags,h=r.email,f=r.name,g=r.roleName,v=r.pending,y=r.expired,O=r.user,E=!b["sso:linked"]&&s,x=l.email===h,S=!x,w=x,z=d&&!x,R=O&&O.has2fa,q=Object(_.a)(p,{routes:n,params:t}),k="success"===i,L="loading"===i,N=v||E;return o.a.createElement(G,{"data-test-id":h},o.a.createElement(Z,null,o.a.createElement(M.a,{size:32,user:O||{id:h,email:h}}),o.a.createElement(ee,{to:q},o.a.createElement("h5",{style:{margin:"0 0 3px"}},o.a.createElement(te,null,f)),o.a.createElement(ne,null,h))),o.a.createElement("div",{"data-test-id":"member-role"},v?o.a.createElement(re,null,o.a.createElement(T.a,{src:"icon-mail",size:"1.2em"}),y?Object(u.b)("Expired Invite"):Object(u.c)("Invited [roleName]",{roleName:g})):g),o.a.createElement("div",{"data-test-id":"member-status"},N?o.a.createElement(o.a.Fragment,null,L&&o.a.createElement(ae,null,o.a.createElement(F.default,{mini:!0})),k&&o.a.createElement("span",null,"Sent!"),!L&&!k&&o.a.createElement(j.a,{disabled:!m,priority:"primary",size:"small",onClick:this.handleSendInvite},v?Object(u.b)("Resend invite"):Object(u.b)("Resend SSO link"))):o.a.createElement(oe,null,o.a.createElement(ie,{has2fa:R}),R?Object(u.b)("2FA Enabled"):Object(u.b)("2FA Not Enabled"))),S||w?o.a.createElement("div",null,S&&z&&o.a.createElement(P.a,{message:Object(u.c)("Are you sure you want to remove [name] from [orgName]?",{name:f,orgName:a}),onConfirm:this.handleRemove,onSuccess:Object(u.c)("Removed [name] from [orgName]",{name:f,orgName:a}),onError:Object(u.c)("Error removing [name] from [orgName]",{name:f,orgName:a})},o.a.createElement(j.a,{icon:"icon-circle-subtract",size:"small",busy:this.state.busy},Object(u.b)("Remove"))),S&&!z&&o.a.createElement(j.a,{disabled:!0,size:"small",title:Object(u.b)("You do not have access to remove members"),icon:"icon-circle-subtract"},Object(u.b)("Remove")),w&&c&&o.a.createElement(P.a,{message:Object(u.c)("Are you sure you want to leave [orgName]?",{orgName:a}),onConfirm:this.handleLeave,onSuccess:Object(u.c)("Left [orgName]",{orgName:a}),onError:Object(u.c)("Error leaving [orgName]",{orgName:a})},o.a.createElement(j.a,{priority:"danger",size:"small",icon:"icon-exit"},Object(u.b)("Leave"))),w&&!c&&o.a.createElement(j.a,{size:"small",icon:"icon-exit",disabled:!0,title:Object(u.b)("You cannot leave this organization as you are the only organization owner.")},Object(u.b)("Leave"))):null)}}]),t}(o.a.PureComponent);W.displayName="OrganizationMemberRow";var Y,K,U,X,H,J,V,$,G=Object(i.c)(s.f,{target:"e10yeuzg0"})("display:grid;grid-template-columns:minmax(150px,2fr) minmax(90px,1fr) minmax(120px,1fr) 90px;grid-gap:",Object(O.a)(2),";align-items:center;"),Q=Object(i.c)("div",{target:"e10yeuzg1"})("display:inline-grid;grid-template-columns:max-content auto;grid-gap:",Object(O.a)(1),";align-items:center;"),Z=Object(i.c)(Q,{target:"e10yeuzg2"})(),ee=Object(i.c)(B.a,{target:"e10yeuzg3"})("overflow:hidden;"),te=Object(i.c)("div",{target:"e10yeuzg4"})("display:block;font-size:",(function(e){return e.theme.fontSizeLarge}),";overflow:hidden;text-overflow:ellipsis;"),ne=Object(i.c)("div",{target:"e10yeuzg5"})("color:",(function(e){return e.theme.gray4}),";font-size:",(function(e){return e.theme.fontSizeMedium}),";overflow:hidden;text-overflow:ellipsis;"),re=Object(i.c)(Q,{target:"e10yeuzg6"})(),ae=Object(i.c)("div",{target:"e10yeuzg7"})("margin-top:0;margin-bottom:",Object(O.a)(1.5),";"),oe=Object(i.c)(Q,{target:"e10yeuzg8"})(),ie=Object(i.c)((function(e){return o.a.createElement(T.a,w()({},e,{src:e.has2fa?"icon-circle-check":"icon-circle-exclamation"}))}),{target:"e10yeuzg9"})("color:",(function(e){return e.has2fa?e.theme.success:e.theme.error}),";font-size:18px;margin-bottom:1px;"),se=n(449),ce=n.n(se),ue=n(255),le=n(1699),de=n(1961),me=function(e){return Array.isArray(e)?e&&e.map((function(e){return e.toLowerCase()})).includes("true"):null},pe=function(e){var t=e.onChange,n=e.value,r=e.children;return o.a.createElement("label",null,o.a.createElement(ue.a,{checked:null!==n,onChange:function(){return t(null===n||null)}}),r,o.a.createElement(le.a,{isDisabled:null===n,isActive:!0===n,toggle:function(){return t(!n)}}))},be=Object(i.c)("div",{target:"ehjw1av0"})(Y||(Y=Object(r.f)(["\n  border-radius: 4px;\n  background: #fff;\n  box-shadow: ",";\n  border: 1px solid ",";\n"],["\n  border-radius: 4px;\n  background: #fff;\n  box-shadow: ",";\n  border: 1px solid ",";\n"])),(function(e){return e.theme.dropShadowLight}),(function(e){return e.theme.borderLight})),he=Object(i.c)("h2",{target:"ehjw1av1"})(K||(K=Object(r.f)(["\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n  border-bottom: 1px solid ",";\n  background: ",";\n  color: ",";\n  text-transform: uppercase;\n  font-size: ",";\n  padding: ",";\n  margin: 0;\n"],["\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n  border-bottom: 1px solid ",";\n  background: ",";\n  color: ",";\n  text-transform: uppercase;\n  font-size: ",";\n  padding: ",";\n  margin: 0;\n"])),(function(e){return e.theme.borderLight}),(function(e){return e.theme.offWhite}),(function(e){return e.theme.gray3}),(function(e){return e.theme.fontSizeExtraSmall}),Object(O.a)(1)),fe=Object(i.c)("div",{target:"ehjw1av2"})(U||(U=Object(r.f)(["\n  display: grid;\n  grid-template-columns: 100px max-content;\n  grid-gap: ",";\n  margin: ",";\n  margin-top: ",";\n"],["\n  display: grid;\n  grid-template-columns: 100px max-content;\n  grid-gap: ",";\n  margin: ",";\n  margin-top: ",";\n"])),Object(O.a)(3),Object(O.a)(1.5),Object(O.a)(.75)),ge=Object(i.c)("div",{target:"ehjw1av3"})(X||(X=Object(r.f)(["\n  display: grid;\n  grid-template-rows: repeat(auto-fit, minmax(0, max-content));\n  grid-gap: ",";\n  font-size: ",";\n\n  h3 {\n    color: #000;\n    font-size: ",";\n    text-transform: uppercase;\n    margin: "," 0;\n  }\n\n  label {\n    display: grid;\n    grid-template-columns: max-content 1fr max-content;\n    grid-gap: ",";\n    align-items: center;\n    font-weight: normal;\n    white-space: nowrap;\n    height: ",";\n  }\n\n  input,\n  label {\n    margin: 0;\n  }\n"],["\n  display: grid;\n  grid-template-rows: repeat(auto-fit, minmax(0, max-content));\n  grid-gap: ",";\n  font-size: ",";\n\n  h3 {\n    color: #000;\n    font-size: ",";\n    text-transform: uppercase;\n    margin: "," 0;\n  }\n\n  label {\n    display: grid;\n    grid-template-columns: max-content 1fr max-content;\n    grid-gap: ",";\n    align-items: center;\n    font-weight: normal;\n    white-space: nowrap;\n    height: ",";\n  }\n\n  input,\n  label {\n    margin: 0;\n  }\n"])),Object(O.a)(1),(function(e){return e.theme.fontSizeMedium}),(function(e){return e.theme.fontSizeSmall}),Object(O.a)(1),Object(O.a)(.75),Object(O.a)(2)),ve=function(e){var t=e.className,n=e.roles,a=e.query,i=e.onChange,s=Object(de.b)(a),c={roles:s.role||[],isInvited:me(s.isInvited),ssoLinked:me(s.ssoLinked),has2fa:me(s.has2fa)},l=function(e){return function(){var t=new Set(s.role?Object(r.i)(s.role):[]);t.has(e)?t.delete(e):t.add(e),i(Object(de.a)(Object(r.a)(Object(r.a)({},s),{role:Object(r.i)(t)})))}},d=function(e){return function(t){var n,a=e,o=(s[a],Object(r.h)(s,["symbol"===ce()(a)?a:a+""])),c=null!==t?Object(r.a)(Object(r.a)({},s),((n={})[e]=[Boolean(t).toString()],n)):o;i(Object(de.a)(c))}};return o.a.createElement(be,{className:t},o.a.createElement(he,null,Object(u.b)("Filter By")),o.a.createElement(fe,null,o.a.createElement(ge,null,o.a.createElement("h3",null,Object(u.b)("User Role")),n.map((function(e){var t=e.id,n=e.name;return o.a.createElement("label",{key:t},o.a.createElement(ue.a,{"data-test-id":"filter-role-"+t,checked:c.roles.includes(t),onChange:l(t)}),n)}))),o.a.createElement(ge,null,o.a.createElement("h3",null,Object(u.b)("Status")),o.a.createElement(pe,{"data-test-id":"filter-isInvited",onChange:d("isInvited"),value:c.isInvited},Object(u.b)("Invited")),o.a.createElement(pe,{"data-test-id":"filter-has2fa",onChange:d("has2fa"),value:c.has2fa},Object(u.b)("2FA")),o.a.createElement(pe,{"data-test-id":"filter-ssoLinked",onChange:d("ssoLinked"),value:c.ssoLinked},Object(u.b)("SSO Linked")))))},je=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.removeMember=function(e){return Object(r.b)(t,void 0,void 0,(function(){var t;return Object(r.e)(this,(function(n){switch(n.label){case 0:return t=this.props.params.orgId,[4,this.api.requestPromise("/organizations/"+t+"/members/"+e+"/",{method:"DELETE",data:{}})];case 1:return n.sent(),this.setState((function(t){return{members:t.members.filter((function(t){return t.id!==e}))}})),[2]}}))}))},t.handleRemove=function(e){var n=e.id,a=e.name;return Object(r.b)(t,void 0,void 0,(function(){var e,t;return Object(r.e)(this,(function(r){switch(r.label){case 0:e=this.props.organization,t=e.slug,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.removeMember(n)];case 2:return r.sent(),[3,4];case 3:return r.sent(),Object(c.a)(Object(u.c)("Error removing [name] from [orgName]",{name:a,orgName:t})),[2];case 4:return Object(c.d)(Object(u.c)("Removed [name] from [orgName]",{name:a,orgName:t})),[2]}}))}))},t.handleLeave=function(e){var n=e.id;return Object(r.b)(t,void 0,void 0,(function(){var e,t;return Object(r.e)(this,(function(r){switch(r.label){case 0:e=this.props.organization,t=e.slug,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.removeMember(n)];case 2:return r.sent(),[3,4];case 3:return r.sent(),Object(c.a)(Object(u.c)("Error leaving [orgName]",{orgName:t})),[2];case 4:return Object(f.d)({orgId:t,removeOrg:!0}),Object(c.d)(Object(u.c)("You left [orgName]",{orgName:t})),[2]}}))}))},t.handleSendInvite=function(e){var n=e.id,a=e.expired;return Object(r.b)(t,void 0,void 0,(function(){return Object(r.e)(this,(function(e){switch(e.label){case 0:this.setState((function(e){var t;return{invited:Object(r.a)(Object(r.a)({},e.invited),(t={},t[n]="loading",t))}})),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Object(g.d)(this.api,{orgId:this.props.params.orgId,memberId:n,regenerate:a})];case 2:return e.sent(),[3,4];case 3:return e.sent(),this.setState((function(e){var t;return{invited:Object(r.a)(Object(r.a)({},e.invited),(t={},t[n]=null,t))}})),Object(c.a)(Object(u.b)("Error sending invite")),[2];case 4:return this.setState((function(e){var t;return{invited:Object(r.a)(Object(r.a)({},e.invited),(t={},t[n]="success",t))}})),[2]}}))}))},t}return Object(r.d)(t,e),t.prototype.getDefaultState=function(){return Object(r.a)(Object(r.a)({},e.prototype.getDefaultState.call(this)),{members:[],invited:{}})},t.prototype.getEndpoints=function(){var e=this.props.params.orgId;return[["members","/organizations/"+e+"/members/",{},{paginate:!0}],["member","/organizations/"+e+"/members/me/",{},{allowError:function(e){return 404===e.status}}],["authProvider","/organizations/"+e+"/auth-provider/",{},{allowError:function(e){return 403===e.status}}]]},t.prototype.getTitle=function(){var e=this.props.organization.slug;return Object(b.a)(Object(u.b)("Members"),e,!1)},t.prototype.renderBody=function(){var e=this,t=this.props,n=t.params,a=t.organization,c=t.routes,l=this.state,b=l.membersPageLinks,h=l.members,f=l.member,g=a.name,v=a.access,S=v.includes("member:write"),w=v.includes("member:admin"),z=m.default.get("user"),R=!h.find((function(e){var t=e.role,n=e.email,r=e.pending;return"owner"===t&&n!==z.email&&!r})),q=!!this.state.authProvider&&this.state.authProvider.require_link;return o.a.createElement(o.a.Fragment,null,this.renderSearchInput({updateRoute:!0,placeholder:Object(u.b)("Search Members"),children:function(e){var t=e.defaultSearchBar,n=e.value,a=e.handleChange;return o.a.createElement(ye,null,t,o.a.createElement(y.a,{closeOnEscape:!0},(function(e){var t=e.getActorProps,i=e.isOpen;return o.a.createElement(Oe,null,o.a.createElement(j.a,Object(r.a)({size:"small",icon:"icon-sliders"},t({isStyled:!0})),Object(u.b)("Search Filters")),i&&o.a.createElement(Ee,{roles:f.roles||E.w,query:n,onChange:function(e){return a(e)}}))})))},className:Object(i.a)(H||(H=Object(r.f)(["\n            font-size: ",";\n            padding: ",";\n          "],["\n            font-size: ",";\n            padding: ",";\n          "])),x.a.fontSizeMedium,Object(O.a)(.75))}),o.a.createElement(s.a,{"data-test-id":"org-member-list"},o.a.createElement(s.e,null,Object(u.b)("Members")),o.a.createElement(s.c,null,h.map((function(t){return o.a.createElement(W,{routes:c,params:n,key:t.id,member:t,status:e.state.invited[t.id],orgId:n.orgId,orgName:g,memberCanLeave:!R,currentUser:z,canRemoveMembers:w,canAddMembers:S,requireLink:q,onSendInvite:e.handleSendInvite,onRemove:e.handleRemove,onLeave:e.handleLeave})})),0===h.length&&o.a.createElement(d.a,null,Object(u.b)("No members found.")))),o.a.createElement(p.a,{pageLinks:b}))},t.propTypes={organization:h.b.Organization},t}(l.a),ye=Object(i.c)("div",{target:"e1aebs7b0"})(J||(J=Object(r.f)(["\n  display: grid;\n  grid-template-columns: 1fr max-content;\n  grid-gap: ",";\n  margin-bottom: ",";\n  position: relative;\n"],["\n  display: grid;\n  grid-template-columns: 1fr max-content;\n  grid-gap: ",";\n  margin-bottom: ",";\n  position: relative;\n"])),Object(O.a)(1.5),Object(O.a)(3)),Oe=Object(i.c)("div",{target:"e1aebs7b1"})(V||(V=Object(r.f)(["\n  position: relative;\n"],["\n  position: relative;\n"]))),Ee=Object(i.c)(ve,{target:"e1aebs7b2"})($||($=Object(r.f)(["\n  position: absolute;\n  right: 0;\n  top: 42px;\n  z-index: ",";\n\n  &:before,\n  &:after {\n    position: absolute;\n    top: -16px;\n    right: 32px;\n    content: '';\n    height: 16px;\n    width: 16px;\n    border: 8px solid transparent;\n    border-bottom-color: ",";\n  }\n\n  &:before {\n    margin-top: -1px;\n    border-bottom-color: ",";\n  }\n"],["\n  position: absolute;\n  right: 0;\n  top: 42px;\n  z-index: ",";\n\n  &:before,\n  &:after {\n    position: absolute;\n    top: -16px;\n    right: 32px;\n    content: '';\n    height: 16px;\n    width: 16px;\n    border: 8px solid transparent;\n    border-bottom-color: ",";\n  }\n\n  &:before {\n    margin-top: -1px;\n    border-bottom-color: ",";\n  }\n"])),(function(e){return e.theme.zIndex.dropdown}),(function(e){return e.theme.offWhite}),(function(e){return e.theme.borderLight}));t.default=Object(v.a)(je)}}]);
//# sourceMappingURL=OrganizationMembersList.js.map