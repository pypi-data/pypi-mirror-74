(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[115,76],{1632:function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(251),o=n.n(a);t.a=function(e){var t=e.title+" - "+e.objSlug+" - Sentry";return i.a.createElement(o.a,{title:t},e.children)}},1633:function(e,t,n){"use strict";var r=n(20),i=n.n(r),a=n(1),o=n.n(a),s=n(0),l=n.n(s),c=n(3),u=n(19),p=Object(c.c)((function(e){var t=e.children,n=e.icon,r=(e.priority,e.size,e.border,i()(e,["children","icon","priority","size","border"]));return l.a.createElement("div",r,n&&l.a.createElement(d,{src:n,size:"12px"}),t)}),{target:"e6q9yfr0"})("display:inline-flex;box-sizing:border-box;padding:",(function(e){return"small"===e.size?"0.1em 0.4em 0.2em":"0.35em 0.8em 0.4em"}),";font-size:75%;line-height:1;color:",(function(e){return e.priority?"#fff":e.gray5}),";text-align:center;white-space:nowrap;vertical-align:middle;border-radius:",(function(e){return"small"===e.size?"0.25em":"2em"}),";text-transform:lowercase;font-weight:",(function(e){return"small"===e.size?"bold":"normal"}),";background:",(function(e){return e.priority?e.theme.alert[e.priority].background:e.theme.offWhite2}),";",(function(e){return function(e){return e.border?"border: 1px solid ".concat(e.priority?e.theme.alert[e.priority].border:e.theme.gray1,";"):""}(e)}),";",(function(e){return function(e){return e.inline?"margin-left: ".concat("small"===e.size?"0.25em":"0.5em",";"):""}(e)}),";");p.propTypes={priority:o.a.string,size:o.a.string,border:o.a.bool,icon:o.a.string,inline:o.a.bool};var d=Object(c.c)(u.a,{target:"e6q9yfr1"})("margin-right:4px;");t.a=p},1693:function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(3),o=n(1633),s=n(39),l=n(11),c=n(4),u=function(){return i.a.createElement(s.a,{title:Object(c.b)("This feature is in beta and may change in the future."),position:"right"},i.a.createElement(p,{priority:"beta",size:"small"},Object(c.b)("beta")))};u.displayName="BetaTag";var p=Object(a.c)(o.a,{target:"e1xs0x250"})("position:relative;top:-1px;font-size:",(function(e){return e.theme.fontSizeSmall}),";font-weight:normal;padding:3px 6px;margin-left:",Object(l.a)(.5),";border-radius:20px;");t.a=u},1744:function(e,t,n){var r=n(579),i=n(799),a=Object.prototype.hasOwnProperty,o=i((function(e,t,n){a.call(e,n)?e[n].push(t):r(e,n,[t])}));e.exports=o},1745:function(e,t,n){"use strict";var r=n(2),i=n(1),a=n.n(i),o=n(0),s=n.n(o),l=n(99),c=n.n(l),u=n(4),p=n(68),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dialog=null,t.openDialog=function(e){var n=t.props.provider.setupDialog,i=n.url,a=n.width,o=n.height,s=t.computeCenteredWindow(a,o),l=s.left,u=s.top,p=Object(r.a)({},e);t.props.reinstallId&&(p.reinstall_id=t.props.reinstallId),t.props.account&&(p.account=t.props.account);var d=i+"?"+c.a.stringify(p),g="scrollbars=yes,width="+a+",height="+o+",top="+u+",left="+l;t.dialog=window.open(d,"sentryAddIntegration",g),t.dialog&&t.dialog.focus()},t.didReceiveMessage=function(e){if(e.origin===document.location.origin&&e.source===t.dialog){var n=e.data,r=n.success,i=n.data;t.dialog=null,r?i&&(t.props.onInstall(i),p.a.addSuccess(Object(u.b)(t.props.provider.name+" added"))):p.a.addError(i.error)}},t}return Object(r.d)(t,e),t.prototype.componentDidMount=function(){window.addEventListener("message",this.didReceiveMessage)},t.prototype.componentWillUnmount=function(){window.removeEventListener("message",this.didReceiveMessage),this.dialog&&this.dialog.close()},t.prototype.computeCenteredWindow=function(e,t){var n=void 0!==window.screenLeft?window.screenLeft:window.screenX,r=void 0!==window.screenTop?window.screenTop:window.screenY;return{left:(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-e/2+n,top:(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-t/2+r}},t.prototype.render=function(){return this.props.children(this.openDialog)},t.propTypes={children:a.a.func.isRequired,provider:a.a.object.isRequired,onInstall:a.a.func.isRequired,reinstallId:a.a.string,account:a.a.string},t}(s.a.Component);t.a=d},1832:function(e,t,n){"use strict";var r=n(2),i=n(0),a=n.n(i),o=n(4),s=n(340),l=n(90),c=function(e){var t=e.access,n=Object(r.h)(e,["access"]);return a.a.createElement(s.a,{access:t},(function(e){return!e.hasAccess&&a.a.createElement(l.b,Object(r.a)({type:"warning",icon:"icon-warning-sm"},n),Object(o.b)("These settings can only be edited by users with the organization owner or manager role."))}))};c.defaultProps={access:["org:write"]},t.a=c},1834:function(e,t,n){var r=n(579),i=n(799)((function(e,t,n){r(e,n,t)}));e.exports=i},1879:function(e,t,n){"use strict";var r=n(2),i=n(144),a=n(1),o=n.n(a),s=n(0),l=n.n(s),c=n(3),u=n(4),p=n(1636),d=Object(c.c)("img",{target:"e18es4220"})(m||(m=Object(r.f)(["\n  height: ","px;\n  width: ","px;\n  border-radius: 2px;\n  display: block;\n"],["\n  height: ","px;\n  width: ","px;\n  border-radius: 2px;\n  display: block;\n"])),(function(e){return e.size}),(function(e){return e.size})),g=function(e){var t=e.integration,n=e.size;return t.icon?l.a.createElement(d,{size:n,src:t.icon}):l.a.createElement(p.a,{size:n,pluginId:t.provider.key})};g.defaultProps={size:32};var m,f,b,h,v=g,y=n(39),O=n(11),j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.integration,n=e.compact;return l.a.createElement(i.b,null,l.a.createElement(i.a,null,l.a.createElement(v,{size:n?22:32,integration:t})),l.a.createElement(I,{compact:n},l.a.createElement(E,{"data-test-id":"integration-name"},t.name,"disabled"===t.status&&l.a.createElement(y.a,{title:Object(u.b)("This Integration has been disconnected from the external provider")},l.a.createElement("small",null," â€” ",Object(u.b)("Disabled")))),l.a.createElement(w,{compact:n},t.domainName)))},t.propTypes={integration:o.a.object.isRequired,compact:o.a.bool},t.defaultProps={compact:!1},t}(l.a.Component),I=(t.a=j,Object(c.c)("div",{target:"e5rwe00"})(f||(f=Object(r.f)(["\n  box-sizing: border-box;\n  display: flex;\n  ",";\n  flex-direction: ",";\n  padding-left: ",";\n  min-width: 0;\n"],["\n  box-sizing: border-box;\n  display: flex;\n  ",";\n  flex-direction: ",";\n  padding-left: ",";\n  min-width: 0;\n"])),(function(e){return e.compact?"align-items: center;":""}),(function(e){return e.compact?"row":"column"}),Object(O.a)(1))),E=Object(c.c)("div",{target:"e5rwe01"})(b||(b=Object(r.f)(["\n  font-size: 1.6rem;\n"],["\n  font-size: 1.6rem;\n"]))),w=Object(c.c)("div",{target:"e5rwe02"})(h||(h=Object(r.f)(["\n  color: ",";\n  margin-left: ",";\n  margin-top: ",";\n  font-size: 1.4rem;\n  line-height: 1.2;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"],["\n  color: ",";\n  margin-left: ",";\n  margin-top: ",";\n  font-size: 1.4rem;\n  line-height: 1.2;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"])),(function(e){return e.compact?e.theme.gray1:e.theme.gray3}),(function(e){return e.compact?Object(O.a)(1):"inherit"}),(function(e){return e.compact?"inherit":Object(O.a)(.25)}))},1964:function(e,t,n){"use strict";var r=n(2),i=n(1),a=n.n(i),o=n(0),s=n.n(o),l=n(4),c=n(1745),u=n(27),p=n(39),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.provider,n=e.buttonText,i=e.onAddIntegration,a=e.reinstall,o=Object(r.h)(e,["provider","buttonText","onAddIntegration","reinstall"]),d=n||Object(l.b)(a?"Enable":"Add %s",t.metadata.noun);return s.a.createElement(p.a,{disabled:t.canAdd,title:"Integration cannot be added on Sentry. Enable this integration via the "+t.name+" instance."},s.a.createElement(c.a,{provider:t,onInstall:i},(function(e){return s.a.createElement(u.a,Object(r.a)({disabled:!t.canAdd},o,{onClick:function(){return e()}}),d)})))},t.propTypes={provider:a.a.object.isRequired,onAddIntegration:a.a.func.isRequired,buttonText:a.a.string,reinstall:a.a.bool},t}(s.a.Component);t.a=d},1965:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var r=n(51),i=n(4);function a(e,t,n){Object(r.b)();var a=e.requestPromise("/organizations/"+t+"/sentry-app-installations/",{method:"POST",data:{slug:n.slug}});return a.then((function(){return Object(r.e)()}),(function(){return Object(r.a)(Object(i.b)("Unable to install "+n.name))})),a}function o(e,t){Object(r.b)();var n=e.requestPromise("/sentry-app-installations/"+t.uuid+"/",{method:"DELETE"});return n.then((function(){Object(r.d)(Object(i.b)(t.app.slug+" successfully uninstalled."))}),(function(){return Object(r.e)()})),n}},2254:function(e,t){e.exports=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i}},2646:function(e,t,n){"use strict";n.r(t);var r=n(2),i=n(2254),a=n.n(i),o=n(1744),s=n.n(o),l=n(1834),c=n.n(l),u=n(0),p=n.n(u),d=n(3),g=n(250),m=n(51),f=n(28),b=n(2081),h=n(21),v=n(4),y=n(1609),O=n(50),j=n(45),I=n.n(j),E=n(6),w=n.n(E),x=n(7),z=n.n(x),R=n(9),A=n.n(R),P=n(8),k=n.n(P),C=n(10),T=n.n(C),q=n(1745),S=n(1688),D=function(e){function t(){return w()(this,t),A()(this,k()(t).apply(this,arguments))}return T()(t,e),z()(t,[{key:"getEndpoints",value:function(){var e=this.props.orgId;return[["unmigratableRepos","/organizations/".concat(e,"/repos/?status=unmigratable")]]}},{key:"render",value:function(){var e=this;return Object.entries(this.unmigratableReposByOrg).map((function(t){var n=I()(t,2),r=n[0],i=n[1],a="visualstudio"===i[0].provider.id?"vsts":i[0].provider.id,o=e.props.providers.find((function(e){return e.key===a}));return o?p.a.createElement(q.a,{key:o.key,provider:o,onInstall:e.props.onInstall},(function(e){return p.a.createElement(S.a,{onClick:function(){return e()},href:"#"},Object(v.c)("Your [orgName] repositories can't send commit data to Sentry. Add a [orgName] [providerName] instance here.",{orgName:r,providerName:o.name}))})):""}))}},{key:"unmigratableReposByOrg",get:function(){return s()(this.state.unmigratableRepos,(function(e){return e.name.split("/")[0]}))}}]),t}(y.a);D.displayName="MigrationWarnings";var U,M,N,L,W,_,B,F,H,V,Y,J=n(1832),X=n(144),G=n(276),K=n(1),Q=n.n(K),Z=n(83),$=n(27),ee=n(1693),te=n(1700),ne=n(340),re=n(1964),ie=n(90),ae=n(252),oe=n(1879),se=n(39),le=["commits","alert-rule"],ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.reinstallIntegration=function(){var e=Object.assign({},t.props.integration,{status:"active"});t.props.onReinstallIntegration(e)},t}return Object(r.d)(t,e),t.prototype.hasConfiguration=function(){var e=this.props,t=e.integration,n=e.provider;return t.configOrganization.length>0||n.features.filter((function(e){return le.includes(e)})).length>0},t.prototype.getRemovalBodyAndText=function(e){return e&&e.removal_dialog?{body:e.removal_dialog.body,actionText:e.removal_dialog.actionText}:{body:Object(v.b)("Deleting this integration will remove any project associated data. This action cannot be undone. Are you sure you want to delete this integration?"),actionText:Object(v.b)("Delete")}},Object.defineProperty(t.prototype,"removeConfirmProps",{get:function(){var e=this,t=this.props.integration,n=this.getRemovalBodyAndText(t.provider.aspects),r=n.body,i=n.actionText;return{message:p.a.createElement(p.a.Fragment,null,p.a.createElement(ie.b,{type:"error",icon:"icon-circle-exclamation"},"Deleting this integration has consequences!"),r),confirmText:i,onConfirm:function(){return e.props.onRemove(t)}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disableConfirmProps",{get:function(){var e=this,t=this.props.integration,n=t.provider.aspects.disable_dialog,r=n.body,i=n.actionText;return{message:p.a.createElement(p.a.Fragment,null,p.a.createElement(ie.b,{type:"error",icon:"icon-circle-exclamation"},"This integration cannot be removed on Sentry"),r),confirmText:i,onConfirm:function(){return e.props.onDisable(t)}}},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=this,t=this.props,n=t.className,i=t.integration,a=t.provider,o=t.orgId,s="active"===i.status&&i.provider.canDisable?this.disableConfirmProps:this.removeConfirmProps;return p.a.createElement(ne.a,{access:["org:integrations"]},(function(t){var l=t.hasAccess;return p.a.createElement(pe,{key:i.id,className:n},p.a.createElement(de,null,p.a.createElement(oe.a,{compact:!0,integration:i})),p.a.createElement("div",null,"disabled"===i.status&&p.a.createElement(re.a,{size:"xsmall",priority:"success",provider:a,onAddIntegration:e.reinstallIntegration,reinstall:!0}),"active"===i.status&&p.a.createElement(se.a,{disabled:e.hasConfiguration(),position:"left",title:"Integration not configurable"},p.a.createElement(ue,{borderless:!0,icon:"icon-settings",disabled:!e.hasConfiguration()||!l,to:"/settings/"+o+"/integrations/"+a.key+"/"+i.id+"/","data-test-id":"integration-configure-button"},"Configure"))),p.a.createElement("div",null,p.a.createElement(ae.a,Object(r.a)({priority:"danger",disabled:!l},s),p.a.createElement(ue,{disabled:!l,borderless:!0,icon:"icon-trash","data-test-id":"integration-remove-button"},"Uninstall"))))}))},t.propTypes={orgId:Q.a.string.isRequired,provider:Q.a.object.isRequired,integration:Q.a.object.isRequired,onRemove:Q.a.func.isRequired,onDisable:Q.a.func.isRequired,onReinstallIntegration:Q.a.func.isRequired},t}(p.a.Component),ue=Object(d.c)($.a,{target:"eau7gon0"})(U||(U=Object(r.f)(["\n  color: ",";\n"],["\n  color: ",";\n"])),(function(e){return e.theme.gray2})),pe=Object(d.c)("div",{target:"eau7gon1"})(M||(M=Object(r.f)(["\n  display: flex;\n  align-items: center;\n"],["\n  display: flex;\n  align-items: center;\n"]))),de=Object(d.c)("div",{target:"eau7gon2"})(N||(N=Object(r.f)(["\n  flex: 1;\n"],["\n  flex: 1;\n"]))),ge=n(98),me=n(1636),fe=n(53),be=n(11),he=n(120),ve=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.openModal=function(){var e=t.context.organization,n=t.props.provider,r=t.props.onInstall;Object(Z.i)({provider:n,organization:e,onAddIntegration:r})},t}return Object(r.d)(t,e),Object.defineProperty(t.prototype,"integrations",{get:function(){return this.props.integrations},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEnabled",{get:function(){return this.integrations.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEnabledPlugin",{get:function(){return this.props.enabledPlugins.includes(this.props.provider.key)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUpgradable",{get:function(){return t.upgradableIntegrations.includes(this.props.provider.key)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buttonProps",{get:function(){var e=!this.isEnabled&&this.isEnabledPlugin&&this.isUpgradable;return{icon:e?"icon-upgrade":"icon-circle-add",children:this.isEnabled?Object(v.b)("Add Another"):e?Object(v.b)("Update"):Object(v.b)("Install")}},enumerable:!0,configurable:!0}),t.prototype.renderIntegrations=function(){var e=this;return this.integrations.map((function(t){return p.a.createElement(Ee,{key:t.id,orgId:e.props.orgId,provider:e.props.provider,integration:t,onRemove:e.props.onRemove,onDisable:e.props.onDisable,onReinstallIntegration:e.props.onReinstall,"data-test-id":t.id,newlyAdded:t.id===e.props.newlyInstalledIntegrationId})}))},t.prototype.render=function(){var e="pagerduty"===this.props.provider.key;return p.a.createElement(g.f,{p:0,direction:"column","data-test-id":this.props.provider.key},p.a.createElement(X.b,{align:"center",p:2},p.a.createElement(me.a,{size:36,pluginId:this.props.provider.key}),p.a.createElement(X.a,{px:2,flex:1},p.a.createElement(ye,null,this.props.provider.name,e&&p.a.createElement(ee.a,null)),p.a.createElement(Oe,null,p.a.createElement(je,{enabled:this.isEnabled}),p.a.createElement(we,{onClick:this.openModal},"Learn More"))),p.a.createElement(X.a,null,p.a.createElement($.a,Object(r.a)({size:"small",onClick:this.openModal},this.buttonProps)))),this.renderIntegrations())},t.contextTypes={organization:fe.b.Organization},t.propTypes={provider:Q.a.object.isRequired,integrations:Q.a.array.isRequired,orgId:Q.a.string.isRequired,onInstall:Q.a.func.isRequired,onRemove:Q.a.func.isRequired,onDisable:Q.a.func.isRequired,onReinstall:Q.a.func.isRequired,enabledPlugins:Q.a.array,newlyInstalledIntegrationId:Q.a.string},t.defaultProps={enabledPlugins:[]},t.upgradableIntegrations=["vsts","bitbucket","github","github_enterprise"],t}(p.a.Component),ye=Object(d.c)("div",{target:"el5bj1z0"})(L||(L=Object(r.f)(["\n  font-weight: bold;\n"],["\n  font-weight: bold;\n"]))),Oe=Object(d.c)(X.b,{target:"el5bj1z1"})(W||(W=Object(r.f)(["\n  align-items: center;\n  margin-top: 6px;\n  font-size: 0.8em;\n"],["\n  align-items: center;\n  margin-top: 6px;\n  font-size: 0.8em;\n"]))),je=Object(d.c)(Object(G.b)((function(e){var t=e.enabled,n=Object(r.h)(e,["enabled"]);return p.a.createElement(X.b,{align:"center"},p.a.createElement(te.a,{enabled:t,size:6,color:t?n.theme.success:n.theme.gray2}),p.a.createElement("div",Object(r.a)({},n),t?Object(v.b)("Installed"):Object(v.b)("Not Installed")))})),{target:"el5bj1z2"})(_||(_=Object(r.f)(["\n  color: ",";\n  margin-left: ",";\n  &:after {\n    content: '|';\n    color: ",";\n    margin-left: ",";\n    font-weight: normal;\n  }\n  margin-right: ",";\n"],["\n  color: ",";\n  margin-left: ",";\n  &:after {\n    content: '|';\n    color: ",";\n    margin-left: ",";\n    font-weight: normal;\n  }\n  margin-right: ",";\n"])),(function(e){return e.enabled?e.theme.success:e.theme.gray2}),Object(be.a)(.5),(function(e){return e.theme.gray1}),Object(be.a)(.75),Object(be.a)(.75)),Ie=Object(d.c)("div",{target:"el5bj1z3"})(B||(B=Object(r.f)(["\n  overflow: hidden;\n  transform-origin: 0 auto;\n  animation: "," 160ms 500ms ease-in-out forwards,\n    "," 1000ms 500ms ease-in-out forwards;\n"],["\n  overflow: hidden;\n  transform-origin: 0 auto;\n  animation: "," 160ms 500ms ease-in-out forwards,\n    "," 1000ms 500ms ease-in-out forwards;\n"])),Object(he.d)("59px"),(function(e){return Object(he.f)(e.theme.yellowLightest)})),Ee=Object(d.c)((function(e){return e.newlyAdded?p.a.createElement(Ie,null,p.a.createElement(ce,Object(r.a)({},e))):p.a.createElement(ce,Object(r.a)({},e))}),{target:"el5bj1z4"})(F||(F=Object(r.f)(["\n  padding: ",";\n  padding-left: 0;\n  margin-left: 68px;\n  border-top: 1px dashed ",";\n"],["\n  padding: ",";\n  padding-left: 0;\n  margin-left: 68px;\n  border-top: 1px dashed ",";\n"])),Object(be.a)(2),(function(e){return e.theme.borderLight})),we=Object(d.c)(ge.a,{target:"el5bj1z5"})(H||(H=Object(r.f)(["\n  color: ",";\n"],["\n  color: ",";\n"])),(function(e){return e.theme.gray2})),xe=n(2011),ze=n(1965),Re=n(594),Ae=n(1684),Pe=n(68),ke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onCopy=function(){return Object(r.b)(t,void 0,void 0,(function(){return Object(r.e)(this,(function(e){switch(e.label){case 0:return[4,navigator.clipboard.writeText(this.props.installationId)];case 1:return[2,e.sent()]}}))}))},t.handleContinue=function(){t.onCopy(),Pe.a.add("Copied to clipboard","success",{duration:2e3}),setTimeout((function(){window.open("https://app.split.io/org/admin/integrations")}),2e3)},t}return Object(r.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.installationId,n=e.closeModal;return p.a.createElement("div",null,p.a.createElement(Ce,null,"Copy this Installation ID and click to continue. You will use it to finish setup on Split.io."),p.a.createElement(Ce,null,p.a.createElement(Ae.a,{onCopy:this.onCopy},t)),p.a.createElement(Te,null,p.a.createElement($.a,{size:"small",onClick:n},"Close"),p.a.createElement($.a,{size:"small",priority:"primary",onClick:this.handleContinue},"Copy and Open Link")))},t.propTypes={installationId:Q.a.string.isRequired,closeModal:Q.a.func.isRequired},t}(p.a.Component),Ce=Object(d.c)("div",{target:"e14h1mmf0"})(V||(V=Object(r.f)(["\n  margin: 10px;\n"],["\n  margin: 10px;\n"]))),Te=Object(d.c)(Ce,{target:"e14h1mmf1"})(Y||(Y=Object(r.f)(["\n  text-align: right;\n  & button {\n    margin: 5px;\n  }\n"],["\n  text-align: right;\n  & button {\n    margin: 5px;\n  }\n"]))),qe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.redirectUser=function(e){var n=t.props,r=n.organization,i=n.app;if(i.redirectUrl){var a={installationId:e.uuid,code:e.code,orgSlug:r.slug},o=Object(Re.a)(i.redirectUrl,a);window.location.assign(o)}else Object(m.d)(Object(v.b)(i.slug+" successfully installed.")),t.props.onAppInstall(e);["split","split-dev","split-testing"].includes(i.slug)&&Object(Z.k)((function(t){var n=t.closeModal;return p.a.createElement(ke,{installationId:e.uuid,closeModal:n})}))},t.handleInstall=function(){var e=t.props,n=e.organization,r=e.api,i=e.app;Object(ze.a)(r,n.slug,i).then((function(e){t.redirectUser(e)}),(function(){}))},t.handleUninstall=function(e){var n=t.props,r=n.api,i=n.app;Object(ze.b)(r,e).then((function(){return t.props.onAppUninstall()}),(function(){Object(m.a)(Object(v.b)("Unable to uninstall "+i.name))}))},t}return Object(r.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.organization,n=e.install,r=e.app;return p.a.createElement(p.a.Fragment,null,p.a.createElement(xe.a,{app:r,organization:t,onInstall:this.handleInstall,onUninstall:this.handleUninstall,install:n,isOnIntegrationPage:!0}))},t}(p.a.Component),Se=n(1632),De=n(1611),Ue=n(86);function Me(e){return void 0!==e.uuid}n.d(t,"OrganizationIntegrations",(function(){return We}));var Ne,Le,We=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shouldReload=!0,t.reloadOnVisible=!0,t.shouldReloadOnVisible=!0,t.onInstall=function(e){var n,i=c()(t.state.integrations,(function(e){return e.id}));i.hasOwnProperty(e.id)||t.setState({newlyInstalledIntegrationId:e.id});var a=Object(h.s)(Object.values(Object(r.a)(Object(r.a)({},i),((n={})[e.id]=e,n))),(function(e){return e.name}));t.setState({integrations:a})},t.onRemove=function(e){var n=t.props.params.orgId,i=Object(r.i)(t.state.integrations),a=t.state.integrations.filter((function(t){return t.id!==e.id}));t.setState({integrations:a});var o={method:"DELETE",error:function(){t.setState({integrations:i}),Object(m.a)(Object(v.b)("Failed to remove Integration"))}};t.api.request("/organizations/"+n+"/integrations/"+e.id+"/",o)},t.onDisable=function(e){var t,n=Object(r.g)(e.domainName.split("/"),2),i=n[0],a=n[1];t="User"===e.accountType?"https://"+i+"/settings/installations/":"https://"+i+"/organizations/"+a+"/settings/installations/",window.open(t,"_blank")},t.handleRemoveInternalSentryApp=function(e){var n=t.state.orgOwnedApps.filter((function(t){return t.slug!==e.slug}));Object(b.a)(t.api,e).then((function(){t.setState({orgOwnedApps:n})}),(function(){}))},t.handleRemoveAppInstallation=function(e){var n=t.state.appInstalls.filter((function(t){return t.app.slug!==e.slug}));t.setState({appInstalls:n})},t.handleAppInstallation=function(e){t.setState({appInstalls:Object(r.i)([e],t.state.appInstalls)})},t.getAppInstall=function(e){return t.state.appInstalls.find((function(t){return t.app.slug===e.slug}))},t.renderProvider=function(e){var n=t.state.integrations.filter((function(t){return t.provider.key===e.key}));return p.a.createElement(ve,{key:"row-"+e.key,"data-test-id":"integration-row",provider:e,orgId:t.props.params.orgId,integrations:n,onInstall:t.onInstall,onRemove:t.onRemove,onDisable:t.onDisable,onReinstall:t.onInstall,enabledPlugins:t.enabledPlugins,newlyInstalledIntegrationId:t.state.newlyInstalledIntegrationId})},t.renderSentryApp=function(e){var n=t.props.organization;return"internal"===e.status?p.a.createElement(xe.a,{key:"sentry-app-row-"+e.slug,"data-test-id":"internal-integration-row",onRemoveApp:function(){return t.handleRemoveInternalSentryApp(e)},organization:n,install:t.getAppInstall(e),app:e,isOnIntegrationPage:!0}):p.a.createElement(qe,{key:"sentry-app-row-"+e.slug,"data-test-id":"integration-row",api:t.api,organization:n,install:t.getAppInstall(e),onAppUninstall:function(){return t.handleRemoveAppInstallation(e)},onAppInstall:t.handleAppInstallation,app:e})},t.renderIntegration=function(e){return Me(e)?t.renderSentryApp(e):t.renderProvider(e)},t}return Object(r.d)(t,e),t.prototype.componentDidMount=function(){Object(f.a)("integrations.index_viewed",{org_id:parseInt(this.props.organization.id,10)})},t.prototype.getEndpoints=function(){var e=this.props.params.orgId,t=[["config","/organizations/"+e+"/config/integrations/"],["integrations","/organizations/"+e+"/integrations/"],["plugins","/organizations/"+e+"/plugins/",{query:{plugins:["vsts","github","bitbucket"]}}],["orgOwnedApps","/organizations/"+e+"/sentry-apps/"],["publishedApps","/sentry-apps/",{query:{status:"published"}}],["appInstalls","/organizations/"+e+"/sentry-app-installations/"]],n=new URLSearchParams(this.props.location.search).get("extra_app");return n&&t.push(["extraApp","/sentry-apps/"+n+"/"]),t},Object.defineProperty(t.prototype,"enabledPlugins",{get:function(){return a()(this.state.plugins.map((function(e){return e.enabled&&e.slug})))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unmigratableReposByOrg",{get:function(){return s()(this.state.unmigratableRepos,(function(e){return e.name.split("/")[0]}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providers",{get:function(){return this.state.config.providers},enumerable:!0,configurable:!0}),t.prototype.getInstallValue=function(e){var t=this.state.integrations;if(Me(e)){var n=this.getAppInstall(e);return n?"pending"===n.status?1:2:0}return t.find((function(t){return t.provider.key===e.key}))?2:0},t.prototype.sortIntegrations=function(e){var t=this;return e.sort((function(e,t){return e.name.localeCompare(t.name)})).sort((function(e,n){return t.getInstallValue(n)-t.getInstallValue(e)}))},t.prototype.renderBody=function(){var e=this.props.params.orgId,t=this.state,n=t.reloading,r=t.orgOwnedApps,i=t.publishedApps,a=t.extraApp,o=i||[];a&&r.push(a);var s=r.filter((function(e){return!o.find((function(t){return t.slug===e.slug}))})),l=o.concat(s.filter((function(e){return"published"===e.status}))),c=this.sortIntegrations(l.concat(this.providers)),u=this.sortIntegrations(s.filter((function(e){return"unpublished"===e.status}))),d=this.sortIntegrations(s.filter((function(e){return"internal"===e.status}))),m=Object(v.b)("Integrations");return p.a.createElement(p.a.Fragment,null,p.a.createElement(Se.a,{title:m,objSlug:e}),!this.props.hideHeader&&p.a.createElement(De.a,{title:m}),p.a.createElement(J.a,{access:["org:integrations"]}),p.a.createElement(D,{orgId:this.props.params.orgId,providers:this.providers,onInstall:this.onInstall}),p.a.createElement(g.a,null,p.a.createElement(g.e,{disablePadding:!0},p.a.createElement(Be,null,Object(v.b)("Integrations")),n&&p.a.createElement(_e,{mini:!0})),p.a.createElement(g.c,null,c.map(this.renderIntegration))),u.length>0&&p.a.createElement(g.a,null,p.a.createElement(g.e,{disablePadding:!0},p.a.createElement(Be,null,Object(v.b)("Unpublished Integrations")),n&&p.a.createElement(_e,{mini:!0})),p.a.createElement(g.c,null,u.map(this.renderIntegration))),d.length>0&&p.a.createElement(g.a,null,p.a.createElement(g.e,{disablePadding:!0},p.a.createElement(Be,null,Object(v.b)("Internal Integrations")),n&&p.a.createElement(_e,{mini:!0})),p.a.createElement(g.c,null,d.map(this.renderIntegration))))},t}(y.a),_e=Object(d.c)(O.default,{target:"epdhmwq0"})(Ne||(Ne=Object(r.f)(["\n  position: absolute;\n  right: 7px;\n  top: 50%;\n  transform: translateY(-16px);\n"],["\n  position: absolute;\n  right: 7px;\n  top: 50%;\n  transform: translateY(-16px);\n"]))),Be=Object(d.c)("div",{target:"epdhmwq1"})(Le||(Le=Object(r.f)(["\n  flex: 1;\n  padding-left: ",";\n  padding-right: ",";\n"],["\n  flex: 1;\n  padding-left: ",";\n  padding-right: ",";\n"])),Object(be.a)(2),Object(be.a)(2));t.default=Object(Ue.a)(We)}}]);
//# sourceMappingURL=OrganizationIntegrations.js.map