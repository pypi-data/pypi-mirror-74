(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[28],{1610:function(t,e,n){"use strict";var r=n(2),i=n(251),o=n.n(i),a=n(0),s=n.n(a),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.prototype.getTitle=function(){return""},e.prototype.render=function(){var t=this.getTitle();return s.a.createElement(o.a,{title:(t?t+" - ":"")+"Sentry"},this.renderComponent())},e}(n(1609).a);e.a=l},1611:function(t,e,n){"use strict";var r,i,o,a,s,l=n(2),c=n(1),u=n.n(c),p=n(0),d=n.n(p),g=n(3),f=n(11),h=n(337),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(l.d)(e,t),e.prototype.render=function(){var t=this.props,e=t.icon,n=t.title,r=t.action,i=t.tabs,o=t.noTitleStyles,a=Object(l.h)(t,["icon","title","action","tabs","noTitleStyles"]);return d.a.createElement("div",Object(l.a)({},a),d.a.createElement(b,null,e&&d.a.createElement(v,null,e),n&&d.a.createElement(y,{tabs:i,styled:o},d.a.createElement(h.a,null,n)),r&&d.a.createElement(O,{tabs:i},r)),i&&d.a.createElement("div",null,i))},e.propTypes={icon:u.a.node,title:u.a.node.isRequired,action:u.a.node,tabs:u.a.node,noTitleStyles:u.a.bool},e.defaultProps={noTitleStyles:!1},e}(d.a.Component),b=Object(g.c)("div",{target:"e1uay4fd0"})(r||(r=Object(l.f)(["\n  display: flex;\n  align-items: center;\n"],["\n  display: flex;\n  align-items: center;\n"]))),y=Object(g.c)("div",{target:"e1uay4fd1"})(i||(i=Object(l.f)(["\n  ",";\n  margin: ",";\n  flex: 1;\n"],["\n  ",";\n  margin: ",";\n  flex: 1;\n"])),(function(t){return!t.styled&&"\n    font-size: 20px;\n    font-weight: bold;"}),(function(t){return t.tabs?Object(f.a)(4)+" 0 "+Object(f.a)(2):Object(f.a)(4)+" 0"})),v=Object(g.c)("div",{target:"e1uay4fd2"})(o||(o=Object(l.f)(["\n  margin-right: ",";\n"],["\n  margin-right: ",";\n"])),Object(f.a)(1)),O=Object(g.c)("div",{target:"e1uay4fd3"})(a||(a=Object(l.f)(["\n  ",";\n"],["\n  ",";\n"])),(function(t){return t.tabs?"margin-top: "+Object(f.a)(2):null})),S=Object(g.c)(m,{target:"e1uay4fd4"})(s||(s=Object(l.f)(["\n  font-size: 14px;\n  margin-top: -",";\n"],["\n  font-size: 14px;\n  margin-top: -",";\n"])),Object(f.a)(4));e.a=S},1616:function(t,e,n){"use strict";var r=n(2),i=n(197),o=n(1),a=n.n(o),s=n(0),l=n.n(s),c=n(3),u=n(4),p=n(27),d=n(1635),g=n(342),f=n(11);var h=function(t){function e(e,n){var r=t.call(this,e,n)||this;r.model=r.props.model||new d.a,r.onSubmit=function(t){t.preventDefault(),r.model.isSaving||(r.props.onSubmit?r.props.onSubmit(r.model.getData(),r.onSubmitSuccess,r.onSubmitError,t,r.model):r.model.saveForm())},r.onSubmitSuccess=function(t){var e=r.props.onSubmitSuccess;r.model.submitSuccess(t),e&&e(t,r.model)},r.onSubmitError=function(t){var e=r.props.onSubmitError;r.model.submitError(t),e&&e(t,r.model)};var i=e.saveOnBlur,o=e.apiEndpoint,a=e.apiMethod,s=e.resetOnError,l=e.onSubmitSuccess,c=e.onSubmitError,u=e.onFieldChange,p=e.initialData,g=e.allowUndo;return r.model.setInitialData(p),r.model.setFormOptions({resetOnError:s,allowUndo:g,onFieldChange:u,onSubmitSuccess:l,onSubmitError:c,saveOnBlur:i,apiEndpoint:o,apiMethod:a}),r}return Object(r.d)(e,t),e.prototype.getChildContext=function(){return{saveOnBlur:this.props.saveOnBlur,form:this.model}},e.prototype.componentWillUnmount=function(){this.model.reset()},e.prototype.render=function(){var t=this,e=this.props,n=e.className,r=e.children,o=e.footerClass,a=e.footerStyle,s=e.submitDisabled,c=e.submitLabel,u=e.submitPriority,d=e.cancelLabel,g=e.onCancel,f=e.extraButton,h=e.requireChanges,m=e.saveOnBlur,b=e.hideFooter,O=void 0!==b?!b:!m;return l.a.createElement("form",{onSubmit:this.onSubmit,className:n,"data-test-id":this.props["data-test-id"]},l.a.createElement("div",null,"function"==typeof r?r({model:this.model}):r),O&&l.a.createElement(y,{className:o,style:a,saveOnBlur:m},f,l.a.createElement(v,null,g&&l.a.createElement(i.a,null,(function(){return l.a.createElement(p.a,{type:"button",disabled:t.model.isSaving,onClick:g,style:{marginLeft:5}},d)})),l.a.createElement(i.a,null,(function(){return l.a.createElement(p.a,{"data-test-id":"form-submit",priority:u,disabled:t.model.isError||t.model.isSaving||s||!!h&&!t.model.formChanged,type:"submit"},c)})))))},e.propTypes={cancelLabel:a.a.string,onCancel:a.a.func,onSubmit:a.a.func,onSubmitSuccess:a.a.func,onSubmitError:a.a.func,onFieldChange:a.a.func,submitDisabled:a.a.bool,submitLabel:a.a.string,submitPriority:a.a.string,footerClass:a.a.string,footerStyle:a.a.object,extraButton:a.a.element,initialData:a.a.object,requireChanges:a.a.bool,resetOnError:a.a.bool,hideFooter:a.a.bool,allowUndo:a.a.bool,saveOnBlur:a.a.bool,model:a.a.object,apiMethod:a.a.string,apiEndpoint:a.a.string,"data-test-id":a.a.string},e.childContextTypes={saveOnBlur:a.a.bool.isRequired,form:a.a.object.isRequired},e.defaultProps={cancelLabel:Object(u.b)("Cancel"),submitLabel:Object(u.b)("Save Changes"),submitDisabled:!1,submitPriority:"primary",className:"form-stacked",requireChanges:!1,allowUndo:!1,saveOnBlur:!1},e}(l.a.Component);e.a=h;var m,b,y=Object(c.c)("div",{target:"e1r1zmbj0"})(m||(m=Object(r.f)(["\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 25px;\n  border-top: 1px solid #e9ebec;\n  background: none;\n  padding: 16px 0 0;\n  margin-bottom: 16px;\n\n  ",";\n"],["\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 25px;\n  border-top: 1px solid #e9ebec;\n  background: none;\n  padding: 16px 0 0;\n  margin-bottom: 16px;\n\n  ",";\n"])),(function(t){return!t.saveOnBlur&&"\n  "+g.a+" & {\n    margin-top: 0;\n    padding-right: 36px;\n  }\n\n  /* Better padding with form inside of a modal */\n  .modal-content & {\n    padding-right: 30px;\n    margin-left: -30px;\n    margin-right: -30px;\n    margin-bottom: -30px;\n    margin-top: 16px;\n    padding-bottom: 16px;\n  }\n  "})),v=Object(c.c)("div",{target:"e1r1zmbj1"})(b||(b=Object(r.f)(["\n  display: grid;\n  grid-gap: ",";\n  grid-auto-flow: column;\n  justify-content: flex-end;\n  flex: 1;\n"],["\n  display: grid;\n  grid-gap: ",";\n  grid-auto-flow: column;\n  justify-content: flex-end;\n  flex: 1;\n"])),Object(f.a)(1))},1635:function(t,e,n){"use strict";var r=n(2),i=n(110),o=n(44),a=n.n(o),s=n(47),l=n(51),c=n(21),u=n(4),p=n(96),d=function(){function t(t){void 0===t&&(t={});var e=t.initialData,n=Object(r.h)(t,["initialData"]);this.fields=i.l.map(),this.errors=new Map,this.fieldState=new Map,this.fieldDescriptor=new Map,this.snapshots=[],this.initialData={},this.options=n||{},e&&this.setInitialData(e),this.api=new s.a}return t.prototype.reset=function(){this.api&&this.api.clear(),this.api=null,this.fieldDescriptor.clear(),this.resetForm()},t.prototype.resetForm=function(){this.fields.clear(),this.errors.clear(),this.fieldState.clear(),this.snapshots=[],this.initialData={}},Object.defineProperty(t.prototype,"formChanged",{get:function(){return!a()(this.initialData,this.fields.toJSON())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formData",{get:function(){return this.fields},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSaving",{get:function(){return this.formState===p.a.SAVING},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isError",{get:function(){return!!this.errors.size},enumerable:!0,configurable:!0}),t.prototype.setInitialData=function(t){this.fields.replace(t||{}),this.initialData=this.fields.toJSON()||{},this.snapshots=[new Map(this.fields.entries())]},t.prototype.setFormOptions=function(t){this.options=t||{}},t.prototype.setFieldDescriptor=function(t,e){this.fieldDescriptor.set(t,e),void 0!==e.defaultValue&&void 0===this.initialData[t]&&(this.initialData[t]="function"==typeof e.defaultValue?e.defaultValue():e.defaultValue,this.fields.set(t,this.initialData[t])),"function"==typeof e.setValue&&(this.initialData[t]=e.setValue(this.initialData[t],e),this.fields.set(t,this.initialData[t]))},t.prototype.removeField=function(t){this.fieldDescriptor.delete(t),this.errors.delete(t)},t.prototype.createSnapshot=function(){var t=this,e=new Map(this.fields.entries());return function(){return t.snapshots.unshift(e)}},t.prototype.getDescriptor=function(t,e){var n=this.fieldDescriptor.has(t)&&this.fieldDescriptor.get(t);return n?n[e]:null},t.prototype.getFieldState=function(t,e){var n=this.fieldState.has(t)&&this.fieldState.get(t);return n?n[e]:null},t.prototype.getValue=function(t){return this.fields.has(t)?this.fields.get(t):""},t.prototype.getTransformedValue=function(t){var e=this.fieldDescriptor.get(t),n=e&&"function"==typeof e.getValue?e.getValue:null,r=this.getValue(t);return n?n(r):r},t.prototype.getData=function(){return this.fields.toJSON()},t.prototype.getTransformedData=function(){var t=this,e=this.getData();return Object.keys(e).map((function(e){return[e,t.getTransformedValue(e)]})).reduce((function(t,e){var n=Object(r.g)(e,2),i=n[0],o=n[1];return t[i]=o,t}),{})},t.prototype.getError=function(t){return this.errors.has(t)&&this.errors.get(t)},t.prototype.isValidRequiredField=function(t){var e=this.getDescriptor(t,"required"),n=this.getValue(t);return!e||""!==n&&Object(c.c)(n)},t.prototype.isValidField=function(t){return 0===(this.getError(t)||[]).length},t.prototype.doApiRequest=function(t){var e=this,n=t.apiEndpoint,r=t.apiMethod,i=t.data,o=n||this.options.apiEndpoint||"",a=r||this.options.apiMethod;return new Promise((function(t,n){return e.api?e.api.request(o,{method:a,data:i,success:function(e){return t(e)},error:function(t){return n(t)}}):n(new Error("Api not set"))}))},t.prototype.setValue=function(t,e){var n=this.fieldDescriptor.get(t),r=e;n&&"function"==typeof n.transformInput&&(r=n.transformInput(e)),this.fields.set(t,r),this.options.onFieldChange&&this.options.onFieldChange(t,r),this.validateField(t),this.updateShowSaveState(t,r),this.updateShowReturnButtonState(t,r)},t.prototype.validateField=function(t){var e=this,n=this.getDescriptor(t,"validate"),i=[];"function"==typeof n&&(i=n({model:this,id:t,form:this.getData()})||[]);var o=Object(u.b)("Field is required");this.isValidRequiredField(t)||i.push([t,o]),(i=0===i.length?[[t,null]]:i).forEach((function(t){var n=Object(r.g)(t,2),i=n[0],o=n[1];return e.setError(i,o)}))},t.prototype.updateShowSaveState=function(t,e){var n=e!==this.initialData[t],r=this.getDescriptor(t,"saveOnBlur");void 0===r||r||this.getFieldState(t,"showSave")!==n&&this.setFieldState(t,"showSave",n)},t.prototype.updateShowReturnButtonState=function(t,e){var n=e!==this.initialData[t];this.getDescriptor(t,"showReturnButton")&&this.getFieldState(t,"showReturnButton")!==n&&this.setFieldState(t,"showReturnButton",n)},t.prototype.undo=function(){return this.snapshots.length<2?null:(this.snapshots.shift(),this.fields.replace(this.snapshots[0]),!0)},t.prototype.saveForm=function(){var t=this;if(!this.validateForm())return null;var e=this.createSnapshot(),n=this.doApiRequest({data:this.getTransformedData()});return this.setFormSaving(),n.then((function(n){e&&(e(),e=null),t.options.onSubmitSuccess&&t.options.onSubmitSuccess(n,t)})).catch((function(n){e=null,t.options.resetOnError&&t.setInitialData({}),t.submitError(n),t.options.onSubmitError&&t.options.onSubmitError(n,t)})),n},t.prototype.saveField=function(t,e){var n=this,r=this.initialData[t],i=this.saveFieldRequest(t,e);return i?i.then((function(e){var i=n.getValue(t),o={old:r,new:i};return(void 0===n.options.allowUndo||n.options.allowUndo)&&Object(l.g)(o,n,t),n.options.onSubmitSuccess&&n.options.onSubmitSuccess(e,n,t,o),e})).catch((function(e){return n.options.onSubmitError&&n.options.onSubmitError(e,n,t),{}})):null},t.prototype.saveFieldRequest=function(t,e){var n,r=this,i=this.initialData[t];if(e===i||""===e&&!Object(c.c)(i))return null;if(this.validateField(t),!this.isValidField(t))return null;var o=this.createSnapshot();this.setSaving(t,!0);var a=this.fieldDescriptor.get(t),s="function"==typeof a.getData?a.getData:function(t){return t},u=this.doApiRequest({data:s((n={},n[t]=this.getTransformedValue(t),n),{model:this,id:t,form:this.getData()})});return u.then((function(e){return r.setSaving(t,!1),o&&(o(),o=null),r.initialData[t]=r.getValue(t),e})).catch((function(e){o=null,r.getDescriptor(t,"resetOnError")&&r.setValue(t,i),e&&e.responseJSON?Array.isArray(e.responseJSON[t])&&e.responseJSON[t].length?r.setError(t,e.responseJSON[t][0]):Array.isArray(e.responseJSON.non_field_errors)&&e.responseJSON.non_field_errors.length?(Object(l.a)(e.responseJSON.non_field_errors[0],1e4),r.setError(t,"")):r.setError(t,"Failed to save"):r.setError(t,"Failed to save"),console.error("Error saving form field",e&&e.responseJSON)})),u},t.prototype.handleBlurField=function(t,e){if(!this.options.saveOnBlur)return null;var n=this.getDescriptor(t,"saveOnBlur");return void 0===n||n?this.saveField(t,e):null},t.prototype.setFormSaving=function(){this.formState=p.a.SAVING},t.prototype.handleSaveField=function(t,e){var n=this,r=this.saveField(t,e);return r?r.then((function(){n.setFieldState(t,"showSave",!1)})):null},t.prototype.handleCancelSaveField=function(t){this.setValue(t,this.initialData[t]),this.setFieldState(t,"showSave",!1)},t.prototype.setFieldState=function(t,e,n){var i,o=Object(r.a)(Object(r.a)({},this.fieldState.get(t)||{}),((i={})[e]=n,i));this.fieldState.set(t,o)},t.prototype.setSaving=function(t,e){this.setError(t,!1),this.setFieldState(t,p.a.SAVING,e),this.setFieldState(t,p.a.READY,!e)},t.prototype.setError=function(t,e){e?(this.formState=p.a.ERROR,this.errors.set(t,e)):(this.formState=p.a.READY,this.errors.delete(t)),this.setFieldState(t,p.a.SAVING,!1)},t.prototype.validateForm=function(){var t=this;return Array.from(this.fieldDescriptor.keys()).forEach((function(e){return!t.validateField(e)})),!this.isError},t.prototype.handleErrorResponse=function(t){var e=this,n=(void 0===t?{}:t).responseJSON;n&&Object.keys(n).forEach((function(t){"non_field_errors"===t&&Array.isArray(n.non_field_errors)&&n.non_field_errors.length?Object(l.a)(n.non_field_errors[0],1e4):Array.isArray(n[t])&&n[t].length&&e.setError(t,n[t][0])}))},t.prototype.submitSuccess=function(t){this.formState=p.a.READY,this.initialData=t},t.prototype.submitError=function(t){this.formState=p.a.ERROR,this.formErrors=this.mapFormErrors(t.responseJSON),this.handleErrorResponse({responseJSON:this.formErrors})},t.prototype.mapFormErrors=function(t){return t},Object(r.c)([i.l],t.prototype,"errors",void 0),Object(r.c)([i.l],t.prototype,"fieldState",void 0),Object(r.c)([i.l],t.prototype,"formState",void 0),Object(r.c)([i.e],t.prototype,"formChanged",null),Object(r.c)([i.e],t.prototype,"formData",null),Object(r.c)([i.e],t.prototype,"isSaving",null),Object(r.c)([i.e],t.prototype,"isError",null),Object(r.c)([i.d],t.prototype,"setValue",null),Object(r.c)([i.d],t.prototype,"validateField",null),Object(r.c)([i.d],t.prototype,"updateShowSaveState",null),Object(r.c)([i.d],t.prototype,"updateShowReturnButtonState",null),Object(r.c)([i.d],t.prototype,"undo",null),Object(r.c)([i.d],t.prototype,"saveForm",null),Object(r.c)([i.d],t.prototype,"saveField",null),Object(r.c)([i.d],t.prototype,"saveFieldRequest",null),Object(r.c)([i.d],t.prototype,"handleBlurField",null),Object(r.c)([i.d],t.prototype,"setFormSaving",null),Object(r.c)([i.d],t.prototype,"handleSaveField",null),Object(r.c)([i.d],t.prototype,"handleCancelSaveField",null),Object(r.c)([i.d],t.prototype,"setFieldState",null),Object(r.c)([i.d],t.prototype,"setSaving",null),Object(r.c)([i.d],t.prototype,"setError",null),Object(r.c)([i.d],t.prototype,"validateForm",null),Object(r.c)([i.d],t.prototype,"handleErrorResponse",null),Object(r.c)([i.d],t.prototype,"submitSuccess",null),Object(r.c)([i.d],t.prototype,"submitError",null),t}();e.a=d},1745:function(t,e,n){"use strict";var r=n(2),i=n(1),o=n.n(i),a=n(0),s=n.n(a),l=n(99),c=n.n(l),u=n(4),p=n(68),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dialog=null,e.openDialog=function(t){var n=e.props.provider.setupDialog,i=n.url,o=n.width,a=n.height,s=e.computeCenteredWindow(o,a),l=s.left,u=s.top,p=Object(r.a)({},t);e.props.reinstallId&&(p.reinstall_id=e.props.reinstallId),e.props.account&&(p.account=e.props.account);var d=i+"?"+c.a.stringify(p),g="scrollbars=yes,width="+o+",height="+a+",top="+u+",left="+l;e.dialog=window.open(d,"sentryAddIntegration",g),e.dialog&&e.dialog.focus()},e.didReceiveMessage=function(t){if(t.origin===document.location.origin&&t.source===e.dialog){var n=t.data,r=n.success,i=n.data;e.dialog=null,r?i&&(e.props.onInstall(i),p.a.addSuccess(Object(u.b)(e.props.provider.name+" added"))):p.a.addError(i.error)}},e}return Object(r.d)(e,t),e.prototype.componentDidMount=function(){window.addEventListener("message",this.didReceiveMessage)},e.prototype.componentWillUnmount=function(){window.removeEventListener("message",this.didReceiveMessage),this.dialog&&this.dialog.close()},e.prototype.computeCenteredWindow=function(t,e){var n=void 0!==window.screenLeft?window.screenLeft:window.screenX,r=void 0!==window.screenTop?window.screenTop:window.screenY;return{left:(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-t/2+n,top:(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-e/2+r}},e.prototype.render=function(){return this.props.children(this.openDialog)},e.propTypes={children:o.a.func.isRequired,provider:o.a.object.isRequired,onInstall:o.a.func.isRequired,reinstallId:o.a.string,account:o.a.string},e}(s.a.Component);e.a=d},1746:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(2),i=n(47),o=function(t,e,n){return Object(r.b)(void 0,void 0,void 0,(function(){var o,a;return Object(r.e)(this,(function(s){switch(s.label){case 0:return o=new i.a,a="/sentry-apps/"+t+"/interaction/",[4,o.requestPromise(a,{method:"POST",data:Object(r.a)({tsdbField:e},n)})];case 1:return[2,s.sent()]}}))}))}},1965:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var r=n(51),i=n(4);function o(t,e,n){Object(r.b)();var o=t.requestPromise("/organizations/"+e+"/sentry-app-installations/",{method:"POST",data:{slug:n.slug}});return o.then((function(){return Object(r.e)()}),(function(){return Object(r.a)(Object(i.b)("Unable to install "+n.name))})),o}function a(t,e){Object(r.b)();var n=t.requestPromise("/sentry-app-installations/"+e.uuid+"/",{method:"DELETE"});return n.then((function(){Object(r.d)(Object(i.b)(e.app.slug+" successfully uninstalled."))}),(function(){return Object(r.e)()})),n}},2587:function(t,e,n){"use strict";n.r(e);var r=n(6),i=n.n(r),o=n(7),a=n.n(o),s=n(9),l=n.n(s),c=n(8),u=n.n(c),p=n(173),d=n.n(p),g=n(10),f=n.n(g),h=n(0),m=n.n(h),b=n(51),y=n(1610),v=n(1616),O=n(294),S=n(583),j=n(1611),E=n(4),w=function(t){function e(){var t,n;i()(this,e);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=l()(this,(t=u()(e)).call.apply(t,[this].concat(o)))).handleSubmit=function(t){n.api.request("/accept-transfer/",{method:"POST",data:{data:n.props.location.query.data,organization:t.organization},success:function(){var e=t.organization;n.props.router.push("/".concat(e)),Object(b.d)(Object(E.b)("Project successfully transferred"))},error:function(t){var e=t&&t.responseJSON&&"string"==typeof t.responseJSON.detail?t.responseJSON.detail:"";Object(b.a)(Object(E.b)("Unable to transfer project")+e?": ".concat(e):"")}})},n}return f()(e,t),a()(e,[{key:"getEndpoints",value:function(){return[["transferDetails","/accept-transfer/",{query:this.props.location.query}]]}},{key:"getTitle",value:function(){return Object(E.b)("Accept Project Transfer")}},{key:"renderError",value:function(t){var n=!1;t&&t.responseJSON&&"string"==typeof t.responseJSON.detail&&(Object(b.a)(t.responseJSON.detail),n=!0),d()(u()(e.prototype),"renderError",this).call(this,t,n)}},{key:"renderBody",value:function(){var t=this.state.transferDetails,e=[];return t.organizations.forEach((function(t){e.push([t.slug,t.slug])})),m.a.createElement(O.a,null,m.a.createElement(j.a,{title:Object(E.b)("Approve Transfer Project Request")}),m.a.createElement("p",null,Object(E.c)("Projects must be transferred to a specific [organization]. You can grant specific teams access to the project later under the [projectSettings]. (Note that granting access to at least one team is necessary for the project to appear in all parts of the UI.)",{organization:m.a.createElement("strong",null,Object(E.b)("Organization")),projectSettings:m.a.createElement("strong",null,Object(E.b)("Project Settings"))})),m.a.createElement("p",null,Object(E.c)("Please select which [organization] you want for the project [project].",{organization:m.a.createElement("strong",null,Object(E.b)("Organization")),project:t.project.slug})),m.a.createElement(v.a,{onSubmit:this.handleSubmit,submitLabel:Object(E.b)("Transfer Project"),submitPriority:"danger",initialData:{organization:e[0]&&e[0][0]}},m.a.createElement(S.a,{choices:e,label:Object(E.b)("Organization"),name:"organization",style:{borderBottom:"none"}})))}}]),e}(y.a);e.default=w},2588:function(t,e,n){"use strict";n.r(e);var r=n(2),i=n(0),o=n.n(i),a=n(3),s=n(4),l=n(1745),c=n(90),u=n(1610),p=n(27),d=n(576),g=n(79),f=n(68),h=n(294),m=n(137),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onInstall=function(t){var n=e.state.organization,r=n&&n.slug;e.props.router.push("/settings/"+r+"/integrations/"+t.provider.key+"/"+t.id)},e.onSelectOrg=function(t){var n=t.value;e.setState({selectedOrg:n,reloading:!0});e.api.request("/organizations/"+n+"/",{success:function(t){return e.setState({organization:t,reloading:!1})},error:function(){e.setState({reloading:!1}),f.a.addError(Object(s.b)("Failed to retrieve organization details"))}}),e.api.request("/organizations/"+n+"/config/integrations/",{success:function(t){return e.setState({providers:t.providers,reloading:!1})},error:function(){e.setState({reloading:!1}),f.a.addError(Object(s.b)("Failed to retrieve integration provider details"))}})},e.hasAccess=function(t){return t.access.includes("org:integrations")},e}return Object(r.d)(e,t),e.prototype.getDefaultState=function(){return Object(r.a)(Object(r.a)({},t.prototype.getDefaultState.call(this)),{selectedOrg:null,organization:null,providers:[]})},e.prototype.getEndpoints=function(){return[["organizations","/organizations/"]]},e.prototype.getTitle=function(){return Object(s.b)("Choose Installation Organization")},Object.defineProperty(e.prototype,"provider",{get:function(){var t=this;return this.state.providers.find((function(e){return e.key===t.props.params.providerId}))},enumerable:!0,configurable:!0}),e.prototype.renderAddButton=function(){var t=this,e=this.state,n=e.organization,i=e.reloading,a=this.props.params.installationId,s=function(t){return o.a.createElement(p.a,Object(r.a)({priority:"primary",busy:i},t),"Install Integration")};return this.provider?o.a.createElement(l.a,{provider:this.provider,onInstall:this.onInstall},(function(e){return o.a.createElement(s,{disabled:!!n&&!t.hasAccess(n),onClick:function(){return e({installation_id:a})}})})):o.a.createElement(s,{disabled:!0})},e.prototype.renderBody=function(){var t=this,e=this.state,n=e.organization,i=e.selectedOrg,a=this.state.organizations.map((function(t){return[t.slug,t.slug]})),l=g.a.get("integrations:feature-gates"),u=l.length?l[0]().FeatureList:null;return o.a.createElement(h.a,null,o.a.createElement("h3",null,Object(s.b)("Finish integration installation")),o.a.createElement("p",null,Object(s.c)("Please pick a specific [organization:organization] to link with\n            your integration installation.",{organization:o.a.createElement("strong",null)})),i&&n&&!this.hasAccess(n)&&o.a.createElement(c.b,{type:"error",icon:"icon-circle-exclamation"},o.a.createElement("p",null,Object(s.c)("You do not have permission to install integrations in\n                  [organization]. Ask an organization owner or manager to\n                  visit this page to finish installing this integration.",{organization:o.a.createElement("strong",null,n.slug)})),o.a.createElement(v,null,window.location.href)),this.provider&&n&&this.hasAccess(n)&&u&&o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,Object(s.c)("The following features will be available for [organization] when installed.",{organization:o.a.createElement("strong",null,n.slug)})),o.a.createElement(u,{organization:n,features:this.provider.metadata.features,provider:this.provider})),o.a.createElement(d.a,{label:Object(s.b)("Organization"),inline:!1,stacked:!0,required:!0},(function(){return o.a.createElement(m.a,{onChange:t.onSelectOrg,value:i,placeholder:Object(s.b)("Select an organization"),options:a.map((function(t){var e=Object(r.g)(t,2);return{value:e[0],label:e[1]}}))})})),o.a.createElement("div",{className:"form-actions"},this.renderAddButton()))},e}(u.a);e.default=b;var y,v=Object(a.c)("pre",{target:"emticm40"})(y||(y=Object(r.f)(["\n  margin-bottom: 0;\n  background: #fbe3e1;\n"],["\n  margin-bottom: 0;\n  background: #fbe3e1;\n"])))},2590:function(t,e,n){"use strict";n.r(e);var r=n(2),i=n(0),o=n.n(i),a=n(3),s=n(145),l=n.n(s),c=n(4),u=n(90),p=n(1610),d=n(576),g=n(68),f=n(294),h=n(137),m=n(417),b=n(1592),y=n(1965),v=n(594),O=n(1746),S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasAccess=function(t){return t.access.includes("org:integrations")},e.onClose=function(){var t=e.state.selectedOrgSlug,n=document.referrer||"/settings/"+t+"/integrations/";window.location.assign(n)},e.onInstall=function(){return Object(r.b)(e,void 0,void 0,(function(){var t,e,n,i,o,a;return Object(r.e)(this,(function(r){switch(r.label){case 0:return t=this.state,e=t.organization,n=t.sentryApp,e&&n?[4,Object(y.a)(this.api,e.slug,n)]:[2,void 0];case 1:return i=r.sent(),n.redirectUrl?(o={installationId:i.uuid,code:i.code,orgSlug:e.slug},a=Object(v.a)(n.redirectUrl,o),[2,window.location.assign(a)]):[2,this.onClose()]}}))}))},e.onSelectOrg=function(t){return Object(r.b)(e,void 0,void 0,(function(){var e,n,i,o;return Object(r.e)(this,(function(a){switch(a.label){case 0:this.setState({selectedOrgSlug:t,reloading:!0}),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Promise.all([this.api.requestPromise("/organizations/"+t+"/"),this.api.requestPromise("/organizations/"+t+"/sentry-app-installations/")])];case 2:return e=r.g.apply(void 0,[a.sent(),2]),n=e[0],i=e[1],o=i.map((function(t){return t.app.slug})).includes(this.sentryAppSlug),this.setState({organization:n,isInstalled:o}),[3,4];case 3:return a.sent(),g.a.addError(Object(c.b)("Failed to retrieve organization or integration details")),[3,4];case 4:return this.setState({reloading:!1}),[2]}}))}))},e.onRequestSuccess=function(t){var n=t.stateKey,r=t.data;"organizations"===n&&1===r.length&&e.onSelectOrg(r[0].slug)},e}return Object(r.d)(e,t),e.prototype.componentDidMount=function(){Object(O.a)(this.sentryAppSlug,"sentry_app_viewed")},e.prototype.getDefaultState=function(){var e=t.prototype.getDefaultState.call(this);return Object(r.a)(Object(r.a)({},e),{selectedOrgSlug:null,organization:null,organizations:[],reloading:!1})},e.prototype.getEndpoints=function(){return[["organizations","/organizations/"],["sentryApp","/sentry-apps/"+this.sentryAppSlug+"/"]]},e.prototype.getTitle=function(){return Object(c.b)("Choose Installation Organization")},Object.defineProperty(e.prototype,"sentryAppSlug",{get:function(){return this.props.params.sentryAppSlug},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSingleOrg",{get:function(){return 1===this.state.organizations.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSentryAppInternal",{get:function(){var t=this.state.sentryApp;return t&&"internal"===t.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSentryAppUnavailableForOrg",{get:function(){var t=this.state,e=t.sentryApp,n=t.selectedOrgSlug;return n&&l()(e,"owner.slug")!==n&&"unpublished"===e.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disableInstall",{get:function(){var t=this.state,e=t.reloading;return t.isInstalled||e||this.isSentryAppUnavailableForOrg},enumerable:!0,configurable:!0}),e.prototype.getOptions=function(){return this.state.organizations.map((function(t){return[t.slug,o.a.createElement("div",{key:t.slug},o.a.createElement(m.a,{organization:t}),o.a.createElement(F,null,t.slug))]}))},e.prototype.renderInternalAppError=function(){var t=this.state.sentryApp;return o.a.createElement(u.b,{type:"error",icon:"icon-circle-exclamation"},Object(c.c)("Integration [sentryAppName] is an internal integration. Internal integrations are automatically installed",{sentryAppName:o.a.createElement("strong",null,t.name)}))},e.prototype.checkAndRenderError=function(){var t=this.state,e=t.organization,n=t.selectedOrgSlug,r=t.isInstalled,i=t.sentryApp;if(n&&e&&!this.hasAccess(e))return o.a.createElement(u.b,{type:"error",icon:"icon-circle-exclamation"},o.a.createElement("p",null,Object(c.c)("You do not have permission to install integrations in\n          [organization]. Ask an organization owner or manager to\n          visit this page to finish installing this integration.",{organization:o.a.createElement("strong",null,e.slug)})),o.a.createElement(D,null,window.location.href));if(r&&e)return o.a.createElement(u.b,{type:"error",icon:"icon-circle-exclamation"},Object(c.c)("Integration [sentryAppName] already installed for [organization]",{organization:o.a.createElement("strong",null,e.name),sentryAppName:o.a.createElement("strong",null,i.name)}));if(this.isSentryAppUnavailableForOrg){var a=l()(i,"owner.slug","another organization");return o.a.createElement(u.b,{type:"error",icon:"icon-circle-exclamation"},Object(c.c)("Integration [sentryAppName] is an unpublished integration for [otherOrg]. An unpublished integration can only be installed on the organization which created it.",{sentryAppName:o.a.createElement("strong",null,i.name),otherOrg:o.a.createElement("strong",null,a)}))}return null},e.prototype.renderMultiOrgView=function(){var t=this,e=this.state,n=e.selectedOrgSlug,r=e.sentryApp;return o.a.createElement("div",null,o.a.createElement("p",null,Object(c.c)("Please pick a specific [organization:organization] to install [sentryAppName]",{organization:o.a.createElement("strong",null),sentryAppName:o.a.createElement("strong",null,r.name)})),o.a.createElement(d.a,{label:Object(c.b)("Organization"),inline:!1,stacked:!0,required:!0},(function(){return o.a.createElement(h.a,{onChange:function(e){var n=e.value;return t.onSelectOrg(n)},value:n,placeholder:Object(c.b)("Select an organization"),choices:t.getOptions()})})))},e.prototype.renderSingleOrgView=function(){var t=this.state,e=t.organizations,n=t.sentryApp,r=e[0].name;return o.a.createElement("div",null,o.a.createElement("p",null,Object(c.c)("You are installing [sentryAppName] for organization [organization]",{organization:o.a.createElement("strong",null,r),sentryAppName:o.a.createElement("strong",null,n.name)})))},e.prototype.renderMainContent=function(){var t=this.state,e=t.organization,n=t.sentryApp;return o.a.createElement("div",null,o.a.createElement(x,null,this.isSingleOrg?this.renderSingleOrgView():this.renderMultiOrgView()),this.checkAndRenderError(),e&&o.a.createElement(b.default,{sentryApp:n,organization:e,onInstall:this.onInstall,closeModal:this.onClose,isInstalled:this.disableInstall,closeOnInstall:!1}))},e.prototype.renderBody=function(){return o.a.createElement(f.a,null,o.a.createElement(A,null,o.a.createElement("h3",null,Object(c.b)("Finish integration installation")),this.isSentryAppInternal?this.renderInternalAppError():this.renderMainContent()))},e}(p.a);e.default=S;var j,E,w,z,D=Object(a.c)("pre",{target:"eixfyet0"})(j||(j=Object(r.f)(["\n  margin-bottom: 0;\n  background: #fbe3e1;\n"],["\n  margin-bottom: 0;\n  background: #fbe3e1;\n"]))),F=Object(a.c)("span",{target:"eixfyet1"})(E||(E=Object(r.f)(["\n  margin-left: 5px;\n"],["\n  margin-left: 5px;\n"]))),A=Object(a.c)("div",{target:"eixfyet2"})(w||(w=Object(r.f)(["\n  margin-bottom: 40px;\n"],["\n  margin-bottom: 40px;\n"]))),x=Object(a.c)("div",{target:"eixfyet3"})(z||(z=Object(r.f)(["\n  margin-bottom: 20px;\n"],["\n  margin-bottom: 20px;\n"])))}}]);
//# sourceMappingURL=AcceptProjectTransfer.js.map