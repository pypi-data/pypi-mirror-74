(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[111],{1629:function(e,t,r){"use strict";var n=r(2),a=r(1),s=r.n(a),o=r(0),i=r.n(o),u=r(93),c=r.n(u),l=r(33),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getFormat=function(e){var r=e.clock24Hours,n=t.props,a=n.dateOnly,s=n.timeOnly,o=n.seconds,i=n.shortDate;return a?"LL":s?"LT":i?"MM/DD/YYYY":r?"MMMM D YYYY HH:mm:ss z":o?"ll LTS z":"lll"},t}return Object(n.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.date,r=(e.seconds,e.shortDate,e.dateOnly,e.utc),a=(e.timeOnly,Object(n.h)(e,["date","seconds","shortDate","dateOnly","utc","timeOnly"])),s=l.default.get("user"),o=s?s.options:{},u=this.getFormat(o);return i.a.createElement("time",Object(n.a)({},a),r?c.a.utc(t).format(u):c.a.tz(t,o.timezone).format(u))},t.propTypes={date:s.a.any.isRequired,dateOnly:s.a.bool,timeOnly:s.a.bool,shortDate:s.a.bool,seconds:s.a.bool,utc:s.a.bool},t.defaultProps={seconds:!0},t}(i.a.Component);t.a=p},1683:function(e,t,r){"use strict";r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return c}));var n=r(2),a=r(1),s=r.n(a),o=r(0),i=r.n(o);function u(e,t){var r=e.split(" ")[0],n=e.split(" ").splice(1).join(" "),a=t.generationByIdentifier(r);return void 0===a?e:a+" "+n}function c(){return Object(n.b)(this,void 0,void 0,(function(){return Object(n.e)(this,(function(e){return[2,r.e(185).then(r.t.bind(null,1805,7))]}))}))}var l=function(e){function t(t){var r=e.call(this,t)||this;return r.state={iOSDeviceList:null},r}return Object(n.d)(t,e),t.prototype.componentDidMount=function(){var e=this;this._isMounted=!0,c().then((function(t){e._isMounted&&e.setState({iOSDeviceList:t})}))},t.prototype.componentWillUnmount=function(){this._isMounted=!1},t.prototype.render=function(){var e=this.props.children,t=this.state.iOSDeviceList;return e?t?i.a.createElement("span",{"data-test-id":"loaded-device-name"},u(e,t)):e:null},t.propTypes={children:s.a.string},t}(i.a.Component);t.a=l},1686:function(e,t,r){"use strict";var n=r(0),a=r.n(n),s=r(21),o=r(338);t.a=function(e){var t=e.className,r=e.bytes;return a.a.createElement("span",{className:t},Object(o.a)({value:Object(s.i)(r),fixed:"xx KB"}))}},1696:function(e,t,r){"use strict";var n=r(6),a=r.n(n),s=r(7),o=r.n(s),i=r(9),u=r.n(i),c=r(8),l=r.n(c),p=r(10),d=r.n(p),h=r(0),m=r.n(h),y=r(36),f=r.n(y),v=function(e){function t(){var e,r;a()(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(r=u()(this,(e=l()(t)).call.apply(e,[this].concat(s)))).blur=function(){r.searchInputRef.current.blur()},r.onSubmit=function(e){e.preventDefault(),r.blur(),r.props.onSearch(r.state.query)},r.clearSearch=function(){r.setState({query:r.props.defaultQuery},(function(){return r.props.onSearch(r.state.query)}))},r.onQueryFocus=function(){r.setState({dropdownVisible:!0})},r.onQueryBlur=function(){r.setState({dropdownVisible:!1})},r.onQueryChange=function(e){r.setState({query:e.target.value})},r.state={query:r.props.query||r.props.defaultQuery},r.searchInputRef=m.a.createRef(),r}return d()(t,e),o()(t,[{key:"componentWillReceiveProps",value:function(e){e.query!==this.props.query&&this.setState({query:e.query})}},{key:"render",value:function(){var e=this.props.className;return m.a.createElement("div",{className:f()("search",e)},m.a.createElement("form",{className:"form-horizontal",onSubmit:this.onSubmit},m.a.createElement("div",null,m.a.createElement("input",{type:"text",className:"search-input form-control",placeholder:this.props.placeholder,name:"query",ref:this.searchInputRef,autoComplete:"off",value:this.state.query,onBlur:this.onQueryBlur,onChange:this.onQueryChange}),m.a.createElement("span",{className:"icon-search"}),this.state.query!==this.props.defaultQuery&&m.a.createElement("div",null,m.a.createElement("a",{className:"search-clear-form",onClick:this.clearSearch},m.a.createElement("span",{className:"icon-circle-cross"}))))))}}]),t}(m.a.PureComponent);v.displayName="SearchBar",v.defaultProps={defaultQuery:"",query:"",onSearch:function(){}},t.a=v},1733:function(e,t,r){"use strict";var n=r(2),a=r(1),s=r.n(a),o=r(0),i=r.n(o),u=r(33),c=r(86),l=r(53),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(n.d)(t,e),t.prototype.hasAttachmentsRole=function(){var e=u.default.get("user");if(!e)return!1;if(e.isSuperuser)return!0;var t=this.props.organization,r=t.availableRoles,n=t.attachmentsRole,a=t.role;if(!Array.isArray(r))return!1;var s=r.map((function(e){return e.id})),o=s.indexOf(n);return s.indexOf(a||"")>=o},t.prototype.getDownloadUrl=function(){var e=this.props,t=e.attachment,r=e.organization,n=e.eventId,a=e.projectId;return"/api/0/projects/"+r.slug+"/"+a+"/events/"+n+"/attachments/"+t.id+"/"},t.prototype.render=function(){return(0,this.props.children)(this.hasAttachmentsRole()?this.getDownloadUrl():null)},t.propTypes={organization:l.b.Organization.isRequired,projectId:s.a.string.isRequired,eventId:s.a.string.isRequired,attachment:l.b.EventAttachment.isRequired,children:s.a.func.isRequired},t}(i.a.PureComponent);t.a=Object(c.a)(p)},2666:function(e,t,r){"use strict";r.r(t);var n=r(16),a=r.n(n),s=r(6),o=r.n(s),i=r(7),u=r.n(i),c=r(9),l=r.n(c),p=r(8),d=r.n(p),h=r(10),m=r.n(h),y=r(5),f=r(0),v=r.n(f),b=r(146),g=r.n(b),E=r(250),O=r(4),q=r(61),j=r(575),k=r(1733),S=r(193),I=r(1629),D=r(1683),R=r(1686),L=r(364),N=r(86),w=function(e){function t(){return o()(this,t),l()(this,d()(t).apply(this,arguments))}return m()(t,e),u()(t,[{key:"renderCrashFileLink",value:function(){var e=this.props,t=e.event,r=e.projectId;if(!t.crashFile)return null;var n="event.minidump"===t.crashFile.type?"Minidump":"Crash file";return v.a.createElement(k.a,{projectId:r,eventId:t.id,attachment:t.crashFile},(function(e){return e&&v.a.createElement("small",null,n,": ",v.a.createElement("a",{href:"".concat(e,"?download=1")},t.crashFile.name)," (",v.a.createElement(R.a,{bytes:t.crashFile.size}),")")}))}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.event,n=e.orgId,a=e.groupId,s=e.tagList,o=e.hasUser,i={};r.tags.forEach((function(e){i[e.key]=e.value}));var u="/organizations/".concat(n,"/issues/").concat(a,"/events/").concat(r.id,"/");return v.a.createElement("tr",{key:r.id,className:t},v.a.createElement("td",null,v.a.createElement("h5",null,v.a.createElement(L.a,{to:u},v.a.createElement(I.a,{date:r.dateCreated})),v.a.createElement("small",null,r.title.substr(0,100)),this.renderCrashFileLink())),o&&v.a.createElement("td",{className:"event-user table-user-info"},r.user?v.a.createElement("div",null,v.a.createElement(S.a,{user:r.user,size:24,className:"avatar",gravatar:!1}),r.user.email):v.a.createElement("span",null,"â€”")),s.map((function(e){return v.a.createElement("td",{key:e.key},v.a.createElement("div",null,"device"===e.key?v.a.createElement(D.a,null,i[e.key]):i[e.key]))})))}}]),t}(v.a.Component);w.displayName="EventsTableRow";var C=Object(N.a)(w),P=function(e){function t(){return o()(this,t),l()(this,d()(t).apply(this,arguments))}return m()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.events,r=e.tagList,n=e.orgId,a=e.projectId,s=e.groupId,o=!!t.find((function(e){return e.user}));return v.a.createElement("table",{className:"table events-table"},v.a.createElement("thead",null,v.a.createElement("tr",null,v.a.createElement("th",null,Object(O.b)("ID")),o&&v.a.createElement("th",null,Object(O.b)("User")),r.map((function(e){return v.a.createElement("th",{key:e.key},e.name)})))),v.a.createElement("tbody",null,t.map((function(e){return v.a.createElement(C,{key:e.id,event:e,orgId:n,projectId:a,groupId:s,tagList:r,hasUser:o})}))))}}]),t}(v.a.Component);P.displayName="EventsTable";var z=P,M=r(159),Q=r(50),F=r(572),B=r(1696),T=r(628);function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(r,!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r.d(t,"GroupEvents",(function(){return A}));var A=function(e){function t(e){var r;o()(this,t),(r=l()(this,d()(t).call(this,e))).handleSearch=function(e){var t=x({},r.props.location.query);t.query=e;var n=r.props.params,a=n.groupId,s=n.orgId;y.browserHistory.push({pathname:"/organizations/".concat(s,"/issues/").concat(a,"/events/"),query:t})},r.fetchData=function(){r.setState({loading:!0,error:!1});var e=x({},g()(r.props.location.query,["cursor","environment"]),{limit:50,query:r.state.query});r.props.api.request("/issues/".concat(r.props.params.groupId,"/events/"),{query:e,method:"GET",success:function(e,t,n){r.setState({eventList:e,error:!1,loading:!1,pageLinks:n.getResponseHeader("Link")})},error:function(e){r.setState({error:Object(T.a)(e),loading:!1})}})};var n=r.props.location.query;return r.state={eventList:[],loading:!0,error:!1,pageLinks:"",query:n.query||""},r}return m()(t,e),u()(t,[{key:"componentWillMount",value:function(){this.fetchData()}},{key:"componentWillReceiveProps",value:function(e){if(this.props.location.search!==e.location.search){var t=e.location.query;this.setState({query:t.query},this.fetchData)}}},{key:"renderNoQueryResults",value:function(){return v.a.createElement(j.a,null,v.a.createElement("p",null,Object(O.b)("Sorry, no events match your search query.")))}},{key:"renderEmpty",value:function(){return v.a.createElement(j.a,null,v.a.createElement("p",null,Object(O.b)("There don't seem to be any events yet.")))}},{key:"renderResults",value:function(){var e=this.props,t=e.group,r=e.params,n=t.tags.filter((function(e){return"user"!==e.key}))||[];return v.a.createElement(z,{tagList:n,events:this.state.eventList,orgId:r.orgId,projectId:t.project.slug,groupId:r.groupId})}},{key:"renderBody",value:function(){return this.state.loading?v.a.createElement(Q.default,null):this.state.error?v.a.createElement(M.a,{message:this.state.error,onRetry:this.fetchData}):this.state.eventList.length>0?this.renderResults():this.state.query&&""!==this.state.query?this.renderNoQueryResults():this.renderEmpty()}},{key:"render",value:function(){return v.a.createElement("div",null,v.a.createElement("div",{style:{marginBottom:20}},v.a.createElement(B.a,{defaultQuery:"",placeholder:Object(O.b)("search event id, message, or tags"),query:this.state.query,onSearch:this.handleSearch})),v.a.createElement(E.a,{className:"event-list"},v.a.createElement(E.c,null,this.renderBody())),v.a.createElement(F.a,{pageLinks:this.state.pageLinks}))}}]),t}(v.a.Component);A.displayName="GroupEvents";t.default=Object(q.a)(A)}}]);
//# sourceMappingURL=OrganizationGroupEvents.js.map