(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[138],{1611:function(e,t,n){"use strict";var a,r,i,c,o,s=n(2),l=n(1),u=n.n(l),d=n(0),m=n.n(d),p=n(3),v=n(11),h=n(337),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.icon,n=e.title,a=e.action,r=e.tabs,i=e.noTitleStyles,c=Object(s.h)(e,["icon","title","action","tabs","noTitleStyles"]);return m.a.createElement("div",Object(s.a)({},c),m.a.createElement(b,null,t&&m.a.createElement(y,null,t),n&&m.a.createElement(j,{tabs:r,styled:i},m.a.createElement(h.a,null,n)),a&&m.a.createElement(O,{tabs:r},a)),r&&m.a.createElement("div",null,r))},t.propTypes={icon:u.a.node,title:u.a.node.isRequired,action:u.a.node,tabs:u.a.node,noTitleStyles:u.a.bool},t.defaultProps={noTitleStyles:!1},t}(m.a.Component),b=Object(p.c)("div",{target:"e1uay4fd0"})(a||(a=Object(s.f)(["\n  display: flex;\n  align-items: center;\n"],["\n  display: flex;\n  align-items: center;\n"]))),j=Object(p.c)("div",{target:"e1uay4fd1"})(r||(r=Object(s.f)(["\n  ",";\n  margin: ",";\n  flex: 1;\n"],["\n  ",";\n  margin: ",";\n  flex: 1;\n"])),(function(e){return!e.styled&&"\n    font-size: 20px;\n    font-weight: bold;"}),(function(e){return e.tabs?Object(v.a)(4)+" 0 "+Object(v.a)(2):Object(v.a)(4)+" 0"})),y=Object(p.c)("div",{target:"e1uay4fd2"})(i||(i=Object(s.f)(["\n  margin-right: ",";\n"],["\n  margin-right: ",";\n"])),Object(v.a)(1)),O=Object(p.c)("div",{target:"e1uay4fd3"})(c||(c=Object(s.f)(["\n  ",";\n"],["\n  ",";\n"])),(function(e){return e.tabs?"margin-top: "+Object(v.a)(2):null})),E=Object(p.c)(f,{target:"e1uay4fd4"})(o||(o=Object(s.f)(["\n  font-size: 14px;\n  margin-top: -",";\n"],["\n  font-size: 14px;\n  margin-top: -",";\n"])),Object(v.a)(4));t.a=E},1618:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(577),r=n.n(a),i=n(447);function c(e,t){var n,a,c=t.routes,o=t.params,s=t.location,l=t.stepBack,u=c.map((function(e){return e.path||""}));"string"!=typeof e?(a=c.indexOf(e)+1,n=r()(u.slice(0,a),(function(e){return"/"===e[0]}))):n=r()(u,(function(e){return"/"===e[0]}));var d=u.slice(n,a);void 0!==l&&(d=d.slice(0,l));var m=void 0!==s&&s.search?s.search:"",p=""+d.join("")+("string"!=typeof e?"":e)+m;return Object(i.a)(p,o)}},1630:function(e,t,n){"use strict";var a=n(2),r=n(0),i=n.n(r),c=n(36),o=n.n(c);t.a=function(e){var t=e.underlined,n=e.className,r=Object(a.h)(e,["underlined","className"]),c=o()("nav nav-tabs",n,{"border-bottom":t});return i.a.createElement("ul",Object(a.a)({className:c},r))}},1632:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(251),c=n.n(i);t.a=function(e){var t=e.title+" - "+e.objSlug+" - Sentry";return r.a.createElement(c.a,{title:t},e.children)}},1641:function(e,t,n){"use strict";var a=n(2),r=n(1),i=n.n(r),c=n(0),o=n.n(c),s=n(195),l=n.n(s),u=n(5),d=n(36),m=n.n(d),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isActive=function(){var e=t.props,n=e.isActive,a=e.to,r=e.query,i=e.index;return(n||t.context.router.isActive)({pathname:a,query:r},i)},t.getClassName=function(){var e={},n=t.props,a=n.className,r=n.activeClassName;return a&&(e[a]=!0),t.isActive()&&(e[r]=!0),m()(e)},t}return Object(a.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.index,n=e.children,r=l()(this.props,"activeClassName","isActive","index");return o.a.createElement("li",{className:this.getClassName()},o.a.createElement(u.Link,Object(a.a)({},r,{onlyActiveOnIndex:t}),n))},t.displayName="ListLink",t.contextTypes={router:i.a.object.isRequired},t.defaultProps={activeClassName:"active",index:!1},t}(o.a.Component);t.a=p},1643:function(e,t,n){"use strict";var a=n(2),r=n(0),i=n.n(r),c=n(4),o=n(340),s=n(90),l=function(e){var t=e.access,n=Object(a.h)(e,["access"]);return i.a.createElement(o.a,{access:t},(function(e){return!e.hasAccess&&i.a.createElement(s.b,Object(a.a)({type:"warning",icon:"icon-warning-sm"},n),Object(c.b)("These settings can only be edited by users with the organization owner, manager, or admin role."))}))};l.defaultProps={access:["project:write"]},t.a=l},1755:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return o}));var a=n(21),r="none",i="(No Environment)";function c(e){return encodeURIComponent(e.name)||r}function o(e){return Object(a.u)(e.name)||i}},2561:function(e,t,n){"use strict";n.r(t),n.d(t,"ProjectEnvironments",(function(){return R}));var a=n(6),r=n.n(a),i=n(7),c=n.n(i),o=n(9),s=n.n(o),l=n(8),u=n.n(l),d=n(26),m=n.n(d),p=n(10),v=n.n(p),h=n(144),f=n(0),b=n.n(f),j=n(3),y=n(24),O=n(250),E=n(51),g=n(4),w=n(340),x=n(1632),A=n(61),S=n(27),k=n(570),N=n(1641),C=n(50),L=n(1630),T=n(1643),I=n(1611),W=n(1618),q=n(11),H=n(1755),R=function(e){function t(){var e,n;r()(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=s()(this,(e=u()(t)).call.apply(e,[this].concat(i)))).state={project:null,environments:null,isLoading:!0},n.toggleEnv=function(e,t){var a=n.props.params,r=a.orgId,i=a.projectId;n.props.api.request("/projects/".concat(r,"/").concat(i,"/environments/").concat(Object(H.b)(e),"/"),{method:"PUT",data:{name:e.name,isHidden:t},success:function(){Object(E.d)(Object(g.c)("Updated [environment]",{environment:Object(H.a)(e)}))},error:function(){Object(E.a)(Object(g.c)("Unable to update [environment]",{environment:Object(H.a)(e)}))},complete:n.fetchData.bind(m()(n))})},n}return v()(t,e),c()(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){this.props.location.pathname.endsWith("hidden/")!==e.location.pathname.endsWith("hidden/")&&this.fetchData()}},{key:"fetchData",value:function(){var e=this,t=this.props.location.pathname.endsWith("hidden/");this.state.isLoading||this.setState({isLoading:!0});var n=this.props.params,a=n.orgId,r=n.projectId;this.props.api.request("/projects/".concat(a,"/").concat(r,"/environments/"),{query:{visibility:t?"hidden":"visible"},success:function(t){e.setState({environments:t,isLoading:!1})}})}},{key:"fetchProjectDetails",value:function(){var e=this,t=this.props.params,n=t.orgId,a=t.projectId;this.props.api.request("/projects/".concat(n,"/").concat(a,"/"),{success:function(t){e.setState({project:t})}})}},{key:"renderEmpty",value:function(){var e=this.props.location.pathname.endsWith("hidden/")?Object(g.b)("You don't have any hidden environments."):Object(g.b)("You don't have any environments yet.");return b.a.createElement(k.a,null,e)}},{key:"renderAllEnvironmentsSystemRow",value:function(){return this.props.location.pathname.endsWith("hidden/")?null:b.a.createElement(D,{name:y.e,environment:{id:y.e,name:y.e},isSystemRow:!0})}},{key:"renderEnvironmentList",value:function(e){var t=this,n=this.props.location.pathname.endsWith("hidden/"),a=n?Object(g.b)("Show"):Object(g.b)("Hide");return b.a.createElement(b.a.Fragment,null,this.renderAllEnvironmentsSystemRow(),e.map((function(e){return b.a.createElement(D,{key:e.id,name:e.name,environment:e,isHidden:n,onHide:t.toggleEnv,actionText:a,shouldShowAction:!0})})))}},{key:"renderBody",value:function(){var e=this.state,t=e.environments;return e.isLoading?b.a.createElement(C.default,null):b.a.createElement(O.c,null,t.length?this.renderEnvironmentList(t):this.renderEmpty())}},{key:"render",value:function(){var e=this.props,t=e.routes,n=e.params,a=e.location.pathname.endsWith("hidden/"),r=Object(W.a)("",{routes:t,params:n,stepBack:-1});return b.a.createElement("div",null,b.a.createElement(x.a,{title:Object(g.b)("Environments"),objSlug:n.projectId}),b.a.createElement(I.a,{title:Object(g.b)("Manage Environments"),tabs:b.a.createElement(L.a,{underlined:!0},b.a.createElement(N.a,{to:r,index:!0,isActive:function(){return!a}},Object(g.b)("Environments")),b.a.createElement(N.a,{to:"".concat(r,"hidden/"),index:!0,isActive:function(){return a}},Object(g.b)("Hidden")))}),b.a.createElement(T.a,null),b.a.createElement(O.a,null,b.a.createElement(O.e,null,a?Object(g.b)("Hidden"):Object(g.b)("Active Environments")),this.renderBody()))}}]),t}(b.a.Component);R.displayName="ProjectEnvironments";var D=function(e){function t(){return r()(this,t),s()(this,u()(t).apply(this,arguments))}return v()(t,e),c()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.environment,a=t.shouldShowAction,r=t.isSystemRow,i=t.isHidden,c=t.actionText;return b.a.createElement(O.f,{align:"center",justify:"space-between"},b.a.createElement(h.b,{align:"center"},r?Object(g.b)("All Environments"):n.name),b.a.createElement(w.a,{access:["project:write"]},(function(t){var r=t.hasAccess;return b.a.createElement("div",null,a&&b.a.createElement(P,{size:"xsmall",disabled:!r,onClick:function(){return e.props.onHide(n,!i)}},c))})))}}]),t}(b.a.Component);D.displayName="EnvironmentRow";var P=Object(j.c)(S.a,{target:"e1pnz46f0"})("margin-left:",Object(q.a)(.5),";");t.default=Object(A.a)(R)}}]);
//# sourceMappingURL=ProjectEnvironments.js.map