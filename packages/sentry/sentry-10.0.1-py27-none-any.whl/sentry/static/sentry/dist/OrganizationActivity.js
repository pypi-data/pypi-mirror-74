(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[101],{1678:function(e,t,a){"use strict";var n=a(2),r=a(0),i=a.n(r),s=a(1),o=a.n(s),c=a(3),l=a(53),u=a(193),m=a(39),d={avatarSize:28,maxVisibleAvatars:5,typeMembers:"users",tooltipOptions:{}},p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(n.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,a=e.users,n=e.avatarSize,r=e.maxVisibleAvatars,s=e.renderTooltip,o=e.typeMembers,c=e.tooltipOptions,l=a.slice(0,r),u=a.length-l.length;return c.position||(c.position="top"),i.a.createElement(y,{className:t},!!u&&i.a.createElement(m.a,{title:u+" other "+o},i.a.createElement(j,{size:n},u<99&&i.a.createElement(k,null,"+"),u)),l.map((function(e){return i.a.createElement(O,{key:e.id+"-"+e.email,user:e,size:n,renderTooltip:s,tooltipOptions:c,hasTooltip:!0})})))},t.propTypes={users:o.a.arrayOf(l.b.User).isRequired,avatarSize:o.a.number,maxVisibleAvatars:o.a.number,renderTooltip:o.a.func,tooltipOptions:o.a.object,typeMembers:o.a.string},t.defaultProps=d,t}(i.a.Component);t.a=p;var h,g,v,b,f,y=Object(c.c)("div",{target:"e1mtf41h0"})(h||(h=Object(n.f)(["\n  display: flex;\n  flex-direction: row-reverse;\n"],["\n  display: flex;\n  flex-direction: row-reverse;\n"]))),E=Object(c.a)(g||(g=Object(n.f)(["\n  border-radius: 50%;\n  border: 2px solid white;\n  margin-left: -8px;\n  cursor: default;\n\n  &:hover {\n    z-index: 1;\n  }\n"],["\n  border-radius: 50%;\n  border: 2px solid white;\n  margin-left: -8px;\n  cursor: default;\n\n  &:hover {\n    z-index: 1;\n  }\n"]))),O=Object(c.c)(u.a,{target:"e1mtf41h1"})(v||(v=Object(n.f)(["\n  overflow: hidden;\n  ",";\n"],["\n  overflow: hidden;\n  ",";\n"])),E),j=Object(c.c)("div",{target:"e1mtf41h2"})(b||(b=Object(n.f)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  text-align: center;\n  font-weight: 600;\n  background-color: ",";\n  color: ",";\n  font-size: ","px;\n  width: ","px;\n  height: ","px;\n  ",";\n"],["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  text-align: center;\n  font-weight: 600;\n  background-color: ",";\n  color: ",";\n  font-size: ","px;\n  width: ","px;\n  height: ","px;\n  ",";\n"])),(function(e){return e.theme.borderLight}),(function(e){return e.theme.gray2}),(function(e){return Math.floor(e.size/2.3)}),(function(e){return e.size}),(function(e){return e.size}),E),k=Object(c.c)("span",{target:"e1mtf41h3"})(f||(f=Object(n.f)(["\n  font-size: 10px;\n  margin-left: 1px;\n  margin-right: -1px;\n"],["\n  font-size: 10px;\n  margin-left: 1px;\n  margin-right: -1px;\n"])))},1695:function(e,t,a){"use strict";var n=a(2),r=a(0),i=a.n(r),s=a(3),o=a(4),c=a(21),l=a(27),u=a(104),m=a(19),d=[{icon:"icon-github",providerIds:["github","integrations:github","integrations:github_enterprise"],commitUrl:function(e){return e.baseUrl+"/commit/"+e.commitId}},{icon:"icon-bitbucket",providerIds:["bitbucket","integrations:bitbucket"],commitUrl:function(e){return e.baseUrl+"/commits/"+e.commitId}},{icon:"icon-vsts",providerIds:["visualstudio","integrations:vsts"],commitUrl:function(e){return e.baseUrl+"/commit/"+e.commitId}},{icon:"icon-gitlab",providerIds:["gitlab","integrations:gitlab"],commitUrl:function(e){return e.baseUrl+"/commit/"+e.commitId}}];var p,h=Object(s.c)((function(e){return i.a.createElement(m.a,{size:"14px",src:e.src,className:e.className})}),{target:"eannor00"})(p||(p=Object(n.f)(["\n  vertical-align: text-top;\n  margin-top: 2px;\n"],["\n  vertical-align: text-top;\n  margin-top: 2px;\n"])));t.a=function(e){var t=e.inline,a=e.commitId,n=e.repository;if(!a||!n)return i.a.createElement("span",null,Object(o.b)("Unknown Commit"));var r=Object(c.k)(a),s=d.find((function(e){return!!n.provider&&e.providerIds.includes(n.provider.id)}));if(void 0===s)return i.a.createElement("span",null,r);var m=n.url&&s.commitUrl({commitId:a,baseUrl:n.url});return t?i.a.createElement(u.a,{className:"inline-commit",href:m},i.a.createElement(h,{src:s.icon})," "+r):i.a.createElement(l.a,{external:!0,href:m,size:"small",icon:s.icon},r)}},1710:function(e,t,a){"use strict";var n=a(3),r=a(91),i=Object(n.c)("span",{target:"eq941bw0"})("font-weight:700;color:",(function(e){return e.theme.white}),";text-align:center;white-space:nowrap;border-radius:0.25em;",r.a,";display:inline-block;vertical-align:text-bottom;line-height:1;background:",(function(e){return e.theme.gray1}),";padding:3px;max-width:86px;font-size:",(function(e){return e.theme.fontSizeSmall}),";");t.a=i},1734:function(e,t,a){"use strict";var n=a(2),r=a(1),i=a.n(r),s=a(0),o=a.n(s),c=a(193),l=a(223),u=a(4),m={id:"",name:"",username:"??",email:"",avatarUrl:"",avatar:{avatarUuid:"",avatarType:"letter_avatar"},ip_address:""},d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(n.d)(t,e),t.prototype.renderMessage=function(e){if(!e)return Object(u.b)("No message provided");var t=e.split(/\n/)[0];if(t.length>100){var a=t.substr(0,90),n=a.split(/ /);return n.length>1&&(n.pop(),a=n.join(" ")),a+"..."}return t},t.prototype.render=function(){var e=this.props,t=e.commit,a=e.headerClass,n=t&&t.author;return o.a.createElement("div",null,o.a.createElement("h6",{className:a},"Last commit"),o.a.createElement("div",{className:"commit"},o.a.createElement("div",{className:"commit-avatar"},o.a.createElement(c.a,{user:n||m})),o.a.createElement("div",{className:"commit-message truncate"},this.renderMessage(t.message)),o.a.createElement("div",{className:"commit-meta"},o.a.createElement("strong",null,n&&n.name||Object(u.b)("Unknown Author"))," ",o.a.createElement(l.a,{date:t.dateCreated}))))},t.propTypes={commit:i.a.object.isRequired,headerClass:i.a.string},t}(o.a.Component);t.a=d},1747:function(e,t,a){"use strict";var n=a(12),r=a.n(n),i=a(23),s=a.n(i),o=a(45),c=a.n(o),l=a(6),u=a.n(l),m=a(7),d=a.n(m),p=a(9),h=a.n(p),g=a(8),v=a.n(g),b=a(10),f=a.n(b),y=a(0),E=a.n(y),O=a(3),j=a(4),k=a(1678),x=a(27),w=a(343),N=a(1734),z=a(159),I=a(50),C=a(1710),_=a(223),R=a(11),L=a(61),S=function(e){function t(){var e,a;u()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=h()(this,(e=v()(t)).call.apply(e,[this].concat(r)))).state={loading:!0,error:!1,data:{},visible:!1,hasRepos:!1,deploys:[],release:null},a}return f()(t,e),d()(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e,t,a,n,r,i,o,l,u,m,d,p,h,g,v;return s.a.async((function(b){for(;;)switch(b.prev=b.next){case 0:return e=this.props,t=e.api,a=e.orgId,n=e.projectId,r=e.version,i="/projects/".concat(a,"/").concat(n,"/releases/").concat(encodeURIComponent(r),"/"),o=t.requestPromise(i,{method:"GET"}),l=t.requestPromise("/organizations/".concat(a,"/repos/"),{method:"GET"}),u="/organizations/".concat(a,"/releases/").concat(encodeURIComponent(r),"/deploys/"),m=t.requestPromise(u,{method:"GET"}),b.prev=6,b.next=9,s.a.awrap(Promise.all([o,l,m]));case 9:d=b.sent,p=c()(d,3),h=p[0],g=p[1],v=p[2],this.setState({release:h,deploys:v,hasRepos:g.length>0,loading:!1}),b.next=20;break;case 17:b.prev=17,b.t0=b.catch(6),this.setState({error:!0});case 20:case"end":return b.stop()}}),null,this,[[6,17]])}},{key:"toggleHovercard",value:function(){this.setState({visible:!0})}},{key:"getRepoLink",value:function(){var e=this.props.orgId;return{body:E.a.createElement(U,null,E.a.createElement("h5",null,Object(j.b)("Releases are better with commit data!")),E.a.createElement("p",null,Object(j.b)("Connect a repository to see commit info, files changed, and authors involved in future releases.")),E.a.createElement(x.a,{href:"/organizations/".concat(e,"/repos/"),priority:"primary"},Object(j.b)("Connect a repository")))}}},{key:"getBody",value:function(){var e=this.state,t=e.release,a=e.deploys,n=this.props.version,r=t.lastCommit,i=a.reduce((function(e,t){var a=t.dateFinished,n=t.environment;return e.hasOwnProperty(n)||(e[n]=a),e}),{}),s=Object.keys(i);return Object.keys(i).length>3&&(s=Object.keys(i).slice(0,3)),{header:E.a.createElement("span",{className:"truncate"},Object(j.c)("Release [version]",{version:n})),body:E.a.createElement("div",null,E.a.createElement("div",{className:"row row-flex"},E.a.createElement("div",{className:"col-xs-4"},E.a.createElement("h6",null,Object(j.b)("New Issues")),E.a.createElement("div",{className:"count-since"},t.newGroups)),E.a.createElement("div",{className:"col-xs-8"},E.a.createElement("h6",{style:{textAlign:"right"}},t.commitCount," ",1!==t.commitCount?Object(j.b)("commits "):Object(j.b)("commit ")," ",Object(j.b)("by ")," ",t.authors.length," ",1!==t.authors.length?Object(j.b)("authors"):Object(j.b)("author")," "),E.a.createElement(k.a,{users:t.authors,avatarSize:25,tooltipOptions:{container:"body"},typeMembers:"authors"}))),r&&E.a.createElement(N.a,{commit:r,headerClass:"commit-heading"}),a.length>0&&E.a.createElement("div",null,E.a.createElement("div",{className:"divider"},E.a.createElement("h6",{className:"deploy-heading"},Object(j.b)("Deploys"))),s.map((function(e,t){var a=i[e];return E.a.createElement("div",{className:"deploy",key:t},E.a.createElement("div",{className:"deploy-meta",style:{position:"relative"}},E.a.createElement(q,null,e),a&&E.a.createElement(P,{date:a})))}))))}}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.error,n=e.hasRepos,i=e.release,s=null,o=null;if(t)o=E.a.createElement(I.default,{mini:!0});else if(a)o=E.a.createElement(z.a,null);else{var c=n&&i?this.getBody():this.getRepoLink();s=c.header,o=c.body}return E.a.createElement(w.a,r()({},this.props,{header:s,body:o}),this.props.children)}}]),t}(E.a.Component);S.displayName="VersionHoverCard",t.a=Object(L.a)(S);var U=Object(O.c)("div",{target:"e1lqolyt0"})("padding:",Object(R.a)(2),";text-align:center;"),q=Object(O.c)(C.a,{target:"e1lqolyt1"})("width:86px;"),P=Object(O.c)(_.a,{target:"e1lqolyt2"})("color:",(function(e){return e.theme.gray2}),";position:absolute;left:98px;width:50%;padding:3px 0;")},1774:function(e,t,a){"use strict";var n=a(3);function r(e){var t=e.level,a=e.theme,n={error:a.orange,info:a.blue,warning:a.yellowOrange,fatal:a.red,sample:a.purple};return"background-color: ".concat(n[t]||a.orange,";")}var i=Object(n.c)("span",{target:"e1r7ckde0"})("padding:0;position:relative;width:",(function(e){return e.size||"13px"}),";height:",(function(e){return e.size||"13px"}),";text-indent:-9999em;display:inline-block;border-radius:50%;flex-shrink:0;",r);t.a=i},1868:function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(3),s=a(1774),o=a(91),c=a(11),l=Object(i.c)("span",{target:"edommoc0"})(o.a," width:auto;max-height:38px;");function u(e){var t=e.className,a=e.level,n=e.levelIndicatorSize,i=e.message,s=e.annotations;return r.a.createElement("div",{className:t},a&&r.a.createElement(m,{size:n,level:a},a),i&&r.a.createElement(l,null,i),s)}u.displayName="EventMessage",t.a=Object(i.c)(u,{target:"edommoc1"})("display:flex;align-items:center;position:relative;line-height:1.2;@media (max-width:",(function(e){return e.theme.breakpoints[0]}),"){margin-bottom:",Object(c.a)(2),";}");var m=Object(i.c)(s.a,{target:"edommoc2"})("margin-right:",Object(c.a)(1),";")},1989:function(e,t,a){"use strict";var n=a(6),r=a.n(n),i=a(7),s=a.n(i),o=a(9),c=a.n(o),l=a(8),u=a.n(l),m=a(10),d=a.n(m),p=a(0),h=a.n(p),g=a(104),v=a(19),b=function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return d()(t,e),s()(t,[{key:"render",value:function(){var e=this.props,t=e.pullRequest,a=e.repository,n=this.providerId,r="".concat(a.name," #").concat(t.id,": ").concat(t.title),i="";return["github","gitlab","bitbucket"].indexOf(n)>-1&&(i=h.a.createElement(v.a,{src:"icon-".concat(n),style:{verticalAlign:"text-top"},size:"14px"})),t.externalUrl?h.a.createElement(g.a,{className:this.props.inline?"inline-commit":"btn btn-default btn-sm",href:t.externalUrl,target:"_blank"},i,"  ",this.props.inline?"":" ",r):h.a.createElement("span",null,r)}},{key:"providerId",get:function(){if(!this.props.repository.provider)return null;var e=this.props.repository.provider.id;return e.indexOf(":")>-1?e.split(":").pop():e}}]),t}(h.a.Component);b.displayName="PullRequestLink",t.a=b},2657:function(e,t,a){"use strict";a.r(t);var n=a(6),r=a.n(n),i=a(7),s=a.n(i),o=a(9),c=a.n(o),l=a(8),u=a.n(l),m=a(10),d=a.n(m),p=a(251),h=a.n(p),g=a(0),v=a.n(g),b=a(337),f=a(4),y=a(341),E=a(86),O=a(12),j=a.n(O),k=a(52),x=a(16),w=a.n(x),N=a(250),z=a(570),I=a(194),C=a(159),_=a(50),R=a(572),L=a(11),S=a(61),U=a(5),q=a(3),P=a(193),A=a(1695),M=a(587),D=a(36),T=a.n(D),B=a(344),H=a(622),W=a(1868),$=a(624),F=a(343),G=a(223),V=a(91),J=function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return d()(t,e),s()(t,[{key:"getMessage",value:function(e){var t=e.metadata;switch(e.type){case"error":return t.value;case"csp":return t.message;default:return e.culprit||""}}},{key:"renderBody",value:function(){var e=this.props,t=e.issue,a=e.orgId,n=this.getMessage(t),r=T()({isBookmarked:t.isBookmarked,hasSeen:t.hasSeen,isResolved:"resolved"===t.status}),i="/organizations/".concat(a,"/issues/");return v.a.createElement("div",{className:r},v.a.createElement(Q,null,v.a.createElement(K,null,v.a.createElement($.a,{data:t})),v.a.createElement(Y,{level:t.level,levelIndicatorSize:"9px",message:n,annotations:v.a.createElement(v.a.Fragment,null,t.logger&&v.a.createElement(H.a,null,v.a.createElement(U.Link,{to:{pathname:i,query:{query:"logger:".concat(t.logger)}}},t.logger)),t.annotations.map((function(e,t){return v.a.createElement(H.a,{key:t,dangerouslySetInnerHTML:{__html:e}})})))})),v.a.createElement(X,null,v.a.createElement("div",null,v.a.createElement(Z,null,Object(f.b)("First Seen")),v.a.createElement(ee,{date:t.firstSeen})),v.a.createElement("div",null,v.a.createElement(Z,null,Object(f.b)("Last Seen")),v.a.createElement(ee,{date:t.lastSeen})),v.a.createElement("div",null,v.a.createElement(Z,null,Object(f.b)("Occurrences")),v.a.createElement(B.a,{value:t.count})),v.a.createElement("div",null,v.a.createElement(Z,null,Object(f.b)("Users Affected")),v.a.createElement(B.a,{value:t.userCount}))))}},{key:"render",value:function(){var e=this.props,t=e.card,a=e.issue,n=e.to;return t?v.a.createElement(F.a,{body:this.renderBody(),header:a.shortId},v.a.createElement(U.Link,{to:n},this.props.children)):v.a.createElement(U.Link,{to:n},this.props.children)}}]),t}(v.a.Component);J.displayName="IssueLink",J.defaultProps={card:!0};var K=Object(q.c)("h3",{target:"eyb9goo0"})("font-size:",(function(e){return e.theme.fontSizeMedium}),";margin:0 0 ",Object(L.a)(.5),";",V.a,";em{font-style:normal;font-weight:400;color:",(function(e){return e.theme.gray2}),";font-size:90%;}"),Q=Object(q.c)("section",{target:"eyb9goo1"})("margin-bottom:",Object(L.a)(2),";"),X=Object(q.c)("div",{target:"eyb9goo2"})("display:grid;grid-template-columns:1fr 1fr;grid-gap:",Object(L.a)(2),";"),Y=Object(q.c)(W.a,{target:"eyb9goo3"})("font-size:12px;"),Z=Object(q.c)("h5",{target:"eyb9goo4"})("color:",(function(e){return e.theme.gray2}),";font-size:11px;margin-bottom:",Object(L.a)(.5),";text-transform:uppercase;"),ee=Object(q.c)(G.a,{target:"eyb9goo5"})("color:inherit;"),te=a(117),ae=a(1989),ne=a(161),re=a(592),ie=a(1747),se=a(1727),oe=function(e){function t(){var e,a;r()(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=c()(this,(e=u()(t)).call.apply(e,[this].concat(i)))).formatProjectActivity=function(e,t){var n=t.data,r=a.props.organization.slug,i=t.project,s=t.issue,o="/organizations/".concat(r,"/issues/"),c=s?v.a.createElement(J,{organization:a.props.organization,orgId:r,projectId:i.slug,issue:s,to:"".concat(o).concat(s.id,"/")},s.shortId):null,l=n.version?v.a.createElement(ie.a,{orgId:r,projectId:i.slug,version:n.version},v.a.createElement(re.a,{version:n.version,orgId:r,projectId:null})):null;switch(t.type){case"note":return Object(f.c)("[author] commented on [issue]",{author:e,issue:v.a.createElement(J,{organization:a.props.organization,orgId:r,projectId:i.slug,issue:s,to:"".concat(o).concat(s.id,"/activity/#event_").concat(t.id)},s.shortId)});case"set_resolved":return Object(f.c)("[author] marked [issue] as resolved",{author:e,issue:c});case"set_resolved_by_age":return Object(f.c)("[author] marked [issue] as resolved due to age",{author:e,issue:c});case"set_resolved_in_release":return n.version?Object(f.c)("[author] marked [issue] as resolved in [version]",{author:e,version:l,issue:c}):Object(f.c)("[author] marked [issue] as resolved in the upcoming release",{author:e,issue:c});case"set_resolved_in_commit":return Object(f.c)("[author] marked [issue] as resolved in [version]",{author:e,version:v.a.createElement(A.a,{inline:!0,commitId:n.commit&&n.commit.id,repository:n.commit&&n.commit.repository}),issue:c});case"set_resolved_in_pull_request":return Object(f.c)("[author] marked [issue] as resolved in [version]",{author:e,version:v.a.createElement(ae.a,{inline:!0,pullRequest:n.pullRequest,repository:n.pullRequest&&n.pullRequest.repository}),issue:c});case"set_unresolved":return Object(f.c)("[author] marked [issue] as unresolved",{author:e,issue:c});case"set_ignored":return n.ignoreDuration?Object(f.c)("[author] ignored [issue] for [duration]",{author:e,duration:v.a.createElement(M.a,{seconds:60*n.ignoreDuration}),issue:c}):n.ignoreCount&&n.ignoreWindow?Object(f.c)("[author] ignored [issue] until it happens [count] time(s) in [duration]",{author:e,count:n.ignoreCount,duration:v.a.createElement(M.a,{seconds:60*n.ignoreWindow}),issue:c}):n.ignoreCount?Object(f.c)("[author] ignored [issue] until it happens [count] time(s)",{author:e,count:n.ignoreCount,issue:c}):n.ignoreUserCount&&n.ignoreUserWindow?Object(f.c)("[author] ignored [issue] until it affects [count] user(s) in [duration]",{author:e,count:n.ignoreUserCount,duration:v.a.createElement(M.a,{seconds:60*n.ignoreUserWindow}),issue:c}):n.ignoreUserCount?Object(f.c)("[author] ignored [issue] until it affects [count] user(s)",{author:e,count:n.ignoreUserCount,issue:c}):Object(f.c)("[author] ignored [issue]",{author:e,issue:c});case"set_public":return Object(f.c)("[author] made [issue] public",{author:e,issue:c});case"set_private":return Object(f.c)("[author] made [issue] private",{author:e,issue:c});case"set_regression":return n.version?Object(f.c)("[author] marked [issue] as a regression in [version]",{author:e,version:l,issue:c}):Object(f.c)("[author] marked [issue] as a regression",{author:e,issue:c});case"create_issue":return Object(f.c)("[author] linked [issue] on [provider]",{author:e,provider:n.provider,issue:c});case"unmerge_destination":return Object(f.d)("%2$s migrated %1$s fingerprint from %3$s to %4$s","%2$s migrated %1$s fingerprints from %3$s to %4$s",n.fingerprints.length,e,n.source?v.a.createElement("a",{href:"".concat(o).concat(n.source.id)},n.source.shortId):Object(f.b)("a group"),c);case"first_seen":return Object(f.c)("[author] saw [link:issue]",{author:e,issue:c});case"assigned":var u;if("team"===n.assigneeType){var m=ne.a.getById(n.assignee);return u=m?m.slug:"<unknown-team>",Object(f.c)("[author] assigned [issue] to #[assignee]",{author:e,issue:c,assignee:u})}return t.user&&n.assignee===t.user.id?Object(f.c)("[author] assigned [issue] to themselves",{author:e,issue:c}):(u=te.a.getById(n.assignee))&&u.email?Object(f.c)("[author] assigned [issue] to [assignee]",{author:e,assignee:v.a.createElement("span",{title:u.email},u.name),issue:c}):n.assigneeEmail?Object(f.c)("[author] assigned [issue] to [assignee]",{author:e,assignee:n.assigneeEmail,issue:c}):Object(f.c)("[author] assigned [issue] to an [help:unknown user]",{author:e,help:v.a.createElement("span",{title:n.assignee}),issue:c});case"unassigned":return Object(f.c)("[author] unassigned [issue]",{author:e,issue:c});case"merge":return Object(f.c)("[author] merged [count] [link:issues]",{author:e,count:n.issues.length+1,link:v.a.createElement(U.Link,{to:"".concat(o).concat(s.id,"/")})});case"release":return Object(f.c)("[author] released version [version]",{author:e,version:l});case"deploy":return Object(f.c)("[author] deployed version [version] to [environment].",{author:e,version:l,environment:n.environment||"Default Environment"});default:return""}},a.state={clipped:a.props.defaultClipped},a.activityBubbleRef=v.a.createRef(),a}return d()(t,e),s()(t,[{key:"componentDidMount",value:function(){this.activityBubbleRef.current&&(this.activityBubbleRef.current.offsetHeight>this.props.clipHeight&&this.setState({clipped:!0}))}},{key:"render",value:function(){var e=this.props.item,t="activity-item-bubble";this.state.clipped&&(t+=" clipped");var a=e.user?v.a.createElement(P.a,{user:e.user,size:36,className:"activity-avatar"}):v.a.createElement("div",{className:"activity-avatar avatar sentry"},v.a.createElement("span",{className:"icon-sentry-logo"})),n={name:e.user?e.user.name:"Sentry",avatar:a},r=v.a.createElement("strong",null,e.project.slug);if("note"===e.type){var i=Object(se.a)(e.data.text);return v.a.createElement("div",{"data-test-id":"activity-item",className:"activity-item activity-item-compact"},v.a.createElement("div",{className:"activity-item-content"},this.formatProjectActivity(v.a.createElement("span",null,n.avatar,v.a.createElement(le,null,n.name)),e),v.a.createElement("div",{className:t,ref:this.activityBubbleRef,dangerouslySetInnerHTML:{__html:i}}),v.a.createElement("div",{className:"activity-meta"},r,v.a.createElement("span",{className:"bullet"}),v.a.createElement(ue,{date:e.dateCreated}))))}return"create_issue"===e.type?v.a.createElement("div",{"data-test-id":"activity-item",className:"activity-item activity-item-compact"},v.a.createElement("div",{className:"activity-item-content"},this.formatProjectActivity(v.a.createElement("span",null,n.avatar,v.a.createElement(le,null,n.name)),e),v.a.createElement("div",{className:"activity-item-bubble"},v.a.createElement("a",{href:e.data.location},e.data.title)),v.a.createElement("div",{className:"activity-meta"},r,v.a.createElement("span",{className:"bullet"}),v.a.createElement(ue,{date:e.dateCreated})))):v.a.createElement("div",{"data-test-id":"activity-item",className:"activity-item activity-item-compact"},v.a.createElement("div",{className:"activity-item-content"},this.formatProjectActivity(v.a.createElement("span",null,n.avatar,v.a.createElement(le,null,n.name)),e),v.a.createElement("div",{className:"activity-meta"},r,v.a.createElement("span",{className:"bullet"}),v.a.createElement(ue,{date:e.dateCreated}))))}}]),t}(v.a.Component);oe.displayName="ActivityItem",oe.defaultProps={defaultClipped:!1,clipHeight:68};var ce=oe,le=Object(q.c)("span",{target:"e1aiddbr0"})("font-weight:600;"),ue=Object(q.c)(G.a,{target:"e1aiddbr1"})("color:",(function(e){return e.theme.gray2}),";padding-left:",Object(L.a)(1),";");function me(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function de(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?me(a,!0).forEach((function(t){w()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):me(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var pe=function(e){function t(e){var a;return r()(this,t),(a=c()(this,u()(t).call(this,e))).fetchData=function(){var e=a.props.location;a.props.api.clear(),a.props.api.request(a.props.endpoint,{method:"GET",query:de({cursor:e.query.cursor||""},a.props.query),success:function(e,t,n){a.setState({loading:!1,error:!1,itemList:e,pageLinks:n.getResponseHeader("Link")})},error:function(){a.setState({loading:!1,error:!0})}})},a.state={itemList:[],loading:!0,error:!1,pageLinks:null},a}return d()(t,e),s()(t,[{key:"componentWillMount",value:function(){this.fetchData()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.location,a=e.location;t.pathname===a.pathname&&t.search===a.search||(this.setState({itemList:[],loading:!0,error:!1,pageLinks:null}),this.fetchData())}},{key:"renderResults",value:function(){var e=this;return this.state.loading?this.renderLoading():this.state.error?v.a.createElement(C.a,{onRetry:this.fetchData}):this.state.itemList.length>0?v.a.createElement("div",{"data-test-id":"activity-feed-list",className:"activity"},this.state.itemList.map((function(t){return v.a.createElement(I.a,{mini:!0,className:Object(k.css)({marginBottom:Object(L.a)(1),borderRadius:0}),key:t.id},v.a.createElement(ce,{organization:e.props.organization,item:t}))}))):this.renderEmpty()}},{key:"renderLoading",value:function(){return v.a.createElement(_.default,null)}},{key:"renderEmpty",value:function(){return v.a.createElement(z.a,{icon:"icon-circle-exclamation"},Object(f.b)("Nothing to show here, move along."))}},{key:"render",value:function(){return v.a.createElement(v.a.Fragment,null,v.a.createElement(N.a,null,this.renderResults()),this.props.pagination&&this.state.pageLinks&&v.a.createElement(R.a,j()({pageLinks:this.state.pageLinks},this.props)))}}]),t}(v.a.Component);pe.displayName="ActivityFeed",pe.defaultProps={pagination:!0,query:{}};var he=Object(S.a)(pe),ge=function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return d()(t,e),s()(t,[{key:"render",value:function(){var e=this.props,t=e.organization,a=e.params,n=e.location;return v.a.createElement(b.b,null,v.a.createElement("div",{className:"organization-home"},v.a.createElement(ve,{organization:t,params:a,location:n})))}}]),t}(v.a.Component);ge.displayName="OrganizationActivityContainer";var ve=function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return d()(t,e),s()(t,[{key:"getEndpoint",value:function(){return"/organizations/".concat(this.props.params.orgId,"/activity/")}},{key:"getTitle",value:function(){return"Activity - ".concat(this.props.params.orgId)}},{key:"render",value:function(){return v.a.createElement(h.a,{title:this.getTitle()},v.a.createElement(v.a.Fragment,null,v.a.createElement(y.a,{withMargins:!0},Object(f.b)("Activity")),v.a.createElement(he,{organization:this.props.organization,endpoint:this.getEndpoint(),query:{per_page:100},pagination:!0,location:this.props.location})))}}]),t}(v.a.Component);ve.displayName="OrganizationActivity";t.default=Object(E.a)(ge)}}]);
//# sourceMappingURL=OrganizationActivity.js.map