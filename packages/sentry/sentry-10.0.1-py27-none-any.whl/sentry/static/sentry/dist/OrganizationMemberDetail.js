(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[117],{1609:function(e,t,n){"use strict";var a,r,o=n(2),i=n(44),s=n.n(i),c=n(1),l=n.n(c),u=n(0),d=n.n(u),m=n(35),p=n(289),b=n(47),h=n(28),f=n(4),g=n(5),y=n(105),O=n.n(y),v=n(3),j=n(336),E=n(50),R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={query:"",busy:!1},t.immediateQuery=function(e){return Object(o.b)(t,void 0,void 0,(function(){var t,n,a,r,i,s;return Object(o.e)(this,(function(c){switch(c.label){case 0:t=this.props,n=t.location,a=t.api,this.setState({busy:!0}),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,a.requestPromise(""+this.props.url,{includeAllArgs:!0,method:"GET",query:Object(o.a)(Object(o.a)({},n.query),{query:e})})];case 2:return r=o.g.apply(void 0,[c.sent(),3]),i=r[0],s=r[2],this.state.query===e&&this.props.onSuccess(i,s),[3,4];case 3:return c.sent(),this.props.onError(),[3,4];case 4:return this.setState({busy:!1}),[2]}}))}))},t.query=O()(t.immediateQuery,t.props.debounceWait),t.handleChange=function(e){t.query(e),t.setState({query:e})},t.handleInputChange=function(e){return t.handleChange(e.target.value)},t.handleSearch=function(e){var n=t.props,a=n.updateRoute,r=n.onSearchSubmit;if(e.preventDefault(),a){var o=t.props,i=o.router,s=o.location;i.push({pathname:s.pathname,query:{query:t.state.query}})}"function"==typeof r&&r(t.state.query,e)},t}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.placeholder,n=e.children,a=e.className,r=this.state,o=r.busy,i=r.query,s=d.a.createElement(S,{onSubmit:this.handleSearch},d.a.createElement(j.a,{value:i,onChange:this.handleInputChange,className:a,placeholder:t}),o&&d.a.createElement(w,{size:18,hideMessage:!0,mini:!0}));return void 0===n?s:n({defaultSearchBar:s,busy:o,value:i,handleChange:this.handleChange})},t.defaultProps={placeholder:"Search...",debounceWait:200},t}(d.a.Component),w=Object(v.c)(E.default,{target:"e6xwo0"})(a||(a=Object(o.f)(["\n  position: absolute;\n  right: 25px;\n  top: 50%;\n  transform: translateY(-13px);\n"],["\n  position: absolute;\n  right: 25px;\n  top: 50%;\n  transform: translateY(-13px);\n"]))),S=Object(v.c)("form",{target:"e6xwo1"})(r||(r=Object(o.f)(["\n  position: relative;\n"],["\n  position: relative;\n"]))),q=g.withRouter(R),x=n(159),T=n(6),k=n.n(T),C=n(7),D=n.n(C),z=n(9),M=n.n(z),A=n(8),I=n.n(A),P=n(10),N=n.n(P),L=n(251),B=n.n(L),H=n(104),Y=n(73),_=function(e){function t(){return k()(this,t),M()(this,I()(t).apply(this,arguments))}return N()(t,e),D()(t,[{key:"componentDidMount",value:function(){var e=this.props.routes,t=this.context,n=t.organization,a=t.project,r=Object(Y.a)(e);m.l((function(e){e.setFingerprint(["Permission Denied",r]),e.setExtra("route",r),e.setExtra("orgFeatures",n&&n.features||[]),e.setExtra("orgAccess",n&&n.access||[]),e.setExtra("projectFeatures",a&&a.features||[]),m.c(new Error("".concat("Permission Denied").concat(r?" : ".concat(r):"")))}))}},{key:"render",value:function(){return d.a.createElement(B.a,{title:Object(f.b)("Permission Denied")},d.a.createElement(x.a,{message:Object(f.c)("Your role does not have the necessary permissions to access this resource, please read more about [link:organizational roles]",{link:d.a.createElement(H.a,{href:"https://docs.sentry.io/learn/membership/"})})}))}}]),t}(d.a.Component);_.displayName="PermissionDenied",_.contextTypes={organization:l.a.object,project:l.a.object};var F=Object(g.withRouter)(_),J=n(569);function K(e,t){return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];try{return t.apply(void 0,Object(o.i)(n))}catch(t){return console.error(t),setTimeout((function(){throw t})),e.setState({error:t}),null}}}var W=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.reloadOnVisible=!1,a.shouldReloadOnVisible=!1,a.shouldReload=!1,a.shouldRenderBadRequests=!1,a.api=new b.a,a.markShouldMeasure=function(e){var t=void 0===e?{}:e,n=t.remainingRequests,r=t.error;a._measurement.hasMeasured||(a._measurement.finished=0===n,a._measurement.error=r||a._measurement.error)},a.remountComponent=function(){a.shouldReload?a.reloadData():a.setState(a.getDefaultState(),a.fetchData)},a.visibilityReloader=function(){return a.shouldReloadOnVisible&&!a.state.loading&&!document.hidden&&a.reloadData()},a.fetchData=function(e){var t=a.getEndpoints();t.length?(a.api.clear(),a.setState(Object(o.a)({loading:!0,error:!1,remainingRequests:t.length},e)),t.forEach((function(e){var t=Object(o.g)(e,4),n=t[0],r=t[1],i=t[2],s=t[3];s=s||{};var c=a.props.location&&a.props.location.query||{},l=i&&i.query||{};(s.paginate||c.cursor)&&(l=Object(o.a)(Object(o.a)({},c),l)),a.api.request(r,Object(o.a)(Object(o.a)({method:"GET"},i),{query:l,success:function(e,t,r){a.handleRequestSuccess({stateKey:n,data:e,jqXHR:r},!0)},error:function(e){s.allowError&&s.allowError(e)&&(e=null),a.handleError(e,[n,r,i,s])}}))}))):a.setState({loading:!1,error:!1})},a.fetchData=K(a,a.fetchData.bind(a)),a.render=K(a,a.render.bind(a)),a.state=a.getDefaultState(),a._measurement={hasMeasured:!1},t.routes&&t.routes&&h.b.mark("async-component-"+Object(Y.a)(t.routes)),a}return Object(o.d)(t,e),t.prototype.componentWillMount=function(){this.api=new b.a,this.fetchData(),this.reloadOnVisible&&document.addEventListener("visibilitychange",this.visibilityReloader)},t.prototype.componentWillReceiveProps=function(e,t){},t.prototype.componentDidUpdate=function(e,t){var n=!!t.router,a=void 0!==e.location,r=a?this.props.location:n?this.context.router.location:null,o=a?e.location:n?t.router.location:null;if(r&&o){if(!this._measurement.hasMeasured&&this._measurement.finished&&this.props.routes){var i=Object(Y.a)(this.props.routes);h.b.measure({name:"app.component.async-component",start:"async-component-"+i,data:{route:i,error:this._measurement.error}}),this._measurement.hasMeasured=!0,"function"==typeof this.props.finishProfile&&this.props.finishProfile()}s()(this.props.params,e.params)&&r.search===o.search&&r.state===o.state||this.remountComponent()}},t.prototype.componentWillUnmount=function(){this.api.clear(),document.removeEventListener("visibilitychange",this.visibilityReloader)},t.prototype.getDefaultState=function(){var e=this.getEndpoints(),t={loading:!0,reloading:!1,error:!1,errors:{}};return e.forEach((function(e){var n=Object(o.g)(e,2),a=n[0];n[1];t[a]=null})),t},t.prototype.reloadData=function(){this.fetchData({reloading:!0})},t.prototype.onRequestSuccess=function(e){},t.prototype.onRequestError=function(e,t){},t.prototype.handleRequestSuccess=function(e,t){var n=this,a=e.stateKey,r=e.data,o=e.jqXHR;this.setState((function(e){var i,s=((i={})[a]=r,i[a+"PageLinks"]=o&&o.getResponseHeader("Link"),i);return t&&(s.remainingRequests=e.remainingRequests-1,s.loading=e.remainingRequests>1,s.reloading=e.reloading&&s.loading,n.markShouldMeasure({remainingRequests:s.remainingRequests})),s})),this.onRequestSuccess({stateKey:a,data:r,jqXHR:o})},t.prototype.handleError=function(e,t){var n=this,a=Object(o.g)(t,1)[0];e&&e.responseText&&m.a({message:e.responseText,category:"xhr",level:p.a.Error}),this.setState((function(t){var r,i,s=t.remainingRequests>1,c=((r={})[a]=null,r.errors=Object(o.a)(Object(o.a)({},t.errors),((i={})[a]=e,i)),r.error=t.error||!!e,r.remainingRequests=t.remainingRequests-1,r.loading=s,r.reloading=t.reloading&&s,r);return n.markShouldMeasure({remainingRequests:c.remainingRequests,error:!0}),c})),this.onRequestError(e,t)},t.prototype.getEndpointParams=function(){return console.warn("getEndpointParams is deprecated"),{}},t.prototype.getEndpoint=function(){return console.warn("getEndpoint is deprecated"),null},t.prototype.getEndpoints=function(){var e=this.getEndpoint();return e?[["data",e,this.getEndpointParams()]]:[]},t.prototype.renderSearchInput=function(e){var t=this,n=e.stateKey,a=e.url,r=Object(o.h)(e,["stateKey","url"]),i=Object(o.g)(this.getEndpoints()||[null],1)[0],s=n||i&&i[0],c=a||i&&i[1];return d.a.createElement(q,Object(o.a)({url:c},r,{api:this.api,onSuccess:function(e,n){t.handleRequestSuccess({stateKey:s,data:e,jqXHR:n})},onError:function(){t.renderError(new Error("Error with AsyncComponentSearchInput"))}}))},t.prototype.renderLoading=function(){return d.a.createElement(E.default,null)},t.prototype.renderError=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var a=this.state.errors,r=Object.values(a).find((function(e){return e&&401===e.status})),o=Object.values(a).find((function(e){return e&&403===e.status})),i=!!Object.values(a).find((function(e){return e&&0!==e.status}))||t;if(r)return d.a.createElement(x.a,{message:Object(f.b)("You are not authorized to access this resource.")});if(o)return d.a.createElement(F,null);if(this.shouldRenderBadRequests){var s=Object.values(a).filter((function(e){return e&&400===e.status&&e.responseJSON&&e.responseJSON.detail})).map((function(e){return e.responseJSON.detail}));if(s.length)return d.a.createElement(x.a,{message:s.join("\n")})}return d.a.createElement(J.a,{error:e,component:this,disableLogSentry:!i,disableReport:n,onRetry:this.remountComponent})},t.prototype.renderComponent=function(){return!this.state.loading||this.shouldReload&&this.state.reloading?this.state.error?this.renderError(new Error("Unable to load all required endpoints")):this.renderBody():this.renderLoading()},t.prototype.renderBody=function(){throw new Error("Not implemented")},t.prototype.render=function(){return this.renderComponent()},t.propTypes={location:l.a.object,router:l.a.object},t.contextTypes={router:l.a.object},t}(d.a.Component);t.a=W},1610:function(e,t,n){"use strict";var a=n(2),r=n(251),o=n.n(r),i=n(0),s=n.n(i),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.d)(t,e),t.prototype.getTitle=function(){return""},t.prototype.render=function(){var e=this.getTitle();return s.a.createElement(o.a,{title:(e?e+" - ":"")+"Sentry"},this.renderComponent())},t}(n(1609).a);t.a=c},1611:function(e,t,n){"use strict";var a,r,o,i,s,c=n(2),l=n(1),u=n.n(l),d=n(0),m=n.n(d),p=n(3),b=n(11),h=n(337),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.icon,n=e.title,a=e.action,r=e.tabs,o=e.noTitleStyles,i=Object(c.h)(e,["icon","title","action","tabs","noTitleStyles"]);return m.a.createElement("div",Object(c.a)({},i),m.a.createElement(g,null,t&&m.a.createElement(O,null,t),n&&m.a.createElement(y,{tabs:r,styled:o},m.a.createElement(h.a,null,n)),a&&m.a.createElement(v,{tabs:r},a)),r&&m.a.createElement("div",null,r))},t.propTypes={icon:u.a.node,title:u.a.node.isRequired,action:u.a.node,tabs:u.a.node,noTitleStyles:u.a.bool},t.defaultProps={noTitleStyles:!1},t}(m.a.Component),g=Object(p.c)("div",{target:"e1uay4fd0"})(a||(a=Object(c.f)(["\n  display: flex;\n  align-items: center;\n"],["\n  display: flex;\n  align-items: center;\n"]))),y=Object(p.c)("div",{target:"e1uay4fd1"})(r||(r=Object(c.f)(["\n  ",";\n  margin: ",";\n  flex: 1;\n"],["\n  ",";\n  margin: ",";\n  flex: 1;\n"])),(function(e){return!e.styled&&"\n    font-size: 20px;\n    font-weight: bold;"}),(function(e){return e.tabs?Object(b.a)(4)+" 0 "+Object(b.a)(2):Object(b.a)(4)+" 0"})),O=Object(p.c)("div",{target:"e1uay4fd2"})(o||(o=Object(c.f)(["\n  margin-right: ",";\n"],["\n  margin-right: ",";\n"])),Object(b.a)(1)),v=Object(p.c)("div",{target:"e1uay4fd3"})(i||(i=Object(c.f)(["\n  ",";\n"],["\n  ",";\n"])),(function(e){return e.tabs?"margin-top: "+Object(b.a)(2):null})),j=Object(p.c)(f,{target:"e1uay4fd4"})(s||(s=Object(c.f)(["\n  font-size: 14px;\n  margin-top: -",";\n"],["\n  font-size: 14px;\n  margin-top: -",";\n"])),Object(b.a)(4));t.a=j},1618:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(577),r=n.n(a),o=n(447);function i(e,t){var n,a,i=t.routes,s=t.params,c=t.location,l=t.stepBack,u=i.map((function(e){return e.path||""}));"string"!=typeof e?(a=i.indexOf(e)+1,n=r()(u.slice(0,a),(function(e){return"/"===e[0]}))):n=r()(u,(function(e){return"/"===e[0]}));var d=u.slice(n,a);void 0!==l&&(d=d.slice(0,l));var m=void 0!==c&&c.search?c.search:"",p=""+d.join("")+("string"!=typeof e?"":e)+m;return Object(o.a)(p,s)}},1629:function(e,t,n){"use strict";var a=n(2),r=n(1),o=n.n(r),i=n(0),s=n.n(i),c=n(93),l=n.n(c),u=n(33),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getFormat=function(e){var n=e.clock24Hours,a=t.props,r=a.dateOnly,o=a.timeOnly,i=a.seconds,s=a.shortDate;return r?"LL":o?"LT":s?"MM/DD/YYYY":n?"MMMM D YYYY HH:mm:ss z":i?"ll LTS z":"lll"},t}return Object(a.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.date,n=(e.seconds,e.shortDate,e.dateOnly,e.utc),r=(e.timeOnly,Object(a.h)(e,["date","seconds","shortDate","dateOnly","utc","timeOnly"])),o=u.default.get("user"),i=o?o.options:{},c=this.getFormat(i);return s.a.createElement("time",Object(a.a)({},r),n?l.a.utc(t).format(c):l.a.tz(t,i.timezone).format(c))},t.propTypes={date:o.a.any.isRequired,dateOnly:o.a.bool,timeOnly:o.a.bool,shortDate:o.a.bool,seconds:o.a.bool,utc:o.a.bool},t.defaultProps={seconds:!0},t}(s.a.Component);t.a=d},1816:function(e,t,n){"use strict";var a=n(6),r=n.n(a),o=n(7),i=n.n(o),s=n(9),c=n.n(s),l=n(8),u=n.n(l),d=n(10),m=n.n(d),p=n(0),b=n.n(p),h=n(3),f=n(105),g=n.n(f),y=n(4),O=n(27),v=n(252),j=n(98),E=n(250),R=n(253),w=n(346),S=n(570),q=n(11),x=n(61),T=function(e){function t(){var e,n;r()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=c()(this,(e=u()(t)).call.apply(e,[this].concat(o)))).state={teams:null},n.fetchTeams=g()((function(e){var t=n.props.organization;n.props.api.requestPromise("/organizations/".concat(t.slug,"/teams/"),{query:{query:e}}).then((function(e){return n.setState({teams:e})}))}),100),n.handleQueryUpdate=function(e){n.fetchTeams(e.target.value)},n.handleAddTeam=function(e){var t=n.state.teams.find((function(t){return t.slug===e.value}));n.props.onAddTeam(t)},n.handleRemove=function(e){n.props.onRemoveTeam(e)},n}return m()(t,e),i()(t,[{key:"componentDidMount",value:function(){this.fetchTeams()}},{key:"renderTeamAddDropDown",value:function(){var e,t=this.props,n=t.disabled,a=t.selectedTeams,r=t.menuHeader,o=this.state.teams,i=null===o||0===o.length,s=i||n;return e=i?[]:o.filter((function(e){return!a.includes(e.slug)})).map((function(e){return{value:e.slug,searchKey:e.slug,label:b.a.createElement(C,null,"#",e.slug)}})),b.a.createElement(R.a,{items:e,onChange:this.handleQueryUpdate,onSelect:this.handleAddTeam,emptyMessage:Object(y.b)("No teams"),menuHeader:r,disabled:s},(function(e){var t=e.isOpen;return b.a.createElement(w.a,{"aria-label":Object(y.b)("Add Team"),isOpen:t,size:"xsmall",disabled:s},Object(y.b)("Add Team"))}))}},{key:"renderBody",value:function(){var e=this,t=this.props,n=t.organization,a=t.selectedTeams,r=t.disabled,o=t.confirmLastTeamRemoveMessage;if(0===a.length)return b.a.createElement(S.a,null,Object(y.b)("No Teams assigned"));var i=1===a.length&&o?o:null;return a.map((function(t){return b.a.createElement(k,{key:t,orgId:n.slug,team:t,onRemove:e.handleRemove,disabled:r,confirmMessage:i})}))}},{key:"render",value:function(){return b.a.createElement(E.a,null,b.a.createElement(E.e,{hasButtons:!0},Object(y.b)("Team"),this.renderTeamAddDropDown()),b.a.createElement(E.c,null,this.renderBody()))}}]),t}(b.a.Component);T.displayName="TeamSelect";var k=function(e){var t=e.orgId,n=e.team,a=e.onRemove,r=e.disabled,o=e.confirmMessage;return b.a.createElement(D,null,b.a.createElement(z,{to:"/settings/".concat(t,"/teams/").concat(n,"/")},"#",n),b.a.createElement(v.a,{message:o,bypass:!o,onConfirm:function(){return a(n)},disabled:r},b.a.createElement(O.a,{size:"xsmall",icon:"icon-circle-subtract",disabled:r},Object(y.b)("Remove"))))};k.displayName="TeamRow";var C=Object(h.c)("div",{target:"e2fk6ws0"})("padding:",Object(q.a)(.5)," ",Object(q.a)(.25),";text-transform:none;"),D=Object(h.c)(E.f,{target:"e2fk6ws1"})("padding:",Object(q.a)(2),";align-items:center;"),z=Object(h.c)(j.a,{target:"e2fk6ws2"})("flex:1;margin-right:",Object(q.a)(1),";");t.a=Object(x.a)(T)},2018:function(e,t,n){"use strict";var a,r=n(2),o=n(1),i=n.n(o),s=n(0),c=n.n(s),l=n(3),u=n(250),d=n(4),m=n(36),p=n.n(m),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=Object(r.h)(e,["className"]),a=p()("radio-select",t);return c.a.createElement("input",Object(r.a)({type:"radio",className:a},n))},t.defaultProps={checked:!1},t}(c.a.Component),h=n(339),f=Object(l.c)("label",{target:"e1noblkb0"})(a||(a=Object(r.f)(["\n  display: flex;\n  flex: 1;\n  align-items: center;\n  margin-bottom: 0;\n"],["\n  display: flex;\n  flex: 1;\n  align-items: center;\n  margin-bottom: 0;\n"]))),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.d)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.disabled,a=t.enforceAllowed,r=t.roleList,o=t.selectedRole;return c.a.createElement(u.a,null,c.a.createElement(u.e,null,Object(d.b)("Role")),c.a.createElement(u.c,null,r.map((function(t){var r=t.desc,i=t.name,s=t.id,l=t.allowed,d=n||a&&!l;return c.a.createElement(u.f,{key:s,onClick:function(){return!d&&e.props.setRole(s)},css:d?{color:"grey",cursor:"default"}:{}},c.a.createElement(f,null,c.a.createElement(b,{id:s,value:i,checked:s===o,readOnly:!0}),c.a.createElement("div",{style:{flex:1,padding:"0 16px"}},i,c.a.createElement(h.a,{noMargin:!0},c.a.createElement("div",{className:"help-block"},r)))))}))))},t.propTypes={enforceAllowed:i.a.bool,disabled:i.a.bool,selectedRole:i.a.string,roleList:i.a.array,setRole:i.a.func},t}(c.a.Component);t.a=g},2581:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(5),o=n(0),i=n.n(o),s=n(35),c=n(3),l=n(250),u=n(51),d=n(584),m=n(354),p=n(450),b=n(4),h=n(1610),f=n(591),g=n(27),y=n(252),O=n(1629),v=n(104),j=n(576),E=n(602),R=n(1611),w=n(1816),S=n(39),q=n(1618),x=n(11),T=n(86),k=n(2018),C=Object(b.b)("Cannot be reset since user is in more than one organization"),D=Object(b.b)("Not enrolled in two-factor authentication"),z=Object(b.b)("You do not have permission to perform this action"),M=Object(b.b)("Cannot be reset since two-factor is required for this organization"),A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleSave=function(){return Object(a.b)(t,void 0,void 0,(function(){var e,t,n,r,o;return Object(a.e)(this,(function(a){switch(a.label){case 0:e=this.props,t=e.organization,n=e.params,Object(u.b)(Object(b.b)("Saving...")),this.setState({busy:!0}),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Object(p.e)(this.api,{orgId:t.slug,memberId:n.memberId,data:this.state.member})];case 2:return a.sent(),Object(u.d)(Object(b.b)("Saved")),this.redirectToMemberPage(),[3,4];case 3:return r=a.sent(),o=r&&r.responseJSON&&r.responseJSON.detail||Object(b.b)("Could not save..."),Object(u.a)(o),[3,4];case 4:return this.setState({busy:!1}),[2]}}))}))},t.handleInvite=function(e){return Object(a.b)(t,void 0,void 0,(function(){var t,n,r,o;return Object(a.e)(this,(function(i){switch(i.label){case 0:t=this.props,n=t.organization,r=t.params,Object(u.b)(Object(b.b)("Sending invite...")),this.setState({busy:!0}),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,Object(p.d)(this.api,{orgId:n.slug,memberId:r.memberId,regenerate:e})];case 2:return o=i.sent(),Object(u.d)(Object(b.b)("Sent invite!")),e&&this.setState((function(e){return{member:Object(a.a)(Object(a.a)({},e.member),o)}})),[3,4];case 3:return i.sent(),Object(u.a)(Object(b.b)("Could not send invite")),[3,4];case 4:return this.setState({busy:!1}),[2]}}))}))},t.handleAddTeam=function(e){var n=t.state.member;n.teams.includes(e.slug)||n.teams.push(e.slug),t.setState({member:n})},t.handleRemoveTeam=function(e){var n=t.state.member;t.setState({member:Object(a.a)(Object(a.a)({},n),{teams:n.teams.filter((function(t){return t!==e}))})})},t.handle2faReset=function(){return Object(a.b)(t,void 0,void 0,(function(){var e,t,n,r,o,i,c=this;return Object(a.e)(this,(function(a){switch(a.label){case 0:e=this.props,t=e.organization,n=e.router,r=this.state.member.user,o=r.authenticators.map((function(e){return Object(m.c)(c.api,r.id,e.id)})),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Promise.all(o)];case 2:return a.sent(),n.push("/settings/"+t.slug+"/members/"),Object(u.d)(Object(b.b)("All authenticators have been removed")),[3,4];case 3:return i=a.sent(),Object(u.a)(Object(b.b)("Error removing authenticators")),s.c(i),[3,4];case 4:return[2]}}))}))},t.showResetButton=function(){var e=t.props.organization,n=t.state.member.user;return!(!n||!n.authenticators||e.require2FA)&&(n.authenticators.length>=1&&n.canReset2fa)},t.getTooltip=function(){var e=t.props.organization,n=t.state.member.user;return n?n.authenticators?n.authenticators.length?n.canReset2fa?e.require2FA?M:"":C:D:z:""},t}return Object(a.d)(t,e),t.prototype.getDefaultState=function(){return Object(a.a)(Object(a.a)({},e.prototype.getDefaultState.call(this)),{roleList:[],selectedRole:"",member:null})},t.prototype.getEndpoints=function(){var e=this.props,t=e.organization,n=e.params;return[["member","/organizations/"+t.slug+"/members/"+n.memberId+"/"]]},t.prototype.redirectToMemberPage=function(){var e=this.props,t=e.location,n=e.params,a=e.routes,o=Object(q.a)("members/",{location:t,routes:a,params:n,stepBack:-2});r.browserHistory.push(o)},t.prototype.renderBody=function(){var e=this,t=this.props.organization,n=this.state.member;if(!n)return i.a.createElement(E.a,null);var r=t.access,o=n.invite_link,s=r.includes("org:write"),c=n.email,u=!n.expired,d=!n.pending;return i.a.createElement(i.a.Fragment,null,i.a.createElement(R.a,{title:i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,n.name),i.a.createElement(F,null,Object(b.b)("Member Settings")))}),i.a.createElement(l.a,null,i.a.createElement(l.e,null,Object(b.b)("Basics")),i.a.createElement(l.c,null,i.a.createElement(l.f,null,i.a.createElement(W,null,i.a.createElement(J,null,i.a.createElement("div",null,i.a.createElement(K,null,Object(b.b)("Email")),i.a.createElement("div",null,i.a.createElement(v.a,{href:"mailto:"+c},c))),i.a.createElement("div",null,i.a.createElement(K,null,Object(b.b)("Status")),i.a.createElement("div",{"data-test-id":"member-status"},n.expired?i.a.createElement("em",null,Object(b.b)("Invitation Expired")):n.pending?i.a.createElement("em",null,Object(b.b)("Invitation Pending")):Object(b.b)("Active"))),i.a.createElement("div",null,i.a.createElement(K,null,Object(b.b)("Added")),i.a.createElement("div",null,i.a.createElement(O.a,{dateOnly:!0,date:n.dateCreated})))),o&&i.a.createElement(U,null,i.a.createElement("div",null,i.a.createElement(K,null,Object(b.b)("Invite Link")),i.a.createElement(f.a,null,i.a.createElement(Q,null,o)),i.a.createElement("p",{className:"help-block"},Object(b.b)("This unique invite link may only be used by this member."))),i.a.createElement(V,null,i.a.createElement(g.a,{onClick:function(){return e.handleInvite(!0)}},Object(b.b)("Generate New Invite")),u&&i.a.createElement(g.a,{"data-test-id":"resend-invite",onClick:function(){return e.handleInvite(!1)}},Object(b.b)("Resend Invite")))))))),d&&i.a.createElement(l.a,null,i.a.createElement(l.e,null,Object(b.b)("Authentication")),i.a.createElement(l.c,null,i.a.createElement(j.a,{alignRight:!0,flexibleControlStateSize:!0,label:Object(b.b)("Reset two-factor authentication"),help:Object(b.b)("Resetting two-factor authentication will remove all two-factor authentication methods for this member.")},i.a.createElement(S.a,{"data-test-id":"reset-2fa-tooltip",disabled:this.showResetButton(),title:this.getTooltip()},i.a.createElement(y.a,{disabled:!this.showResetButton(),message:Object(b.c)("Are you sure you want to disable all two-factor authentication methods for [name]?",{name:n.name?n.name:"this member"}),onConfirm:this.handle2faReset,"data-test-id":"reset-2fa-confirm"},i.a.createElement(g.a,{"data-test-id":"reset-2fa",priority:"danger"},Object(b.b)("Reset two-factor authentication"))))))),i.a.createElement(k.a,{enforceAllowed:!1,disabled:!s,roleList:n.roles,selectedRole:n.role,setRole:function(t){return e.setState({member:Object(a.a)(Object(a.a)({},n),{role:t})})}}),i.a.createElement(w.a,{organization:t,selectedTeams:n.teams,disabled:!s,onAddTeam:this.handleAddTeam,onRemoveTeam:this.handleRemoveTeam}),i.a.createElement(X,null,i.a.createElement(g.a,{priority:"primary",busy:this.state.busy,onClick:this.handleSave,disabled:!s},Object(b.b)("Save Member"))))},t}(h.a);t.default=Object(T.a)(A);var I,P,N,L,B,H,Y,_,F=Object(c.c)("div",{target:"e4la2im0"})(I||(I=Object(a.f)(["\n  color: ",";\n  font-weight: normal;\n  font-size: ",";\n"],["\n  color: ",";\n  font-weight: normal;\n  font-size: ",";\n"])),(function(e){return e.theme.gray2}),(function(e){return e.theme.fontSizeLarge})),J=Object(c.c)("div",{target:"e4la2im1"})(P||(P=Object(a.f)(["\n  display: grid;\n  grid-auto-flow: column;\n  grid-template-columns: 2fr 1fr 1fr;\n  grid-gap: ",";\n  width: 100%;\n\n  @media (max-width: ",") {\n    grid-auto-flow: row;\n    grid-template-columns: auto;\n  }\n"],["\n  display: grid;\n  grid-auto-flow: column;\n  grid-template-columns: 2fr 1fr 1fr;\n  grid-gap: ",";\n  width: 100%;\n\n  @media (max-width: ",") {\n    grid-auto-flow: row;\n    grid-template-columns: auto;\n  }\n"])),Object(x.a)(2),(function(e){return e.theme.breakpoints[0]})),K=Object(c.c)("div",{target:"e4la2im2"})(N||(N=Object(a.f)(["\n  font-weight: bold;\n  margin-bottom: ",";\n  color: ",";\n"],["\n  font-weight: bold;\n  margin-bottom: ",";\n  color: ",";\n"])),Object(x.a)(.5),(function(e){return e.theme.gray4})),W=Object(c.c)("div",{target:"e4la2im3"})(L||(L=Object(a.f)(["\n  overflow: hidden;\n  flex: 1;\n"],["\n  overflow: hidden;\n  flex: 1;\n"]))),U=Object(c.c)("div",{target:"e4la2im4"})(B||(B=Object(a.f)(["\n  border-top: 1px solid ",";\n  margin-top: ",";\n  padding-top: ",";\n"],["\n  border-top: 1px solid ",";\n  margin-top: ",";\n  padding-top: ",";\n"])),(function(e){return e.theme.borderLight}),Object(x.a)(2),Object(x.a)(2)),Q=Object(c.c)("code",{target:"e4la2im5"})(H||(H=Object(a.f)(["\n  ","; /* Have to do this for typescript :( */\n"],["\n  ","; /* Have to do this for typescript :( */\n"])),(function(e){return Object(d.a)(e)})),V=Object(c.c)("div",{target:"e4la2im6"})(Y||(Y=Object(a.f)(["\n  display: grid;\n  grid-gap: ",";\n  grid-auto-flow: column;\n  justify-content: flex-end;\n  margin-top: ",";\n"],["\n  display: grid;\n  grid-gap: ",";\n  grid-auto-flow: column;\n  justify-content: flex-end;\n  margin-top: ",";\n"])),Object(x.a)(1),Object(x.a)(2)),X=Object(c.c)("div",{target:"e4la2im7"})(_||(_=Object(a.f)(["\n  display: flex;\n  justify-content: flex-end;\n"],["\n  display: flex;\n  justify-content: flex-end;\n"])))}}]);
//# sourceMappingURL=OrganizationMemberDetail.js.map