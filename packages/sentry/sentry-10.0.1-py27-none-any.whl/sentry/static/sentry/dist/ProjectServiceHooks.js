(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[155],{1609:function(e,t,n){"use strict";var r,a,o=n(2),i=n(44),s=n.n(i),c=n(1),u=n.n(c),l=n(0),p=n.n(l),d=n(35),h=n(289),m=n(47),f=n(28),b=n(4),g=n(5),y=n(105),v=n.n(y),j=n(3),E=n(336),O=n(50),x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={query:"",busy:!1},t.immediateQuery=function(e){return Object(o.b)(t,void 0,void 0,(function(){var t,n,r,a,i,s;return Object(o.e)(this,(function(c){switch(c.label){case 0:t=this.props,n=t.location,r=t.api,this.setState({busy:!0}),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,r.requestPromise(""+this.props.url,{includeAllArgs:!0,method:"GET",query:Object(o.a)(Object(o.a)({},n.query),{query:e})})];case 2:return a=o.g.apply(void 0,[c.sent(),3]),i=a[0],s=a[2],this.state.query===e&&this.props.onSuccess(i,s),[3,4];case 3:return c.sent(),this.props.onError(),[3,4];case 4:return this.setState({busy:!1}),[2]}}))}))},t.query=v()(t.immediateQuery,t.props.debounceWait),t.handleChange=function(e){t.query(e),t.setState({query:e})},t.handleInputChange=function(e){return t.handleChange(e.target.value)},t.handleSearch=function(e){var n=t.props,r=n.updateRoute,a=n.onSearchSubmit;if(e.preventDefault(),r){var o=t.props,i=o.router,s=o.location;i.push({pathname:s.pathname,query:{query:t.state.query}})}"function"==typeof a&&a(t.state.query,e)},t}return Object(o.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.placeholder,n=e.children,r=e.className,a=this.state,o=a.busy,i=a.query,s=p.a.createElement(w,{onSubmit:this.handleSearch},p.a.createElement(E.a,{value:i,onChange:this.handleInputChange,className:r,placeholder:t}),o&&p.a.createElement(k,{size:18,hideMessage:!0,mini:!0}));return void 0===n?s:n({defaultSearchBar:s,busy:o,value:i,handleChange:this.handleChange})},t.defaultProps={placeholder:"Search...",debounceWait:200},t}(p.a.Component),k=Object(j.c)(O.default,{target:"e6xwo0"})(r||(r=Object(o.f)(["\n  position: absolute;\n  right: 25px;\n  top: 50%;\n  transform: translateY(-13px);\n"],["\n  position: absolute;\n  right: 25px;\n  top: 50%;\n  transform: translateY(-13px);\n"]))),w=Object(j.c)("form",{target:"e6xwo1"})(a||(a=Object(o.f)(["\n  position: relative;\n"],["\n  position: relative;\n"]))),S=g.withRouter(x),q=n(159),R=n(6),D=n.n(R),P=n(7),T=n.n(P),C=n(9),z=n.n(C),L=n(8),A=n.n(L),N=n(10),I=n.n(N),M=n(251),B=n.n(M),H=n(104),_=n(73),F=function(e){function t(){return D()(this,t),z()(this,A()(t).apply(this,arguments))}return I()(t,e),T()(t,[{key:"componentDidMount",value:function(){var e=this.props.routes,t=this.context,n=t.organization,r=t.project,a=Object(_.a)(e);d.l((function(e){e.setFingerprint(["Permission Denied",a]),e.setExtra("route",a),e.setExtra("orgFeatures",n&&n.features||[]),e.setExtra("orgAccess",n&&n.access||[]),e.setExtra("projectFeatures",r&&r.features||[]),d.c(new Error("".concat("Permission Denied").concat(a?" : ".concat(a):"")))}))}},{key:"render",value:function(){return p.a.createElement(B.a,{title:Object(b.b)("Permission Denied")},p.a.createElement(q.a,{message:Object(b.c)("Your role does not have the necessary permissions to access this resource, please read more about [link:organizational roles]",{link:p.a.createElement(H.a,{href:"https://docs.sentry.io/learn/membership/"})})}))}}]),t}(p.a.Component);F.displayName="PermissionDenied",F.contextTypes={organization:u.a.object,project:u.a.object};var W=Object(g.withRouter)(F),K=n(569);function X(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return t.apply(void 0,Object(o.i)(n))}catch(t){return console.error(t),setTimeout((function(){throw t})),e.setState({error:t}),null}}}var J=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.reloadOnVisible=!1,r.shouldReloadOnVisible=!1,r.shouldReload=!1,r.shouldRenderBadRequests=!1,r.api=new m.a,r.markShouldMeasure=function(e){var t=void 0===e?{}:e,n=t.remainingRequests,a=t.error;r._measurement.hasMeasured||(r._measurement.finished=0===n,r._measurement.error=a||r._measurement.error)},r.remountComponent=function(){r.shouldReload?r.reloadData():r.setState(r.getDefaultState(),r.fetchData)},r.visibilityReloader=function(){return r.shouldReloadOnVisible&&!r.state.loading&&!document.hidden&&r.reloadData()},r.fetchData=function(e){var t=r.getEndpoints();t.length?(r.api.clear(),r.setState(Object(o.a)({loading:!0,error:!1,remainingRequests:t.length},e)),t.forEach((function(e){var t=Object(o.g)(e,4),n=t[0],a=t[1],i=t[2],s=t[3];s=s||{};var c=r.props.location&&r.props.location.query||{},u=i&&i.query||{};(s.paginate||c.cursor)&&(u=Object(o.a)(Object(o.a)({},c),u)),r.api.request(a,Object(o.a)(Object(o.a)({method:"GET"},i),{query:u,success:function(e,t,a){r.handleRequestSuccess({stateKey:n,data:e,jqXHR:a},!0)},error:function(e){s.allowError&&s.allowError(e)&&(e=null),r.handleError(e,[n,a,i,s])}}))}))):r.setState({loading:!1,error:!1})},r.fetchData=X(r,r.fetchData.bind(r)),r.render=X(r,r.render.bind(r)),r.state=r.getDefaultState(),r._measurement={hasMeasured:!1},t.routes&&t.routes&&f.b.mark("async-component-"+Object(_.a)(t.routes)),r}return Object(o.d)(t,e),t.prototype.componentWillMount=function(){this.api=new m.a,this.fetchData(),this.reloadOnVisible&&document.addEventListener("visibilitychange",this.visibilityReloader)},t.prototype.componentWillReceiveProps=function(e,t){},t.prototype.componentDidUpdate=function(e,t){var n=!!t.router,r=void 0!==e.location,a=r?this.props.location:n?this.context.router.location:null,o=r?e.location:n?t.router.location:null;if(a&&o){if(!this._measurement.hasMeasured&&this._measurement.finished&&this.props.routes){var i=Object(_.a)(this.props.routes);f.b.measure({name:"app.component.async-component",start:"async-component-"+i,data:{route:i,error:this._measurement.error}}),this._measurement.hasMeasured=!0,"function"==typeof this.props.finishProfile&&this.props.finishProfile()}s()(this.props.params,e.params)&&a.search===o.search&&a.state===o.state||this.remountComponent()}},t.prototype.componentWillUnmount=function(){this.api.clear(),document.removeEventListener("visibilitychange",this.visibilityReloader)},t.prototype.getDefaultState=function(){var e=this.getEndpoints(),t={loading:!0,reloading:!1,error:!1,errors:{}};return e.forEach((function(e){var n=Object(o.g)(e,2),r=n[0];n[1];t[r]=null})),t},t.prototype.reloadData=function(){this.fetchData({reloading:!0})},t.prototype.onRequestSuccess=function(e){},t.prototype.onRequestError=function(e,t){},t.prototype.handleRequestSuccess=function(e,t){var n=this,r=e.stateKey,a=e.data,o=e.jqXHR;this.setState((function(e){var i,s=((i={})[r]=a,i[r+"PageLinks"]=o&&o.getResponseHeader("Link"),i);return t&&(s.remainingRequests=e.remainingRequests-1,s.loading=e.remainingRequests>1,s.reloading=e.reloading&&s.loading,n.markShouldMeasure({remainingRequests:s.remainingRequests})),s})),this.onRequestSuccess({stateKey:r,data:a,jqXHR:o})},t.prototype.handleError=function(e,t){var n=this,r=Object(o.g)(t,1)[0];e&&e.responseText&&d.a({message:e.responseText,category:"xhr",level:h.a.Error}),this.setState((function(t){var a,i,s=t.remainingRequests>1,c=((a={})[r]=null,a.errors=Object(o.a)(Object(o.a)({},t.errors),((i={})[r]=e,i)),a.error=t.error||!!e,a.remainingRequests=t.remainingRequests-1,a.loading=s,a.reloading=t.reloading&&s,a);return n.markShouldMeasure({remainingRequests:c.remainingRequests,error:!0}),c})),this.onRequestError(e,t)},t.prototype.getEndpointParams=function(){return console.warn("getEndpointParams is deprecated"),{}},t.prototype.getEndpoint=function(){return console.warn("getEndpoint is deprecated"),null},t.prototype.getEndpoints=function(){var e=this.getEndpoint();return e?[["data",e,this.getEndpointParams()]]:[]},t.prototype.renderSearchInput=function(e){var t=this,n=e.stateKey,r=e.url,a=Object(o.h)(e,["stateKey","url"]),i=Object(o.g)(this.getEndpoints()||[null],1)[0],s=n||i&&i[0],c=r||i&&i[1];return p.a.createElement(S,Object(o.a)({url:c},a,{api:this.api,onSuccess:function(e,n){t.handleRequestSuccess({stateKey:s,data:e,jqXHR:n})},onError:function(){t.renderError(new Error("Error with AsyncComponentSearchInput"))}}))},t.prototype.renderLoading=function(){return p.a.createElement(O.default,null)},t.prototype.renderError=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=this.state.errors,a=Object.values(r).find((function(e){return e&&401===e.status})),o=Object.values(r).find((function(e){return e&&403===e.status})),i=!!Object.values(r).find((function(e){return e&&0!==e.status}))||t;if(a)return p.a.createElement(q.a,{message:Object(b.b)("You are not authorized to access this resource.")});if(o)return p.a.createElement(W,null);if(this.shouldRenderBadRequests){var s=Object.values(r).filter((function(e){return e&&400===e.status&&e.responseJSON&&e.responseJSON.detail})).map((function(e){return e.responseJSON.detail}));if(s.length)return p.a.createElement(q.a,{message:s.join("\n")})}return p.a.createElement(K.a,{error:e,component:this,disableLogSentry:!i,disableReport:n,onRetry:this.remountComponent})},t.prototype.renderComponent=function(){return!this.state.loading||this.shouldReload&&this.state.reloading?this.state.error?this.renderError(new Error("Unable to load all required endpoints")):this.renderBody():this.renderLoading()},t.prototype.renderBody=function(){throw new Error("Not implemented")},t.prototype.render=function(){return this.renderComponent()},t.propTypes={location:u.a.object,router:u.a.object},t.contextTypes={router:u.a.object},t}(p.a.Component);t.a=J},1610:function(e,t,n){"use strict";var r=n(2),a=n(251),o=n.n(a),i=n(0),s=n.n(i),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.d)(t,e),t.prototype.getTitle=function(){return""},t.prototype.render=function(){var e=this.getTitle();return s.a.createElement(o.a,{title:(e?e+" - ":"")+"Sentry"},this.renderComponent())},t}(n(1609).a);t.a=c},1611:function(e,t,n){"use strict";var r,a,o,i,s,c=n(2),u=n(1),l=n.n(u),p=n(0),d=n.n(p),h=n(3),m=n(11),f=n(337),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.d)(t,e),t.prototype.render=function(){var e=this.props,t=e.icon,n=e.title,r=e.action,a=e.tabs,o=e.noTitleStyles,i=Object(c.h)(e,["icon","title","action","tabs","noTitleStyles"]);return d.a.createElement("div",Object(c.a)({},i),d.a.createElement(g,null,t&&d.a.createElement(v,null,t),n&&d.a.createElement(y,{tabs:a,styled:o},d.a.createElement(f.a,null,n)),r&&d.a.createElement(j,{tabs:a},r)),a&&d.a.createElement("div",null,a))},t.propTypes={icon:l.a.node,title:l.a.node.isRequired,action:l.a.node,tabs:l.a.node,noTitleStyles:l.a.bool},t.defaultProps={noTitleStyles:!1},t}(d.a.Component),g=Object(h.c)("div",{target:"e1uay4fd0"})(r||(r=Object(c.f)(["\n  display: flex;\n  align-items: center;\n"],["\n  display: flex;\n  align-items: center;\n"]))),y=Object(h.c)("div",{target:"e1uay4fd1"})(a||(a=Object(c.f)(["\n  ",";\n  margin: ",";\n  flex: 1;\n"],["\n  ",";\n  margin: ",";\n  flex: 1;\n"])),(function(e){return!e.styled&&"\n    font-size: 20px;\n    font-weight: bold;"}),(function(e){return e.tabs?Object(m.a)(4)+" 0 "+Object(m.a)(2):Object(m.a)(4)+" 0"})),v=Object(h.c)("div",{target:"e1uay4fd2"})(o||(o=Object(c.f)(["\n  margin-right: ",";\n"],["\n  margin-right: ",";\n"])),Object(m.a)(1)),j=Object(h.c)("div",{target:"e1uay4fd3"})(i||(i=Object(c.f)(["\n  ",";\n"],["\n  ",";\n"])),(function(e){return e.tabs?"margin-top: "+Object(m.a)(2):null})),E=Object(h.c)(b,{target:"e1uay4fd4"})(s||(s=Object(c.f)(["\n  font-size: 14px;\n  margin-top: -",";\n"],["\n  font-size: 14px;\n  margin-top: -",";\n"])),Object(m.a)(4));t.a=E},1699:function(e,t,n){"use strict";var r=n(2),a=n(0),o=n.n(a),i=n(3),s=function(e){var t=e.size,n=e.isActive,r=e.isLoading,a=e.isDisabled,i=e.toggle,s=e.id,c=e.className;return o.a.createElement(m,{id:s,type:"button",className:c,onClick:a?void 0:i,role:"checkbox","aria-checked":n,isLoading:r,isDisabled:a,isActive:n,size:t,"data-test-id":"switch"},o.a.createElement(f,{isDisabled:a,isActive:n,size:t}))};s.defaultProps={size:"sm"};var c,u,l=function(e){return"sm"===e.size?16:24},p=function(e){return l(e)-("sm"===e.size?6:10)},d=function(e){return"sm"===e.size?2:4},h=function(e){return e.isActive?d(e)+l(e):d(e)},m=Object(i.c)("button",{target:"ezmyi9u0"})(c||(c=Object(r.f)(["\n  display: inline-block;\n  background: none;\n  padding: 0;\n  border: 1px solid ",";\n  position: relative;\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.04);\n  transition: 0.15s border ease;\n  cursor: ",";\n  pointer-events: ",";\n  height: ","px;\n  width: ","px;\n  border-radius: ","px;\n\n  &:hover,\n  &:focus {\n    outline: none;\n    border-color: ",";\n  }\n\n  &:focus,\n  &.focus-visible {\n    outline: none;\n    box-shadow: rgba(209, 202, 216, 0.5) 0 0 0 3px;\n  }\n"],["\n  display: inline-block;\n  background: none;\n  padding: 0;\n  border: 1px solid ",";\n  position: relative;\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.04);\n  transition: 0.15s border ease;\n  cursor: ",";\n  pointer-events: ",";\n  height: ","px;\n  width: ","px;\n  border-radius: ","px;\n\n  &:hover,\n  &:focus {\n    outline: none;\n    border-color: ",";\n  }\n\n  &:focus,\n  &.focus-visible {\n    outline: none;\n    box-shadow: rgba(209, 202, 216, 0.5) 0 0 0 3px;\n  }\n"])),(function(e){return e.isActive?e.theme.borderDark:e.theme.borderLight}),(function(e){return e.isLoading||e.isDisabled?"not-allowed":"pointer"}),(function(e){return e.isLoading||e.isDisabled?"none":null}),l,(function(e){return 2*l(e)}),l,(function(e){return e.theme.borderDark})),f=Object(i.c)("span",{target:"ezmyi9u1"})(u||(u=Object(r.f)(["\n  display: block;\n  position: absolute;\n  border-radius: 50%;\n  transition: 0.25s all ease;\n  top: ","px;\n  transform: translateX(","px);\n  width: ","px;\n  height: ","px;\n  background: ",";\n  opacity: ",";\n"],["\n  display: block;\n  position: absolute;\n  border-radius: 50%;\n  transition: 0.25s all ease;\n  top: ","px;\n  transform: translateX(","px);\n  width: ","px;\n  height: ","px;\n  background: ",";\n  opacity: ",";\n"])),d,h,p,p,(function(e){return e.isActive?e.theme.green:e.theme.gray6}),(function(e){return e.isDisabled?.4:null}));t.a=s},1742:function(e,t,n){"use strict";var r=n(6),a=n.n(r),o=n(7),i=n.n(o),s=n(9),c=n.n(s),u=n(8),l=n.n(u),p=n(10),d=n.n(p),h=n(0),m=n.n(h),f=function(e){function t(){var e,n;a()(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=c()(this,(e=l()(t)).call.apply(e,[this].concat(o)))).onFocus=function(e){var t=n.props,r=t.value,a=t.maxLength;r.length<=a||n.setState({isExpanded:!0})},n.onBlur=function(e){n.state.isExpanded&&n.setState({isExpanded:!1})},n.state={isExpanded:!1},n}return d()(t,e),i()(t,[{key:"render",value:function(){var e=this.props,t=e.leftTrim,n=e.maxLength,r=e.value,a=r.length>n,o="";o=a?t?m.a.createElement("span",null,"… ",r.slice(r.length-(n-4),r.length)):m.a.createElement("span",null,r.slice(0,n-4)," …"):r;var i=this.props.className||"";return i+=" truncated",this.state.isExpanded&&(i+=" expanded"),m.a.createElement("span",{className:i,onMouseOver:this.onFocus,onMouseOut:this.onBlur,onFocus:this.onFocus,onBlur:this.onBlur},m.a.createElement("span",{className:"short-value"},o),a&&m.a.createElement("span",{className:"full-value"},r))}}]),t}(m.a.Component);f.displayName="Truncate",f.defaultProps={leftTrim:!1,maxLength:50},t.a=f},2568:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return C}));var r=n(16),a=n.n(r),o=n(6),i=n.n(o),s=n(7),c=n.n(s),u=n(9),l=n.n(u),p=n(8),d=n.n(p),h=n(10),m=n.n(h),f=n(1),b=n.n(f),g=n(5),y=n(0),v=n.n(y),j=n(4),E=n(1610),O=n(27),x=n(570),k=n(576),w=n(68),S=n(250),q=n(1611),R=n(1699),D=n(1742);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var T=function(e){function t(){var e,n;i()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=l()(this,(e=d()(t)).call.apply(e,[this].concat(a)))).state={loading:!1,error:!1},n}return m()(t,e),c()(t,[{key:"render",value:function(){var e=this.props,t=e.orgId,n=e.projectId,r=e.hook;return v.a.createElement(k.a,{label:v.a.createElement(g.Link,{to:"/settings/".concat(t,"/projects/").concat(n,"/hooks/").concat(r.id,"/")},v.a.createElement(D.a,{value:r.url})),help:r.events&&0!==r.events.length?v.a.createElement("small",null,r.events.join(", ")):v.a.createElement("small",null,v.a.createElement("em",null,"no events configured"))},v.a.createElement(R.a,{isActive:"active"===r.status,size:"lg",toggle:this.props.onToggleActive}))}}]),t}(v.a.Component);T.displayName="ServiceHookRow";var C=function(e){function t(){var e,n;i()(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=l()(this,(e=d()(t)).call.apply(e,[this].concat(o)))).onToggleActive=function(e){var t=n.props.params,r=t.orgId,o=t.projectId,i=w.a.add(Object(j.b)("Saving changes.."));n.api.request("/projects/".concat(r,"/").concat(o,"/hooks/").concat(e.id,"/"),{method:"PUT",data:{isActive:"active"!==e.status},success:function(e){w.a.remove(i);var t=n.state.hookList.map((function(t){return t.id===e.id?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(n,!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{},e):t}));n.setState({hookList:t})},error:function(){w.a.remove(i),w.a.add(Object(j.b)("Unable to remove application. Please try again."),"error",{duration:3e3})}})},n}return m()(t,e),c()(t,[{key:"getEndpoints",value:function(){var e=this.props.params,t=e.orgId,n=e.projectId;return[["hookList","/projects/".concat(t,"/").concat(n,"/hooks/")]]}},{key:"renderEmpty",value:function(){return v.a.createElement(x.a,null,Object(j.b)("There are no service hooks associated with this project."))}},{key:"renderResults",value:function(){var e=this,t=this.props.params,n=t.orgId,r=t.projectId;return v.a.createElement(v.a.Fragment,null,v.a.createElement(S.e,{key:"header"},Object(j.b)("Service Hook")),v.a.createElement(S.c,{key:"body"},v.a.createElement(S.b,{type:"info",icon:"icon-circle-exclamation"},"Service Hooks are an early adopter preview feature and will change in the future."),this.state.hookList.map((function(t){return v.a.createElement(T,{key:t.id,orgId:n,projectId:r,hook:t,onToggleActive:e.onToggleActive.bind(e,t)})}))))}},{key:"renderBody",value:function(){var e;e=this.state.hookList.length>0?this.renderResults():this.renderEmpty();var t=this.props.params,n=t.orgId,r=t.projectId,a=new Set(this.context.organization.access);return v.a.createElement("div",{className:"ref-project-service-hooks"},v.a.createElement(q.a,{title:Object(j.b)("Service Hooks"),action:a.has("project:write")?v.a.createElement(O.a,{"data-test-id":"new-service-hook",to:"/settings/".concat(n,"/projects/").concat(r,"/hooks/new/"),size:"small",priority:"primary"},v.a.createElement("span",{className:"icon-plus"})," ",Object(j.b)("Create New Hook")):null}),v.a.createElement(S.a,null,e))}}]),t}(E.a);C.contextTypes={organization:b.a.object.isRequired}}}]);
//# sourceMappingURL=ProjectServiceHooks.js.map