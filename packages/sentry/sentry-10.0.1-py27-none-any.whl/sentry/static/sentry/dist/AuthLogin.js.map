{"version":3,"sources":["webpack:///./app/components/navTabs.tsx","webpack:///./app/views/auth/loginForm.jsx","webpack:///./app/views/auth/registerForm.jsx","webpack:///./app/views/auth/ssoForm.jsx","webpack:///./app/views/auth/login.jsx"],"names":["props","underlined","className","mergedClassName","tabProps","LoginProviders","vstsLoginLink","githubLoginLink","googleLoginLink","ProviderWrapper","ProviderHeading","t","align","size","icon","href","LoginForm","state","errorMessage","errors","handleSubmit","data","onSuccess","onError","a","async","api","requestPromise","method","response","ConfigStore","set","user","browserHistory","push","pathname","nextUri","responseJSON","message","detail","__all__","setState","this","authConfig","hasLoginProvider","FormWrapper","submitLabel","onSubmit","footerClass","formFooterClass","extraButton","LostPasswordLink","to","name","placeholder","label","error","username","required","password","React","Component","styled","p","space","theme","borderLight","Link","gray2","gray5","SubscribeField","yesLabel","noLabel","help","tct","link","RegisterForm","hasNewsletter","initialData","subscribe","PrivacyPolicyLink","maxlength","ExternalLink","SlugExample","hostname","slug","SsoForm","serverHostname","example","FORM_COMPONENTS","login","register","sso","Login","loading","activeTab","handleSetTab","event","preventDefault","fetchData","vsts_login_link","github_login_link","google_login_link","config","FormComponent","tabs","canRegister","Fragment","Header","Heading","AuthNavTabs","map","key","onClick","e","StyledLoadingError","onRetry","hasAuthProviders","LoadingError","NavTabs","css","withApi"],"mappings":"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","file":"AuthLogin.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\n\ntype Props = {\n  underlined?: boolean;\n  className?: string;\n};\n\ntype NavProps = Omit<React.HTMLProps<HTMLUListElement>, keyof Props> & Props;\n\nfunction NavTabs(props: NavProps) {\n  const {underlined, className, ...tabProps} = props;\n  const mergedClassName = classnames('nav nav-tabs', className, {\n    'border-bottom': underlined,\n  });\n  return <ul className={mergedClassName} {...tabProps} />;\n}\n\nNavTabs.propTypes = {\n  underlined: PropTypes.bool,\n};\n\nexport default NavTabs;\n","import {browserHistory} from 'react-router';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styled from 'react-emotion';\n\nimport {formFooterClass} from 'app/views/auth/login';\nimport {t} from 'app/locale';\nimport Button from 'app/components/button';\nimport ConfigStore from 'app/stores/configStore';\nimport Form from 'app/components/forms/form';\nimport Link from 'app/components/links/link';\nimport PasswordField from 'app/components/forms/passwordField';\nimport SentryTypes from 'app/sentryTypes';\nimport TextField from 'app/components/forms/textField';\nimport space from 'app/styles/space';\n\n// TODO(epurkhiser): The abstraction here would be much nicer if we just\n// exposed a configuration object telling us what auth providers there are.\nconst LoginProviders = ({vstsLoginLink, githubLoginLink, googleLoginLink}) => (\n  <ProviderWrapper>\n    <ProviderHeading>{t('External Account Login')}</ProviderHeading>\n    {googleLoginLink && (\n      <Button align=\"left\" size=\"small\" icon=\"icon-google\" href={googleLoginLink}>\n        {t('Sign in with Google')}\n      </Button>\n    )}\n    {githubLoginLink && (\n      <Button align=\"left\" size=\"small\" icon=\"icon-github\" href={githubLoginLink}>\n        {t('Sign in with GitHub')}\n      </Button>\n    )}\n    {vstsLoginLink && (\n      <Button align=\"left\" size=\"small\" icon=\"icon-vsts\" href={vstsLoginLink}>\n        {t('Sign in with Azure DevOps')}\n      </Button>\n    )}\n  </ProviderWrapper>\n);\n\nLoginProviders.propTypes = {\n  githubLoginLink: PropTypes.string,\n  vstsLoginLink: PropTypes.string,\n  googleLoginLink: PropTypes.string,\n};\n\nclass LoginForm extends React.Component {\n  static propTypes = {\n    api: PropTypes.object,\n    authConfig: SentryTypes.AuthConfig,\n  };\n\n  state = {\n    errorMessage: null,\n    errors: {},\n  };\n\n  handleSubmit = async (data, onSuccess, onError) => {\n    try {\n      const response = await this.props.api.requestPromise('/auth/login/', {\n        method: 'POST',\n        data,\n      });\n      onSuccess(data);\n\n      // TODO(epurkhiser): There is likely more that needs to happen to update\n      // the application state after user login.\n\n      ConfigStore.set('user', response.user);\n\n      // TODO(epurkhiser): Reconfigure sentry SDK identity\n\n      browserHistory.push({pathname: response.nextUri});\n    } catch (e) {\n      if (!e.responseJSON || !e.responseJSON.errors) {\n        onError(e);\n        return;\n      }\n\n      let message = e.responseJSON.detail;\n      if (e.responseJSON.errors.__all__) {\n        message = e.responseJSON.errors.__all__;\n      }\n\n      this.setState({\n        errorMessage: message,\n        errors: e.responseJSON.errors || {},\n      });\n\n      onError(e);\n    }\n  };\n\n  render() {\n    const {errorMessage, errors} = this.state;\n    const {githubLoginLink, vstsLoginLink} = this.props.authConfig;\n\n    const hasLoginProvider = githubLoginLink || vstsLoginLink;\n\n    return (\n      <FormWrapper hasLoginProvider={hasLoginProvider}>\n        <Form\n          submitLabel={t('Continue')}\n          onSubmit={this.handleSubmit}\n          footerClass={formFooterClass}\n          errorMessage={errorMessage}\n          extraButton={\n            <LostPasswordLink to=\"/account/recover/\">\n              {t('Lost your password?')}\n            </LostPasswordLink>\n          }\n        >\n          <TextField\n            name=\"username\"\n            placeholder={t('username or email')}\n            label={t('Account')}\n            error={errors.username}\n            required\n          />\n          <PasswordField\n            name=\"password\"\n            placeholder={t('password')}\n            label={t('Password')}\n            error={errors.password}\n            required\n          />\n        </Form>\n        {hasLoginProvider && <LoginProviders {...{vstsLoginLink, githubLoginLink}} />}\n      </FormWrapper>\n    );\n  }\n}\n\nconst FormWrapper = styled('div')`\n  display: grid;\n  grid-gap: 60px;\n  grid-template-columns: ${p => (p.hasLoginProvider ? '1fr 0.8fr' : '1fr')};\n`;\n\nconst ProviderHeading = styled('div')`\n  margin: 0;\n  font-size: 15px;\n  font-weight: bold;\n  line-height: 24px;\n`;\n\nconst ProviderWrapper = styled('div')`\n  position: relative;\n  display: grid;\n  grid-auto-rows: max-content;\n  grid-gap: ${space(1.5)};\n\n  &:before {\n    position: absolute;\n    display: block;\n    content: '';\n    top: 0;\n    bottom: 0;\n    left: -30px;\n    border-left: 1px solid ${p => p.theme.borderLight};\n  }\n`;\n\nconst LostPasswordLink = styled(Link)`\n  color: ${p => p.theme.gray2};\n\n  &:hover {\n    color: ${p => p.theme.gray5};\n  }\n`;\n\nexport default LoginForm;\n","import {browserHistory} from 'react-router';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styled from 'react-emotion';\n\nimport {formFooterClass} from 'app/views/auth/login';\nimport {t, tct} from 'app/locale';\nimport ConfigStore from 'app/stores/configStore';\nimport ExternalLink from 'app/components/links/externalLink';\nimport Form from 'app/components/forms/form';\nimport PasswordField from 'app/components/forms/passwordField';\nimport RadioBooleanField from 'app/components/forms/radioBooleanField';\nimport SentryTypes from 'app/sentryTypes';\nimport TextField from 'app/components/forms/textField';\n\nconst SubscribeField = () => (\n  <RadioBooleanField\n    name=\"subscribe\"\n    yesLabel={t('Yes, I would like to receive updates via email')}\n    noLabel={t(\"No, I'd prefer not to receive these updates\")}\n    help={tct(\n      `We'd love to keep you updated via email with product and feature\n           announcements, promotions, educational materials, and events. Our\n           updates focus on relevant information, and we'll never sell your data\n           to third parties. See our [link] for more details.`,\n      {\n        link: <a href=\"https://sentry.io/privacy/\">Privacy Policy</a>,\n      }\n    )}\n  />\n);\n\nclass RegisterForm extends React.Component {\n  static propTypes = {\n    api: PropTypes.object,\n    authConfig: SentryTypes.AuthConfig,\n  };\n\n  state = {\n    errorMessage: null,\n    errors: {},\n  };\n\n  handleSubmit = async (data, onSuccess, onError) => {\n    const {api} = this.props;\n\n    try {\n      const response = await api.requestPromise('/auth/register/', {\n        method: 'POST',\n        data,\n      });\n      onSuccess(data);\n\n      // TODO(epurkhiser): There is more we need to do to setup the user. but\n      // definitely primarily we need to init our user.\n      ConfigStore.set('user', response.user);\n\n      browserHistory.push({pathname: response.nextUri});\n    } catch (e) {\n      if (!e.responseJSON || !e.responseJSON.errors) {\n        onError(e);\n        return;\n      }\n\n      let message = e.responseJSON.detail;\n      if (e.responseJSON.errors.__all__) {\n        message = e.responseJSON.errors.__all__;\n      }\n\n      this.setState({\n        errorMessage: message,\n        errors: e.responseJSON.errors || {},\n      });\n\n      onError(e);\n    }\n  };\n\n  render() {\n    const {hasNewsletter} = this.props.authConfig;\n    const {errorMessage, errors} = this.state;\n\n    return (\n      <Form\n        initialData={{subscribe: true}}\n        submitLabel={t('Continue')}\n        onSubmit={this.handleSubmit}\n        footerClass={formFooterClass}\n        errorMessage={errorMessage}\n        extraButton={\n          <PrivacyPolicyLink href=\"https://sentry.io/privacy/\">\n            {t('Privacy Policy')}\n          </PrivacyPolicyLink>\n        }\n      >\n        <TextField\n          name=\"name\"\n          placeholder={t('Jane Bloggs')}\n          maxlength={30}\n          label={t('Name')}\n          error={errors.name}\n          required\n        />\n        <TextField\n          name=\"username\"\n          placeholder={t('you@example.com')}\n          maxlength={128}\n          label={t('Email')}\n          error={errors.username}\n          required\n        />\n        <PasswordField\n          name=\"password\"\n          placeholder={t('something super secret')}\n          label={t('Password')}\n          error={errors.password}\n          required\n        />\n        {hasNewsletter && <SubscribeField />}\n      </Form>\n    );\n  }\n}\n\nconst PrivacyPolicyLink = styled(ExternalLink)`\n  color: ${p => p.theme.gray2};\n\n  &:hover {\n    color: ${p => p.theme.gray5};\n  }\n`;\n\nexport default RegisterForm;\n","import {browserHistory} from 'react-router';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport {t, tct} from 'app/locale';\nimport Form from 'app/components/forms/form';\nimport SentryTypes from 'app/sentryTypes';\nimport TextField from 'app/components/forms/textField';\n\nconst SlugExample = p => (\n  <code>\n    {p.hostname}/<strong>{p.slug}</strong>\n  </code>\n);\n\nclass SsoForm extends React.Component {\n  static propTypes = {\n    api: PropTypes.object,\n    authConfig: SentryTypes.AuthConfig,\n  };\n\n  state = {\n    errorMessage: null,\n  };\n\n  handleSubmit = async (data, onSuccess, onError) => {\n    const {api} = this.props;\n    try {\n      const response = await api.requestPromise('/auth/sso-locate/', {\n        method: 'POST',\n        data,\n      });\n      onSuccess(data);\n      browserHistory.push({pathname: response.nextUri});\n    } catch (e) {\n      if (!e.responseJSON) {\n        onError(e);\n        return;\n      }\n      const message = e.responseJSON.detail;\n      this.setState({errorMessage: message});\n      onError(e);\n    }\n  };\n\n  render() {\n    const {serverHostname} = this.props.authConfig;\n    const {errorMessage} = this.state;\n\n    return (\n      <Form\n        className=\"form-stacked\"\n        submitLabel={t('Continue')}\n        onSubmit={this.handleSubmit}\n        footerClass=\"auth-footer\"\n        errorMessage={errorMessage}\n      >\n        <TextField\n          name=\"organization\"\n          placeholder=\"acme\"\n          label={t('Organization ID')}\n          required\n          help={tct('Your ID is the slug after the hostname. e.g. [example] is [slug].', {\n            slug: <strong>acme</strong>,\n            example: <SlugExample slug=\"acme\" hostname={serverHostname} />,\n          })}\n        />\n      </Form>\n    );\n  }\n}\n\nexport default SsoForm;\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport styled, {css} from 'react-emotion';\n\nimport {t} from 'app/locale';\nimport LoadingError from 'app/components/loadingError';\nimport LoadingIndicator from 'app/components/loadingIndicator';\nimport NavTabs from 'app/components/navTabs';\nimport space from 'app/styles/space';\nimport withApi from 'app/utils/withApi';\n\nimport LoginForm from './loginForm';\nimport RegisterForm from './registerForm';\nimport SsoForm from './ssoForm';\n\nconst FORM_COMPONENTS = {\n  login: LoginForm,\n  register: RegisterForm,\n  sso: SsoForm,\n};\n\nclass Login extends React.Component {\n  static propTypes = {\n    api: PropTypes.object,\n  };\n\n  state = {\n    loading: true,\n    error: null,\n    activeTab: 'login',\n    authConfig: {},\n  };\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  handleSetTab = (activeTab, event) => {\n    this.setState({activeTab});\n    event.preventDefault();\n  };\n\n  fetchData = async () => {\n    const {api} = this.props;\n    try {\n      const response = await api.requestPromise('/auth/config/');\n\n      const {vsts_login_link, github_login_link, google_login_link, ...config} = response;\n      const authConfig = {\n        ...config,\n        vstsLoginLink: vsts_login_link,\n        githubLoginLink: github_login_link,\n        googleLoginLink: google_login_link,\n      };\n\n      this.setState({authConfig});\n    } catch (e) {\n      this.setState({error: true});\n    }\n\n    this.setState({loading: false});\n  };\n\n  get hasAuthProviders() {\n    const {githubLoginLink, googleLoginLink, vstsLoginLink} = this.state.authConfig;\n    return githubLoginLink || vstsLoginLink || googleLoginLink;\n  }\n\n  render() {\n    const {api} = this.props;\n    const {loading, error, activeTab, authConfig} = this.state;\n\n    const FormComponent = FORM_COMPONENTS[activeTab];\n\n    const tabs = [\n      ['login', t('Login')],\n      ['sso', t('Single Sign-On')],\n      ['register', t('Register'), !authConfig.canRegister],\n    ];\n\n    const renderTab = ([key, label, disabled]) =>\n      !disabled && (\n        <li key={key} className={activeTab === key ? 'active' : ''}>\n          <a href=\"#\" onClick={e => this.handleSetTab(key, e)}>\n            {label}\n          </a>\n        </li>\n      );\n\n    return (\n      <React.Fragment>\n        <Header>\n          <Heading>{t('Sign in to continue')}</Heading>\n          <AuthNavTabs>{tabs.map(renderTab)}</AuthNavTabs>\n        </Header>\n        {loading && <LoadingIndicator />}\n        {error && (\n          <StyledLoadingError\n            message={t('Unable to load authentication configuration')}\n            onRetry={this.fetchData}\n          />\n        )}\n        {!loading && !error && (\n          <FormWrapper hasAuthProviders={this.hasAuthProviders}>\n            <FormComponent {...{api, authConfig}} />\n          </FormWrapper>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nconst StyledLoadingError = styled(LoadingError)`\n  margin: ${space(2)};\n`;\n\nconst Header = styled('div')`\n  border-bottom: 1px solid ${p => p.theme.borderLight};\n  padding: 20px 40px 0;\n`;\n\nconst Heading = styled('h3')`\n  font-size: 24px;\n  margin: 0 0 20px 0;\n`;\n\nconst AuthNavTabs = styled(NavTabs)`\n  margin: 0;\n`;\n\nconst FormWrapper = styled('div')`\n  padding: 35px;\n  width: ${p => (p.hasAuthProviders ? '600px' : '490px')};\n`;\n\nconst formFooterClass = css`\n  display: grid;\n  grid-template-columns: max-content 1fr;\n  grid-gap: ${space(1)};\n  align-items: center;\n  justify-items: end;\n  border-top: none;\n  margin-bottom: 0;\n  padding: 0;\n`;\n\nexport {formFooterClass};\n\nexport default withApi(Login);\n"],"sourceRoot":""}