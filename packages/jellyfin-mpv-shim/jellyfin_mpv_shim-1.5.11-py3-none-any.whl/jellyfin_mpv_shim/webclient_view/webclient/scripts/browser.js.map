{"version":3,"sources":["scripts/browser.js"],"names":["define","_supportsCssAnimation","_supportsCssAnimationWithPrefix","userAgent","navigator","matched","uaMatch","ua","toLowerCase","version","match","exec","indexOf","versionMatch","platform_match","browser","length","versionMajor","parseInt","split","isNaN","platform","chrome","edge","opera","safari","ps4","tv","isMobile","terms","lower","i","mobile","xboxOne","animate","document","documentElement","tizen","self","web0s","edgeUwp","v","appVersion","tizenVersion","orsay","isTv","operaTv","slow","window","maxTouchPoints","touch","keyboard","hasKeyboard","supportsCssAnimation","allowPrefix","animation","domPrefixes","pfx","elm","createElement","undefined","style","animationName","osx","iOS","ipad","iphone","ipod","iOSVersion","iOSversion","test","chromecast"],"mappings":"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","file":"browser.js","sourcesContent":["define([], function () {\n    'use strict';\n\n    function isTv() {\n\n        // This is going to be really difficult to get right\n        var userAgent = navigator.userAgent.toLowerCase();\n\n        if (userAgent.indexOf('tv') !== -1) {\n            return true;\n        }\n\n        if (userAgent.indexOf('samsungbrowser') !== -1) {\n            return true;\n        }\n\n        if (userAgent.indexOf('viera') !== -1) {\n            return true;\n        }\n\n        if (userAgent.indexOf('web0s') !== -1) {\n            return true;\n        }\n\n        return false;\n    }\n\n    function isMobile(userAgent) {\n        var terms = [\n            'mobi',\n            'ipad',\n            'iphone',\n            'ipod',\n            'silk',\n            'gt-p1000',\n            'nexus 7',\n            'kindle fire',\n            'opera mini'\n        ];\n\n        var lower = userAgent.toLowerCase();\n\n        for (var i = 0, length = terms.length; i < length; i++) {\n            if (lower.indexOf(terms[i]) !== -1) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    function hasKeyboard(browser) {\n\n        if (browser.touch) {\n            return true;\n        }\n\n        if (browser.xboxOne) {\n            return true;\n        }\n\n        if (browser.ps4) {\n            return true;\n        }\n\n        if (browser.edgeUwp) {\n            // This is OK for now, but this won't always be true\n            // Should we use this?\n            // https://gist.github.com/wagonli/40d8a31bd0d6f0dd7a5d\n            return true;\n        }\n\n        if (browser.tv) {\n            return true;\n        }\n\n        return false;\n    }\n\n    function iOSversion() {\n        // MacIntel: Apple iPad Pro 11 iOS 13.1\n        if (/iP(hone|od|ad)|MacIntel/.test(navigator.platform)) {\n            // supports iOS 2.0 and later: <http://bit.ly/TJjs1V>\n            var v = (navigator.appVersion).match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n            return [parseInt(v[1], 10), parseInt(v[2], 10), parseInt(v[3] || 0, 10)];\n        }\n    }\n\n    var _supportsCssAnimation;\n    var _supportsCssAnimationWithPrefix;\n    function supportsCssAnimation(allowPrefix) {\n        // TODO: Assess if this is still needed, as all of our targets should natively support CSS animations.\n        if (allowPrefix) {\n            if (_supportsCssAnimationWithPrefix === true || _supportsCssAnimationWithPrefix === false) {\n                return _supportsCssAnimationWithPrefix;\n            }\n        } else {\n            if (_supportsCssAnimation === true || _supportsCssAnimation === false) {\n                return _supportsCssAnimation;\n            }\n        }\n\n        var animation = false;\n        var animationstring = 'animation';\n        var keyframeprefix = '';\n        var domPrefixes = ['Webkit', 'O', 'Moz'];\n        var pfx = '';\n        var elm = document.createElement('div');\n\n        if (elm.style.animationName !== undefined) {\n            animation = true;\n        }\n\n        if (animation === false && allowPrefix) {\n            for (var i = 0; i < domPrefixes.length; i++) {\n                if (elm.style[domPrefixes[i] + 'AnimationName'] !== undefined) {\n                    pfx = domPrefixes[i];\n                    animationstring = pfx + 'Animation';\n                    keyframeprefix = '-' + pfx.toLowerCase() + '-';\n                    animation = true;\n                    break;\n                }\n            }\n        }\n\n        if (allowPrefix) {\n            _supportsCssAnimationWithPrefix = animation;\n            return _supportsCssAnimationWithPrefix;\n        } else {\n            _supportsCssAnimation = animation;\n            return _supportsCssAnimation;\n        }\n    }\n\n    var uaMatch = function (ua) {\n        ua = ua.toLowerCase();\n\n        var match = /(edge)[ \\/]([\\w.]+)/.exec(ua) ||\n            /(opera)[ \\/]([\\w.]+)/.exec(ua) ||\n            /(opr)[ \\/]([\\w.]+)/.exec(ua) ||\n            /(chrome)[ \\/]([\\w.]+)/.exec(ua) ||\n            /(safari)[ \\/]([\\w.]+)/.exec(ua) ||\n            /(firefox)[ \\/]([\\w.]+)/.exec(ua) ||\n            ua.indexOf('compatible') < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua) ||\n            [];\n\n        var versionMatch = /(version)[ \\/]([\\w.]+)/.exec(ua);\n\n        var platform_match = /(ipad)/.exec(ua) ||\n            /(iphone)/.exec(ua) ||\n            /(windows)/.exec(ua) ||\n            /(android)/.exec(ua) ||\n            [];\n\n        var browser = match[1] || '';\n\n        if (browser === 'edge') {\n            platform_match = [''];\n        }\n\n        if (browser === 'opr') {\n            browser = 'opera';\n        }\n\n        var version;\n        if (versionMatch && versionMatch.length > 2) {\n            version = versionMatch[2];\n        }\n\n        version = version || match[2] || '0';\n\n        var versionMajor = parseInt(version.split('.')[0]);\n\n        if (isNaN(versionMajor)) {\n            versionMajor = 0;\n        }\n\n        return {\n            browser: browser,\n            version: version,\n            platform: platform_match[0] || '',\n            versionMajor: versionMajor\n        };\n    };\n\n    var userAgent = navigator.userAgent;\n\n    var matched = uaMatch(userAgent);\n    var browser = {};\n\n    if (matched.browser) {\n        browser[matched.browser] = true;\n        browser.version = matched.version;\n        browser.versionMajor = matched.versionMajor;\n    }\n\n    if (matched.platform) {\n        browser[matched.platform] = true;\n    }\n\n    if (!browser.chrome && !browser.edge && !browser.opera && userAgent.toLowerCase().indexOf('webkit') !== -1) {\n        browser.safari = true;\n    }\n\n    if (userAgent.toLowerCase().indexOf('playstation 4') !== -1) {\n        browser.ps4 = true;\n        browser.tv = true;\n    }\n\n    if (isMobile(userAgent)) {\n        browser.mobile = true;\n    }\n\n    if (userAgent.toLowerCase().indexOf('xbox') !== -1) {\n        browser.xboxOne = true;\n        browser.tv = true;\n    }\n    browser.animate = typeof document !== 'undefined' && document.documentElement.animate != null;\n    browser.tizen = userAgent.toLowerCase().indexOf('tizen') !== -1 || self.tizen != null;\n    browser.web0s = userAgent.toLowerCase().indexOf('Web0S'.toLowerCase()) !== -1;\n    browser.edgeUwp = browser.edge && (userAgent.toLowerCase().indexOf('msapphost') !== -1 || userAgent.toLowerCase().indexOf('webview') !== -1);\n\n    if (!browser.tizen) {\n        browser.orsay = userAgent.toLowerCase().indexOf('smarthub') !== -1;\n    } else {\n        var v = (navigator.appVersion).match(/Tizen (\\d+).(\\d+)/);\n        browser.tizenVersion = parseInt(v[1]);\n    }\n\n    if (browser.edgeUwp) {\n        browser.edge = true;\n    }\n\n    browser.tv = isTv();\n    browser.operaTv = browser.tv && userAgent.toLowerCase().indexOf('opr/') !== -1;\n\n    if (browser.mobile || browser.tv) {\n        browser.slow = true;\n    }\n\n    if (typeof document !== 'undefined') {\n        /* eslint-disable-next-line compat/compat */\n        if (('ontouchstart' in window) || (navigator.maxTouchPoints > 0)) {\n            browser.touch = true;\n        }\n    }\n\n    browser.keyboard = hasKeyboard(browser);\n    browser.supportsCssAnimation = supportsCssAnimation;\n\n    browser.osx = userAgent.toLowerCase().indexOf('os x') !== -1;\n    browser.iOS = browser.ipad || browser.iphone || browser.ipod;\n\n    if (browser.iOS) {\n        browser.iOSVersion = iOSversion();\n\n        if (browser.iOSVersion && browser.iOSVersion.length >= 2) {\n            browser.iOSVersion = browser.iOSVersion[0] + (browser.iOSVersion[1] / 10);\n        }\n    }\n\n    browser.chromecast = browser.chrome && userAgent.toLowerCase().indexOf('crkey') !== -1;\n\n    return browser;\n});\n"]}