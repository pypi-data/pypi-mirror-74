{"version":3,"sources":["about/index.js","footer/index.js","header/index.js","network/node.js","_api/index.js","network/index.js","util.js","main/index.js","App.js","config.js","serviceWorker.js","index.js"],"names":["About","className","Component","Footer","Header","onChange","event","network_id","target","value","props","onNetworkSelected","this","networks","map","n","key","id","name","to","href","rel","disabled","renderOptions","Node","onDragMove","e","x","y","setPosition","RV","onDragEnd","onStateToggled","state","node","titleHeight","stateOffset","stateHeight","statePadding","width","height","computeHeight","position","probabilities","query","remaining_width","states","idx","probability","bar_width","bar_color","toFixed","onDblClick","text","padding","fontSize","wrap","ellipsis","fill","align","length","center","corners","createStates","draggable","cornerRadius","shadowBlur","fontStyle","api","_axios","_user","config","_config","withCredentials","axios","create","interceptors","request","use","headers","localStorage","getItem","createAuthRefreshInterceptor","failedRequest","refreshAuthLogic","_conifg","post","then","tokenRefreshResponse","token","access_token","data","setItem","response","Promise","resolve","console","log","r","_request","url","method","network","parameters","Edge","src","dst","points","pointerLength","pointerWidth","stroke","strokeWidth","getNodeNamesFromNetwork","nodes","intersect","x1","y1","x2","y2","x3","y3","x4","y4","warn","denominator","ua","ub","compute_intersection","line","intersection","p","key1","key2","Network","onNodeMove","nodeAttrsToState","onNodeMoved","saveNetwork","q","history","push","pathname","search","URLSearchParams","toString","first_pass_complete","node_centers","node_corners","myRefs","unlisten","listen","location","action","updateFromQueryParameters","setNetwork","array","qs","parse","ignoreQueryPrefix","reduce","obj","item","Object","entries","includes","getNetwork","json","setState","queryNetwork","nodenames","current","srcRV","dstRV","src_center","dst_center","src_corners","dst_corners","edges","computeEdge","renderLoading","a","renderEdges","React","createRef","ref","Main","getNetworks","match","params","App","path","component","exact","api_config","process","REACT_APP_BASEURL","Boolean","window","hostname","init","ReactDOM","render","basename","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.d123dd5d.chunk.js","sourcesContent":["import React, { Component } from 'react';\n\nimport './stylesheet.scss';\n\nexport default class About extends Component {\n\n    render() {\n        return (\n            <div className=\"About\">\n                This is the about component.\n            </div>\n        );\n    }\n}","import React, { Component } from 'react';\n\nimport './stylesheet.scss';\n\nexport default class Footer extends Component {\n\n\n    render() {\n        return (\n            <div className=\"Footer\">\n                Copyright Â© 2020 Melle Sieswerda. All rights reserved.\n            </div>\n        );\n    }\n}","import React, { Component } from 'react';\nimport { Link } from \"react-router-dom\";\n\nimport './stylesheet.scss';\n\nexport default class Header extends Component {\n\n    onChange = (event) => {\n        // console.log(\"Header::onChange(): \", event.target.value);\n        const network_id = event.target.value;\n        this.props.onNetworkSelected(network_id);\n    }\n\n    renderOptions() {\n        return this.props.networks.map(n =>\n            <option key={n.id} value={n.id}>\n                {n.name}\n            </option>\n        );\n    }\n\n    render() {\n        const { network_id } = this.props;\n\n        return (\n            <div className=\"Header\">\n                <div className=\"top\">\n                    <div className=\"left\">\n                        <span className=\"h1\">\n                            <Link to=\"/\" className=\"main\">Thomas</Link>\n                        </span>\n                        &nbsp; A Bayesian Network viewer.\n                    </div>\n\n                    <div className=\"right\">\n                        <a\n                            href=\"https://github.com/mellesies/thomas-master\"\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            >\n                            Github\n                        </a>\n                    </div>\n                </div>\n\n                <select onChange={this.onChange} value={network_id || ''}>\n                    <option disabled value=''> -- select Bayesian network -- </option>\n                    { this.renderOptions() }\n                </select>\n            </div>\n        );\n    }\n}","import React, { Component } from 'react';\nimport {\n    Group,\n    Rect,\n    Label,\n    Tag,\n    Text,\n} from 'react-konva';\n\nexport default class Node extends Component {\n\n    constructor(props) {\n        super(props);\n        this.RV = props.node.RV;\n\n        this.titleHeight = 15\n        this.stateOffset = 8\n        this.stateHeight = 14\n        this.statePadding = 2;\n\n        this.width = 180;\n        this.height = this.computeHeight();\n\n        const\n            x = props.node.position[0],\n            y = props.node.position[1];\n\n        // this requires height to be computed and sets:\n        //  - this.x, this.y\n        //  - this.center\n        //  - this.corners\n        this.setPosition(x, y);\n    }\n\n    onDragMove = (e) => {\n        const\n            x = e.target.x(),\n            y = e.target.y();\n\n        // console.log('onDragMove:', x, y);\n        this.setPosition(x, y);\n\n        if (this.props.onDragMove) {\n            this.props.onDragMove(this.RV, x, y);\n        }\n    }\n\n    onDragEnd = (e) => {\n        const\n            x = e.target.x(),\n            y = e.target.y();\n\n        if (this.props.onDragEnd) {\n            this.props.onDragEnd(this.RV, x, y);\n        }\n    }\n\n    onStateToggled = (state) => {\n        // console.log(`onStateToggled('${state}')`);\n        if (this.props.onStateToggled) {\n            this.props.onStateToggled(this.RV, state)\n        }\n    }\n\n    /**\n     * Create Labels for the individual states.\n     */\n    createStates(node, probabilities, query) {\n        const { width } = this;\n        const\n            label_width = 70,\n            probability_width = 55;\n\n        const remaining_width = width - label_width - probability_width;\n\n        // console.log('createStates', query);\n\n        return node.states.map((state, idx) => {\n            const y = (\n                this.titleHeight\n                + this.stateOffset\n                + idx * this.stateHeight\n            )\n\n            var probability = '...';\n            var bar_width = 0;\n            var bar_color = '#003366';\n\n            if (query && query === state) {\n                bar_color = '#00BCCC';\n            }\n\n            if (probabilities) {\n                probability = (100 * probabilities[state]).toFixed(2) + '%';\n                bar_width = 1 + remaining_width * probabilities[state]\n            }\n\n            return (\n                <Group\n                    key={state}\n                    y={y}\n                    onDblClick={e => this.onStateToggled(state)}\n                    >\n\n                    <Label>\n                        <Tag />\n                        <Text\n                            text={state}\n                            padding={this.statePadding}\n                            fontSize={this.stateHeight - this.statePadding}\n                            wrap=\"none\"\n                            ellipsis=\"ellipsis\"\n                            width={label_width}\n                            />\n                    </Label>\n\n                    <Rect\n                        x={label_width}\n                        y={1}\n                        width={bar_width}\n                        height={this.stateHeight - 2}\n                        fill={bar_color}\n                        />\n\n                    <Label x={width - probability_width}>\n                        <Tag />\n                        <Text\n                            text={probability}\n                            padding={this.statePadding}\n                            fontSize={this.stateHeight - this.statePadding}\n                            align=\"right\"\n                            wrap=\"none\"\n                            width={probability_width}\n                            />\n                    </Label>\n                </Group>\n            );\n        })\n    }\n\n\n    /**\n     * Compute and return the Node's height.\n     */\n    computeHeight() {\n        const { node } = this.props;\n\n        return (\n            node.states.length * this.stateHeight\n            + 2 * this.stateOffset\n            + this.titleHeight\n        );\n    }\n\n    /**\n     * Recompute center and corners.\n     *\n     * @param x (int): new x (top-left corner)\n     * @param y (int): new y (top-left corner)\n     */\n    setPosition(x, y) {\n        // console.log(`setPosition(${x}, ${y})`)\n        const { width, height } = this;\n\n        this.x = x;\n        this.y = y\n\n        this.center = {\n            x: x + width/2,\n            y: y + height/2\n        }\n\n        this.corners = {\n            'tl': {x: x, y: y},\n            'tr': {x: x + width, y: y},\n            'bl': {x: x, y: y + height},\n            'br': {x: x + width, y: y + height},\n        }\n    }\n\n    render() {\n        const { node, query, probabilities } = this.props;\n        const { x, y, width, height } = this;\n        const states = this.createStates(node, probabilities, query);\n\n        // Return the Node as a group.\n        return (\n            <Group\n                x={x}\n                y={y}\n                width={width}\n                height={height}\n                onDragMove={this.onDragMove}\n                onDragEnd={this.onDragEnd}\n                // onDblClick={(e) => console.log('onDblClick')}\n                draggable\n                >\n                {/* Background */}\n                <Rect\n                    fill=\"#efefef\"\n                    width={width}\n                    height={height}\n                    cornerRadius={5}\n                    shadowBlur={5}\n                    />\n\n                {/* Header */}\n                <Label>\n                    <Tag />\n                    <Text\n                        text={node.name}\n                        padding={4}\n                        fontSize={this.titleHeight}\n                        fontStyle=\"bold\"\n                        width={width}\n                        />\n                </Label>\n\n                {/* States */}\n                { states }\n            </Group>\n        )\n    }\n}","import axios from 'axios';\nimport createAuthRefreshInterceptor from 'axios-auth-refresh';\n\nconst getAccessToken = () => {\n    return localStorage.getItem('access_token');\n}\n\nconst setAccessToken = (token) => {\n    localStorage.setItem('access_token', token);\n}\n\n\nclass Api {\n    constructor() {\n        this._axios = null;\n        this._user = false; }\n\n    /**\n     * Initialize the API.\n     */\n    init(config) {\n        // Setup axios to use JWT and automatically refresh if necessary.\n        this._config = {\n            withCredentials: true,\n            ...config\n        };\n        this._axios = axios.create(config);\n\n        this._axios.interceptors.request.use(request => {\n            request.headers['Authorization'] = 'Bearer ' + getAccessToken();\n            return request;\n        });\n\n        createAuthRefreshInterceptor(\n            this._axios,\n            (failedRequest) => this.refreshAuthLogic(failedRequest)\n        );\n\n        // Make axios.request available for flexibility\n        this.request = this._axios.request;\n    }\n\n    // Function that will be called to refresh authorization\n    refreshAuthLogic(failedRequest) {\n        axios.create(this._conifg).post('/token/refresh')\n        .then(tokenRefreshResponse => {\n            const { access_token } = tokenRefreshResponse.data;\n            setAccessToken(access_token);\n\n            const { headers } = failedRequest.response.config;\n            headers['Authorization'] = `Bearer ${access_token}`;\n\n            return Promise.resolve();\n        })\n    }\n\n    _request(config) {\n        console.log('Api::request()', config);\n        return this._axios.request(config).then(r => r.data);\n    }\n\n    /**\n     * Return the API version\n     */\n    getVersion() {\n        return this._request({\n            url: '/version',\n            method: 'GET',\n        });\n    }\n\n    getSession() {\n        return this._request({\n            url: '/session',\n            method: 'GET',\n            withCredentials: true,\n        });\n    }\n\n    getNetworks() {\n        console.log('Api::getNetworks()', );\n\n        return this._request({\n            url: '/network',\n            method: 'GET',\n        });\n    }\n\n    getNetwork(id) {\n        return this._request({\n            url: `/network/${id}`,\n            method: 'GET',\n            // params: {summary: false}\n        });\n    }\n\n    saveNetwork(id, network) {\n        return this._request({\n            url: `/network/${id}`,\n            method: 'POST',\n            data: network,\n        });\n    }\n\n    queryNetwork(id, parameters) {\n        var query = {\n            id: id,\n            query: {\n                ...parameters\n            }\n        };\n\n        return this._request({\n            url: `/network/_query`,\n            // params: parameters,\n            data: query,\n            method: 'POST',\n        })\n    }\n}\n\nexport const api = new Api();\nexport default api;","import React, { Component } from 'react';\nimport {\n    Stage, Layer,\n    Arrow,\n} from 'react-konva';\n\nimport qs from 'qs';\n\nimport Node from './node';\n\nimport { arrayToDict } from '../util';\nimport { api } from '_api';\n\nimport './stylesheet.scss';\n\n\nfunction Edge({src, dst}) {\n    return (\n        <Arrow\n            x={0}\n            y={0}\n            points={[src.x, src.y, dst.x, dst.y]}\n            pointerLength={10}\n            pointerWidth={10}\n            fill={'black'}\n            stroke={'black'}\n            strokeWidth={2}\n            />\n    )\n}\n\nfunction getNodeNamesFromNetwork(network) {\n    return network.nodes.map(node => node.RV);\n}\n\n// line intercept math by Paul Bourke http://paulbourke.net/geometry/pointlineplane/\n// Determine the intersection point of two line segments\n// Return FALSE if the lines don't intersect\n// Alternative implementations at:\n// - http://jsfiddle.net/justin_c_rounds/Gd2S2/light/\n// - https://stackoverflow.com/questions/13937782/calculating-the-point-of-intersection-of-two-lines\n//\nfunction intersect(x1, y1, x2, y2, x3, y3, x4, y4) {\n\n    // Check if none of the lines are of length 0\n    if ((x1 === x2 && y1 === y2) || (x3 === x4 && y3 === y4)) {\n        console.warn('Found line of length 0');\n        return false\n    }\n\n    var denominator = ((y4 - y3) * (x2 - x1) - (x4 - x3) * (y2 - y1))\n\n    // Lines are parallel\n    if (denominator === 0) {\n        console.warn('Denominator is zero 0');\n        return false\n    }\n\n    let ua = ((x4 - x3) * (y1 - y3) - (y4 - y3) * (x1 - x3)) / denominator\n    let ub = ((x2 - x1) * (y1 - y3) - (y2 - y1) * (x1 - x3)) / denominator\n\n    // is the intersection along the segments\n    if (ua < 0 || ua > 1 || ub < 0 || ub > 1) {\n        // console.debug('Intersection outside segments');\n        return false\n    }\n\n    // Return an object with the x and y coordinates of the intersection\n    let x = x1 + ua * (x2 - x1)\n    let y = y1 + ua * (y2 - y1)\n\n    return {x, y}\n}\n\nfunction compute_intersection(corners, line) {\n    const points = [\n        ['tl', 'tr'],\n        ['tl', 'bl'],\n        ['tr', 'br'],\n        ['bl', 'br'],\n    ];\n\n    var intersection = false;\n\n    for (const p of points) {\n        const key1 = p[0], key2 = p[1];\n\n        intersection = intersect(\n            corners[key1].x,\n            corners[key1].y,\n            corners[key2].x,\n            corners[key2].y,\n            line.src.x,\n            line.src.y,\n            line.dst.x,\n            line.dst.y,\n        );\n\n        if (intersection) {\n            break;\n        }\n    }\n\n    if (!intersection) {\n        console.warn('Could not determine intersection');\n    }\n\n    return intersection;\n}\n\nexport default class Network extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            network: null,\n            first_pass_complete: false,\n            node_centers: {},\n            node_corners: {},\n            query: {},\n            probabilities: {},\n        }\n\n        this.myRefs = {};\n    }\n\n    componentWillUnmount() {\n        // Stop listening for route changes.\n        this.unlisten();\n    }\n\n    componentDidMount() {\n        // Listen for backbutton clicks\n        this.unlisten = this.props.history.listen((location, action) => {\n            console.log(\"on route change\");\n            this.updateFromQueryParameters();\n        });\n\n        // This will trigger downloading the network JSON.\n        this.setNetwork();\n    }\n\n    componentDidUpdate() {\n        // console.log(\"*** NETWORK DID UPDATE! ***\")\n        const { network, first_pass_complete } = this.state;\n\n        if (network && !first_pass_complete) {\n            // this.myRefs is set and each ref.current points to a <Node>.\n            // Triggers setState().\n            this.nodeAttrsToState();\n\n            // Update this.state.query from the URL\n            // Triggers setState().\n            this.updateFromQueryParameters();\n        }\n    }\n\n    updateFromQueryParameters() {\n        // Parse the URL to determine query parameters.\n        var q = qs.parse(\n            this.props.location.search,\n            { ignoreQueryPrefix: true }\n        );\n\n        // Only keep those entries in 'q' that correspond to a valid state.\n        const { network } = this.state;\n        const nodes = arrayToDict(network.nodes, 'RV');\n        const query = {};\n\n        for (const [RV, node] of Object.entries(nodes)) {\n            // console.log(`${RV}:`, node);\n            if (q[RV] && node.states.includes(q[RV])) {\n                query[RV] = q[RV];\n            }\n        }\n\n        // Triggers setState() when query resolves.\n        this.query(query);\n    }\n\n    setNetwork() {\n        // download network & set state\n        const { network_id } = this.props;\n\n        api.getNetwork(network_id).then((response) => {\n            const network = response.json;\n            network.id = network_id;\n\n            this.setState({ network })\n        })\n    }\n\n    query(query) {\n        // console.log('Network::query()', query);\n        const id = this.state.network.id;\n\n        api.queryNetwork(id, query).then(r => {\n            // console.log('Network::query(): ', r)\n            this.setState({\n                query: r.query,\n                probabilities: r.probabilities,\n            })\n        })\n    }\n\n    /**\n     * Iterate over <Node>'s rendered and retrieve their corners and centers.\n     */\n    nodeAttrsToState() {\n        const nodenames = getNodeNamesFromNetwork(this.state.network);\n        const\n            node_centers = {},\n            node_corners = {};\n\n        for (const name of nodenames) {\n            var node = this.myRefs[name].current;\n\n            // node.center and node.corners are set in Node.render()\n            node_centers[name] = node.center;\n            node_corners[name] = node.corners;\n        }\n\n        this.setState({\n            first_pass_complete: true,\n            node_centers,\n            node_corners,\n        });\n    }\n\n    /**\n     * Return the line (coordinates) between two nodes' centers, taking the\n     * nodes' edges into account.\n     */\n    computeEdge(srcRV, dstRV) {\n        const { node_centers, node_corners } = this.state;\n\n        const\n            src_center = node_centers[srcRV],\n            dst_center = node_centers[dstRV];\n\n        const\n            src_corners = node_corners[srcRV],\n            dst_corners = node_corners[dstRV];\n\n        const src_intersection = compute_intersection(\n            src_corners,\n            {src: src_center, dst: dst_center}\n        );\n\n        const dst_intersection = compute_intersection(\n            dst_corners,\n            {src: src_center, dst: dst_center}\n        );\n\n        return {\n            src: src_intersection,\n            dst: dst_intersection,\n        }\n    }\n\n    /**\n     * Triggered by Node for each update to its position.\n     */\n    onNodeMove = (RV, x, y) => {\n        // console.log('Network::onNodeMove()', RV);\n        this.nodeAttrsToState();\n    }\n\n    /**\n     * Triggered by Node after dragging has stopped.\n     */\n    onNodeMoved = (RV, x, y) => {\n        // console.log(`Network::onNodeMoved('${RV}', ${x}, ${y})`);\n        const network = { ...this.state.network };\n        const { network_id } = this.props;\n\n        for (const node of network.nodes) {\n            if (node.RV === RV) {\n                node.position = [x, y];\n                break\n            }\n        }\n\n        // Save the network.\n        api.saveNetwork(network_id, network);\n    }\n\n    onStateToggled = (RV, state) => {\n        // console.log(`onStateToggled('${RV}', '${state}')`);\n        const q = { ...this.state.query };\n\n        if (q[RV] && q[RV] === state) {\n            delete q[RV];\n        } else {\n            q[RV] = state;\n        }\n\n        // Update the URL query parameters\n        this.props.history.push({\n            pathname: '',\n            search: \"?\" + new URLSearchParams({...q}).toString()\n        })\n\n        // Query the network.\n        // Triggers setState() when query resolves.\n        // this.query(q);\n    }\n\n    renderEdges() {\n        const { network } = this.state;\n\n        return network.edges.map(e => {\n            const\n                srcRV = e[0],\n                dstRV = e[1];\n\n            const {src, dst} = this.computeEdge(srcRV, dstRV);\n\n            // console.log('Creating Edge: src:', src, 'dst:', dst);\n            return (\n                <Edge\n                    key={`${srcRV}_${dstRV}`}\n                    src={src}\n                    dst={dst}\n                    />\n            )\n        })\n    }\n\n    renderLoading() {\n        return (\n            <div className=\"Network\">\n                <span>Loading ...</span>\n            </div>\n        )\n    }\n\n    render() {\n        // console.log('match:', this.props.match);\n        // console.log('location:', this.props.location);\n        // console.log('qs:', qs.parse(this.props.location.search, { ignoreQueryPrefix: true }));\n\n        // const { network, network_id } = this.props;\n        // const { network_id } = this.props;\n\n        const { network } = this.state;\n\n        if (!network) {\n            // Apparently we haven't downloaded the network yet.\n            return this.renderLoading();\n        }\n\n        const {\n            first_pass_complete,\n            query,\n            probabilities,\n        } = this.state;\n        const { myRefs } = this;\n\n        // Create an ordered list of node names\n        // const nodenames = network.nodes.map(node => node.RV);\n        const nodenames = getNodeNamesFromNetwork(network);\n\n        // Create a dict of nodes, indexed by node.RV\n        const nodes = network.nodes.reduce(\n            (a, node) => {\n                a[node.RV] = node;\n                return a;\n            },\n            {}\n        );\n\n        return (\n            <div className=\"Network\">\n                {/*<Toolbar network={network} />*/}\n\n                <div className=\"KonvaContainer\">\n                    <Stage width={2042} height={1024}>\n                        <Layer>\n                            {first_pass_complete && this.renderEdges()}\n\n                            {nodenames.map(RV => {\n                                // console.log('RV: ', RV, this);\n                                myRefs[RV] = React.createRef();\n\n                                return (\n                                    <Node\n                                        ref={myRefs[RV]}\n                                        key={RV}\n                                        node={nodes[RV]}\n                                        query={query[RV]}\n                                        probabilities={probabilities[RV]}\n                                        onDragMove={this.onNodeMove}\n                                        onDragEnd={this.onNodeMoved}\n                                        onStateToggled={this.onStateToggled}\n                                        />\n                                )\n                            })}\n                        </Layer>\n                    </Stage>\n                </div>\n            </div>\n        )\n    }\n}\n","\n\nconst arrayToDict = (array, key) =>\n  array.reduce((obj, item) => ({ ...obj, [item[key]]: item }), {})\n;\n\nexport { arrayToDict };","import React, { Component } from 'react';\nimport { Link } from \"react-router-dom\";\n\nimport Header from 'header';\nimport Network from 'network';\n\n\nimport { api } from '_api';\n\nimport './stylesheet.scss';\n\n\nexport default class Main extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            networks: [],\n        }\n    }\n\n    componentWillUnmount() {\n        // Stop listening for route changes.\n        this.unlisten();\n    }\n\n    componentDidMount() {\n        // Retrieve a list of BN's from the server.\n        api.getNetworks().then(networks => {\n            // console.log('App.componentDidMount(): ', networks);\n            if (networks.length > 0) {\n                this.setState({ networks });\n            }\n        });\n\n        // Listen for backbutton clicks\n        this.unlisten = this.props.history.listen((location, action) => {\n            console.log(\"on route change\");\n        });\n    }\n\n    /**\n     * Triggered when dropdown list in Header changes.\n     */\n    onNetworkSelected = (network_id) => {\n        // Update the URL query parameters\n        this.props.history.push({\n            pathname: `/network/${network_id}`,\n            search: ''\n        })\n    }\n\n    render() {\n        var { networks } = this.state;\n        const { network_id } = this.props.match.params;\n\n        return (\n            <div className=\"Main\">\n                <Header\n                    networks={networks}\n                    network_id={network_id}\n                    onNetworkSelected={this.onNetworkSelected}\n                    {...this.props}\n                    />\n\n                {\n                    network_id &&\n                        <Network\n                            key={network_id}\n                            network_id={network_id}\n                            {...this.props}\n                            />\n                }\n\n                {\n                    !network_id &&\n                        <div className=\"centered\">\n                            <div><h2>Select a Bayesian network to continue:</h2></div>\n                            <div>\n                                {networks.map(n =>\n                                        <Link\n                                            key={n.id}\n                                            to={\"/network/\" + n.id}\n                                            className=\"block\"\n                                            >\n                                            {n.name}\n                                        </Link>\n                                )}\n                            </div>\n                        </div>\n                }\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react';\nimport {\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\n\n// import Header from 'header';\nimport About from 'about';\nimport Footer from 'footer';\nimport Main from 'main';\n\nimport './App.scss';\n\n\nexport default class App extends Component {\n\n    render() {\n        return (\n            <div className=\"App\">\n                <Switch>\n                    <Route path=\"/about\">\n                        <About />\n                    </Route>\n\n                    <Route\n                        path={[\"/network/:network_id\", \"/network\"]}\n                        component={Main}\n                        />\n\n                    <Route exact path=\"/\">\n                        <Redirect to=\"/network\" />\n                    </Route>\n                </Switch>\n\n                <Footer />\n            </div>\n        );\n    }\n}\n","\n// API\nconst api_config = {};\n\nif (process.env.NODE_ENV === 'development') {\n    console.log('Running in development mode')\n    api_config['baseURL'] = 'http://localhost:5000';\n\n} else {\n    // console.log('Running in production mode')\n    api_config['baseURL'] = '';\n}\n\n// Environment variable always overrides\nif (process.env.REACT_APP_BASEURL) {\n    // console.log('Overriding \"api_config.baseURL\" with value from environment!');\n    api_config['baseURL'] = process.env.REACT_APP_BASEURL;\n}\n\n// console.log('api_config:', api_config);\nexport { api_config };\n\n// LOCALE\nexport const locale_config = {\n    language: '',\n    locale: '',\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\n\n\nimport './index.css';\n\nimport App from './App';\nimport { api } from '_api';\nimport { api_config } from 'config.js';\n\nimport * as serviceWorker from './serviceWorker';\n\n// console.log('api_config:', api_config);\n// console.log(config.api_url);\napi.init(api_config);\n\nReactDOM.render(\n    <Router basename=\"/app\">\n        <Switch>\n            <Route\n                path=\"/\"\n                component={App}\n                />\n        </Switch>\n    </Router>,\n    document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}