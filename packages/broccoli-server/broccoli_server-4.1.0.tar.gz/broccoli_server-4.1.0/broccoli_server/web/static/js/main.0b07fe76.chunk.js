(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,n){e.exports=n.p+"static/media/icon.440ed357.png"},38:function(e,t,n){e.exports=n(88)},88:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(22),c=n.n(o),i=n(93),u=n(4),s=n(5),l=n(6),d=n(7),p=n(3),f=n(90),h=n(95),m=n(92),v=n(91),y=n(32),b=n.n(y),E=n(37),g=n(14);function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(p.a)(e);if(t){var a=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}var w=function(e){Object(l.a)(n,e);var t=k(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).onReplicate=function(e,t,n,a){r.props.redirectTo("/workers/create?module=".concat(e,"&class_name=").concat(t,"&args=").concat(encodeURIComponent(JSON.stringify(n)),"&interval_seconds=").concat(a))},r.onRemove=function(e){window.confirm("Are you sure you want to remove worker ".concat(e))&&r.props.apiClient.removeWorker(e).then(function(){r.setState(Object(g.a)({},r.state,{workers:r.state.workers.filter(function(t){return t.worker_id!==e})})),r.props.showOkMessage("Removed worker ".concat(e))}).catch(function(e){console.error(e.response.data),r.props.showErrorMessage(JSON.stringify(e.response.data))})},r.onUpdateIntervalSeconds=function(e,t){r.props.apiClient.updateWorkerIntervalSeconds(e,t).then(function(){r.props.showOkMessage("Updated worker ".concat(e," with interval seconds ").concat(t))}).catch(function(e){console.error(e.response.data),r.props.showErrorMessage(JSON.stringify(e.response.data))})},r.onUpdateErrorResiliency=function(e,t){r.props.apiClient.updateWorkerErrorResiliency(e,t).then(function(){r.props.showOkMessage("Updated worker ".concat(e," with error resiliency ").concat(t))}).catch(function(e){console.error(e.response.data),r.props.showErrorMessage(JSON.stringify(e.response.data))})},r.onUpdateExecutor=function(e,t){r.props.apiClient.updateWorkerExecutor(e,t).then(function(){r.props.showOkMessage("Updated worker ".concat(e," with executor ").concat(t))}).catch(function(e){console.error(e.response.data),r.props.showErrorMessage(JSON.stringify(e.response.data))})},r.state={loading:!0,workers:[],executors:[]},r}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;Promise.all([this.props.apiClient.getWorkers(),this.props.apiClient.getExecutors()]).then(function(t){var n=Object(E.a)(t,2),r=n[0],a=n[1];return e.setState({workers:r,executors:a})}).finally(function(){return e.setState({loading:!1})})}},{key:"renderWorkersTable",value:function(e){var t=this,n=Math.floor(Date.now()/1e3);return a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"ID"),a.a.createElement("th",null,"Interval (seconds)"),a.a.createElement("th",null,"Error Resiliency (non-positive is none)"),a.a.createElement("th",null,"Executor"),a.a.createElement("th",null,"Executed minutes ago"),a.a.createElement("th",null,"Operations"))),a.a.createElement("tbody",null,e.map(function(e){var r=e.worker_id,o=e.module,c=e.class_name,i=e.args,u=e.interval_seconds,s=e.error_resiliency,l=e.executor_slug,d=e.last_executed_seconds;return a.a.createElement("tr",{key:r},a.a.createElement("td",null,a.a.createElement(f.a,{to:"/worker/".concat(r)},r)),a.a.createElement("td",null,a.a.createElement("input",{type:"number",value:u,onChange:function(e){e.preventDefault(),t.setState({workers:t.state.workers.map(function(t){return t.worker_id!==r?t:Object(g.a)({},t,{interval_seconds:parseInt(e.target.value)})})})}}),a.a.createElement("button",{onClick:function(e){e.preventDefault(),t.onUpdateIntervalSeconds(r,u)}},"Update")),a.a.createElement("td",null,a.a.createElement("input",{type:"number",min:-1,value:s,onChange:function(e){e.preventDefault(),t.setState({workers:t.state.workers.map(function(t){return t.worker_id!==r?t:Object(g.a)({},t,{error_resiliency:parseInt(e.target.value)})})})}}),a.a.createElement("button",{onClick:function(e){e.preventDefault(),t.onUpdateErrorResiliency(r,s)}},"Update")),a.a.createElement("td",null,a.a.createElement("select",{value:l,onChange:function(e){e.preventDefault(),t.setState({workers:t.state.workers.map(function(t){return t.worker_id!==r?t:Object(g.a)({},t,{executor_slug:e.target.value})})})}},t.state.executors.map(function(e,t){return a.a.createElement("option",{key:t,value:e},e)})),a.a.createElement("button",{onClick:function(e){e.preventDefault(),t.onUpdateExecutor(r,l)}},"Update")),a.a.createElement("td",null,-1!==d?Math.floor((n-d)/60):"N/A"),a.a.createElement("td",null,a.a.createElement("button",{onClick:function(e){e.preventDefault(),t.onReplicate(o,c,i,u)}},"Create from"),a.a.createElement("button",{onClick:function(e){e.preventDefault(),t.onRemove(r)}},"x")))})))}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("b",null,"View workers"),this.state.loading?a.a.createElement("div",null,"Loading workers..."):this.renderWorkersTable(this.state.workers))}}]),n}(r.Component),O=n(15),S=n(94),x=n(33),j=n.n(x),C=n(34),R=(n(57),n(35)),I=n.n(R),A=function(e){return a.a.createElement(I.a,{isOpen:e.isOpen,ariaHideApp:!1},a.a.createElement(C.a,{value:e.value,onChange:e.onValueChange}),a.a.createElement("button",{onClick:e.onClose},"Close"))},D=function(e){try{return JSON.parse(e)}catch(t){return{}}};function M(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(p.a)(e);if(t){var a=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}var _=function(e){Object(l.a)(n,e);var t=M(n);function n(e){var r;Object(u.a)(this,n),r=t.call(this,e);var a=j.a.parse(r.props.location.search);return r.state={module:a.module||"",className:a.class_name||"",args:D(a.args),intervalSeconds:parseInt(a.interval_seconds)||60,modalIsOpen:!1},r.onSubmit=r.onSubmit.bind(Object(O.a)(r)),r}return Object(s.a)(n,[{key:"onSubmit",value:function(e){this.submit(),e.preventDefault()}},{key:"submit",value:function(){var e=this,t=this.state,n=t.module,r=t.className,a=t.args,o=t.intervalSeconds;this.props.apiClient.addWorker(n,r,a,o).then(function(){e.props.redirectTo("/workers/view")}).catch(function(t){console.error(t.response.data),e.props.showErrorMessage(JSON.stringify(t.response.data))})}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement("b",null,"Create new worker"),a.a.createElement("div",null,"Module:",a.a.createElement("br",null),a.a.createElement("input",{type:"text",size:63,value:this.state.module,onChange:function(t){e.setState({module:t.target.value})}}),a.a.createElement("br",null),"Class name:",a.a.createElement("br",null),a.a.createElement("input",{type:"text",value:this.state.className,onChange:function(t){e.setState({className:t.target.value})}}),a.a.createElement("br",null),"Args:",a.a.createElement("br",null),a.a.createElement("button",{onClick:function(){e.setState({modalIsOpen:!0})}},"Open JSON editor"),a.a.createElement("div",null,JSON.stringify(this.state.args)),"Interval seconds:",a.a.createElement("br",null),a.a.createElement("input",{type:"number",value:this.state.intervalSeconds,onChange:function(t){e.setState({intervalSeconds:parseInt(t.target.value)})}}),a.a.createElement("br",null),a.a.createElement("button",{onClick:this.onSubmit},"Submit")),a.a.createElement(A,{value:this.state.args,onValueChange:function(t){return e.setState({args:t})},onClose:function(){e.setState({modalIsOpen:!1})},isOpen:this.state.modalIsOpen}))}}]),n}(r.Component),N=Object(S.a)(_);function W(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(p.a)(e);if(t){var a=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}var P=function(e){Object(l.a)(n,e);var t=W(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).state={boards:[],loading:!0},r}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.apiClient.getBoards().then(function(t){e.setState({boards:t.map(function(e){return{boardId:e.board_id,boardQuery:{q:e.board_query.q,limit:e.board_query.limit,sort:e.board_query.sort,projections:e.board_query.projections.map(function(e){return{name:e.name}})}}})})}).catch(function(t){e.props.showErrorMessage("Fail to get boards, message ".concat(t.toString()))}).finally(function(){e.setState({loading:!1})})}},{key:"render",value:function(){return this.state.loading?a.a.createElement("div",null,"Loading..."):0===this.state.boards.length?a.a.createElement("div",null,"No boards"):a.a.createElement("div",null,a.a.createElement("b",null,"View mod views"),a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Name"),a.a.createElement("th",null,"Query"),a.a.createElement("th",null,"Limit"),a.a.createElement("th",null,"Sort"),a.a.createElement("th",null,"Columns"))),a.a.createElement("tbody",null,this.state.boards.map(function(e,t){var n=e.boardId,r=e.boardQuery,o=r.q,c=r.limit,i=r.sort,u=r.projections;return a.a.createElement("tr",{key:t},a.a.createElement("td",null,a.a.createElement(f.a,{to:"/board/".concat(encodeURIComponent(n))},n)),a.a.createElement("td",null,JSON.stringify(o)),a.a.createElement("td",null,c||"N/A"),a.a.createElement("td",null,i?JSON.stringify(i):"N/A"),a.a.createElement("td",null,u.map(function(e){return e.name}).join(", ")))}))))}}]),n}(r.Component),T=new Set(["button"]),U=function(e){var t=e.data,n=e.callbackId,r=e.rawDocument,o=e.apiClient,c=e.reload,i=e.getRawDocument;if(void 0===r&&void 0===i)return a.a.createElement("div",null,"Neither rawDocument nor getRawDocument");var u=t.text,s=t.reload_after_callback;return a.a.createElement("button",{onClick:function(){var e;e=void 0!==i?i():[r],Promise.all(e.map(function(e){return o.callbackBoard(n,e)})).catch(function(e){}).finally(function(){s&&c()})}},u)},L=function(e){var t=e.data.url;return a.a.createElement("img",{src:t,alt:t,style:{objectFit:"scale-down",width:"100%",height:"100%"}})},J=function(e){var t=e.data;return a.a.createElement("div",null,t.urls.map(function(e){return a.a.createElement(L,{data:{url:e}})}))},q=function(e){var t=e.data.text;return t.startsWith('"')&&t.endsWith('"')&&(t=t.substring(1,t.length-1)),function(e){try{new URL(e)}catch(t){return!1}return!0}(t)?a.a.createElement("a",{href:t,target:"_blank"},t):a.a.createElement("p",null,t)},B=function(e){var t=e.data.url;return a.a.createElement("video",{controls:!0,style:{objectFit:"scale-down",width:"100%",height:"100%"}},a.a.createElement("source",{src:t,type:"video/mp4"}))},Q=function(e){return a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},e.children)},V=function(e){return a.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},e.children)},F=function(e){var t=void 0!==e.hidden&&e.hidden?"none":"flex";return a.a.createElement("div",{style:{display:t,width:"".concat(e.widthPx,"px"),justifyContent:"center"}},e.text)},z=function(e){var t=void 0!==e.hidden&&e.hidden?"none":"flex";return a.a.createElement("div",{style:{display:t,width:"".concat(e.widthPx,"px"),height:"400px",justifyContent:"center",alignItems:"center"}},e.children)};function K(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(p.a)(e);if(t){var a=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}var H=function(e){Object(l.a)(n,e);var t=K(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).boardId=void 0,r.loadQuery=function(){r.setState(n.InitialState),r.props.apiClient.renderBoard(r.boardId).then(function(e){return r.setState({boardRender:e})}).catch(function(e){r.props.showErrorMessage(new Error("Fail to load mod view, error ".concat(e.toString())))}).finally(function(){r.setState({loading:!1})})},r.renderColumn=function(e,t,n,o,c){var i;return"text"===e?i=q:"image"===e?i=L:"image_list"===e?i=J:"button"===e?i=U:"video"===e&&(i=B),i?a.a.createElement(i,{data:t,callbackId:o,rawDocument:n,getRawDocument:c,apiClient:r.props.apiClient,reload:r.loadQuery}):a.a.createElement("div",null,"`Unknown column type $",e,"`")},r.getColumnWidthPx=function(e){return"text"===e?400:"image"===e?400:"image_list"===e?400:"button"===e?100:"video"===e?400:100},r.onToggleRowMultiAction=function(e){var t=new Set(r.state.multiActionSelectedIndexes.values());if(t.has(e))t.delete(e);else{t.add(e);var n=r.state.multiActionLastSelectedIndex;if(r.state.holdingShift&&-1!==n&&n<e)for(var a=n;a<e+1;a++)t.add(a);r.setState({multiActionLastSelectedIndex:e})}r.setState({multiActionSelectedIndexes:t})},r.renderRow=function(e,t,n){var o=t.renders;return a.a.createElement(V,{key:n},a.a.createElement(z,{hidden:!r.state.multiActionOn,key:"multi-action-selected",widthPx:50},a.a.createElement("input",{type:"checkbox",checked:r.state.multiActionSelectedIndexes.has(n),onChange:function(){r.onToggleRowMultiAction(n)}})),e.map(function(e){var n,c=o[e];return n=c?r.renderColumn(c.type,c.data,t.raw_document,c.callback_id):a.a.createElement("div",null,"N/A"),a.a.createElement(z,{key:e,widthPx:r.getColumnWidthPx(c.type)},n)}))},r.renderPayload=function(){var e=r.state.boardRender,t=e.payload;if(!t||0===t.length)return a.a.createElement("div",null,"Query is empty");var n=r.state.boardRender.board_query.projections.map(function(e){return e.name});return a.a.createElement("div",null,a.a.createElement("div",null,"Query count: ",e.count_without_limit),a.a.createElement("div",null,a.a.createElement("input",{type:"checkbox",id:"toggleMultiAction",onClick:r.onToggleMultiAction}),a.a.createElement("label",{htmlFor:"toggleMultiAction"},"Toggle multi-action")),a.a.createElement("div",{hidden:!r.state.multiActionOn},"Multi-action: selected ",r.state.multiActionSelectedIndexes.size," items",r.renderRangeSelectPrompt(),r.renderMultiActions()),a.a.createElement(Q,null,a.a.createElement(V,null,a.a.createElement(F,{key:"multi-action-selected",text:"Multi-action selected",hidden:!r.state.multiActionOn,widthPx:50}),n.map(function(e){return a.a.createElement(F,{key:e,text:e,widthPx:r.getColumnWidthPx(t[0].renders[e].type)})})),t.map(function(e,t){return r.renderRow(n,e,t)})))},r.onToggleMultiAction=function(){r.setState({multiActionOn:!r.state.multiActionOn})},r.renderRangeSelectPrompt=function(){return r.state.holdingShift?a.a.createElement("div",null,"Range selecting"):a.a.createElement("div",null,'Hold "shift" to range select')},r.renderMultiActions=function(){var e=r.state.boardRender,t=e.payload;if(0===t.length)return a.a.createElement("div",null,"No multi-action to render");var n=t[0].renders,o=e.board_query.projections.map(function(e){return e.name}),c=o.map(function(e){return a.a.createElement("th",{key:e},e)}),i=o.map(function(e){var o,c=n[e];return o=c?T.has(c.type)?r.renderColumn(c.type,c.data,void 0,c.callback_id,function(){return Array.from(r.state.multiActionSelectedIndexes).map(function(e){return t[e].raw_document})}):a.a.createElement("div",null,"Not action-able"):a.a.createElement("div",null,"N/A"),a.a.createElement("td",{key:e},o)});return a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,c)),a.a.createElement("tbody",null,a.a.createElement("tr",null,i)))},r.keyDown=function(e){16===e.keyCode&&r.state.multiActionOn&&r.setState({holdingShift:!0})},r.keyUp=function(e){16===e.keyCode&&r.state.multiActionOn&&r.setState({holdingShift:!1})},r.boardId=decodeURIComponent(r.props.match.params.name),r.state=n.InitialState,r}return Object(s.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyDown,!1),document.addEventListener("keyup",this.keyUp,!1),this.loadQuery()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyDown,!1),document.removeEventListener("keyup",this.keyUp,!1)}},{key:"render",value:function(){if(this.state.loading)return a.a.createElement("div",null,"Loading mod view...");var e=this.state.boardRender;return a.a.createElement("div",null,a.a.createElement("b",null,'Mod view "',this.boardId,'"'),a.a.createElement("div",null,"Query: ",JSON.stringify(e.board_query.q)),a.a.createElement("div",null,"Limit: ",e.board_query.limit?e.board_query.limit:"N/A"),a.a.createElement("div",null,"Sort: ",e.board_query.sort?JSON.stringify(e.board_query.sort):"N/A"),this.renderPayload())}}]),n}(a.a.Component);H.InitialState={loading:!0,boardRender:{},multiActionOn:!1,multiActionSelectedIndexes:new Set,multiActionLastSelectedIndex:-1,holdingShift:!1};var $=Object(S.a)(H);function G(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(p.a)(e);if(t){var a=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}var X=function(e){Object(l.a)(n,e);var t=G(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).workerId=r.props.match.params.workerId,r.state={loading:!0,metadataStr:"[]"},r}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.apiClient.getWorkerMetadata(this.workerId).then(function(t){e.setState({metadataStr:JSON.stringify(t.data)})}).catch(function(t){e.props.showErrorMessage(t.toString())}).finally(function(){e.setState({loading:!1})})}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement("b",null,"Worker ",this.workerId),a.a.createElement("br",null),"Metadata:",a.a.createElement("br",null),a.a.createElement("textarea",{cols:"30",rows:"5",style:{resize:"none"},value:this.state.metadataStr,onChange:function(t){e.setState({metadataStr:t.target.value})}}),a.a.createElement("br",null),a.a.createElement("button",{onClick:function(){e.props.apiClient.setWorkerMetadata(e.workerId,JSON.parse(e.state.metadataStr)).then(function(){e.props.showOkMessage("Metadata for ".concat(e.workerId," set"))}).catch(function(t){e.props.showErrorMessage(t.toString())})}},"Submit"))}}]),n}(r.Component),Y=Object(S.a)(X),Z=n(2),ee=n.n(Z),te=n(9),ne=n(19),re=n.n(ne),ae=function(){function e(){Object(u.a)(this,e),this.TokenLocalStorageKey="accessToken",this.endpoint=void 0,this.axios=void 0,this.isAuth=void 0,this.endpoint="",this.axios=re.a.create(),this.isAuth=!1;var t=localStorage.getItem(this.TokenLocalStorageKey);t&&this.setAuth(t)}return Object(s.a)(e,[{key:"auth",value:function(){var e=Object(te.a)(ee.a.mark(function e(t,n){var r=this;return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.axios.post("".concat(this.endpoint,"/auth"),{username:t,password:n}).then(function(e){var t=e.data.access_token;if(!t)throw new Error("No access_token in ".concat(e.data));r.setAuth(t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"setAuth",value:function(e){localStorage.setItem(this.TokenLocalStorageKey,e),this.isAuth=!0,this.axios=re.a.create({headers:{Authorization:"Bearer "+e}})}},{key:"unsetAuth",value:function(){localStorage.removeItem(this.TokenLocalStorageKey),this.isAuth=!0,this.axios=re.a.create()}},{key:"hasAuth",value:function(){return this.isAuth}},{key:"getBoards",value:function(){var e=Object(te.a)(ee.a.mark(function e(){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.axios.get("".concat(this.endpoint,"/apiInternal/boards")).then(function(e){return e.data}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getBoard",value:function(){var e=Object(te.a)(ee.a.mark(function e(t){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.axios.get("".concat(this.endpoint,"/apiInternal/board/").concat(t)).then(function(e){return e.data}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"renderBoard",value:function(){var e=Object(te.a)(ee.a.mark(function e(t){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.axios.get("".concat(this.endpoint,"/apiInternal/renderBoard/").concat(t)).then(function(e){return e.data}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"callbackBoard",value:function(){var e=Object(te.a)(ee.a.mark(function e(t,n){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.axios.post("".concat(this.endpoint,"/apiInternal/callbackBoard/").concat(t),n));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getWorkers",value:function(){var e=Object(te.a)(ee.a.mark(function e(){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.axios.get("".concat(this.endpoint,"/apiInternal/worker")).then(function(e){return e.data}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"addWorker",value:function(){var e=Object(te.a)(ee.a.mark(function e(t,n,r,a){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.axios.post("".concat(this.endpoint,"/apiInternal/worker"),{module:t,class_name:n,args:r,interval_seconds:a}));case 1:case"end":return e.stop()}},e,this)}));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"removeWorker",value:function(){var e=Object(te.a)(ee.a.mark(function e(t){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.axios.delete("".concat(this.endpoint,"/apiInternal/worker/").concat(t)));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateWorkerIntervalSeconds",value:function(){var e=Object(te.a)(ee.a.mark(function e(t,n){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.axios.put("".concat(this.endpoint,"/apiInternal/worker/").concat(t,"/intervalSeconds/").concat(n)));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateWorkerErrorResiliency",value:function(){var e=Object(te.a)(ee.a.mark(function e(t,n){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.axios.put("".concat(this.endpoint,"/apiInternal/worker/").concat(t,"/errorResiliency/").concat(n)));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateWorkerExecutor",value:function(){var e=Object(te.a)(ee.a.mark(function e(t,n){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.axios.put("".concat(this.endpoint,"/apiInternal/worker/").concat(t,"/executor/").concat(n)));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getExecutors",value:function(){var e=Object(te.a)(ee.a.mark(function e(){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.axios.get("".concat(this.endpoint,"/apiInternal/executor")).then(function(e){return e.data}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getWorkerMetadata",value:function(){var e=Object(te.a)(ee.a.mark(function e(t){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.axios.get("".concat(this.endpoint,"/apiInternal/worker/").concat(t,"/metadata")));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setWorkerMetadata",value:function(){var e=Object(te.a)(ee.a.mark(function e(t,n){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.axios.post("".concat(this.endpoint,"/apiInternal/worker/").concat(t,"/metadata"),n));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getThreadCount",value:function(){var e=Object(te.a)(ee.a.mark(function e(){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.axios.get("".concat(this.endpoint,"/debug/threadCount")).then(function(e){return e.data.thread_count}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}();function oe(e){return e.displayName||e.name||"Component"}function ce(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(p.a)(e);if(t){var a=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}var ie=function(e){var t=function(t){Object(l.a)(r,t);var n=ce(r);function r(e){var t;return Object(u.a)(this,r),(t=n.call(this,e)).showOkMessage=function(e){t.setState({message:e,messageStatus:"ok"})},t.showErrorMessage=function(e){t.setState({message:e,messageStatus:"error"})},t.state={message:"",messageStatus:""},t}return Object(s.a)(r,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(e,Object.assign({showOkMessage:this.showOkMessage,showErrorMessage:this.showErrorMessage},this.props)),this.state.message?a.a.createElement("div",{style:{color:"ok"===this.state.messageStatus?"black":"red"}},this.state.message):null)}}]),r}(a.a.Component);return t.displayName="applyMessage(".concat(oe(e),")"),t};function ue(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(p.a)(e);if(t){var a=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}var se=function(e){var t=function(t){Object(l.a)(r,t);var n=ue(r);function r(e){var t;return Object(u.a)(this,r),(t=n.call(this,e)).redirectTo=function(e){t.setState({redirectTo:e})},t.state={redirectTo:""},t}return Object(s.a)(r,[{key:"render",value:function(){return this.state.redirectTo?a.a.createElement(m.a,{to:this.state.redirectTo}):a.a.createElement(e,Object.assign({redirectTo:this.redirectTo},this.props))}}]),r}(a.a.Component);return t.displayName="applyRouting(".concat(oe(e),")"),t};function le(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(p.a)(e);if(t){var a=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}var de=function(e){var t=function(t){Object(l.a)(r,t);var n=le(r);function r(e){var t;return Object(u.a)(this,r),(t=n.call(this,e)).apiClient=void 0,t.onSubmit=function(e){t.submit(),e.preventDefault()},t.apiClient=new ae,t.state={username:"",password:""},t}return Object(s.a)(r,[{key:"submit",value:function(){var e=this.state,t=e.username,n=e.password;this.apiClient.auth(t,n).then()}},{key:"render",value:function(){var t=this;return this.apiClient.hasAuth()?a.a.createElement(e,Object.assign({apiClient:this.apiClient},this.props)):a.a.createElement("div",null,a.a.createElement("b",null,"Log in"),a.a.createElement("div",null,"Username:",a.a.createElement("br",null),a.a.createElement("input",{type:"text",value:this.state.username,onChange:function(e){t.setState({username:e.target.value})}}),a.a.createElement("br",null),"Password:",a.a.createElement("br",null),a.a.createElement("input",{type:"password",value:this.state.password,onChange:function(e){t.setState({password:e.target.value})}}),a.a.createElement("br",null),a.a.createElement("button",{onClick:this.onSubmit},"Submit")))}}]),r}(a.a.Component);return t.displayName="applyAuth(".concat(oe(e),")"),t};function pe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(p.a)(e);if(t){var a=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}function fe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0,o=n;a<o.length;a++){e=(0,o[a])(e)}return e}var he=function(e){Object(l.a)(n,e);var t=pe(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).apiClient=new ae,r.state={threadCount:-1},r}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.apiClient.getThreadCount().then(function(t){e.setState({threadCount:t})})}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("img",{src:b.a,alt:"Broccoli logo",height:"16",width:"16"})," Broccoli"," | ",a.a.createElement(f.a,{to:"/boards/view"},"View mod views")," | ",a.a.createElement(f.a,{to:"/workers/view"},"View workers")," | ",a.a.createElement(f.a,{to:"/workers/create"},"Create new worker")," | ","Thread count: ".concat(this.state.threadCount)," | ",a.a.createElement("button",{onClick:function(t){t.preventDefault(),e.apiClient.unsetAuth()}},"Logout")),a.a.createElement(h.a,null,a.a.createElement(m.a,{exact:!0,from:"/",to:"/boards/view"}),a.a.createElement(v.a,{exact:!0,path:"/boards/view",component:function(){var e=fe(P,ie,se,de);return a.a.createElement(e,null)}}),a.a.createElement(v.a,{exact:!0,path:"/board/:name",component:function(){var e=fe($,ie,de);return a.a.createElement(e,null)}}),a.a.createElement(v.a,{exact:!0,path:"/workers/view",component:function(){var e=fe(w,ie,se,de);return a.a.createElement(e,null)}}),a.a.createElement(v.a,{exact:!0,path:"/workers/create",component:function(){var e=fe(N,ie,se,de);return a.a.createElement(e,null)}}),a.a.createElement(v.a,{exact:!0,path:"/worker/:workerId",component:function(){var e=fe(Y,ie,de);return a.a.createElement(e,null)}})))}}]),n}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(i.a,{basename:"/web"},a.a.createElement(he,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[38,2,1]]]);
//# sourceMappingURL=main.0b07fe76.chunk.js.map