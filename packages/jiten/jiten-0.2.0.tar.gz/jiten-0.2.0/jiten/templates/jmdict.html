<!doctype html>
<html lang="en">
  <!--

    File        : templates/jmdict.html
    Maintainer  : Felix C. Stegerman <flx@obfusk.net>
    Date        : 2020-07-14

    Copyright   : Copyright (C) 2020  Felix C. Stegerman
    Version     : v0.1.1
    License     : AGPLv3+

  -->
  <head>
    {% include "_meta.html" %}
    <title>jiten - jmdict</title>
  </head>
  <body>
    {% from "_search.html" import jmdict with context %}
    {% include "_nav.html" %}
    <div class="container">
      {{ jmdict(LANGS, langs, query) }}
      {% if query %}
        {% for e, rank in results %}
          <br/>
          <div class="card">
            <div class="card-body">
              <ul class="list-group">
                <li class="list-group-item {{
                      "pb-1 px-2 pt-2" if e.kanji else "p-2"
                    }}" title="kanji">
                  {% if e.kanji %}
                    {% for k in e.kanji %}
                      <span class="jap selbtn fakebtn btn btn-lg btn-warning py-1 mb-1">
                        {% for c in k.elem -%}
                          {% if isideo(c) -%}
                            <a class="text-reset"
                              href="/kanji?query={{ c }}">{{ c }}</a>
                          {%- else -%}
                            {{ c }}
                          {%- endif %}
                        {%- endfor %}
                      </span>
                    {% endfor %}
                  {% else %}
                    <span class="text-muted">no kanji</span>
                  {% endif %}
                </li>
                <li class="list-group-item {{
                      "pb-1 px-2 pt-2" if e.reading else "p-2"
                    }}" title="reading">
                  {% if e.reading %}
                    {% for r in e.reading %}
                      <a class="jap selbtn btn btn-success py-1 mb-1"
                        href="/jmdict?query={{ r.elem }}&exact=yes">{{ r.elem }}</a>
                    {% endfor %}
                  {% else %}
                    <span class="text-muted">no readings</span>
                  {% endif %}
                </li>
              </ul>
              {% set gloss, info = e.gloss_pos_info(langs) %}
              {% for l in langs if gloss[l] %}
                <br/>
                <h4>{{ l }}</h4>
                <ul class="list-group my-1" title="meanings">
                  {% for g in gloss[l] %}
                    <li class="list-group-item pb-1 px-2 pt-2">
                      {% for x in g %}
                        <span class="selbtn fakebtn btn btn-outline-primary text-reset py-1 mb-1">
                          {{ x }}
                        </span>
                      {% endfor %}
                    </li>
                  {% endfor %}
                </ul>
              {% endfor %}
              <ul class="list-group my-1" title="miscellaneous">
                {% if info %}
                  <li class="list-group-item pb-1 px-2 pt-2">
                    {% for i in info %}
                      <span class="selbtn fakebtn btn btn-success btn-sm mb-1">
                        {{ i }}
                      </span>
                    {% endfor %}
                  </li>
                {% endif %}
                {% set xi = e.xinfo()|list %}
                {% if xi %}
                  <li class="list-group-item pb-1 px-2 pt-2">
                    {% for i in xi %}
                      <span class="selbtn fakebtn btn btn-primary btn-sm mb-1">
                        {{ i }}
                      </span>
                    {% endfor %}
                  </li>
                {% endif %}
                {% set xr = e.xrefs()|list %}
                {% if xr %}
                  <li class="list-group-item pb-1 px-2 pt-2">
                    see
                    {% for i in xr %}
                      <a class="jap selbtn btn btn-warning btn-sm mb-1"
                        href="/jmdict?query={{ i }}&exact=yes">{{ i }}</a>
                    {% endfor %}
                  </li>
                {% endif %}
                <li class="list-group-item pb-1 px-2 pt-2">
                  <span class="nowrap">
                    seq#
                    <a class="badge badge-primary"
                        href="/jmdict?query={{ ("+#" + e.seq|string)|urlencode }}">
                      {{ e.seq }}
                    </a>
                  </span>
                  {% if rank %}
                    <span class="nowrap">
                      » freq#
                      <span class="badge badge-info">
                        {{ rank }}
                      </span>
                    </span>
                  {% endif %}
                  {% if e.isprio() %}
                    <span class="nowrap">» prio</span>
                  {% endif %}
                </li>
              </ul>
            </div>
          </div>
        {% endfor %}
      {% endif %}
    </div>
    {% include "_footer.html" %}
  </body>
</html>
