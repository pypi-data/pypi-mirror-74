[tox]
envlist = py27,py36,py37,py38,py39

[gh-actions]
python =
  2.7: py27
  3.6: py36
  3.7: py37
  3.8: py38

[testenv]
extras = test
usedevelop = true
commands =
  pytest -n auto --cov={toxinidir}/src/pip_deepfreeze --cov-branch --cov-report=html --cov-report=term {posargs}

[testenv:py27]
# run only list_depends_script tests on python 2
skip_install = true
deps =
  pytest
  virtualenv
commands =
  pytest {toxinidir}/tests/test_list_depends_script.py

[testenv:mypy]
extras = mypy
commands =
  mypy --strict --implicit-reexport src/pip_deepfreeze
