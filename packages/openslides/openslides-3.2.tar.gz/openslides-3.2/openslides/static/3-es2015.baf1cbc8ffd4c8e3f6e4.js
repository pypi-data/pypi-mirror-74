(window.webpackJsonp=window.webpackJsonp||[]).push([[3,36],{Ei9z:function(t,e,n){t.exports=n.p+"0-es2015.8ce0fe7fa2fc627fb30f.worker.js"},F48D:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n("mrSG"),i=n("LBBb"),a=n("fXoL"),r=n("0IaG");let s=(()=>{class t{constructor(t){this.dialog=t}open(t,e=""){return Object(o.a)(this,void 0,void 0,(function*(){return this.dialog.open(i.a,{width:"250px",data:{title:t,content:e}}).afterClosed().toPromise()}))}}return t.\u0275fac=function(e){return new(e||t)(a.ec(r.b))},t.\u0275prov=a.Qb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},Iab2:function(t,e,n){var o,i;void 0===(i="function"==typeof(o=function(){"use strict";function e(t,e,n){var o=new XMLHttpRequest;o.open("GET",t),o.responseType="blob",o.onload=function(){a(o.response,e,n)},o.onerror=function(){console.error("could not download file")},o.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype?function(t,a,r){var s=i.URL||i.webkitURL,c=document.createElement("a");c.download=a=a||t.name||"download",c.rel="noopener","string"==typeof t?(c.href=t,c.origin===location.origin?o(c):n(c.href)?e(t,a,r):o(c,c.target="_blank")):(c.href=s.createObjectURL(t),setTimeout((function(){s.revokeObjectURL(c.href)}),4e4),setTimeout((function(){o(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,i,a){if(i=i||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,a),i);else if(n(t))e(t,i,a);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout((function(){o(r)}))}}:function(t,n,o,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,o);var r="application/octet-stream"===t.type,s=/constructor/i.test(i.HTMLElement)||i.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||r&&s)&&"object"==typeof FileReader){var l=new FileReader;l.onloadend=function(){var t=l.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=t:location=t,a=null},l.readAsDataURL(t)}else{var d=i.URL||i.webkitURL,f=d.createObjectURL(t);a?a.location=f:location.href=f,a=null,setTimeout((function(){d.revokeObjectURL(f)}),4e4)}});i.saveAs=a.saveAs=a,t.exports=a})?o.apply(e,[]):o)||(t.exports=i)},LBBb:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var o=n("0IaG"),i=n("fXoL"),a=n("ofXK"),r=n("bTqV"),s=n("sYmb");function c(t,e){if(1&t&&(i.ac(0,"div"),i.ac(1,"h2",1),i.Tc(2),i.Zb(),i.Vb(3,"mat-dialog-content",2),i.ac(4,"mat-dialog-actions"),i.ac(5,"button",3),i.Tc(6),i.nc(7,"translate"),i.Zb(),i.ac(8,"button",4),i.Tc(9),i.nc(10,"translate"),i.Zb(),i.Zb(),i.Zb()),2&t){const t=i.mc();i.Hb(2),i.Uc(t.data.title),i.Hb(1),i.uc("innerHTML",t.data.content,i.Kc),i.Hb(2),i.uc("mat-dialog-close",!0),i.Hb(1),i.Uc(i.oc(7,6,"Yes")),i.Hb(2),i.uc("mat-dialog-close",!1),i.Hb(1),i.Uc(i.oc(10,8,"Cancel"))}}let l=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e}}return t.\u0275fac=function(e){return new(e||t)(i.Ub(o.h),i.Ub(o.a))},t.\u0275cmp=i.Ob({type:t,selectors:[["os-prompt-dialog"]],decls:1,vars:1,consts:[[4,"ngIf"],["mat-dialog-title",""],[3,"innerHTML"],["mat-button","","color","warn",3,"mat-dialog-close"],["mat-button","",3,"mat-dialog-close"]],template:function(t,e){1&t&&i.Rc(0,c,11,10,"div",0),2&t&&i.uc("ngIf",e.data)},directives:[a.t,o.i,o.f,o.c,r.b,o.d],pipes:[s.j],encapsulation:2}),t})()},a9GI:function(t,e,n){"use strict";(function(t){n.d(e,"d",(function(){return g})),n.d(e,"a",(function(){return p})),n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return m}));var o=n("mrSG"),i=n("tk/3"),a=n("Iab2"),r=n("Y3lY"),s=n("+KbT"),c=n("Hila"),l=n("x4ls"),d=n("fXoL"),f=n("sYmb"),u=n("dNgK"),g=function(t){return t.DEFAULT="tocEntry",t.SUBTITLE="subtitle",t.SUB_ENTRY="tocSubEntry",t.CATEGORY_SECTION="tocCategorySection",t}({}),p=function(t){return t.DEFAULT="noBorders",t.LIGHT_HORIZONTAL_LINES="lightHorizontalLines",t.HEADER_ONLY="headerLineOnly",t}({});class h extends Error{constructor(t){super(t),this.message=t;const e=new.target.prototype;this.__proto__=e}}let m=(()=>{class e{constructor(t,e,n,o,i){this.translate=t,this.configService=e,this.httpService=n,this.matSnackBar=o,this.progressService=i,this.imageUrls=[]}initVfs(){return Object(o.a)(this,void 0,void 0,(function*(){const t=Array.from(new Set(this.configService.instant("fonts_available").map(t=>this.configService.instant(t)).map(t=>t.path||"/"+t.default))).map(t=>this.convertUrlToBase64(t).then(e=>({[t.split("/").pop()]:e}))),e=yield Promise.all(t);let n={};return e.map(t=>{n=Object.assign(Object.assign({},n),t)}),n}))}convertUrlToBase64(t){return Object(o.a)(this,void 0,void 0,(function*(){return new Promise((e,n)=>{const o=new i.e;this.httpService.get(t,{},{},o,"blob").then(t=>{const o=new FileReader;o.readAsDataURL(t),o.onload=()=>{e(o.result.split(",")[1])},o.onerror=t=>{n(t)}})})}))}getFontName(t){const e=this.configService.instant(t);return(e.path||"/"+e.default).split("/").pop()}getStandardPaper(t,e,n,i,a,r){return Object(o.a)(this,void 0,void 0,(function*(){this.imageUrls=i||[];const o=this.configService.instant("general_export_pdf_pagesize");return{pageSize:o||"A4",pageOrientation:r?"landscape":"portrait",pageMargins:a||("A5"===o?[45,30,45,45]:[75,90,75,75]),defaultStyle:{font:"PdfFont",fontSize:this.configService.instant("general_export_pdf_fontsize")},header:this.getHeader(a?[a[0],a[2]]:null),tmpfooter:this.getFooter(a?[a[0],a[2]]:null,n),info:e,content:t,styles:this.getStandardPaperStyles()}}))}getBallotPaper(t,e){return Object(o.a)(this,void 0,void 0,(function*(){return this.imageUrls=e?[e]:[],{pageSize:"A4",pageMargins:[0,0,0,0],defaultStyle:{font:"PdfFont",fontSize:10},content:t,styles:this.getBlankPaperStyles()}}))}getPdfFonts(){return{normal:this.getFontName("font_regular"),bold:this.getFontName("font_bold"),italics:this.getFontName("font_italic"),bolditalics:this.getFontName("font_bold_italic")}}getHeader(t){let e,n=this.configService.instant("logo_pdf_header_L").path,o=this.configService.instant("logo_pdf_header_R").path;const i=[];return n&&(0===n.indexOf("/")&&(n=n.substr(1)),i.push({image:n,fit:[180,40],width:"20%"}),this.imageUrls.push(n)),e=n&&o?"":[[this.translate.instant(this.configService.instant("general_event_name")),this.translate.instant(this.configService.instant("general_event_description"))].filter(Boolean).join(" - "),[this.configService.instant("general_event_location"),this.configService.instant("general_event_date")].filter(Boolean).join(", ")].join("\n"),i.push({text:e,style:"headerText",alignment:o?"left":"right"}),o&&(0===o.indexOf("/")&&(o=o.substr(1)),i.push({image:o,fit:[180,40],alignment:"right",width:"20%"}),this.imageUrls.push(o)),{color:"#555",fontSize:9,margin:[t?t[0]:75,30,t?t[0]:75,10],columns:i,columnGap:10}}getFooter(t,e){const n=[],o=!e||!e.pdfOptions||e.pdfOptions.includes("page"),i=!(!e||!e.pdfOptions)&&e.pdfOptions.includes("date");let a,r,s;const c=this.configService.instant("logo_pdf_footer_L").path,l=this.configService.instant("logo_pdf_footer_R").path;let d="";o&&(d+="%PAGENR%");let f={};return i&&(f={text:`${this.translate.instant("As of")}: ${(new Date).toLocaleDateString(this.translate.currentLang)}`,fontSize:6}),c&&l?(a="20%",s=[180,40]):(a="80%",s=[400,50]),r=c&&l?"center":c&&!l?"right":l&&!c?"left":this.configService.instant("general_export_pdf_pagenumber_alignment"),c&&(n.push({image:c,fit:s,width:a,alignment:"left"}),this.imageUrls.push(c)),n.push({stack:[d,f],style:"footerPageNumber",alignment:r}),l&&(n.push({image:l,fit:s,width:a,alignment:"right"}),this.imageUrls.push(l)),{margin:[t?t[0]:75,0,t?t[0]:75,10],columns:n,columnGap:10}}showProgress(){this.matSnackBar.openFromComponent(r.a,{duration:0}).onAction().subscribe(()=>{this.cancelPdfCreation()}),this.progressService.message=this.translate.instant("Creating PDF file ..."),this.progressService.progressMode="determinate"}download(t,e,n,o){this.showProgress(),this.getStandardPaper(t,n,o).then(t=>{this.createPdf(t,e)})}downloadLandscape(t,e,n){this.showProgress(),this.getStandardPaper(t,n,null,null,[50,80,50,75],!0).then(t=>{this.createPdf(t,e)})}downloadWithBallotPaper(t,e,n){this.showProgress(),this.getBallotPaper(t,n).then(t=>{this.createPdf(t,e)})}createPdf(e,n){return Object(o.a)(this,void 0,void 0,(function*(){const o=n+".pdf",i=this.getPdfFonts(),r=yield this.initVfs();yield this.loadAllImages(r);const s=/msie\s|trident\//i.test(window.navigator.userAgent);"undefined"==typeof Worker||s?(this.matSnackBar.dismiss(),this.matSnackBar.open(this.translate.instant("Cannot create PDF files on this browser."),"",{duration:0})):(this.pdfWorker=new Worker(t,void 0),this.pdfWorker.onmessage=({data:t})=>{if("number"==typeof t){const e=Math.ceil(100*t);this.progressService.progressAmount=e}"object"==typeof t&&(this.matSnackBar.dismiss(),Object(a.saveAs)(t,o,{autoBOM:!0}),this.pdfWorker=null)},this.pdfWorker.postMessage({doc:JSON.parse(JSON.stringify(e)),fonts:i,vfs:r}))}))}cancelPdfCreation(){this.pdfWorker&&(this.pdfWorker.terminate(),this.pdfWorker=null)}getStandardPaperStyles(){const t=this.configService.instant("general_export_pdf_pagesize");return{title:{fontSize:"A5"===t?14:16,margin:[0,0,0,20],bold:!0},subtitle:{fontSize:9,margin:[0,-20,0,20],color:"grey"},preamble:{margin:[0,0,0,10]},headerText:{fontSize:10,margin:[0,10,0,0]},footerPageNumber:{fontSize:8,margin:[0,15,0,0],color:"#555"},boldText:{bold:!0},smallText:{fontSize:8},heading2:{fontSize:"A5"===t?12:14,margin:[0,0,0,10],bold:!0},heading3:{fontSize:"A5"===t?10:12,margin:[0,10,0,0],bold:!0},userDataHeading:{fontSize:14,margin:[0,10],bold:!0},userDataTopic:{fontSize:12,margin:[0,5]},userDataValue:{fontSize:12,margin:[15,5]},tocEntry:{fontSize:"A5"===t?10:11,margin:[0,0,0,0],bold:!1},tocHeaderRow:{fontSize:7},tocSubEntry:{fontSize:"A5"===t?9:10,color:"#404040"},tocCategoryEntry:{fontSize:"A5"===t?10:11,margin:[10,0,0,0],bold:!1},tocCategoryTitle:{fontSize:"A5"===t?10:11,margin:[0,0,0,4],bold:!0},tocSubcategoryTitle:{fontSize:"A5"===t?9:10,margin:[0,0,0,4],bold:!0},tocCategorySection:{margin:[0,0,0,10]},userDataTitle:{fontSize:26,margin:[0,0,0,0],bold:!0},tableHeader:{bold:!0,fillColor:"white"},listParent:{fontSize:14,margin:[0,5]},listChild:{fontSize:12,margin:[0,5]},textItem:{fontSize:11,margin:[0,7]}}}getBlankPaperStyles(){return{title:{fontSize:14,bold:!0,margin:[30,30,0,0]},description:{fontSize:11,margin:[30,0,0,0]}}}loadAllImages(t){return Object(o.a)(this,void 0,void 0,(function*(){const e=this.imageUrls.map(e=>this.addImageToVfS(e,t));yield Promise.all(e)}))}addImageToVfS(t,e){return Object(o.a)(this,void 0,void 0,(function*(){if(0===t.indexOf("/")&&(t=t.substr(1)),!e[t]){const n=yield this.convertUrlToBase64(t);e[t]=n}}))}createTitle(t){return{text:this.translate.instant(this.configService.instant(t)),style:"title"}}createPreamble(t){const e=this.configService.instant(t);return e?{text:e,style:"preamble"}:{}}getPageBreak(){return{text:"",pageBreak:"after"}}getSpacer(){return{text:"",margin:[0,10]}}createTocTableDef(t,e=g.DEFAULT,n=p.DEFAULT,...o){return{table:{headerRows:o[0]?o.length:0,keepWithHeaderRows:o[0]?o.length:0,dontBreakRows:!0,widths:["auto","*","auto"],body:o[0]?[...o,...t]:t},layout:n,style:e}}createTocLine(t,e,n,o=g.DEFAULT,...i){return[{text:t,style:o},{text:[e,...i],style:"tocEntry"},{pageReference:n,style:"tocEntry",alignment:"right"}]}createTocLineInline(t,e=!1){return{text:"\n"+t,style:g.SUB_ENTRY,italics:e}}drawCircle(t,e){return[{type:"ellipse",x:0,y:t,lineColor:"black",r1:e,r2:e}]}}return e.\u0275fac=function(t){return new(t||e)(d.ec(f.k),d.ec(s.a),d.ec(c.a),d.ec(u.a),d.ec(l.a))},e.\u0275prov=d.Qb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}).call(this,n("Ei9z"))}}]);