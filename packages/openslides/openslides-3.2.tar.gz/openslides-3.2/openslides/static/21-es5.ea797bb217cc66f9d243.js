function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _createForOfIteratorHelper(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){c=!0,i=t},f:function(){try{r||null==n.return||n.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function _get(t,e,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=_superPropBase(t,e);if(o){var a=Object.getOwnPropertyDescriptor(o,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,o=_getPrototypeOf(t);if(e){var a=_getPrototypeOf(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[21,36],{"6Ehv":function(t,e,n){"use strict";n.d(e,"a",(function(){return _}));var o=n("InfO"),a=n("+KbT"),i=n("+az0"),r=n("fXoL"),c=n("3Xi6"),l=n("ofXK"),s=n("3Pt+"),u=n("bSwM"),b=n("kmnG"),m=n("d3UM"),f=n("FKr1"),d=n("oqD5"),p=n("sYmb");function h(t,e){if(1&t&&(r.ac(0,"mat-option",7),r.ac(1,"span"),r.Tc(2),r.nc(3,"translate"),r.Zb(),r.Zb()),2&t){var n=e.$implicit;r.uc("value",n.key),r.Hb(2),r.Uc(r.oc(3,2,n.name))}}function g(t,e){if(1&t&&(r.ac(0,"div",2),r.ac(1,"mat-form-field"),r.Vb(2,"os-search-value-selector",8),r.nc(3,"translate"),r.Zb(),r.Zb()),2&t){var n=r.mc(4);r.uc("formGroup",n.form),r.Hb(2),r.vc("placeholder",r.oc(3,5,"Parent agenda item")),r.uc("multiple",!1)("includeNone",!0)("inputListValues",n.itemObserver)}}function v(t,e){if(1&t&&(r.Yb(0),r.ac(1,"div"),r.ac(2,"mat-form-field",2),r.ac(3,"mat-select",4),r.nc(4,"translate"),r.Rc(5,h,4,4,"mat-option",5),r.Zb(),r.Zb(),r.Zb(),r.Rc(6,g,4,7,"div",6),r.Xb()),2&t){var n=r.mc(3);r.Hb(2),r.uc("formGroup",n.form),r.Hb(1),r.vc("placeholder",r.oc(4,4,"Agenda visibility")),r.Hb(2),r.uc("ngForOf",n.ItemVisibilityChoices),r.Hb(1),r.uc("ngIf",n.itemObserver.value.length>0)}}function k(t,e){if(1&t&&(r.Yb(0),r.ac(1,"div",2),r.ac(2,"p"),r.ac(3,"mat-checkbox",3),r.ac(4,"span"),r.Tc(5),r.nc(6,"translate"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Rc(7,v,7,6,"ng-container",1),r.Xb()),2&t){var n=r.mc(2);r.Hb(1),r.uc("formGroup",n.form),r.Hb(4),r.Uc(r.oc(6,3,"Add to agenda")),r.Hb(2),r.uc("ngIf",!!n.checkbox.value)}}function y(t,e){if(1&t&&(r.Yb(0),r.Rc(1,k,8,5,"ng-container",1),r.Xb()),2&t){var n=r.mc();r.Hb(1),r.uc("ngIf",n.showForm)}}var _=function(){var t=function(){function t(e,n){_classCallCheck(this,t),this.configService=e,this.itemRepo=n,this.showForm=!1,this.ItemVisibilityChoices=i.b}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.checkbox=this.form.controls.agenda_create,this.configService.get("agenda_item_creation").subscribe((function(e){if("always"===e)t.showForm=!0,t.checkbox.disable(),t.form.patchValue({agenda_create:!0});else if("never"===e)t.showForm=!1,t.checkbox.disable(),t.form.patchValue({agenda_create:!1});else{var n="default_yes"===e;t.showForm=!0,t.checkbox.enable(),t.form.patchValue({agenda_create:n})}})),this.configService.get("agenda_new_items_default_visibility").subscribe((function(e){t.form.get("agenda_type").setValue(+e)})),this.itemObserver=this.itemRepo.getViewModelListBehaviorSubject()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.Ub(a.a),r.Ub(o.a))},t.\u0275cmp=r.Ob({type:t,selectors:[["os-agenda-content-object-form"]],inputs:{form:"form"},decls:1,vars:1,consts:[[4,"osPerms"],[4,"ngIf"],[3,"formGroup"],["formControlName","agenda_create"],["formControlName","agenda_type",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[3,"formGroup",4,"ngIf"],[3,"value"],["formControlName","agenda_parent_id",3,"multiple","includeNone","placeholder","inputListValues"]],template:function(t,e){1&t&&r.Rc(0,y,2,1,"ng-container",0),2&t&&r.uc("osPerms","agenda.can_manage")},directives:[c.a,l.t,s.t,s.k,u.a,s.s,s.i,b.c,m.a,l.s,f.n,d.a],pipes:[p.j],styles:[""]}),t}()},F48D:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var o=n("mrSG"),a=n("LBBb"),i=n("fXoL"),r=n("0IaG"),c=function(){var t=function(){function t(e){_classCallCheck(this,t),this.dialog=e}return _createClass(t,[{key:"open",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.dialog.open(a.a,{width:"250px",data:{title:t,content:e}}).afterClosed().toPromise());case 1:case"end":return n.stop()}}),n,this)})))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.ec(r.b))},t.\u0275prov=i.Qb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},FWGL:function(t,e,n){"use strict";n.r(e),n.d(e,"MotionBlockModule",(function(){return zt}));var o,a=n("ofXK"),i=n("PCNd"),r=n("tyNb"),c=n("mrSG"),l=n("3Pt+"),s=n("OwvW"),u=n("AqIO"),b=n("InfO"),m=n("D5Qf"),f=n("dOok"),d=n("+KbT"),p=n("F48D"),h=n("KL36"),g=n("Izkr"),v=n("wL0i"),k=n("D/ll"),y=n("iTQr"),_=n("+B0n"),w=n("s3dr"),C=n("lv9T"),O=n("Q5D0"),Z=n("fXoL"),I=n("sYmb"),R=((o=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,a,i,r,c,l,s,u,b){return _classCallCheck(this,n),e.call(this,t,o,a,i,r,c,l,s,u,b)}return _createClass(n,[{key:"preFilter",value:function(t){var e=this;return t.filter((function(t){return t.motion_block_id===e._blockId}))}},{key:"blockId",set:function(t){this._blockId=t}}]),n}(O.a)).\u0275fac=function(t){return new(t||o)(Z.ec(u.a),Z.ec(k.a),Z.ec(y.a),Z.ec(m.a),Z.ec(_.a),Z.ec(C.a),Z.ec(w.a),Z.ec(I.k),Z.ec(s.a),Z.ec(d.a))},o.\u0275prov=Z.Qb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),T=n("jhN1"),M=n("dNgK"),S=n("0IaG"),F=n("mksl"),H=n("bTqV"),P=n("STbY"),x=n("NFeN"),U=n("0Obk"),A=n("dRZP"),D=n("40uZ"),B=n("3Xi6"),j=n("vYAO"),E=n("A5z7"),L=n("Qu3c"),V=n("Tp2j"),N=n("f0Cb"),W=n("kmnG"),z=n("qFsG"),G=n("IZUe"),K=n("bSwM"),q=["blockEditForm"],J=["editDialog"];function Q(t,e){if(1&t&&(Z.ac(0,"os-icon-container",16),Z.nc(1,"translate"),Z.ac(2,"os-icon-container",17),Z.nc(3,"translate"),Z.ac(4,"h2"),Z.Tc(5),Z.Zb(),Z.Zb(),Z.Zb()),2&t){var n=Z.mc();Z.uc("noWrap",!0)("showIcon",n.block.isFinished)("iconTooltip",Z.oc(1,7,"Finished")),Z.Hb(2),Z.uc("noWrap",!0)("showIcon",n.block.internal)("iconTooltip",Z.oc(3,9,"Internal")),Z.Hb(3),Z.Uc(n.block.title)}}function X(t,e){if(1&t){var n=Z.bc();Z.ac(0,"button",20),Z.ic("click",(function(){return Z.Jc(n),Z.mc(2).onFollowRecButton()})),Z.ac(1,"os-icon-container",21),Z.ac(2,"span"),Z.Tc(3),Z.nc(4,"translate"),Z.Zb(),Z.Zb(),Z.Zb()}if(2&t){var o=Z.mc(2);Z.uc("disabled",o.isFollowingProhibited()),Z.Hb(3),Z.Uc(Z.oc(4,2,"Follow recommendations for all motions"))}}var Y=function(){return["motions.can_manage","motions.can_manage_metadata"]};function $(t,e){1&t&&(Z.ac(0,"div",18),Z.Rc(1,X,5,4,"button",19),Z.Zb()),2&t&&(Z.Hb(1),Z.uc("osPerms",Z.zc(1,Y)))}var tt=function(){return{back:"true"}};function et(t,e){if(1&t&&Z.Vb(0,"a",31),2&t){var n=Z.mc().row;Z.uc("routerLink",n.getDetailStateURL())("state",Z.zc(2,tt))}}function nt(t,e){1&t&&(Z.ac(0,"span",32),Z.ac(1,"mat-icon",33),Z.Tc(2,"star"),Z.Zb(),Z.Zb())}function ot(t,e){1&t&&(Z.ac(0,"span",34),Z.ac(1,"mat-icon"),Z.Tc(2,"attach_file"),Z.Zb(),Z.Zb())}function at(t,e){if(1&t&&(Z.ac(0,"span"),Z.Tc(1),Z.ac(2,"span"),Z.Tc(3,"\xb7"),Z.Zb(),Z.Zb()),2&t){var n=Z.mc().row;Z.Hb(1),Z.Vc(" ",n.identifier," ")}}function it(t,e){if(1&t&&(Z.ac(0,"span"),Z.ac(1,"span"),Z.Tc(2),Z.nc(3,"translate"),Z.Zb(),Z.Tc(4),Z.Zb()),2&t){var n=Z.mc().row;Z.Hb(2),Z.Uc(Z.oc(3,2,"by")),Z.Hb(2),Z.Vc(" ",n.submitters," ")}}function rt(t,e){1&t&&(Z.ac(0,"span"),Z.Tc(1," \xb7 "),Z.Zb())}function ct(t,e){if(1&t&&(Z.ac(0,"span"),Z.Rc(1,rt,2,0,"span",11),Z.ac(2,"span"),Z.Tc(3),Z.nc(4,"translate"),Z.Zb(),Z.Tc(5),Z.Zb()),2&t){var n=Z.mc().row;Z.Hb(1),Z.uc("ngIf",n.submitters.length),Z.Hb(2),Z.Uc(Z.oc(4,3,"Sequential number")),Z.Hb(2),Z.Vc(" ",n.id," ")}}function lt(t,e){if(1&t&&(Z.ac(0,"mat-basic-chip",35),Z.Tc(1),Z.Zb()),2&t){var n=Z.mc().row,o=Z.mc();Z.uc("ngClass",n.stateCssColor)("disabled",!0),Z.Hb(1),Z.Vc(" ",o.getStateLabel(n)," ")}}function st(t,e){if(1&t&&(Z.ac(0,"div",22),Z.Rc(1,et,1,3,"a",23),Z.ac(2,"div",24),Z.ac(3,"div",25),Z.Rc(4,nt,3,0,"span",26),Z.Rc(5,ot,3,0,"span",27),Z.ac(6,"span"),Z.Rc(7,at,4,1,"span",11),Z.Tc(8),Z.Zb(),Z.Zb(),Z.ac(9,"div",28),Z.Rc(10,it,5,4,"span",11),Z.Rc(11,ct,6,5,"span",11),Z.Zb(),Z.ac(12,"div",29),Z.Rc(13,lt,2,3,"mat-basic-chip",30),Z.Zb(),Z.Zb(),Z.Zb()),2&t){var n=e.row,o=Z.mc();Z.Hb(1),Z.uc("ngIf",!o.isMultiSelect),Z.Hb(3),Z.uc("ngIf",n.star),Z.Hb(1),Z.uc("ngIf",n.hasAttachments()),Z.Hb(2),Z.uc("ngIf",n.identifier),Z.Hb(1),Z.Vc(" ",n.title," "),Z.Hb(2),Z.uc("ngIf",n.submitters.length),Z.Hb(1),Z.uc("ngIf",o.showSequential),Z.Hb(2),Z.uc("ngIf",n.state)}}function ut(t,e){if(1&t&&(Z.ac(0,"mat-basic-chip",37),Z.Tc(1),Z.Zb()),2&t){var n=Z.mc().row,o=Z.mc();Z.Hb(1),Z.Vc(" ",o.getRecommendationLabel(n)," ")}}function bt(t,e){if(1&t&&(Z.ac(0,"div",22),Z.Rc(1,ut,2,1,"mat-basic-chip",36),Z.Zb()),2&t){var n=e.row;Z.Hb(1),Z.uc("ngIf",!!n.recommendation)}}function mt(t,e){if(1&t){var n=Z.bc();Z.ac(0,"div",22),Z.ac(1,"button",38),Z.ic("click",(function(){Z.Jc(n);var t=e.row;return Z.mc().onRemoveMotionButton(t)})),Z.nc(2,"translate"),Z.ac(3,"mat-icon"),Z.Tc(4,"close"),Z.Zb(),Z.Zb(),Z.Zb()}2&t&&(Z.Hb(1),Z.vc("matTooltip",Z.oc(2,1,"Remove from motion block")))}var ft=function(t){return{motion:t}};function dt(t,e){if(1&t){var n=Z.bc();Z.ac(0,"div",22),Z.ac(1,"button",39),Z.ic("click",(function(t){return Z.Jc(n),t.stopPropagation()})),Z.ac(2,"mat-icon"),Z.Tc(3,"more_vert"),Z.Zb(),Z.Zb(),Z.Zb()}if(2&t){var o=e.row,a=Z.mc(),i=Z.Fc(14);Z.Hb(1),Z.uc("disabled",a.isMultiSelect)("matMenuTriggerFor",i)("matMenuTriggerData",Z.Ac(3,ft,o))}}function pt(t,e){if(1&t){var n=Z.bc();Z.Vb(0,"os-projector-button",40),Z.Vb(1,"os-speaker-button",40),Z.ac(2,"button",41),Z.ic("click",(function(){Z.Jc(n);var t=e.motion;return Z.mc().onRemoveMotionButton(t)})),Z.ac(3,"mat-icon"),Z.Tc(4,"close"),Z.Zb(),Z.ac(5,"span"),Z.Tc(6),Z.nc(7,"translate"),Z.Zb(),Z.Zb()}if(2&t){var o=e.motion;Z.uc("object",o)("menuItem",!0),Z.Hb(1),Z.uc("object",o)("menuItem",!0),Z.Hb(5),Z.Uc(Z.oc(7,5,"Remove from motion block"))}}function ht(t,e){if(1&t){var n=Z.bc();Z.ac(0,"button",43),Z.ic("click",(function(){return Z.Jc(n),Z.mc(2).onFollowRecButton()})),Z.ac(1,"mat-icon"),Z.Tc(2,"done_all"),Z.Zb(),Z.ac(3,"span"),Z.Tc(4),Z.nc(5,"translate"),Z.Zb(),Z.Zb()}if(2&t){var o=Z.mc(2);Z.uc("disabled",o.isFollowingProhibited()),Z.Hb(4),Z.Uc(Z.oc(5,2,"Follow recommendations for all motions"))}}function gt(t,e){1&t&&(Z.ac(0,"div"),Z.Rc(1,ht,6,4,"button",42),Z.Zb()),2&t&&(Z.Hb(1),Z.uc("osPerms",Z.zc(1,Y)))}function vt(t,e){if(1&t&&Z.Vb(0,"os-projector-button",40),2&t){var n=Z.mc();Z.uc("object",n.block)("menuItem",!0)}}function kt(t,e){if(1&t){var n=Z.bc();Z.ac(0,"button",45),Z.ic("click",(function(){return Z.Jc(n),Z.mc(2).addToAgenda()})),Z.ac(1,"mat-icon"),Z.Tc(2,"add"),Z.Zb(),Z.ac(3,"span"),Z.Tc(4),Z.nc(5,"translate"),Z.Zb(),Z.Zb()}2&t&&(Z.Hb(4),Z.Uc(Z.oc(5,1,"Add to agenda")))}function yt(t,e){if(1&t){var n=Z.bc();Z.ac(0,"button",45),Z.ic("click",(function(){return Z.Jc(n),Z.mc(2).removeFromAgenda()})),Z.ac(1,"mat-icon"),Z.Tc(2,"remove"),Z.Zb(),Z.ac(3,"span"),Z.Tc(4),Z.nc(5,"translate"),Z.Zb(),Z.Zb()}2&t&&(Z.Hb(4),Z.Uc(Z.oc(5,1,"Remove from agenda")))}function _t(t,e){if(1&t&&(Z.ac(0,"div"),Z.Rc(1,kt,6,3,"button",44),Z.Rc(2,yt,6,3,"button",44),Z.Zb()),2&t){var n=Z.mc();Z.Hb(1),Z.uc("ngIf",n.block&&!n.block.item),Z.Hb(1),Z.uc("ngIf",n.block&&n.block.item)}}function wt(t,e){if(1&t){var n=Z.bc();Z.ac(0,"div"),Z.ac(1,"button",45),Z.ic("click",(function(){return Z.Jc(n),Z.mc().toggleEditMode()})),Z.ac(2,"mat-icon"),Z.Tc(3,"edit"),Z.Zb(),Z.ac(4,"span"),Z.Tc(5),Z.nc(6,"translate"),Z.Zb(),Z.Zb(),Z.Vb(7,"mat-divider"),Z.ac(8,"button",41),Z.ic("click",(function(){return Z.Jc(n),Z.mc().onDeleteBlockButton()})),Z.ac(9,"mat-icon"),Z.Tc(10,"delete"),Z.Zb(),Z.ac(11,"span"),Z.Tc(12),Z.nc(13,"translate"),Z.Zb(),Z.Zb(),Z.Zb()}2&t&&(Z.Hb(5),Z.Uc(Z.oc(6,2,"Edit")),Z.Hb(7),Z.Uc(Z.oc(13,4,"Delete")))}function Ct(t,e){if(1&t){var n=Z.bc();Z.ac(0,"h1",46),Z.ac(1,"span"),Z.Tc(2),Z.nc(3,"translate"),Z.Zb(),Z.Zb(),Z.ac(4,"div",47),Z.ac(5,"form",48),Z.ic("ngSubmit",(function(){return Z.Jc(n),Z.mc().saveBlock()}))("keydown",(function(t){return Z.Jc(n),Z.mc().onKeyDown(t)})),Z.ac(6,"mat-form-field"),Z.Vb(7,"input",49),Z.nc(8,"translate"),Z.Zb(),Z.ac(9,"mat-checkbox",50),Z.Tc(10,"Internal"),Z.Zb(),Z.Zb(),Z.Zb(),Z.ac(11,"div",51),Z.ac(12,"button",52),Z.ic("click",(function(){return Z.Jc(n),Z.mc().saveBlock()})),Z.ac(13,"span"),Z.Tc(14),Z.nc(15,"translate"),Z.Zb(),Z.Zb(),Z.ac(16,"button",53),Z.ac(17,"span"),Z.Tc(18),Z.nc(19,"translate"),Z.Zb(),Z.Zb(),Z.Zb()}if(2&t){var o=Z.mc();Z.Hb(2),Z.Wc("",Z.oc(3,8,"Edit details for")," ",o.block.title,""),Z.Hb(3),Z.uc("formGroup",o.blockEditForm),Z.Hb(2),Z.vc("placeholder",Z.oc(8,10,"Title")),Z.Hb(5),Z.uc("disabled",!o.blockEditForm.valid),Z.Hb(2),Z.Uc(Z.oc(15,12,"Save")),Z.Hb(2),Z.uc("mat-dialog-close",null),Z.Hb(2),Z.Uc(Z.oc(19,14,"Cancel"))}}var Ot,Zt,It=function(){return["remove"]},Rt=((Ot=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,a,i,r,c,l,u,b,m,f,d,p,h,g){var v;return _classCallCheck(this,n),(v=e.call(this,t,o,a,p)).translate=o,v.configService=i,v.route=r,v.router=c,v.repo=l,v.motionRepo=u,v.promptService=b,v.fb=m,v.dialog=f,v.itemRepo=d,v.filterService=h,v.vp=g,v.filterProps=["submitters","title","identifier"],v.tableColumnDefinition=[{prop:"title",width:"auto"},{prop:"recommendation",label:v.translate.instant("Recommendation"),width:"30%",minWidth:60},{prop:"remove",label:"",width:"40px"}],v.restrictedColumns=[{columnName:"remove",permission:s.b.motionsCanManage}],v.blockId=parseInt(v.route.snapshot.params.id,10),v.filterService.blockId=v.blockId,v}return _createClass(n,[{key:"ngOnInit",value:function(){var t=this;this.subscriptions.push(this.repo.getViewModelObservable(this.blockId).subscribe((function(e){e&&(_get(_getPrototypeOf(n.prototype),"setTitle",t).call(t,"".concat(t.translate.instant("Motion block")," - ").concat(e.getTitle())),t.block=e)}))),this.configService.get("motions_show_sequential_numbers").subscribe((function(e){return t.showSequential=e})),window.comp=this}},{key:"onFollowRecButton",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.translate.instant("Are you sure you want to override the state of all motions of this motion block?"),n=this.block.title,t.next=3,this.promptService.open(e,n);case 3:if(t.t0=t.sent,!t.t0){t.next=6;break}this.repo.followRecommendation(this.block);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"onDeleteBlockButton",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.translate.instant("Are you sure you want to delete this motion block?"),n=this.block.title,t.next=3,this.promptService.open(e,n);case 3:if(t.t0=t.sent,!t.t0){t.next=8;break}return t.next=7,this.repo.delete(this.block);case 7:this.router.navigate(["../"],{relativeTo:this.route});case 8:case"end":return t.stop()}}),t,this)})))}},{key:"onRemoveMotionButton",value:function(t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.translate.instant("Are you sure you want to remove this motion from motion block?"),o=t.getTitle(),e.next=3,this.promptService.open(n,o);case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.repo.removeMotionFromBlock(t);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"onKeyDown",value:function(t){"Escape"===t.key&&this.dialogRef.close()}},{key:"isFollowingProhibited",value:function(){return!(!this.dataSource||!this.dataSource.source)&&this.dataSource.source.every((function(t){return t.isInFinalState()||!t.recommendation_id}))}},{key:"saveBlock",value:function(){var t=this;this.repo.update(this.blockEditForm.value,this.block).then((function(){return t.dialogRef.close()})).catch(this.raiseError)}},{key:"toggleEditMode",value:function(){var t=this;this.blockEditForm=this.fb.group({title:[this.block.title,l.G.required],internal:[this.block.internal]}),this.dialogRef=this.dialog.open(this.editDialog,g.a),this.dialogRef.keydownEvents().subscribe((function(e){"Enter"===e.key&&e.shiftKey&&t.saveBlock()}))}},{key:"getRecommendationLabel",value:function(t){return this.motionRepo.getExtendedRecommendationLabel(t)}},{key:"getStateLabel",value:function(t){return this.motionRepo.getExtendedStateLabel(t)}},{key:"addToAgenda",value:function(){this.itemRepo.addItemToAgenda(this.block).catch(this.raiseError)}},{key:"removeFromAgenda",value:function(){this.itemRepo.removeFromAgenda(this.block.item).catch(this.raiseError)}}]),n}(v.a)).\u0275fac=function(t){return new(t||Ot)(Z.Ub(T.d),Z.Ub(I.k),Z.Ub(M.a),Z.Ub(d.a),Z.Ub(r.a),Z.Ub(r.f),Z.Ub(m.a),Z.Ub(f.a),Z.Ub(p.a),Z.Ub(l.f),Z.Ub(S.b),Z.Ub(b.a),Z.Ub(u.a),Z.Ub(R),Z.Ub(h.a))},Ot.\u0275cmp=Z.Ob({type:Ot,selectors:[["os-motion-block-detail"]],viewQuery:function(t,e){var n;1&t&&(Z.Pc(q,!0),Z.Pc(J,!0)),2&t&&(Z.Ec(n=Z.jc())&&(e.blockEditForm=n.first),Z.Ec(n=Z.jc())&&(e.editDialog=n.first))},features:[Z.Eb],decls:25,vars:22,consts:[[3,"nav"],[1,"title-slot"],["icon","check","size","large",3,"noWrap","showIcon","iconTooltip",4,"ngIf"],[1,"menu-slot"],["type","button","mat-icon-button","",3,"matMenuTriggerFor"],["class","extra-controls-slot",4,"ngIf"],[3,"listObservableProvider","filterService","columns","restricted","filterProps","hiddenInMobile","dataSourceChange"],["class","cell-slot fill",4,"pblNgridCellDef"],["singleItemMenu","matMenu"],["matMenuContent",""],["motionBlockMenu","matMenu"],[4,"ngIf"],[3,"menuItem","object"],[3,"object","menuItem",4,"ngIf"],[4,"osPerms"],["editDialog",""],["icon","check","size","large",3,"noWrap","showIcon","iconTooltip"],["icon","lock","size","large",3,"noWrap","showIcon","iconTooltip"],[1,"extra-controls-slot"],["mat-button","",3,"disabled","click",4,"osPerms"],["mat-button","",3,"disabled","click"],["icon","done_all"],[1,"cell-slot","fill"],["class","detail-link",3,"routerLink","state",4,"ngIf"],[1,"column-title","innerTable"],[1,"title-line","ellipsis-overflow"],["class","favorite-star",4,"ngIf"],["class","icon-prefix",4,"ngIf"],[1,"submitters-line","ellipsis-overflow"],[1,"ellipsis-overflow","white"],[3,"ngClass","disabled",4,"ngIf"],[1,"detail-link",3,"routerLink","state"],[1,"favorite-star"],["inline",""],[1,"icon-prefix"],[3,"ngClass","disabled"],["disableRipple","","class","bluegrey",4,"ngIf"],["disableRipple","",1,"bluegrey"],["type","button","mat-icon-button","","color","warn",3,"matTooltip","click"],["mat-icon-button","",3,"disabled","matMenuTriggerFor","matMenuTriggerData","click"],[3,"object","menuItem"],["mat-menu-item","",1,"red-warning-text",3,"click"],["mat-menu-item","",3,"disabled","click",4,"osPerms"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],["mat-dialog-title",""],["mat-dialog-content","",1,"os-form-card-mobile"],[1,"edit-form",3,"formGroup","ngSubmit","keydown"],["matInput","","osAutofocus","","formControlName","title","required","",3,"placeholder"],["formControlName","internal"],["mat-dialog-actions",""],["type","submit","mat-button","","color","accent",3,"disabled","click"],["type","button","mat-button","",3,"mat-dialog-close"]],template:function(t,e){if(1&t&&(Z.ac(0,"os-head-bar",0),Z.ac(1,"div",1),Z.Rc(2,Q,6,11,"os-icon-container",2),Z.Zb(),Z.ac(3,"div",3),Z.ac(4,"button",4),Z.ac(5,"mat-icon"),Z.Tc(6,"more_vert"),Z.Zb(),Z.Zb(),Z.Zb(),Z.Rc(7,$,2,2,"div",5),Z.Zb(),Z.ac(8,"os-list-view-table",6),Z.ic("dataSourceChange",(function(t){return e.onDataSourceChange(t)})),Z.Rc(9,st,14,8,"div",7),Z.Rc(10,bt,2,1,"div",7),Z.Rc(11,mt,5,3,"div",7),Z.Rc(12,dt,4,5,"div",7),Z.Zb(),Z.ac(13,"mat-menu",null,8),Z.Rc(15,pt,8,7,"ng-template",9),Z.Zb(),Z.ac(16,"mat-menu",null,10),Z.Rc(18,gt,2,2,"div",11),Z.Vb(19,"os-speaker-button",12),Z.Rc(20,vt,1,2,"os-projector-button",13),Z.Rc(21,_t,3,2,"div",14),Z.Rc(22,wt,14,6,"div",14),Z.Zb(),Z.Rc(23,Ct,20,16,"ng-template",null,15,Z.Sc)),2&t){var n=Z.Fc(17);Z.uc("nav",!1),Z.Hb(2),Z.uc("ngIf",e.block),Z.Hb(2),Z.uc("matMenuTriggerFor",n),Z.Hb(3),Z.uc("ngIf",!e.vp.isMobile),Z.Hb(1),Z.uc("listObservableProvider",e.motionRepo)("filterService",e.filterService)("columns",e.tableColumnDefinition)("restricted",e.restrictedColumns)("filterProps",e.filterProps)("hiddenInMobile",Z.zc(20,It)),Z.Hb(1),Z.uc("pblNgridCellDef","title"),Z.Hb(1),Z.uc("pblNgridCellDef","recommendation"),Z.Hb(1),Z.uc("pblNgridCellDef","remove"),Z.Hb(1),Z.uc("pblNgridCellDef","menu"),Z.Hb(6),Z.uc("ngIf",e.vp.isMobile),Z.Hb(1),Z.uc("menuItem",!0)("object",e.block),Z.Hb(1),Z.uc("ngIf",e.block),Z.Hb(1),Z.uc("osPerms","agenda.can_manage"),Z.Hb(1),Z.uc("osPerms",Z.zc(21,Y))}},directives:[F.a,a.t,H.b,P.e,x.a,U.a,A.c,P.f,P.b,D.a,B.a,j.a,r.i,E.a,a.q,L.c,V.a,P.c,N.a,S.i,S.f,l.I,l.t,l.k,W.c,z.b,l.c,G.a,l.s,l.i,l.D,K.a,S.c,S.d],pipes:[I.j],styles:[".title-line[_ngcontent-%COMP%]{font-weight:500;font-size:16px}.title-line[_ngcontent-%COMP%]   .icon-prefix[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;font-size:16px;height:16px;width:16px}.title-line[_ngcontent-%COMP%]   .favorite-star[_ngcontent-%COMP%]{padding-right:3px}.mat-table[_ngcontent-%COMP%]{width:100%}.mat-table[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]{display:none}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{position:relative}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]{position:absolute!important;top:0;right:0;bottom:0;left:0;opacity:.1;z-index:1}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;height:100%;width:100%}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{position:relative}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{position:absolute;display:inherit;height:100%;width:100%;line-height:0}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{z-index:2}.mat-table[_ngcontent-%COMP%]   .mat-table-sticky[_ngcontent-%COMP%]{z-index:3!important}.submitters-line[_ngcontent-%COMP%]{font-size:90%}.edit-form[_ngcontent-%COMP%]{overflow:hidden}"]}),Ot),Tt=n("A6Ob"),Mt=((Zt=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,a){var i;return _classCallCheck(this,n),(i=e.call(this,t,o,a)).storageKey="MotionBlockList",i.MotionBlockSortOptions=[{property:"title"},{property:"motions",label:"Amount of motions",sortFn:function(t,e,n){return n?t.motions.length-e.motions.length:e.motions.length-t.motions.length}}],i}return _createClass(n,[{key:"getSortOptions",value:function(){return this.MotionBlockSortOptions}},{key:"getDefaultDefinition",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{sortProperty:"title",sortAscending:!0});case 1:case"end":return t.stop()}}),t)})))}}]),n}(Tt.a)).\u0275fac=function(t){return new(t||Zt)(Z.ec(I.k),Z.ec(u.a),Z.ec(k.a))},Zt.\u0275prov=Z.Qb({token:Zt,factory:Zt.\u0275fac,providedIn:"root"}),Zt),St=n("6Ehv"),Ft=["newMotionBlockDialog"];function Ht(t,e){if(1&t&&Z.Vb(0,"a",13),2&t){var n=Z.mc().row;Z.uc("routerLink",n.id)}}function Pt(t,e){if(1&t&&(Z.ac(0,"div",7),Z.Rc(1,Ht,1,1,"a",8),Z.ac(2,"div",9),Z.ac(3,"os-icon-container",10),Z.nc(4,"translate"),Z.ac(5,"os-icon-container",11),Z.nc(6,"translate"),Z.ac(7,"div",12),Z.Tc(8),Z.Zb(),Z.Zb(),Z.Zb(),Z.Zb(),Z.Zb()),2&t){var n=e.value,o=e.row,a=Z.mc();Z.Hb(1),Z.uc("ngIf",!a.isMultiSelect),Z.Hb(2),Z.uc("noWrap",!0)("icon",o.isFinished?"check":o.internal?"lock":null)("iconTooltip",o.isFinished?"Finished":o.internal?"Internal":Z.oc(4,8,"")),Z.Hb(2),Z.uc("noWrap",!0)("showIcon",o.isFinished&&o.internal)("iconTooltip",Z.oc(6,10,"Internal")),Z.Hb(3),Z.Vc(" ",n," ")}}function xt(t,e){if(1&t&&(Z.ac(0,"div",7),Z.ac(1,"span",14),Z.nc(2,"translate"),Z.Tc(3),Z.Zb(),Z.Zb()),2&t){var n=e.row;Z.Hb(1),Z.vc("matTooltip",Z.oc(2,2,"Motions")),Z.Hb(2),Z.Uc(n.motions.length)}}var Ut=function(t){return{block:t}};function At(t,e){if(1&t){var n=Z.bc();Z.ac(0,"div",7),Z.ac(1,"button",15),Z.ic("click",(function(t){return Z.Jc(n),t.stopPropagation()})),Z.ac(2,"mat-icon"),Z.Tc(3,"more_vert"),Z.Zb(),Z.Zb(),Z.Zb()}if(2&t){var o=e.row,a=Z.mc(),i=Z.Fc(10);Z.Hb(1),Z.uc("disabled",a.isMultiSelect)("matMenuTriggerFor",i)("matMenuTriggerData",Z.Ac(3,Ut,o))}}function Dt(t,e){if(1&t&&(Z.Vb(0,"os-projector-button",16),Z.Vb(1,"os-speaker-button",16)),2&t){var n=e.block;Z.uc("object",n)("menuItem",!0),Z.Hb(1),Z.uc("object",n)("menuItem",!0)}}function Bt(t,e){1&t&&(Z.ac(0,"mat-error"),Z.Tc(1),Z.nc(2,"translate"),Z.Zb()),2&t&&(Z.Hb(1),Z.Vc(" ",Z.oc(2,1,"A title is required")," "))}function jt(t,e){if(1&t){var n=Z.bc();Z.ac(0,"h1",17),Z.ac(1,"span"),Z.Tc(2),Z.nc(3,"translate"),Z.Zb(),Z.Zb(),Z.ac(4,"form",18),Z.ic("keydown",(function(t){return Z.Jc(n),Z.mc().onKeyDown(t)})),Z.ac(5,"div",19),Z.ac(6,"mat-form-field"),Z.Vb(7,"input",20),Z.nc(8,"translate"),Z.Rc(9,Bt,3,3,"mat-error",21),Z.Zb(),Z.ac(10,"p"),Z.ac(11,"mat-checkbox",22),Z.ac(12,"span"),Z.Tc(13),Z.nc(14,"translate"),Z.Zb(),Z.Zb(),Z.Zb(),Z.Vb(15,"os-agenda-content-object-form",23),Z.Zb(),Z.Zb(),Z.ac(16,"div",24),Z.ac(17,"button",25),Z.ac(18,"span"),Z.Tc(19),Z.nc(20,"translate"),Z.Zb(),Z.Zb(),Z.ac(21,"button",26),Z.ac(22,"span"),Z.Tc(23),Z.nc(24,"translate"),Z.Zb(),Z.Zb(),Z.Zb()}if(2&t){var o=Z.mc();Z.Hb(2),Z.Uc(Z.oc(3,11,"New motion block")),Z.Hb(2),Z.uc("formGroup",o.createBlockForm),Z.Hb(3),Z.vc("placeholder",Z.oc(8,13,"Title")),Z.Hb(2),Z.uc("ngIf",o.createBlockForm.get("title").hasError("required")),Z.Hb(4),Z.Uc(Z.oc(14,15,"Internal")),Z.Hb(2),Z.uc("form",o.createBlockForm),Z.Hb(2),Z.uc("disabled",!o.createBlockForm.valid)("mat-dialog-close",!0),Z.Hb(2),Z.Uc(Z.oc(20,17,"Save")),Z.Hb(2),Z.uc("mat-dialog-close",!1),Z.Hb(2),Z.Uc(Z.oc(24,19,"Cancel"))}}var Et,Lt,Vt,Nt=[{path:"",component:(Et=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,a,i,r,c,s,u,b,m){var f;return _classCallCheck(this,n),(f=e.call(this,t,o,a,i)).repo=r,f.formBuilder=c,f.itemRepo=s,f.operator=u,f.dialog=b,f.sortService=m,f.filterProps=["title"],f.tableColumnDefinition=[{prop:"title",label:f.translate.instant("Title"),width:"auto"},{prop:"amount",label:f.translate.instant("Motions"),width:"40px"}],f.createBlockForm=f.formBuilder.group({title:["",l.G.required],agenda_create:[""],agenda_parent_id:[],agenda_type:[""],internal:[!1]}),f}return _createClass(n,[{key:"ngOnInit",value:function(){_get(_getPrototypeOf(n.prototype),"setTitle",this).call(this,"Motion blocks"),this.items=this.itemRepo.getViewModelListBehaviorSubject()}},{key:"resetForm",value:function(){this.createBlockForm.reset(),this.createBlockForm.get("agenda_type").setValue(this.defaultVisibility)}},{key:"onPlusButton",value:function(){var t=this;this.resetForm(),this.dialogRef=this.dialog.open(this.newMotionBlockDialog,g.a),this.dialogRef.afterClosed().subscribe((function(e){e&&t.save()}))}},{key:"save",value:function(){if(this.createBlockForm.valid){var t=this.createBlockForm.value;t.agenda_parent_id||delete t.agenda_parent_id,this.repo.create(t).catch(this.raiseError),this.resetForm()}}},{key:"onKeyDown",value:function(t){"Enter"===t.key&&t.shiftKey&&(this.save(),this.dialogRef.close()),"Escape"===t.key&&(this.resetForm(),this.dialogRef.close())}},{key:"canEdit",get:function(){return this.operator.hasPerms(s.b.motionsCanManage,s.b.motionsCanManageMetadata)}}]),n}(v.a),Et.\u0275fac=function(t){return new(t||Et)(Z.Ub(T.d),Z.Ub(I.k),Z.Ub(M.a),Z.Ub(u.a),Z.Ub(m.a),Z.Ub(l.f),Z.Ub(b.a),Z.Ub(s.a),Z.Ub(S.b),Z.Ub(Mt))},Et.\u0275cmp=Z.Ob({type:Et,selectors:[["os-motion-block-list"]],viewQuery:function(t,e){var n;1&t&&Z.Pc(Ft,!0),2&t&&Z.Ec(n=Z.jc())&&(e.newMotionBlockDialog=n.first)},features:[Z.Eb],decls:14,vars:16,consts:[["prevUrl","../..",3,"nav","hasMainButton","mainEvent"],[1,"title-slot"],["listStorageKey","motionBlock",3,"vScrollFixed","listObservableProvider","showFilterBar","columns","sortService","multiSelect","selectedRows","filterProps","selectedRowsChange","dataSourceChange"],["class","cell-slot fill",4,"pblNgridCellDef"],["singleItemMenu","matMenu"],["matMenuContent",""],["newMotionBlockDialog",""],[1,"cell-slot","fill"],["class","detail-link",3,"routerLink",4,"ngIf"],[1,"innerTable"],["size","large",3,"noWrap","icon","iconTooltip"],["icon","lock","size","large",3,"noWrap","showIcon","iconTooltip"],[1,"ellipsis-overflow"],[1,"detail-link",3,"routerLink"],[1,"os-amount-chip",3,"matTooltip"],["mat-icon-button","",3,"disabled","matMenuTriggerFor","matMenuTriggerData","click"],[3,"object","menuItem"],["mat-dialog-title",""],[3,"formGroup","keydown"],["mat-dialog-content",""],["formControlName","title","matInput","","required","",3,"placeholder"],[4,"ngIf"],["formControlName","internal"],[3,"form"],["mat-dialog-actions",""],["mat-button","",3,"disabled","mat-dialog-close"],["mat-button","",3,"mat-dialog-close"]],template:function(t,e){1&t&&(Z.ac(0,"os-head-bar",0),Z.ic("mainEvent",(function(){return e.onPlusButton()})),Z.ac(1,"div",1),Z.ac(2,"h2"),Z.Tc(3),Z.nc(4,"translate"),Z.Zb(),Z.Zb(),Z.Zb(),Z.ac(5,"os-list-view-table",2),Z.ic("selectedRowsChange",(function(t){return e.selectedRows=t}))("dataSourceChange",(function(t){return e.onDataSourceChange(t)})),Z.Rc(6,Pt,9,12,"div",3),Z.Rc(7,xt,4,4,"div",3),Z.Rc(8,At,4,5,"div",3),Z.Zb(),Z.ac(9,"mat-menu",null,4),Z.Rc(11,Dt,2,4,"ng-template",5),Z.Zb(),Z.Rc(12,jt,25,21,"ng-template",null,6,Z.Sc)),2&t&&(Z.uc("nav",!1)("hasMainButton",e.canEdit),Z.Hb(3),Z.Uc(Z.oc(4,14,"Motion blocks")),Z.Hb(2),Z.uc("vScrollFixed",64)("listObservableProvider",e.repo)("showFilterBar",!0)("columns",e.tableColumnDefinition)("sortService",e.sortService)("multiSelect",e.isMultiSelect)("selectedRows",e.selectedRows)("filterProps",e.filterProps),Z.Hb(1),Z.uc("pblNgridCellDef","title"),Z.Hb(1),Z.uc("pblNgridCellDef","amount"),Z.Hb(1),Z.uc("pblNgridCellDef","menu"))},directives:[F.a,U.a,A.c,P.f,P.b,a.t,j.a,r.i,L.c,H.b,P.e,x.a,V.a,D.a,S.i,l.I,l.t,l.k,S.f,W.c,l.c,z.b,l.s,l.i,l.D,K.a,St.a,S.c,S.d,W.b],pipes:[I.j],styles:[".title-line{font-weight:500;font-size:16px}.title-line .icon-prefix .mat-icon{display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;font-size:16px;height:16px;width:16px}.title-line .favorite-star{padding-right:3px}.mat-table{width:100%}.mat-table .mat-header-row .mat-column-anchor{display:none}.mat-table .mat-row{position:relative}.mat-table .mat-row .mat-column-anchor{position:absolute!important;top:0;right:0;bottom:0;left:0;opacity:.1;z-index:1}.mat-table .mat-row .mat-column-anchor a{display:block;height:100%;width:100%}.mat-table .mat-cell{position:relative}.mat-table .mat-cell .fill{position:absolute;display:inherit;height:100%;width:100%;line-height:0}.mat-table .mat-cell .fill *{margin-top:auto;margin-bottom:auto}.mat-table .mat-cell>*{z-index:2}.mat-table .mat-table-sticky{z-index:3!important}.mat-dialog-container .mat-dialog-title{margin:0}.mat-dialog-container .mat-form-field{width:100%}"],encapsulation:2}),Et),pathMatch:"full"},{path:":id",component:Rt}],Wt=((Vt=function t(){_classCallCheck(this,t)}).\u0275mod=Z.Sb({type:Vt}),Vt.\u0275inj=Z.Rb({factory:function(t){return new(t||Vt)},imports:[[r.j.forChild(Nt)],r.j]}),Vt),zt=((Lt=function t(){_classCallCheck(this,t)}).\u0275mod=Z.Sb({type:Lt}),Lt.\u0275inj=Z.Rb({factory:function(t){return new(t||Lt)},imports:[[a.c,Wt,i.a]]}),Lt)},LBBb:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n("0IaG"),a=n("fXoL"),i=n("ofXK"),r=n("bTqV"),c=n("sYmb");function l(t,e){if(1&t&&(a.ac(0,"div"),a.ac(1,"h2",1),a.Tc(2),a.Zb(),a.Vb(3,"mat-dialog-content",2),a.ac(4,"mat-dialog-actions"),a.ac(5,"button",3),a.Tc(6),a.nc(7,"translate"),a.Zb(),a.ac(8,"button",4),a.Tc(9),a.nc(10,"translate"),a.Zb(),a.Zb(),a.Zb()),2&t){var n=a.mc();a.Hb(2),a.Uc(n.data.title),a.Hb(1),a.uc("innerHTML",n.data.content,a.Kc),a.Hb(2),a.uc("mat-dialog-close",!0),a.Hb(1),a.Uc(a.oc(7,6,"Yes")),a.Hb(2),a.uc("mat-dialog-close",!1),a.Hb(1),a.Uc(a.oc(10,8,"Cancel"))}}var s=function(){var t=function t(e,n){_classCallCheck(this,t),this.dialogRef=e,this.data=n};return t.\u0275fac=function(e){return new(e||t)(a.Ub(o.h),a.Ub(o.a))},t.\u0275cmp=a.Ob({type:t,selectors:[["os-prompt-dialog"]],decls:1,vars:1,consts:[[4,"ngIf"],["mat-dialog-title",""],[3,"innerHTML"],["mat-button","","color","warn",3,"mat-dialog-close"],["mat-button","",3,"mat-dialog-close"]],template:function(t,e){1&t&&a.Rc(0,l,11,10,"div",0),2&t&&a.uc("ngIf",e.data)},directives:[i.t,o.i,o.f,o.c,r.b,o.d],pipes:[c.j],encapsulation:2}),t}()},Q5D0:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var o=n("D/ll"),a=n("OwvW"),i=n("AqIO"),r=n("iTQr"),c=n("D5Qf"),l=n("+B0n"),s=n("s3dr"),u=n("lv9T"),b=n("+8Rz"),m=n("+KbT"),f=n("gtli"),d=n("3Y4h"),p=n("fXoL"),h=n("sYmb"),g=function(){var t=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,a,i,r,c,l,s,u,b){var m;return _classCallCheck(this,n),(m=e.call(this,t,o)).workflowRepo=l,m.translate=s,m.operator=u,m.config=b,m.storageKey="MotionList",m.enabledWorkflows={statuteEnabled:!1,statute:null,motion:null},m.stateFilterOptions={property:"state_id",label:"State",options:[]},m.categoryFilterOptions={property:"category_id",label:"Category",options:[]},m.motionBlockFilterOptions={property:"motion_block_id",label:"Motion block",options:[]},m.motionCommentFilterOptions={property:"commentSectionIds",label:"Comment",options:[]},m.recommendationFilterOptions={property:"recommendation_id",label:"Recommendation",options:[]},m.tagFilterOptions={property:"tags_id",label:"Tags",options:[]},m.hasSpeakerOptions={property:"hasSpeakers",label:"Speakers",options:[{condition:!0,label:m.translate.instant("Has speakers")},{condition:!1,label:m.translate.instant("Has no speakers")}]},m.AmendmentFilterOption={property:"amendmentType",label:"Amendment",options:[{condition:d.a.Amendment,label:m.translate.instant("Is amendment")},{condition:d.a.Parent,label:m.translate.instant("Has amendments")},{condition:d.a.Lead,label:m.translate.instant("Is no amendment and has no amendments")}]},m.personalNoteFilterOptions=[{property:"star",label:m.translate.instant("Favorites"),options:[{condition:!0,label:m.translate.instant("Is favorite")},{condition:!1,label:m.translate.instant("Is not favorite")}]},{property:"hasNotes",label:m.translate.instant("Personal notes"),options:[{condition:!0,label:m.translate.instant("Has notes")},{condition:!1,label:m.translate.instant("Does not have notes")}]}],m.getWorkflowConfig(),m.getShowAmendmentConfig(),m.updateFilterForRepo(a,m.categoryFilterOptions,m.translate.instant("No category set")),m.updateFilterForRepo(i,m.motionBlockFilterOptions,m.translate.instant("No motion block set")),m.updateFilterForRepo(r,m.motionCommentFilterOptions,m.translate.instant("No comment")),m.updateFilterForRepo(c,m.tagFilterOptions,m.translate.instant("No tags")),m.subscribeWorkflows(),m.operator.getUserObservable().subscribe((function(){m.setFilterDefinitions()})),m}return _createClass(n,[{key:"preFilter",value:function(t){if(!this.showAmendmentsInMainTable)return t.filter((function(t){return!t.parent_id}))}},{key:"getShowAmendmentConfig",value:function(){var t=this;this.config.get("motions_amendments_main_table").subscribe((function(e){t.showAmendmentsInMainTable=e}))}},{key:"getWorkflowConfig",value:function(){var t=this;this.config.get("motions_statute_amendments_workflow").subscribe((function(e){t.enabledWorkflows.statute=+e})),this.config.get("motions_workflow").subscribe((function(e){t.enabledWorkflows.motion=+e})),this.config.get("motions_statutes_enabled").subscribe((function(e){t.enabledWorkflows.statuteEnabled=e}))}},{key:"getFilterDefinitions",value:function(){var t=[this.stateFilterOptions,this.categoryFilterOptions,this.motionBlockFilterOptions,this.recommendationFilterOptions,this.motionCommentFilterOptions,this.tagFilterOptions];return this.operator.hasPerms(a.b.agendaCanSeeListOfSpeakers)&&t.push(this.hasSpeakerOptions),this.showAmendmentsInMainTable&&t.push(this.AmendmentFilterOption),this.operator.isAnonymous||(t=t.concat(this.personalNoteFilterOptions)),t}},{key:"subscribeWorkflows",value:function(){var t=this;this.workflowRepo.getViewModelListObservable().subscribe((function(e){if(e&&e.length){var n,o=[],a=[],i=[],r=[],c=_createForOfIteratorHelper(e);try{for(c.s();!(n=c.n()).done;){var l=n.value;if(t.isWorkflowEnabled(l.id)){o.push({name:l.name,filter:[]}),a.push({name:l.name,filter:[]});var s,u=_createForOfIteratorHelper(l.states);try{for(u.s();!(s=u.n()).done;){var b,m=s.value,d=m.restriction.filter((function(t){return t!==f.b.motionsIsSubmitter}));d.length&&!(b=t.operator).hasPerms.apply(b,_toConsumableArray(d))||(m.isFinalState?i.push(m.id):r.push(m.id),o[o.length-1].filter.push({condition:m.id,label:m.name}),m.recommendation_label&&a[o.length-1].filter.push({condition:m.id,label:m.recommendation_label}))}}catch(C){u.e(C)}finally{u.f()}}}}catch(C){c.e(C)}finally{c.f()}if(o&&o.length){var p=[];p.push({label:"Done",condition:i}),p.push({label:t.translate.instant("Undone"),condition:r}),p.push("-");var h,g=_createForOfIteratorHelper(o);try{for(g.s();!(h=g.n()).done;){var v=h.value;p.push(v.name),p=p.concat(v.filter)}}catch(C){g.e(C)}finally{g.f()}t.stateFilterOptions.options=p}if(a&&a.length){var k,y=[],_=_createForOfIteratorHelper(a);try{for(_.s();!(k=_.n()).done;){var w=k.value;y.push(w.name),y=y.concat(w.filter)}}catch(C){_.e(C)}finally{_.f()}y.push("-"),y.push({label:t.translate.instant("No recommendation"),condition:null}),t.recommendationFilterOptions.options=y}t.setFilterDefinitions()}}))}},{key:"isWorkflowEnabled",value:function(t){return t===this.enabledWorkflows.motion||this.enabledWorkflows.statuteEnabled&&t===this.enabledWorkflows.statute}}]),n}(b.a);return t.\u0275fac=function(e){return new(e||t)(p.ec(i.a),p.ec(o.a),p.ec(r.a),p.ec(c.a),p.ec(l.a),p.ec(u.a),p.ec(s.a),p.ec(h.k),p.ec(a.a),p.ec(m.a))},t.\u0275prov=p.Qb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},wL0i:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,a,i){var r;return _classCallCheck(this,n),(r=e.call(this,t,o,a)).storage=i,r.canMultiSelect=!1,r._multiSelectMode=!1,r.singleButtonWidth="40px",r.badgeButtonWidth="45px",r.selectedRows=[],r}return _createClass(n,[{key:"onDataSourceChange",value:function(t){this.dataSource=t}},{key:"toggleMultiSelect",value:function(){!this.canMultiSelect||this.isMultiSelect?(this._multiSelectMode=!1,this.deselectAll()):this._multiSelectMode=!0}},{key:"selectAll",value:function(){var t;(t=this.dataSource.selection).select.apply(t,_toConsumableArray(this.dataSource.filteredData))}},{key:"deselectAll",value:function(){this.dataSource&&this.dataSource.selection.clear()}},{key:"isMultiSelect",get:function(){return this._multiSelectMode}}]),n}(n("mV3u").a)}}]);