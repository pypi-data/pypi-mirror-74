(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"0bMg":function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));class a{static validation(...e){return t=>e.map(e=>t.get(e)).every(e=>e&&""===e.value||!e)?{noOneSet:!0}:null}}},"5NaA":function(e,t,o){"use strict";o.d(t,"a",(function(){return I}));var a=o("3Pt+"),n=o("R+Vs"),s=o("+KbT"),i=o("owL4"),c=o("HRp2"),l=o("qnZ9"),r=o("Izkr"),p=o("aOHa"),u=o("mV3u"),h=o("8fOK"),b=o("fXoL"),d=o("jhN1"),m=o("sYmb"),g=o("dNgK"),f=o("0IaG"),v=o("kmnG"),y=o("qFsG"),V=o("ofXK"),C=o("d3UM"),k=o("FKr1"),O=o("oqD5"),x=o("bSwM");function P(e,t){if(1&e&&(b.ac(0,"mat-option",13),b.Tc(1),b.nc(2,"translate"),b.Zb()),2&e){const e=t.$implicit;b.uc("value",e.key),b.Hb(1),b.Vc(" ",b.oc(2,2,e.value)," ")}}function _(e,t){if(1&e){const e=b.bc();b.ac(0,"mat-hint",14),b.ic("click",(function(){return b.Jc(e),b.mc(3).openVotingWarning()})),b.Tc(1),b.nc(2,"translate"),b.Zb()}2&e&&(b.Hb(1),b.Vc(" ",b.oc(2,1,"Not suitable for formal secret voting!"),""))}function F(e,t){if(1&e&&(b.ac(0,"mat-form-field",9),b.ac(1,"mat-select",10),b.nc(2,"translate"),b.Rc(3,P,3,4,"mat-option",11),b.nc(4,"keyvalue"),b.Zb(),b.ac(5,"mat-error"),b.Tc(6),b.nc(7,"translate"),b.Zb(),b.Rc(8,_,3,3,"mat-hint",12),b.Zb()),2&e){const e=b.mc(2);b.Hb(1),b.uc("placeholder",b.oc(2,4,e.PollPropertyVerbose.type)),b.Hb(2),b.uc("ngForOf",b.oc(4,6,e.pollTypes)),b.Hb(3),b.Uc(b.oc(7,8,"This field is required.")),b.Hb(2),b.uc("ngIf",e.showNonNominalWarning)}}function N(e,t){if(1&e&&(b.ac(0,"mat-form-field"),b.Vb(1,"os-search-value-selector",15),b.nc(2,"translate"),b.Zb()),2&e){const e=b.mc(2);b.Hb(1),b.uc("multiple",!0)("showChips",!1)("includeNone",!1)("placeholder",b.oc(2,5,e.PollPropertyVerbose.groups))("inputListValues",e.groupObservable)}}function w(e,t){if(1&e&&(b.ac(0,"mat-option",13),b.Tc(1),b.nc(2,"translate"),b.Zb()),2&e){const e=t.$implicit;b.uc("value",e.key),b.Hb(1),b.Vc(" ",b.oc(2,2,e.value)," ")}}function T(e,t){if(1&e&&(b.ac(0,"mat-form-field"),b.ac(1,"mat-select",16),b.nc(2,"translate"),b.Rc(3,w,3,4,"mat-option",11),b.nc(4,"keyvalue"),b.Zb(),b.ac(5,"mat-error"),b.Tc(6),b.nc(7,"translate"),b.Zb(),b.Zb()),2&e){const e=b.mc(2);b.Hb(1),b.uc("placeholder",b.oc(2,3,e.PollPropertyVerbose.pollmethod)),b.Hb(2),b.uc("ngForOf",b.pc(4,5,e.pollMethods,e.keepEntryOrder)),b.Hb(3),b.Uc(b.oc(7,8,"This field is required."))}}function H(e,t){if(1&e&&(b.Yb(0),b.Rc(1,F,9,10,"mat-form-field",8),b.Rc(2,N,3,7,"mat-form-field",5),b.Rc(3,T,8,10,"mat-form-field",5),b.Xb()),2&e){const e=b.mc();b.Hb(1),b.uc("ngIf",e.isEVotingEnabled),b.Hb(1),b.uc("ngIf",e.contentForm.get("type").value&&"analog"!==e.contentForm.get("type").value),b.Hb(1),b.uc("ngIf",e.pollMethods)}}function Z(e,t){if(1&e&&(b.Yb(0),b.ac(1,"mat-option",13),b.Tc(2),b.nc(3,"translate"),b.Zb(),b.Xb()),2&e){const e=t.$implicit;b.Hb(1),b.uc("value",e.key),b.Hb(1),b.Uc(b.oc(3,2,e.value))}}function M(e,t){if(1&e&&(b.Yb(0),b.ac(1,"mat-form-field"),b.Vb(2,"input",17),b.nc(3,"translate"),b.Zb(),b.ac(4,"mat-checkbox",18),b.Tc(5),b.nc(6,"translate"),b.Zb(),b.ac(7,"mat-checkbox",19),b.Tc(8),b.nc(9,"translate"),b.Zb(),b.Xb()),2&e){const e=b.mc();b.Hb(2),b.vc("placeholder",b.oc(3,3,e.PollPropertyVerbose.votes_amount)),b.Hb(3),b.Uc(b.oc(6,5,e.PollPropertyVerbose.global_no)),b.Hb(3),b.Uc(b.oc(9,7,e.PollPropertyVerbose.global_abstain))}}let I=(()=>{class e extends u.a{constructor(e,t,o,a,n,s,i){super(e,t,o),this.translate=t,this.fb=a,this.groupRepo=n,this.configService=s,this.dialog=i,this.PollType=l.f,this.PollPropertyVerbose=h.d,this.pollTypes=h.e,this.majorityMethods=h.a,this.groupObservable=null,this.pollValues=[],this.publishImmediately=!0,this.showNonNominalWarning=!1,this.initContentForm()}get isEVotingEnabled(){return!!this.pollService&&this.pollService.isElectronicVotingEnabled}ngOnInit(){this.groupObservable=this.groupRepo.getViewModelListObservableWithoutDefaultGroup(),this.data&&(this.data.state&&this.disablePollType(),this.data instanceof p.c&&(this.data.assignment&&!this.data.votes_amount&&(this.data.votes_amount=this.data.assignment.open_posts),this.data.pollmethod||(this.data.pollmethod=this.configService.instant("assignment_poll_method"))),Object.keys(this.contentForm.controls).forEach(e=>{this.data[e]&&this.contentForm.get(e).patchValue(this.data[e])})),this.updatePollValues(this.contentForm.value),this.updatePercentBases(this.contentForm.get("pollmethod").value),this.subscriptions.push(this.contentForm.valueChanges.subscribe(e=>{e&&this.updatePollValues(e)}),this.contentForm.get("pollmethod").valueChanges.subscribe(e=>{e&&(this.updatePercentBases(e),this.setVotesAmountCtrl())}),this.contentForm.get("type").valueChanges.subscribe(()=>{this.setVotesAmountCtrl()}))}disablePollType(){this.contentForm.get("type").disable()}updatePercentBases(e){if(e){let t=[];e===c.b.YN?t=[l.c.YNA,c.c.Votes]:e===c.b.YNA?t=[c.c.Votes]:e===c.b.Votes&&(t=[l.c.YN,l.c.YNA]);const o={};for(const[e,n]of Object.entries(this.percentBases))t.includes(e)||(o[e]=n);const a=this.contentForm.get("onehundred_percent_base");a.setValue(this.getNormedPercentBase(a.value,e)),this.validPercentBases=o}}getNormedPercentBase(e,t){return t!==c.b.YN||e!==c.c.YNA&&e!==c.c.Votes?t===c.b.YNA&&e===c.c.Votes?c.c.YNA:t!==c.b.Votes||e!==c.c.YN&&e!==c.c.YNA?e:c.c.Votes:c.c.YN}setVotesAmountCtrl(){this.showNonNominalWarning=this.contentForm.get("type").value===l.f.Pseudoanonymous}getValues(){return Object.assign(Object.assign({},this.data),this.contentForm.value)}updatePollValues(e){this.data&&(this.pollValues=[[this.pollService.getVerboseNameForKey("type"),this.pollService.getVerboseNameForValue("type",e.type)]],this.data.pollClassType===h.c.Assignment&&this.pollValues.push([this.pollService.getVerboseNameForKey("pollmethod"),this.pollService.getVerboseNameForValue("pollmethod",e.pollmethod)]),"analog"!==e.type&&this.pollValues.push([this.pollService.getVerboseNameForKey("groups"),e&&e.groups_id&&e.groups_id.length?this.groupRepo.getNameForIds(...e.groups_id):"---"]),"votes"===e.pollmethod&&(this.pollValues.push([this.pollService.getVerboseNameForKey("votes_amount"),e.votes_amount]),this.pollValues.push([this.pollService.getVerboseNameForKey("global_no"),e.global_no]),this.pollValues.push([this.pollService.getVerboseNameForKey("global_abstain"),e.global_abstain])))}initContentForm(){this.contentForm=this.fb.group({title:["",a.G.required],type:["",a.G.required],pollmethod:["",a.G.required],onehundred_percent_base:["",a.G.required],majority_method:["",a.G.required],votes_amount:[1,[a.G.required,a.G.min(1)]],groups_id:[],global_no:[!1],global_abstain:[!1]})}openVotingWarning(){this.dialog.open(i.a,r.a)}keepEntryOrder(){return 0}}return e.\u0275fac=function(t){return new(t||e)(b.Ub(d.d),b.Ub(m.k),b.Ub(g.a),b.Ub(a.f),b.Ub(n.a),b.Ub(s.a),b.Ub(f.b))},e.\u0275cmp=b.Ob({type:e,selectors:[["os-poll-form"]],inputs:{pollMethods:"pollMethods",percentBases:"percentBases",data:"data",pollService:"pollService"},features:[b.Eb],decls:14,vars:14,consts:[[1,"os-form-card-mobile"],[3,"formGroup"],[1,"poll-preview-title"],["matInput","","required","","formControlName","title",3,"placeholder"],[1,"poll-preview-meta-info-form",3,"formGroup"],[4,"ngIf"],["formControlName","onehundred_percent_base","required","",3,"placeholder"],[4,"ngFor","ngForOf"],["class","pollType",4,"ngIf"],[1,"pollType"],["formControlName","type","required","",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[3,"value"],[3,"click"],["formControlName","groups_id",3,"multiple","showChips","includeNone","placeholder","inputListValues"],["formControlName","pollmethod","required","",3,"placeholder"],["type","number","matInput","","formControlName","votes_amount","min","1","required","",3,"placeholder"],["formControlName","global_no"],["formControlName","global_abstain"]],template:function(e,t){1&e&&(b.ac(0,"div",0),b.ac(1,"form",1),b.ac(2,"mat-form-field"),b.ac(3,"h2",2),b.Vb(4,"input",3),b.nc(5,"translate"),b.Zb(),b.Zb(),b.Zb(),b.ac(6,"form",4),b.Rc(7,H,4,3,"ng-container",5),b.ac(8,"mat-form-field"),b.ac(9,"mat-select",6),b.nc(10,"translate"),b.Rc(11,Z,4,4,"ng-container",7),b.nc(12,"keyvalue"),b.Zb(),b.Zb(),b.Rc(13,M,10,9,"ng-container",5),b.Zb(),b.Zb()),2&e&&(b.Hb(1),b.uc("formGroup",t.contentForm),b.Hb(3),b.uc("placeholder",b.oc(5,7,"Title")),b.Hb(2),b.uc("formGroup",t.contentForm),b.Hb(1),b.uc("ngIf",!t.data||!t.data.state||t.data.isCreated),b.Hb(2),b.vc("placeholder",b.oc(10,9,t.PollPropertyVerbose.onehundred_percent_base)),b.Hb(2),b.uc("ngForOf",b.pc(12,11,t.validPercentBases,t.keepEntryOrder)),b.Hb(2),b.uc("ngIf","votes"===t.contentForm.get("pollmethod").value&&(!t.data||!t.data.state||t.data.isCreated)))},directives:[a.I,a.t,a.k,v.c,y.b,a.c,a.D,a.s,a.i,V.t,C.a,V.s,v.b,k.n,v.f,O.a,a.y,x.a],pipes:[m.j,V.l],styles:[".poll-preview-title[_ngcontent-%COMP%]{margin:0}.pollType[_ngcontent-%COMP%]   .mat-hint[_ngcontent-%COMP%]{color:red;cursor:pointer}.poll-preview-meta-info[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;margin:10px 0}.poll-preview-meta-info[_ngcontent-%COMP%]   .short-description[_ngcontent-%COMP%]{-ms-flex:1;flex:1;padding:0 5px;display:inline-block}.poll-preview-meta-info[_ngcontent-%COMP%]   .short-description[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.poll-preview-meta-info[_ngcontent-%COMP%]   .short-description-label[_ngcontent-%COMP%]{font-size:75%}.poll-preview-meta-info-form[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-wrap:wrap;flex-wrap:wrap}.poll-preview-meta-info-form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{-ms-flex:1;flex:1;margin:0 4px}"]}),e})()},acT5:function(e,t,o){"use strict";o.d(t,"a",(function(){return m}));var a=o("fXoL"),n=o("3Pt+"),s=o("mV3u"),i=o("jhN1"),c=o("sYmb"),l=o("dNgK"),r=o("kmnG"),p=o("qFsG"),u=o("ofXK"),h=o("bSwM");function b(e,t){if(1&e){const e=a.bc();a.ac(0,"mat-checkbox",4),a.ic("change",(function(t){return a.Jc(e),a.mc().checkboxStateChanged(t.checked)})),a.Tc(1),a.Zb()}if(2&e){const e=a.mc();a.uc("name","checkbox")("ngModel",e.isChecked),a.Hb(1),a.Vc(" ",e.checkboxLabel," ")}}function d(e,t){1&e&&a.Vb(0,"div",5)}let m=(()=>{class e extends s.a{constructor(e,t,o,a){super(e,t,o),this.translate=t,this.fb=a,this.inputType="text",this.isChecked=!1,this.propagateChange=e=>{},this.initForm()}ngOnInit(){this.subscriptions.push(this.contentForm.valueChanges.subscribe(e=>{e&&this.sendValue(e)}))}checkboxStateChanged(e){this.isChecked=e,e?this.contentForm.disable({emitEvent:!1}):this.contentForm.enable({emitEvent:!1}),this.sendValue()}writeValue(e){(e||"number"==typeof e)&&(e===this.checkboxValue?this.checkboxStateChanged(!0):this.contentForm.patchValue(e))}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){}setDisabledState(e){}initForm(){this.contentForm=this.fb.control("")}sendValue(e){this.propagateChange(this.isChecked?this.checkboxValue:e)}}return e.\u0275fac=function(t){return new(t||e)(a.Ub(i.d),a.Ub(c.k),a.Ub(l.a),a.Ub(n.f))},e.\u0275cmp=a.Ob({type:e,selectors:[["os-check-input"]],inputs:{inputType:"inputType",placeholder:"placeholder",checkboxValue:"checkboxValue",checkboxLabel:"checkboxLabel"},features:[a.Gb([{provide:n.q,multi:!0,useExisting:Object(a.Z)(()=>e)}]),a.Eb],decls:5,vars:6,consts:[[1,"check-input--container"],["matInput","",1,"check-input--input",3,"type","formControl","placeholder","min"],["tabindex","-1",3,"name","ngModel","change",4,"ngIf"],["class","placeholder",4,"ngIf"],["tabindex","-1",3,"name","ngModel","change"],[1,"placeholder"]],template:function(e,t){1&e&&(a.ac(0,"div",0),a.ac(1,"mat-form-field"),a.Vb(2,"input",1),a.Zb(),a.Rc(3,b,2,3,"mat-checkbox",2),a.Rc(4,d,1,0,"div",3),a.Zb()),2&e&&(a.Hb(2),a.uc("type",t.inputType)("formControl",t.contentForm)("placeholder",t.placeholder)("min",0),a.Hb(1),a.uc("ngIf",t.checkboxLabel),a.Hb(1),a.uc("ngIf",!t.checkboxLabel))},directives:[r.c,p.b,n.c,n.s,n.h,u.t,h.a,n.v],styles:[".check-input--container[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between}.check-input--container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{-ms-flex:1;flex:1;padding:0 5px}"]}),e})()},b1ae:function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));var a=o("qnZ9"),n=o("0bMg"),s=o("mV3u");class i extends s.a{constructor(e,t,o,a){super(e,t,o),this.translate=t,this.dialogRef=a,this.addKeyListener()}addKeyListener(){this.dialogRef&&this.dialogRef.keydownEvents().subscribe(e=>{"Enter"===e.key&&e.shiftKey&&this.submitPoll(),"Escape"===e.key&&this.dialogRef.close()})}submitPoll(){const e=Object.assign(Object.assign({},this.pollForm.getValues()),{votes:this.getVoteData(),publish_immediately:this.publishImmediately});this.dialogRef.close(e)}publishStateChanged(e){this.dialogVoteForm.setValidators(e?n.a.validation(...Object.keys(this.dialogVoteForm.controls)):null)}getVoteData(){if(!this.isVoteDataEmpty(this.dialogVoteForm.value))return this.replaceEmptyValues(this.dialogVoteForm.value)}isVoteDataEmpty(e){return Object.values(e).every(e=>!e||"object"==typeof e&&this.isVoteDataEmpty(e))}replaceEmptyValues(e,t=!1){const o={};for(const n of Object.keys(e))o[n]="object"==typeof e[n]&&e[n]?this.replaceEmptyValues(e[n],t):t?e[n]===a.h?null:e[n]:e[n]?e[n]:a.h;return o}undoReplaceEmptyValues(e){return this.replaceEmptyValues(e,!0)}}},iCsr:function(e,t,o){"use strict";o.d(t,"a",(function(){return u}));var a=o("mV3u"),n=o("fXoL"),s=o("jhN1"),i=o("sYmb"),c=o("dNgK"),l=o("ofXK"),r=o("LPYB");function p(e,t){if(1&e&&n.Vb(0,"canvas",2),2&e){const e=n.mc();n.uc("datasets",e.isCircle?null:e.chartData)("data",e.isCircle?e.chartData:null)("colors",e.circleColors)("labels",e.labels)("options",e.chartOptions)("chartType",e.type)("legend",e.legend)}}let u=(()=>{class e extends a.a{constructor(e,t,o){super(e,t,o),this.type="horizontalBar",this.legend=!1}set data(e){this.progressInputData(e)}get chartOptions(){return this.isCircle?{responsive:!0,maintainAspectRatio:!1,tooltips:{enabled:!1},legend:{position:"left"}}:{responsive:!0,maintainAspectRatio:!1,tooltips:{enabled:!1},scales:{xAxes:[{gridLines:{drawOnChartArea:!1},ticks:{beginAtZero:!0,stepSize:1},stacked:!0}],yAxes:[{gridLines:{drawBorder:!1,drawOnChartArea:!1,drawTicks:!1},ticks:{mirror:!0,labelOffset:-20},stacked:!0}]}}}get isCircle(){return"pie"===this.type||"doughnut"===this.type}calcBarChartHeight(){if(!this.isCircle)return 120+60*this.labels.length+"px"}progressInputData(e){this.isCircle?(this.chartData=e.flatMap(e=>e.data),this.circleColors=[{backgroundColor:e.map(e=>e.backgroundColor).filter(e=>!!e),hoverBackgroundColor:e.map(e=>e.hoverBackgroundColor).filter(e=>!!e)}]):this.chartData=e,this.labels||(this.labels=e.map(e=>e.label))}}return e.\u0275fac=function(t){return new(t||e)(n.Ub(s.d),n.Ub(i.k),n.Ub(c.a))},e.\u0275cmp=n.Ob({type:e,selectors:[["os-charts"]],inputs:{type:"type",labels:"labels",legend:"legend",data:"data"},features:[n.Eb],decls:2,vars:3,consts:[[1,"charts-wrapper"],["class","chart-js-canvas","baseChart","",3,"datasets","data","colors","labels","options","chartType","legend",4,"ngIf"],["baseChart","",1,"chart-js-canvas",3,"datasets","data","colors","labels","options","chartType","legend"]],template:function(e,t){1&e&&(n.ac(0,"div",0),n.Rc(1,p,1,7,"canvas",1),n.Zb()),2&e&&(n.Qc("height",t.calcBarChartHeight()),n.Hb(1),n.uc("ngIf",t.chartData&&t.chartData.length))},directives:[l.t,r.a],styles:[".charts-wrapper[_ngcontent-%COMP%]{position:relative;display:block;height:100%;margin:auto}"],changeDetection:0}),e})()},owL4:function(e,t,o){"use strict";o.d(t,"a",(function(){return c}));var a=o("fXoL"),n=o("0IaG"),s=o("bTqV"),i=o("sYmb");let c=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Ob({type:e,selectors:[["os-voting-privacy-warning"]],decls:13,vars:10,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["type","button","mat-button","",3,"mat-dialog-close"]],template:function(e,t){1&e&&(a.ac(0,"h1",0),a.ac(1,"span"),a.Tc(2),a.nc(3,"translate"),a.Zb(),a.Zb(),a.ac(4,"div",1),a.ac(5,"span"),a.Tc(6),a.nc(7,"translate"),a.Zb(),a.Zb(),a.ac(8,"div",2),a.ac(9,"button",3),a.ac(10,"span"),a.Tc(11),a.nc(12,"translate"),a.Zb(),a.Zb(),a.Zb()),2&e&&(a.Hb(2),a.Uc(a.oc(3,4,"Secret voting can not be guaranteed")),a.Hb(4),a.Vc(" ",a.oc(7,6,"During non-nominal voting OpenSlides does NOT store the individual user ID of the voter. This in no way means that a non-nominal vote is completely anonymous and secure. The votes cannot track their individual votes after the data has been submitted. The validity of the data cannot always be guaranteed.")," "),a.Hb(3),a.uc("mat-dialog-close",null),a.Hb(2),a.Uc(a.oc(12,8,"I know the risk")))},directives:[n.i,n.f,n.c,s.b,n.d],pipes:[i.j],styles:[""]}),e})()}}]);