(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"1NkQ":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("+KbT"),o=n("Iab2"),a=n("fXoL");let c=(()=>{class t{constructor(){}saveFile(t,e,n){const i={};n&&(i.type=n);const a=new Blob([t],i);Object(o.saveAs)(a,e,{autoBOM:!0})}validateFileName(t){return new RegExp(/^[^\\\/\?%\*:\|\"\<\>]*[^\.]+$/i).test(t)}convertTo8859_15(t){const e=new Uint8Array(new ArrayBuffer(t.length));for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=a.Qb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var s=n("sYmb");function r(t){return void 0!==t.property}function l(t){return void 0!==t.map&&void 0!==t.label}let u=(()=>{class t{constructor(t,e,n){this.exporter=t,this.translate=e,this.config=n}export(t,e,n,{lineSeparator:i="\r\n",columnSeparator:o=this.config.instant("general_csv_separator"),encoding:a=this.config.instant("general_csv_encoding")}={}){let c=[];if(i===o)throw new Error("lineseparator and columnseparator must differ from each other");const s=e.map(t=>{let e;return r(t)?e=t.label?t.label:t.property:l(t)&&(e=t.label),e=this.capitalizeTranslate(e),e});c.push(s),c=c.concat(t.map(t=>e.map(e=>{let n;if(r(e)){const i=t[e.property];n="number"==typeof i?i.toString(10):i?!0===i?"1":!1===i?"0":i.toString():""}else l(e)&&(n=e.map(t));return this.checkCsvTextSafety(n)})));const u=c.map(t=>t.join(o)).join(i),b="text/csv;charset="+a;this.exporter.saveFile("iso-8859-15"===a?this.exporter.convertTo8859_15(u):u,n,b)}checkCsvTextSafety(t){return t?'"'+t.replace(/"/g,'""').replace(/(\r\n\t|\n|\r\t)/gm,"")+'"':""}capitalizeTranslate(t){const e=t.charAt(0).toUpperCase()+t.slice(1);return this.translate.instant(e)}dummyCSVExport(t,e,n){const i=this.config.instant("general_csv_separator"),o=[t.map(t=>this.translate.instant(t)).join(i)],a=e.map(t=>t.map(t=>{let e="";return t||(e=""),e="number"==typeof t?t.toString(10):"boolean"==typeof t?t?"1":"0":t,this.checkCsvTextSafety(e)}).join(i)),c=o.concat(a).join("\r\n"),s=this.config.instant("general_csv_encoding");this.exporter.saveFile("iso-8859-15"===s?this.exporter.convertTo8859_15(c):c,n,"text/csv")}}return t.\u0275fac=function(e){return new(e||t)(a.ec(c),a.ec(s.k),a.ec(i.a))},t.\u0275prov=a.Qb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},ePZ9:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var i=n("pSLD"),o=n("+B0n"),a=n("dOok"),c=n("+KbT"),s=n("1NkQ"),r=n("a9XT"),l=n("rHPv"),u=n("jDC6"),b=n("3Y4h"),d=n("fXoL"),m=n("sYmb");let g=(()=>{class t{constructor(t,e,n,i,o,a,c){this.csvExport=t,this.translate=e,this.configService=n,this.linenumberingService=i,this.changeRecoRepo=o,this.motionRepo=a,this.commentRepo=c}createText(t,e){const n=this.configService.instant("motions_line_length"),i=Object.assign([],this.changeRecoRepo.getChangeRecoOfMotion(t.id)),o=this.motionRepo.getAmendmentsInstantly(t.id);if(o)for(const c of o){const t=this.changeRecoRepo.getChangeRecoOfMotion(c.id).filter(t=>t.showInFinalView()),e=this.motionRepo.getAmendmentAmendedParagraphs(c,n,t);for(const n of e)i.push(n)}i.sort((t,e)=>t.getLineFrom()-e.getLineFrom());const a=this.motionRepo.formatMotion(t.id,e,i,n);return this.linenumberingService.stripLineNumbers(a)}exportMotionList(t,e,n,i){i||(i=this.configService.instant("motions_recommendation_text_mode"));const o=Object(b.j)(["identifier","title"].concat(e)).map(t=>"recommendation"===t?{label:"recommendation",map:t=>this.motionRepo.getExtendedRecommendationLabel(t)}:"state"===t?{label:"state",map:t=>this.motionRepo.getExtendedStateLabel(t)}:"text"===t?{label:"Text",map:t=>this.createText(t,i)}:"motion_block"===t?{label:"Motion block",map:t=>t.motion_block?t.motion_block.getTitle():""}:{property:t});o.push(...n.map(t=>({label:this.commentRepo.getViewModel(t).getTitle(),map:e=>{const n=this.commentRepo.getViewModel(t),i=e.getCommentForSection(n);return i&&i.comment?Object(l.a)(Object(u.a)(i.comment)):""}}))),this.csvExport.export(t,o,this.translate.instant("Motions")+".csv")}exportCallList(t){this.csvExport.export(t,[{label:"Called",map:t=>t.sort_parent_id?"":t.identifierOrTitle},{label:"Called with",map:t=>t.sort_parent_id?t.identifierOrTitle:""},{label:"submitters",map:t=>t.submittersAsUsers.map(t=>t.short_name).join(",")},{property:"title"},{label:"recommendation",map:t=>t.recommendation?this.motionRepo.getExtendedRecommendationLabel(t):""},{property:"motion_block",label:"Motion block"}],this.translate.instant("Call list")+".csv")}exportDummyMotion(){this.csvExport.dummyCSVExport(["Identifier","Submitters","Title","Text","Reason","Category","Tags","Motion block","Origin"],[["A1","Submitter A","Title 1","Text 1","Reason 1","Category A","Tag 1, Tag 2","Block A","Last Year Conference A"],["B1","Submitter B","Title 2","Text 2","Reason 2","Category B",null,"Block A","Origin B"],["C2",null,"Title 3","Text 3",null,null,null,null,null]],this.translate.instant("motions-example")+".csv")}}return t.\u0275fac=function(e){return new(e||t)(d.ec(s.a),d.ec(m.k),d.ec(c.a),d.ec(r.a),d.ec(i.a),d.ec(a.a),d.ec(o.a))},t.\u0275prov=d.Qb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},mksl:function(t,e,n){"use strict";n.d(e,"a",(function(){return _}));var i=n("fXoL"),o=n("VR2Q"),a=n("7dBR"),c=n("gsQk"),s=n("KL36"),r=n("tyNb"),l=n("/t3+"),u=n("ofXK"),b=n("bTqV"),d=n("NFeN"),m=n("Qu3c"),g=n("sYmb");function p(t,e){if(1&t){const t=i.bc();i.ac(0,"button",12),i.ic("click",(function(){return i.Jc(t),i.mc().clickHamburgerMenu()})),i.ac(1,"mat-icon"),i.Tc(2,"menu"),i.Zb(),i.Zb()}}function h(t,e){if(1&t){const t=i.bc();i.ac(0,"button",12),i.ic("click",(function(){return i.Jc(t),i.mc().onBackButton()})),i.ac(1,"mat-icon"),i.Tc(2,"arrow_back"),i.Zb(),i.Zb()}}function f(t,e){if(1&t){const t=i.bc();i.ac(0,"button",12),i.ic("click",(function(){i.Jc(t);const e=i.mc();return e.isCancelEditUsed?e.sendCancelEditEvent():e.sendMainEvent()})),i.ac(1,"mat-icon"),i.Tc(2,"close"),i.Zb(),i.Zb()}}function v(t,e){1&t&&(i.ac(0,"div",13),i.sc(1,1),i.Zb())}function x(t,e){1&t&&i.Vb(0,"div",6)}function C(t,e){1&t&&(i.ac(0,"div",14),i.sc(1,2),i.Zb())}function T(t,e){if(1&t){const t=i.bc();i.ac(0,"button",12),i.ic("click",(function(){return i.Jc(t),i.mc().openSearch()})),i.ac(1,"mat-icon"),i.Tc(2,"search"),i.Zb(),i.Zb()}}function M(t,e){if(1&t){const t=i.bc();i.ac(0,"button",15),i.ic("click",(function(){return i.Jc(t),i.mc().sendMainEvent()})),i.nc(1,"translate"),i.ac(2,"mat-icon"),i.Tc(3),i.Zb(),i.Zb()}if(2&t){const t=i.mc();i.vc("matTooltip",i.oc(1,3,t.mainActionTooltip)),i.uc("disabled",!t.isMainButtonEnabled),i.Hb(3),i.Uc(t.mainButtonIcon)}}function y(t,e){if(1&t){const t=i.bc();i.ac(0,"button",16),i.ic("click",(function(){return i.Jc(t),i.mc().save()})),i.ac(1,"strong",17),i.Tc(2),i.nc(3,"translate"),i.Zb(),i.Zb()}if(2&t){const t=i.mc();i.uc("disabled",!t.isSaveButtonEnabled),i.Hb(2),i.Uc(i.oc(3,2,t.saveText))}}function O(t,e){1&t&&i.sc(0,3,["*ngIf","!editMode"])}function F(t,e){1&t&&(i.ac(0,"mat-icon"),i.Tc(1," add "),i.Zb())}function k(t,e){if(1&t&&(i.ac(0,"mat-icon"),i.Tc(1),i.Zb()),2&t){const t=i.mc(2);i.Hb(1),i.Vc(" ",t.mainButtonIcon," ")}}function S(t,e){if(1&t){const t=i.bc();i.ac(0,"button",18),i.ic("click",(function(){return i.Jc(t),i.mc().sendMainEvent()})),i.nc(1,"translate"),i.Rc(2,F,2,0,"mat-icon",10),i.Rc(3,k,2,1,"mat-icon",10),i.Zb()}if(2&t){const t=i.mc();i.vc("matTooltip",i.oc(1,4,t.mainActionTooltip)),i.uc("disabled",!t.isMainButtonEnabled),i.Hb(2),i.uc("ngIf","add_circle"===t.mainButtonIcon),i.Hb(1),i.uc("ngIf","add_circle"!==t.mainButtonIcon)}}const Z=[[["",8,"extra-controls-slot"]],[["",8,"title-slot"]],[["",8,"central-info-slot"]],[["",8,"menu-slot"]]],E=[".extra-controls-slot",".title-slot",".central-info-slot",".menu-slot"];let _=(()=>{class t{constructor(t,e,n,o,a,c){this.vp=t,this.menu=e,this.router=n,this.route=o,this.routingState=a,this.overlayService=c,this.nav=!0,this.mainButtonIcon="add_circle",this.saveText="Save",this.editMode=!1,this.isSearchEnabled=!0,this.isSaveButtonEnabled=!0,this.multiSelectMode=!1,this.hasMainButton=!1,this.isMainButtonEnabled=!0,this.goBack=!1,this.prevUrl="../",this.mainEvent=new i.p,this.cancelEditEvent=new i.p,this.isCancelEditUsed=!1,this.saveEvent=new i.p}get showBackButton(){return!this.nav&&!this.multiSelectMode&&(this.routingState.isSafePrevUrl||!this.goBack)}ngOnInit(){this.isCancelEditUsed=this.cancelEditEvent.observers.length>0}sendMainEvent(){this.mainEvent.next()}sendCancelEditEvent(){this.cancelEditEvent.next()}clickHamburgerMenu(){this.menu.toggleMenu()}save(){this.saveEvent.next(!0)}openSearch(){this.overlayService.showSearch()}onBackButton(){this.goBack?this.routingState.goBack():this.router.navigate(this.routingState.customOrigin&&this.routingState.customOrigin!==this.router.url?[this.routingState.customOrigin]:[this.prevUrl],{relativeTo:this.route})}}return t.\u0275fac=function(e){return new(e||t)(i.Ub(s.a),i.Ub(o.a),i.Ub(r.f),i.Ub(r.a),i.Ub(c.a),i.Ub(a.a))},t.\u0275cmp=i.Ob({type:t,selectors:[["os-head-bar"]],inputs:{nav:"nav",mainButtonIcon:"mainButtonIcon",saveText:"saveText",editMode:"editMode",isSearchEnabled:"isSearchEnabled",isSaveButtonEnabled:"isSaveButtonEnabled",multiSelectMode:"multiSelectMode",hasMainButton:"hasMainButton",isMainButtonEnabled:"isMainButtonEnabled",goBack:"goBack",prevUrl:"prevUrl",mainActionTooltip:"mainActionTooltip"},outputs:{mainEvent:"mainEvent",cancelEditEvent:"cancelEditEvent",saveEvent:"saveEvent"},ngContentSelectors:E,decls:16,vars:12,consts:[["color","primary",1,"sticky-toolbar",3,"ngClass"],[1,"toolbar-left"],["mat-icon-button","",3,"click",4,"ngIf"],["class","toolbar-left-text",4,"ngIf"],["class","spacer",4,"ngIf"],["class","toolbar-centered",4,"ngIf"],[1,"spacer"],[1,"toolbar-right"],["mat-icon-button","",3,"disabled","matTooltip","click",4,"ngIf"],["mat-button","",3,"disabled","click",4,"ngIf"],[4,"ngIf"],["mat-fab","","class","head-button",3,"disabled","matTooltip","click",4,"ngIf"],["mat-icon-button","",3,"click"],[1,"toolbar-left-text"],[1,"toolbar-centered"],["mat-icon-button","",3,"disabled","matTooltip","click"],["mat-button","",3,"disabled","click"],[1,"upper"],["mat-fab","",1,"head-button",3,"disabled","matTooltip","click"]],template:function(t,e){1&t&&(i.tc(Z),i.ac(0,"mat-toolbar",0),i.ac(1,"div",1),i.Rc(2,p,3,0,"button",2),i.Rc(3,h,3,0,"button",2),i.Rc(4,f,3,0,"button",2),i.Rc(5,v,2,0,"div",3),i.Zb(),i.Rc(6,x,1,0,"div",4),i.Rc(7,C,2,0,"div",5),i.Vb(8,"div",6),i.Rc(9,T,3,0,"button",2),i.ac(10,"div",7),i.sc(11),i.Rc(12,M,4,5,"button",8),i.Rc(13,y,4,4,"button",9),i.Rc(14,O,1,0,void 0,10),i.Zb(),i.Zb(),i.Rc(15,S,4,6,"button",11)),2&t&&(i.uc("ngClass",e.multiSelectMode?"multi-select":""),i.Hb(2),i.uc("ngIf",e.vp.isMobile&&!e.showBackButton&&!e.editMode),i.Hb(1),i.uc("ngIf",e.showBackButton&&!e.editMode),i.Hb(1),i.uc("ngIf",e.editMode),i.Hb(1),i.uc("ngIf",!e.multiSelectMode),i.Hb(1),i.uc("ngIf",!e.multiSelectMode),i.Hb(1),i.uc("ngIf",e.multiSelectMode),i.Hb(2),i.uc("ngIf",!e.editMode&&e.isSearchEnabled),i.Hb(3),i.uc("ngIf",e.hasMainButton&&!e.editMode&&!e.vp.isMobile&&!e.multiSelectMode),i.Hb(1),i.uc("ngIf",e.editMode),i.Hb(1),i.uc("ngIf",!e.editMode),i.Hb(1),i.uc("ngIf",e.hasMainButton&&!e.editMode&&e.vp.isMobile&&!e.multiSelectMode))},directives:[l.a,u.q,u.t,b.b,d.a,m.c],pipes:[g.j],styles:[".head-button{position:fixed;z-index:10;right:20px;bottom:55px}.sticky-toolbar{top:0;z-index:5;position:-webkit-sticky;position:sticky;height:64px!important}.sticky-toolbar .toolbar-left{display:-ms-flexbox;display:flex;max-width:calc(100% - 100px)}.sticky-toolbar .toolbar-left button{margin:12px 0}.sticky-toolbar .toolbar-left .toolbar-left-text{margin-left:10px;width:100%;overflow:hidden}.sticky-toolbar .toolbar-left .toolbar-left-text .title-slot{margin:16px 0;display:block}.sticky-toolbar .toolbar-left .toolbar-left-text .title-slot h2{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.sticky-toolbar .toolbar-centered{margin:auto;vertical-align:baseline}.sticky-toolbar .toolbar-right,.sticky-toolbar .toolbar-right .extra-controls-slot{display:-ms-flexbox;display:flex}mat-toolbar.multi-select{background-color:#757575!important}"],encapsulation:2}),t})()},rHPv:function(t,e,n){"use strict";function i(t){return t.replace(/&auml;|&#228;/g,"\xe4").replace(/&Auml;|&#196;/g,"\xc4").replace(/&ouml;|&#246;/g,"\xf6").replace(/&Ouml;|&#214;/g,"\xd6").replace(/&uuml;/g,"\xfc").replace(/&Uuml;/g,"\xdc").replace(/&aring;|&#229;/g,"\xe5").replace(/&Aring;|&#197;/g,"\xc5").replace(/&szlig;|&#223;/g,"\xdf")}n.d(e,"a",(function(){return i}))},ssNq:function(t,e,n){"use strict";n.r(e),n.d(e,"CallListModule",(function(){return A}));var i=n("ofXK"),o=n("PCNd"),a=n("tyNb"),c=n("+QJK"),s=n("mrSG"),r=n("2Vo4"),l=n("iTQr"),u=n("dOok"),b=n("lv9T"),d=n("F48D"),m=n("Qy/R"),g=n("ePZ9"),p=n("y50V"),h=n("fXoL"),f=n("jhN1"),v=n("sYmb"),x=n("dNgK"),C=n("mksl"),T=n("bTqV"),M=n("STbY"),y=n("NFeN"),O=n("Wp6s"),F=n("/tkw"),k=n("f0Cb"),S=n("TU8p");function Z(t,e){if(1&t){const t=h.bc();h.ac(0,"div",17),h.ac(1,"div"),h.ac(2,"span"),h.Tc(3),h.nc(4,"translate"),h.Zb(),h.Tc(5,":\xa0 "),h.Zb(),h.ac(6,"div"),h.ac(7,"button",18),h.ic("click",(function(){return h.Jc(t),h.mc().resetFilters()})),h.ac(8,"mat-icon",19),h.Tc(9,"cancel"),h.Zb(),h.ac(10,"span"),h.Tc(11),h.nc(12,"translate"),h.Zb(),h.Zb(),h.Zb(),h.Zb()}2&t&&(h.Hb(3),h.Uc(h.oc(4,2,"Active filters")),h.Hb(8),h.Uc(h.oc(12,4,"Clear all")))}function E(t,e){if(1&t&&(h.ac(0,"div"),h.ac(1,"button",20),h.ac(2,"span",21),h.Tc(3),h.nc(4,"translate"),h.Zb(),h.Zb(),h.Zb()),2&t){const t=h.mc(),e=h.Fc(23);h.Hb(1),h.uc("matMenuTriggerFor",e),h.Hb(1),h.uc("matBadge",t.activeCatFilterCount>0?t.activeCatFilterCount:null)("matBadgeOverlap",!1),h.Hb(1),h.Vc(" ",h.oc(4,4,"Categories")," ")}}function _(t,e){if(1&t&&(h.ac(0,"div"),h.ac(1,"button",20),h.ac(2,"span",21),h.Tc(3),h.nc(4,"translate"),h.Zb(),h.Zb(),h.Zb()),2&t){const t=h.mc(),e=h.Fc(26);h.Hb(1),h.uc("matMenuTriggerFor",e),h.Hb(1),h.uc("matBadge",t.activeTagFilterCount>0?t.activeTagFilterCount:null)("matBadgeOverlap",!1),h.Hb(1),h.Vc(" ",h.oc(4,4,"Tags")," ")}}function w(t,e){1&t&&(h.ac(0,"mat-icon"),h.Tc(1,"checked"),h.Zb())}function B(t,e){if(1&t){const t=h.bc();h.ac(0,"div"),h.ac(1,"button",16),h.ic("click",(function(){h.Jc(t);const n=e.$implicit;return h.mc().onFilterChange("category",n.id)})),h.Rc(2,w,2,0,"mat-icon",8),h.ac(3,"span"),h.Tc(4),h.Zb(),h.Zb(),h.Zb()}if(2&t){const t=e.$implicit;h.Hb(2),h.uc("ngIf",t.state),h.Hb(2),h.Uc(t.label)}}function R(t,e){1&t&&(h.ac(0,"mat-icon"),h.Tc(1,"checked"),h.Zb())}function H(t,e){if(1&t){const t=h.bc();h.ac(0,"div"),h.ac(1,"button",16),h.ic("click",(function(){h.Jc(t);const n=e.$implicit;return h.mc().onFilterChange("tag",n.id)})),h.Rc(2,R,2,0,"mat-icon",8),h.ac(3,"span"),h.Tc(4),h.Zb(),h.Zb(),h.Zb()}if(2&t){const t=e.$implicit;h.Hb(2),h.uc("ngIf",t.state),h.Hb(2),h.Uc(t.label)}}function I(t,e){if(1&t&&(h.ac(0,"span"),h.ac(1,"mat-icon",19),h.Tc(2,"local_offer"),h.Zb(),h.Tc(3),h.Zb()),2&t){const t=e.$implicit;h.Hb(3),h.Vc(" ",t.getTitle()," ")}}function P(t,e){if(1&t&&(h.ac(0,"div",22),h.ac(1,"div",23),h.Tc(2),h.Zb(),h.ac(3,"div",24),h.Rc(4,I,4,1,"span",10),h.Zb(),h.Zb()),2&t){const t=e.item,n=h.mc();h.Hb(2),h.Vc(" ",t.getTitle()," "),h.Hb(2),h.uc("ngForOf",n.getTags(t))}}const U=[{path:"",component:(()=>{class t extends m.a{constructor(t,e,n,i,o,a,c,s,l){super(t,e,n,l),this.translate=e,this.motionRepo=i,this.motionCsvExport=o,this.motionPdfExport=a,this.tagRepo=c,this.categoryRepo=s,this.motions=[],this.hasChanged=!1,this.tagFilterOptions=[],this.activeTagFilterCount=0,this.categoryFilterOptions=[],this.activeCatFilterCount=0,this.activeTagFilters=new r.a([]),this.activeCatFilters=new r.a([]),this.motionsObservable=this.motionRepo.getViewModelListObservable(),this.motionsObservable.subscribe(t=>{this.motions=t.map(t=>t).sort((t,e)=>t.weight-e.weight)})}ngOnInit(){this.subscriptions.push(this.activeTagFilters.subscribe(t=>this.onSubscribedFilterChange("tag",t))),this.subscriptions.push(this.activeCatFilters.subscribe(t=>this.onSubscribedFilterChange("category",t))),this.subscriptions.push(this.tagRepo.getViewModelListBehaviorSubject().subscribe(t=>{t&&t.length?(this.tagFilterOptions=t.map(t=>({label:t.name,id:t.id,state:this.tagFilterOptions&&this.tagFilterOptions.some(e=>e.id===t.id&&!0===e.state)})),this.tagFilterOptions.push({label:this.translate.instant("No tags"),id:0,state:this.tagFilterOptions&&this.tagFilterOptions.some(t=>0===t.id&&!0===t.state)})):this.tagFilterOptions=[]})),this.subscriptions.push(this.categoryRepo.getViewModelListBehaviorSubject().subscribe(t=>{t&&t.length?(this.categoryFilterOptions=t.map(t=>({label:t.prefixedName,id:t.id,state:this.categoryFilterOptions&&this.categoryFilterOptions.some(e=>e.id===t.id&&!0===e.state)})),this.categoryFilterOptions.push({label:this.translate.instant("No category"),id:0,state:this.categoryFilterOptions&&this.categoryFilterOptions.some(t=>0===t.id&&!0===t.state)})):this.categoryFilterOptions=[]}))}onSave(){return Object(s.a)(this,void 0,void 0,(function*(){yield this.motionRepo.sortMotions(this.osSortTree.getTreeData()).then(()=>this.osSortTree.setSubscription(),this.raiseError)}))}onCancel(){return Object(s.a)(this,void 0,void 0,(function*(){(yield this.canDeactivate())&&this.osSortTree.setSubscription()}))}receiveChanges(t){this.hasChanged=t}csvExportCallList(){this.motionCsvExport.exportCallList(this.motions)}pdfExportCallList(){this.motionPdfExport.exportPdfCallList(this.motions)}getTags(t){const e=this.motionRepo.getViewModel(t.id);return e?e.tags:[]}onFilterChange(t,e){const n="tag"===t?this.activeTagFilters.value:this.activeCatFilters.value;n.includes(e)?n.splice(n.indexOf(e),1):n.push(e),"tag"===t?this.activeTagFilters.next(n):this.activeCatFilters.next(n)}resetFilters(){this.activeTagFilters.next([]),this.activeCatFilters.next([])}sortMotionsByIdentifier(){return Object(s.a)(this,void 0,void 0,(function*(){const t=this.translate.instant("Do you really want to go ahead?"),e=this.translate.instant("This will reset all made changes and sort the call list.");(yield this.promptService.open(t,e))&&this.forceSort.emit("identifier")}))}onSubscribedFilterChange(t,e){"tag"===t?(this.activeTagFilterCount=e.length,this.tagFilterOptions.forEach(t=>{t.state=e&&e.some(e=>e===t.id)})):(this.activeCatFilterCount=e.length,this.categoryFilterOptions.forEach(t=>{t.state=e&&e.some(e=>e===t.id)})),this.hasActiveFilter=this.activeCatFilterCount>0||this.activeTagFilterCount>0;const n=this.tagFilterOptions.filter(t=>!0===t.state),i=this.categoryFilterOptions.filter(t=>!0===t.state);this.changeFilter.emit(t=>{if(n.length)if(t.tags&&t.tags.length){if(!t.tags.some(t=>n.some(e=>e.id===t.id)))return!0}else if(!n.some(t=>0===t.id))return!0;if(i.length){const e=t.category_id||0;return!i.some(t=>t.id===e)}return!1})}}return t.\u0275fac=function(e){return new(e||t)(h.Ub(f.d),h.Ub(v.k),h.Ub(x.a),h.Ub(u.a),h.Ub(g.a),h.Ub(p.a),h.Ub(b.a),h.Ub(l.a),h.Ub(d.a))},t.\u0275cmp=h.Ob({type:t,selectors:[["os-call-list"]],features:[h.Eb],decls:54,vars:28,consts:[["prevUrl","../..",3,"nav","editMode","mainEvent","saveEvent"],[1,"title-slot"],[1,"menu-slot"],["type","button","mat-icon-button","",3,"matMenuTriggerFor"],[1,"custom-table-header","flex-spaced"],[1,"filter-count"],["class","current-filters",4,"ngIf"],[1,"flex-spaced","margin-right-5"],[4,"ngIf"],["catFilterMenu","matMenu"],[4,"ngFor","ngForOf"],["tagFilterMenu","matMenu"],["parentKey","sort_parent_id","weightKey","weight",3,"model","filterChange","sortingDefinition","visibleNodes","hasChanged"],["osSortedTree",""],["innerNode",""],["mainMenu","matMenu"],["mat-menu-item","",3,"click"],[1,"current-filters"],["mat-button","",3,"click"],["inline",""],["mat-button","",3,"matMenuTriggerFor"],["matBadgeColor","accent",1,"upper",3,"matBadge","matBadgeOverlap"],[1,"line"],[1,"left"],[1,"right"]],template:function(t,e){if(1&t&&(h.ac(0,"os-head-bar",0),h.ic("mainEvent",(function(){return e.onCancel()}))("saveEvent",(function(){return e.onSave()})),h.ac(1,"div",1),h.ac(2,"h2"),h.Tc(3),h.nc(4,"translate"),h.Zb(),h.Zb(),h.ac(5,"div",2),h.ac(6,"button",3),h.ac(7,"mat-icon"),h.Tc(8,"more_vert"),h.Zb(),h.Zb(),h.Zb(),h.Zb(),h.ac(9,"div",4),h.ac(10,"div",5),h.ac(11,"span"),h.Tc(12),h.Zb(),h.ac(13,"span"),h.Tc(14),h.nc(15,"translate"),h.Zb(),h.ac(16,"span"),h.Tc(17),h.Zb(),h.Zb(),h.Rc(18,Z,13,6,"div",6),h.ac(19,"div",7),h.Rc(20,E,5,6,"div",8),h.Rc(21,_,5,6,"div",8),h.Zb(),h.Zb(),h.ac(22,"mat-menu",null,9),h.Rc(24,B,5,2,"div",10),h.Zb(),h.ac(25,"mat-menu",null,11),h.Rc(27,H,5,2,"div",10),h.Zb(),h.ac(28,"mat-card"),h.ac(29,"os-sorting-tree",12,13),h.ic("visibleNodes",(function(t){return e.onChangeAmountOfItems(t)}))("hasChanged",(function(t){return e.receiveChanges(t)})),h.Rc(31,P,5,2,"ng-template",null,14,h.Sc),h.Zb(),h.Zb(),h.ac(33,"mat-menu",null,15),h.ac(35,"button",16),h.ic("click",(function(){return e.sortMotionsByIdentifier()})),h.ac(36,"mat-icon"),h.Tc(37,"sort"),h.Zb(),h.ac(38,"span"),h.Tc(39),h.nc(40,"translate"),h.Zb(),h.Zb(),h.Vb(41,"mat-divider"),h.ac(42,"button",16),h.ic("click",(function(){return e.pdfExportCallList()})),h.ac(43,"mat-icon"),h.Tc(44,"picture_as_pdf"),h.Zb(),h.ac(45,"span"),h.Tc(46),h.nc(47,"translate"),h.Zb(),h.Zb(),h.ac(48,"button",16),h.ic("click",(function(){return e.csvExportCallList()})),h.ac(49,"mat-icon"),h.Tc(50,"archive"),h.Zb(),h.ac(51,"span"),h.Tc(52),h.nc(53,"translate"),h.Zb(),h.Zb(),h.Zb()),2&t){const t=h.Fc(34);h.uc("nav",!1)("editMode",e.hasChanged),h.Hb(3),h.Uc(h.oc(4,18,"Call list")),h.Hb(3),h.uc("matMenuTriggerFor",t),h.Hb(6),h.Vc(" ",e.seenNodes[0],"\xa0"),h.Hb(2),h.Uc(h.oc(15,20,"of")),h.Hb(3),h.Vc("\xa0",e.seenNodes[1],""),h.Hb(1),h.uc("ngIf",e.hasActiveFilter),h.Hb(2),h.uc("ngIf",e.categoryFilterOptions.length),h.Hb(1),h.uc("ngIf",e.tagFilterOptions.length),h.Hb(3),h.uc("ngForOf",e.categoryFilterOptions),h.Hb(3),h.uc("ngForOf",e.tagFilterOptions),h.Hb(2),h.uc("model",e.motionsObservable)("filterChange",e.changeFilter)("sortingDefinition",e.forceSort),h.Hb(10),h.Uc(h.oc(40,22,"Sort by identifier")),h.Hb(7),h.Uc(h.oc(47,24,"Export as PDF")),h.Hb(6),h.Uc(h.oc(53,26,"Export as CSV"))}},directives:[C.a,T.b,M.e,y.a,i.t,M.f,i.s,O.a,F.a,M.c,k.a,S.a],pipes:[v.j],styles:[".line[_ngcontent-%COMP%]{display:table;width:100%;font-size:14px;min-height:50px;margin-bottom:5px}.line[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{max-width:100%}.line[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .line[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.line[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{padding-right:10px;width:auto;white-space:nowrap}.margin-right-5[_ngcontent-%COMP%]{margin-right:5px!important}",".filter-menu-head[_ngcontent-%COMP%]{padding-left:5px}.filter-menu-head[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]{margin:0 auto}.filter-menu-head[_ngcontent-%COMP%]:hover{cursor:pointer}.action-buttons[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}.action-buttons[_ngcontent-%COMP%]   os-rounded-input[_ngcontent-%COMP%]{margin:0 10px}@media (max-width:500px){.action-buttons[_ngcontent-%COMP%]   os-rounded-input[_ngcontent-%COMP%]{display:none}}.active-filter[_ngcontent-%COMP%]{white-space:pre}span.right-with-margin[_ngcontent-%COMP%]{margin-right:25px}.filter-count[_ngcontent-%COMP%]{font-style:italic;margin-left:24px;margin-right:5px}.current-filters[_ngcontent-%COMP%]{width:100%;display:-ms-flexbox;display:flex}.current-filters[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inherit}.current-filters[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px;margin:auto 5px;font-size:75%}.current-filters[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:12px;height:12px;width:12px}"]}),t})(),pathMatch:"full",canDeactivate:[c.a]}];let j=(()=>{class t{}return t.\u0275mod=h.Sb({type:t}),t.\u0275inj=h.Rb({factory:function(e){return new(e||t)},imports:[[a.j.forChild(U)],a.j]}),t})(),A=(()=>{class t{}return t.\u0275mod=h.Sb({type:t}),t.\u0275inj=h.Rb({factory:function(e){return new(e||t)},imports:[[i.c,j,o.a]]}),t})()}}]);