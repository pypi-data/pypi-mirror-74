(window.webpackJsonp=window.webpackJsonp||[]).push([[9,38],{"76GY":function(t,e,o){"use strict";o.d(e,"a",(function(){return v}));var c=o("ykax"),n=o("fXoL"),a=o("ofXK"),i=o("vYAO"),l=o("iCsr"),s=o("sYmb"),r=o("j7f2"),b=o("6ako"),u=o("QUb3");function p(t,e){if(1&t&&(n.ac(0,"os-icon-container",9),n.Tc(1),n.nc(2,"translate"),n.nc(3,"pollKeyVerbose"),n.Zb()),2&t){const t=n.mc().$implicit,e=n.mc(2);n.uc("icon",t.value[0].icon)("size",e.iconSize),n.Hb(1),n.Vc(" ",n.oc(2,3,n.oc(3,5,t.votingOption))," ")}}function d(t,e){if(1&t&&(n.ac(0,"span"),n.Tc(1),n.nc(2,"translate"),n.nc(3,"pollKeyVerbose"),n.Zb()),2&t){const t=n.mc().$implicit;n.Hb(1),n.Vc(" ",n.oc(2,1,n.oc(3,3,t.votingOption))," ")}}function f(t,e){if(1&t&&(n.ac(0,"span"),n.Tc(1),n.nc(2,"pollPercentBase"),n.Zb()),2&t){const t=n.mc().$implicit,e=n.mc(2);n.Hb(1),n.Vc(" ",n.pc(2,1,t.value[0].amount,e.poll)," ")}}function h(t,e){if(1&t&&(n.ac(0,"tr"),n.ac(1,"td"),n.Rc(2,p,4,7,"os-icon-container",6),n.Rc(3,d,4,5,"span",7),n.Zb(),n.ac(4,"td",8),n.Rc(5,f,3,4,"span",7),n.Zb(),n.ac(6,"td",8),n.Tc(7),n.nc(8,"parsePollNumber"),n.Zb(),n.Zb()),2&t){const t=e.$implicit;n.Jb(t.votingOption),n.Hb(2),n.uc("ngIf",t.value[0].icon),n.Hb(1),n.uc("ngIf",!t.value[0].icon),n.Hb(2),n.uc("ngIf",t.value[0].showPercent),n.Hb(2),n.Vc(" ",n.oc(8,6,t.value[0].amount)," ")}}function m(t,e){if(1&t&&(n.ac(0,"div",10),n.Vb(1,"os-charts",11),n.nc(2,"async"),n.Zb()),2&t){const t=n.mc(2);n.Hb(1),n.uc("data",n.oc(2,1,t.chartData))}}function g(t,e){if(1&t&&(n.ac(0,"div",1),n.ac(1,"table",2),n.ac(2,"tbody"),n.ac(3,"tr"),n.Vb(4,"th"),n.ac(5,"th",3),n.Tc(6),n.nc(7,"translate"),n.Zb(),n.Zb(),n.Rc(8,h,9,8,"tr",4),n.Zb(),n.Zb(),n.Rc(9,m,3,3,"div",5),n.Zb()),2&t){const t=n.mc();n.Hb(6),n.Uc(n.oc(7,3,"Votes")),n.Hb(2),n.uc("ngForOf",t.getTableData()),n.Hb(1),n.uc("ngIf",t.showChart)}}let v=(()=>{class t{constructor(t){this.motionPollService=t,this.iconSize="large"}get hasVotes(){return this.poll&&!!this.poll.options}ngOnInit(){}getTableData(){return this.motionPollService.generateTableData(this.poll)}get showChart(){return this.motionPollService.showChart(this.poll)&&this.chartData&&!!this.chartData.value}}return t.\u0275fac=function(e){return new(e||t)(n.Ub(c.a))},t.\u0275cmp=n.Ob({type:t,selectors:[["os-motion-poll-detail-content"]],inputs:{poll:"poll",chartData:"chartData",iconSize:"iconSize"},decls:1,vars:1,consts:[["class","result-wrapper",4,"ngIf"],[1,"result-wrapper"],[1,"result-table"],["colspan","2"],[3,"class",4,"ngFor","ngForOf"],["class","doughnut-chart",4,"ngIf"],[3,"icon","size",4,"ngIf"],[4,"ngIf"],[1,"result-cell-definition"],[3,"icon","size"],[1,"doughnut-chart"],["type","doughnut",3,"data"]],template:function(t,e){1&t&&n.Rc(0,g,10,5,"div",0),2&t&&n.uc("ngIf",e.hasVotes)},directives:[a.t,a.s,i.a,l.a],pipes:[s.j,r.a,b.a,u.a,a.b],styles:[".yes[_ngcontent-%COMP%]{color:#4caf50}.no[_ngcontent-%COMP%]{color:#cc6c5b}.abstain[_ngcontent-%COMP%]{color:#a6a6a6}.voted-yes[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.voted-no[_ngcontent-%COMP%]{background-color:#cc6c5b;color:#fff}.voted-abstain[_ngcontent-%COMP%]{background-color:#a6a6a6;color:#fff}.start-poll-button[_ngcontent-%COMP%]{color:#4caf50}.stop-poll-button[_ngcontent-%COMP%]{color:#ff5252}.publish-poll-button[_ngcontent-%COMP%]{color:#e6b100}.result-wrapper[_ngcontent-%COMP%]{display:grid;grid-gap:2em;margin:2em;grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}.result-wrapper[_ngcontent-%COMP%]   .result-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:right;font-weight:400}.result-wrapper[_ngcontent-%COMP%]   .result-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{height:48px;border-bottom:none!important}.result-wrapper[_ngcontent-%COMP%]   .result-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .result-cell-definition[_ngcontent-%COMP%]{text-align:right}.result-wrapper[_ngcontent-%COMP%]   .doughnut-chart[_ngcontent-%COMP%]{display:block}"]}),t})()},DNKu:function(t,e,o){"use strict";o.d(e,"a",(function(){return r}));var c=o("mrSG"),n=o("TG9O"),a=o("qnZ9"),i=o("Izkr"),l=o("fXoL"),s=o("0IaG");let r=(()=>{class t{constructor(t,e){this.dialog=t,this.mapper=e}openDialog(t){return Object(c.a)(this,void 0,void 0,(function*(){const e=this.dialog.open(this.dialogComponent,Object.assign({data:t},i.c)),o=yield e.afterClosed().toPromise();if(o){const e=this.mapper.getRepository(t.collectionString);if(t.poll){let c=o;t.state!==a.e.Created&&(c={title:o.title,onehundred_percent_base:o.onehundred_percent_base,majority_method:o.majority_method,description:o.description},t.type===a.f.Analog&&(c=Object.assign(Object.assign({},c),{votes:o.votes,publish_immediately:o.publish_immediately}))),yield e.patch(c,t)}else yield e.create(o)}}))}}return t.\u0275fac=function(e){return new(e||t)(l.ec(s.b),l.ec(n.a))},t.\u0275prov=l.Qb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},SHqy:function(t,e,o){"use strict";o.d(e,"a",(function(){return s}));var c=o("TG9O"),n=o("DNKu"),a=o("cMzF"),i=o("fXoL"),l=o("0IaG");let s=(()=>{class t extends n.a{constructor(t,e){super(t,e),this.dialogComponent=a.a}}return t.\u0275fac=function(e){return new(e||t)(i.ec(l.b),i.ec(c.a))},t.\u0275prov=i.Qb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},bVYn:function(t,e,o){"use strict";o.r(e),o.d(e,"PollsModule",(function(){return _}));var c=o("ofXK"),n=o("tyNb"),a=o("AqIO"),i=o("M0z7"),l=o("wL0i"),s=o("D/ll"),r=o("+8Rz"),b=o("qnZ9"),u=o("fXoL"),p=o("sYmb");let d=(()=>{class t extends r.a{constructor(t,e,o){super(t,e),this.translate=o,this.storageKey="PollList"}preFilter(t){return t.filter(t=>!t.isAnalog)}getFilterDefinitions(){return[{property:"state",label:this.translate.instant("State"),options:[{condition:b.e.Created,label:this.translate.instant("created")},{condition:b.e.Started,label:this.translate.instant("started")},{condition:b.e.Finished,label:this.translate.instant("finished (unpublished)")},{condition:b.e.Published,label:this.translate.instant("published")}]},{property:"hasVote",label:this.translate.instant("Votings"),options:[{condition:!1,label:this.translate.instant("Voting is currently in progress.")},{condition:!0,label:this.translate.instant("You have already voted.")}]}]}}return t.\u0275fac=function(e){return new(e||t)(u.ec(a.a),u.ec(s.a),u.ec(p.k))},t.\u0275prov=u.Qb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var f=o("PoOO"),h=o("jhN1"),m=o("dNgK"),g=o("mksl"),v=o("0Obk"),y=o("dRZP"),H=o("NFeN"),V=o("Qu3c");function P(t,e){if(1&t&&u.Vb(0,"a",5),2&t){const t=u.mc().row;u.uc("routerLink",t.parentLink)}}function Z(t,e){if(1&t&&(u.ac(0,"div",3),u.Rc(1,P,1,1,"a",4),u.ac(2,"span"),u.Tc(3),u.Zb(),u.Zb()),2&t){const t=e.row,o=u.mc();u.Hb(1),u.uc("ngIf",!o.isMultiSelect),u.Hb(2),u.Uc(t.title)}}function w(t,e){if(1&t&&u.Vb(0,"a",5),2&t){const t=u.mc().row;u.uc("routerLink",t.parentLink)}}function O(t,e){if(1&t&&(u.ac(0,"div",3),u.Rc(1,w,1,1,"a",4),u.ac(2,"span"),u.Tc(3),u.Zb(),u.Zb()),2&t){const t=e.row,o=u.mc();u.Hb(1),u.uc("ngIf",!o.isMultiSelect),u.Hb(2),u.Uc(t.getContentObject().getListTitle())}}function S(t,e){if(1&t&&u.Vb(0,"a",5),2&t){const t=u.mc().row;u.uc("routerLink",t.parentLink)}}function T(t,e){if(1&t&&(u.ac(0,"div",3),u.Rc(1,S,1,1,"a",4),u.ac(2,"span"),u.Tc(3),u.nc(4,"translate"),u.Zb(),u.Zb()),2&t){const t=e.row,o=u.mc();u.Hb(1),u.uc("ngIf",!o.isMultiSelect),u.Hb(2),u.Uc(u.oc(4,2,t.stateVerbose))}}function C(t,e){1&t&&(u.ac(0,"mat-icon",8),u.nc(1,"translate"),u.Tc(2," check_circle "),u.Zb()),2&t&&u.vc("matTooltip",u.oc(1,1,"You have already voted."))}function D(t,e){1&t&&(u.ac(0,"mat-icon",9),u.nc(1,"translate"),u.Tc(2," warning "),u.Zb()),2&t&&u.vc("matTooltip",u.oc(1,1,"Voting is currently in progress."))}function k(t,e){if(1&t&&(u.ac(0,"div",3),u.Rc(1,C,3,3,"mat-icon",6),u.Rc(2,D,3,3,"mat-icon",7),u.Zb()),2&t){const t=e.row;u.Hb(1),u.uc("ngIf",t.hasVote),u.Hb(1),u.uc("ngIf",!t.hasVote&&null!==t.hasVote)}}const R=[{path:"",component:(()=>{class t extends l.a{constructor(t,e,o,c,n,a,i){super(n,a,i,c),this.polls=t,this.filterService=e,this.votingService=o,this.storage=c,this.tableColumnDefinition=[{prop:"title",width:"auto"},{prop:"classType",width:"auto"},{prop:"state",width:"auto"},{prop:"votability",width:"25px"}],this.filterProps=["title","state"],super.setTitle("List of electronic votes")}}return t.\u0275fac=function(e){return new(e||t)(u.Ub(f.a),u.Ub(d),u.Ub(i.b),u.Ub(a.a),u.Ub(h.d),u.Ub(p.k),u.Ub(m.a))},t.\u0275cmp=u.Ob({type:t,selectors:[["os-poll-list"]],features:[u.Eb],decls:9,vars:12,consts:[[1,"title-slot"],["listStorageKey","polls",3,"listObservableProvider","vScrollFixed","columns","filterProps","filterService"],["class","cell-slot fill",4,"pblNgridCellDef"],[1,"cell-slot","fill"],["class","detail-link",3,"routerLink",4,"ngIf"],[1,"detail-link",3,"routerLink"],["color","accent",3,"matTooltip",4,"ngIf"],["color","warn",3,"matTooltip",4,"ngIf"],["color","accent",3,"matTooltip"],["color","warn",3,"matTooltip"]],template:function(t,e){1&t&&(u.ac(0,"os-head-bar"),u.ac(1,"div",0),u.Tc(2),u.nc(3,"translate"),u.Zb(),u.Zb(),u.ac(4,"os-list-view-table",1),u.Rc(5,Z,4,2,"div",2),u.Rc(6,O,4,2,"div",2),u.Rc(7,T,5,4,"div",2),u.Rc(8,k,3,2,"div",2),u.Zb()),2&t&&(u.Hb(2),u.Uc(u.oc(3,10,"List of electronic votes")),u.Hb(2),u.uc("listObservableProvider",e.polls)("vScrollFixed",64)("columns",e.tableColumnDefinition)("filterProps",e.filterProps)("filterService",e.filterService),u.Hb(1),u.uc("pblNgridCellDef","title"),u.Hb(1),u.uc("pblNgridCellDef","classType"),u.Hb(1),u.uc("pblNgridCellDef","state"),u.Hb(1),u.uc("pblNgridCellDef","votability"))},directives:[g.a,v.a,y.c,c.t,n.i,H.a,V.c],pipes:[p.j],styles:[""]}),t})(),pathMatch:"full"}];let I=(()=>{class t{}return t.\u0275mod=u.Sb({type:t}),t.\u0275inj=u.Rb({factory:function(e){return new(e||t)},imports:[[n.j.forChild(R)],n.j]}),t})();var M=o("PCNd");let _=(()=>{class t{}return t.\u0275mod=u.Sb({type:t}),t.\u0275inj=u.Rb({factory:function(e){return new(e||t)},imports:[[c.c,I,M.a]]}),t})()},cMzF:function(t,e,o){"use strict";o.d(e,"a",(function(){return Z}));var c=o("3Pt+"),n=o("0IaG"),a=o("qnZ9"),i=o("ykax"),l=o("b1ae"),s=o("5NaA"),r=o("8fOK"),b=o("fXoL"),u=o("jhN1"),p=o("sYmb"),d=o("dNgK"),f=o("ofXK"),h=o("bTqV"),m=o("acT5"),g=o("bSwM"),v=o("kmnG");const y=["pollForm"];function H(t,e){1&t&&(b.ac(0,"mat-error"),b.Tc(1),b.nc(2,"translate"),b.Zb()),2&t&&(b.Hb(1),b.Vc(" ",b.oc(2,1,"Error in form field."),""))}function V(t,e){if(1&t){const t=b.bc();b.ac(0,"div"),b.ac(1,"mat-checkbox",14),b.ic("ngModelChange",(function(e){return b.Jc(t),b.mc(2).publishImmediately=e}))("change",(function(e){return b.Jc(t),b.mc(2).publishStateChanged(e.checked)})),b.ac(2,"span"),b.Tc(3),b.nc(4,"translate"),b.Zb(),b.Zb(),b.Rc(5,H,3,3,"mat-error",2),b.Zb()}if(2&t){const t=b.mc(2);b.Hb(1),b.uc("ngModel",t.publishImmediately),b.Hb(2),b.Uc(b.oc(4,3,"Publish immediately")),b.Hb(2),b.uc("ngIf",!t.dialogVoteForm.valid)}}function P(t,e){if(1&t&&(b.Yb(0),b.ac(1,"div",6),b.ac(2,"form",7),b.Vb(3,"os-check-input",8),b.nc(4,"translate"),b.nc(5,"translate"),b.Vb(6,"os-check-input",9),b.nc(7,"translate"),b.nc(8,"translate"),b.Vb(9,"os-check-input",10),b.nc(10,"translate"),b.nc(11,"translate"),b.Vb(12,"os-check-input",11),b.nc(13,"translate"),b.Vb(14,"os-check-input",12),b.nc(15,"translate"),b.Vb(16,"os-check-input",13),b.nc(17,"translate"),b.Zb(),b.Zb(),b.Rc(18,V,6,5,"div",2),b.Xb()),2&t){const t=b.mc();b.Hb(2),b.uc("formGroup",t.dialogVoteForm),b.Hb(1),b.uc("placeholder",b.oc(4,14,"Yes"))("checkboxValue",-1)("checkboxLabel",b.oc(5,16,"majority")),b.Hb(3),b.uc("placeholder",b.oc(7,18,"No"))("checkboxValue",-1)("checkboxLabel",b.oc(8,20,"majority")),b.Hb(3),b.uc("placeholder",b.oc(10,22,"Abstain"))("checkboxValue",-1)("checkboxLabel",b.oc(11,24,"majority")),b.Hb(3),b.uc("placeholder",b.oc(13,26,"Valid votes")),b.Hb(2),b.uc("placeholder",b.oc(15,28,"Invalid votes")),b.Hb(2),b.uc("placeholder",b.oc(17,30,"Total votes cast")),b.Hb(2),b.uc("ngIf",!t.pollData.isPublished)}}let Z=(()=>{class t extends l.a{constructor(t,e,o,c,n,a,i){super(t,e,o,n),this.motionPollService=c,this.dialogRef=n,this.formBuilder=a,this.pollData=i,this.PercentBaseVerbose=r.b}ngOnInit(){this.createDialog()}updateDialogVoteForm(t){if(this.dialogVoteForm){const e=this.undoReplaceEmptyValues({Y:t.options[0].yes,N:t.options[0].no,A:t.options[0].abstain,votesvalid:t.votesvalid,votesinvalid:t.votesinvalid,votescast:t.votescast});this.dialogVoteForm.setValue(e)}}createDialog(){this.dialogVoteForm=this.formBuilder.group({Y:["",[c.G.min(a.b)]],N:["",[c.G.min(a.b)]],A:["",[c.G.min(a.b)]],votesvalid:["",[c.G.min(a.b)]],votesinvalid:["",[c.G.min(a.b)]],votescast:["",[c.G.min(a.b)]]}),this.pollData&&this.pollData.poll&&this.updateDialogVoteForm(this.pollData)}}return t.\u0275fac=function(e){return new(e||t)(b.Ub(u.d),b.Ub(p.k),b.Ub(d.a),b.Ub(i.a),b.Ub(n.h),b.Ub(c.f),b.Ub(n.a))},t.\u0275cmp=b.Ob({type:t,selectors:[["os-motion-poll-dialog"]],viewQuery:function(t,e){var o;1&t&&b.ad(y,!0),2&t&&b.Ec(o=b.jc())&&(e.pollForm=o.first)},features:[b.Eb],decls:12,vars:12,consts:[[3,"data","pollService","percentBases"],["pollForm",""],[4,"ngIf"],["mat-dialog-actions",""],["mat-button","",3,"disabled","click"],["mat-button","",3,"mat-dialog-close"],["mat-dialog-content","",1,"os-form-card-mobile"],[3,"formGroup"],["inputType","number","formControlName","Y",3,"placeholder","checkboxValue","checkboxLabel"],["inputType","number","formControlName","N",3,"placeholder","checkboxValue","checkboxLabel"],["inputType","number","formControlName","A",3,"placeholder","checkboxValue","checkboxLabel"],["inputType","number","formControlName","votesvalid",3,"placeholder"],["inputType","number","formControlName","votesinvalid",3,"placeholder"],["inputType","number","formControlName","votescast",3,"placeholder"],[3,"ngModel","ngModelChange","change"]],template:function(t,e){if(1&t&&(b.Vb(0,"os-poll-form",0,1),b.Rc(2,P,19,32,"ng-container",2),b.ac(3,"div",3),b.ac(4,"button",4),b.ic("click",(function(){return e.submitPoll()})),b.ac(5,"span"),b.Tc(6),b.nc(7,"translate"),b.Zb(),b.Zb(),b.ac(8,"button",5),b.ac(9,"span"),b.Tc(10),b.nc(11,"translate"),b.Zb(),b.Zb(),b.Zb()),2&t){const t=b.Fc(1);b.uc("data",e.pollData)("pollService",e.motionPollService)("percentBases",e.PercentBaseVerbose),b.Hb(2),b.uc("ngIf","analog"===t.contentForm.get("type").value),b.Hb(2),b.uc("disabled",t.contentForm.invalid||e.dialogVoteForm.invalid),b.Hb(2),b.Uc(b.oc(7,8,"Save")),b.Hb(2),b.uc("mat-dialog-close",!1),b.Hb(2),b.Uc(b.oc(11,10,"Cancel"))}},directives:[s.a,f.t,n.c,h.b,n.d,n.f,c.I,c.t,c.k,m.a,c.s,c.i,g.a,c.v,v.b],pipes:[p.j],styles:[""]}),t})()},g4jF:function(t,e,o){"use strict";o.d(e,"a",(function(){return u}));var c=o("mrSG"),n=o("2Vo4"),a=o("Cfvw"),i=o("pLZG"),l=o("lJxs"),s=o("g96W"),r=o("mV3u"),b=o("fXoL");let u=(()=>{class t extends r.a{constructor(t,e,o,c,a,i,l,r,b,u){super(t,e,o),this.translate=e,this.repo=c,this.route=a,this.groupRepo=i,this.promptService=l,this.pollDialog=r,this.pollService=b,this.votesRepo=u,this.userGroups=[],this.groupObservable=null,this.voteOptionStyle={Y:{css:"yes",icon:"thumb_up"},N:{css:"no",icon:"thumb_down"},A:{css:"abstain",icon:"trip_origin"}},this.poll=null,this.labels=[],this.chartDataSubject=new n.a(null),this.optionsLoaded=new s.a,this.setup()}setup(){return Object(c.a)(this,void 0,void 0,(function*(){yield this.optionsLoaded,this.votesRepo.getViewModelListObservable().pipe(Object(i.a)(()=>this.poll&&this.canSeeVotes),Object(l.a)(t=>t.filter(t=>t.option.poll_id===this.poll.id)),Object(i.a)(t=>!!t.length)).subscribe(()=>{this.createVotesData()})}))}ngOnInit(){this.findComponentById(),this.groupObservable=this.groupRepo.getViewModelListObservable(),this.subscriptions.push(this.groupRepo.getViewModelListObservable().subscribe(t=>this.userGroups=t))}deletePoll(){return Object(c.a)(this,void 0,void 0,(function*(){const t=this.translate.instant("Are you sure you want to delete this vote?");(yield this.promptService.open(t))&&this.repo.delete(this.poll).then(()=>this.onDeleted(),this.raiseError)}))}pseudoanonymizePoll(){return Object(c.a)(this,void 0,void 0,(function*(){const t=this.translate.instant("Are you sure you want to anonymize all votes? This cannot be undone.");(yield this.promptService.open(t))&&this.repo.pseudoanonymize(this.poll).catch(this.raiseError)}))}openDialog(t){this.pollDialog.openDialog(t)}onStateChanged(){}get canSeeVotes(){return this.hasPerms&&this.poll.isFinished||this.poll.isPublished}setVotesData(t){this.votesDataObservable=t.every(t=>!t.user)?null:Object(a.a)([t])}initChartData(){this.chartDataSubject.next(this.pollService.generateChartData(this.poll))}findComponentById(){const t=this.route.snapshot.params;t&&t.id&&this.subscriptions.push(this.repo.getViewModelObservable(t.id).subscribe(t=>{t&&(this.poll=t,this.createVotesData(),this.initChartData(),this.optionsLoaded.resolve())}))}}return t.\u0275fac=function(t){b.hc()},t.\u0275dir=b.Pb({type:t,features:[b.Eb]}),t})()},tSYa:function(t,e,o){"use strict";o.r(e),o.d(e,"MotionPollModule",(function(){return nt}));var c=o("ofXK"),n=o("PCNd"),a=o("bVYn"),i=o("tyNb"),l=o("OwvW"),s=o("acQf"),r=o("chQs"),b=o("R+Vs"),u=o("+KbT"),p=o("F48D"),d=o("SHqy"),f=o("ykax"),h=o("g4jF"),m=o("fXoL"),g=o("jhN1"),v=o("sYmb"),y=o("dNgK"),H=o("mksl"),V=o("3Xi6"),P=o("Wp6s"),Z=o("STbY"),w=o("f0Cb"),O=o("bTqV"),S=o("NFeN"),T=o("76GY"),C=o("0Obk"),D=o("dRZP"),k=o("Tp2j");function R(t,e){if(1&t&&(m.ac(0,"h2"),m.Tc(1),m.nc(2,"translate"),m.Zb()),2&t){const t=m.mc();m.Hb(1),m.Wc("",m.oc(2,2,"Motion")," ",t.poll.motion.identifierOrTitle,"")}}function I(t,e){if(1&t&&(m.ac(0,"div",11),m.ac(1,"button",12),m.ac(2,"mat-icon"),m.Tc(3,"more_vert"),m.Zb(),m.Zb(),m.Zb()),2&t){m.mc();const t=m.Fc(9);m.Hb(1),m.uc("matMenuTriggerFor",t)}}function M(t,e){if(1&t&&(m.ac(0,"span"),m.Tc(1),m.nc(2,"translate"),m.Zb()),2&t){const t=m.mc(3);m.Hb(1),m.Vc(" ",m.oc(2,1,t.poll.typeVerbose)," \xb7 ")}}function _(t,e){1&t&&(m.ac(0,"p"),m.Tc(1),m.nc(2,"translate"),m.Zb()),2&t&&(m.Hb(1),m.Uc(m.oc(2,1,"No results yet.")))}function j(t,e){if(1&t&&(m.ac(0,"div"),m.Tc(1),m.nc(2,"translate"),m.Zb()),2&t){const t=e.col;m.Hb(1),m.Vc(" ",m.oc(2,1,t.label)," ")}}function x(t,e){if(1&t&&(m.ac(0,"div"),m.Tc(1),m.Zb()),2&t){const t=m.mc(2).row;m.Hb(1),m.Vc(" ",t.user.getLevelAndNumber()," ")}}function U(t,e){if(1&t&&(m.ac(0,"div"),m.Tc(1),m.nc(2,"translate"),m.Zb()),2&t){const t=m.mc(2).row;m.Hb(1),m.Wc(" ",m.oc(2,2,"Vote weight"),": ",t.user.vote_weight," ")}}function N(t,e){if(1&t&&(m.ac(0,"div"),m.Tc(1),m.ac(2,"div",22),m.Rc(3,x,2,1,"div",2),m.Rc(4,U,3,4,"div",2),m.Zb(),m.Zb()),2&t){const t=m.mc().row,e=m.mc(6);m.Hb(1),m.Vc(" ",t.user.getShortName()," "),m.Hb(2),m.uc("ngIf",t.user.getLevelAndNumber()),m.Hb(1),m.uc("ngIf",e.isVoteWeightActive)}}function F(t,e){1&t&&(m.ac(0,"div"),m.Tc(1),m.nc(2,"translate"),m.Zb()),2&t&&(m.Hb(1),m.Uc(m.oc(2,1,"Anonymous")))}function L(t,e){if(1&t&&(m.ac(0,"div"),m.Rc(1,N,5,3,"div",2),m.Rc(2,F,3,3,"div",2),m.Zb()),2&t){const t=e.row;m.Hb(1),m.uc("ngIf",t.user),m.Hb(1),m.uc("ngIf",!t.user)}}function A(t,e){if(1&t&&(m.ac(0,"div",23),m.ac(1,"div",24),m.ac(2,"mat-icon"),m.Tc(3),m.Zb(),m.Zb(),m.ac(4,"div"),m.Tc(5),m.nc(6,"translate"),m.Zb(),m.Zb()),2&t){const t=e.row,o=m.mc(6);m.Hb(1),m.uc("ngClass",o.voteOptionStyle[t.value].css),m.Hb(2),m.Uc(o.voteOptionStyle[t.value].icon),m.Hb(2),m.Uc(m.oc(6,3,t.valueVerbose))}}function G(t,e){if(1&t&&(m.ac(0,"os-list-view-table",18),m.Rc(1,j,3,3,"div",19),m.Rc(2,L,3,2,"div",20),m.Rc(3,A,7,5,"div",21),m.Zb()),2&t){const t=m.mc(5);m.uc("listObservable",t.votesDataObservable)("columns",t.columnDefinition)("filterProps",t.filterProps)("allowProjector",!1)("fullScreen",!0)("vScrollFixed",-1),m.Hb(1),m.uc("pblNgridHeaderCellDef","*"),m.Hb(1),m.uc("pblNgridCellDef","user"),m.Hb(1),m.uc("pblNgridCellDef","vote")}}function Y(t,e){1&t&&(m.ac(0,"div"),m.Tc(1),m.nc(2,"translate"),m.Zb()),2&t&&(m.Hb(1),m.Vc(" ",m.oc(2,1,"The individual votes were anonymized.")," "))}function z(t,e){if(1&t&&(m.ac(0,"div",16),m.ac(1,"h2"),m.Tc(2),m.nc(3,"translate"),m.Zb(),m.Rc(4,G,4,9,"os-list-view-table",17),m.Rc(5,Y,3,3,"div",2),m.Zb()),2&t){const t=m.mc(4);m.Hb(2),m.Uc(m.oc(3,3,"Single votes")),m.Hb(2),m.uc("ngIf",t.votesDataObservable),m.Hb(1),m.uc("ngIf",!t.votesDataObservable)}}function K(t,e){if(1&t&&(m.ac(0,"div"),m.Vb(1,"os-motion-poll-detail-content",14),m.Rc(2,z,6,5,"div",15),m.Zb()),2&t){const t=m.mc(3);m.Hb(1),m.uc("poll",t.poll)("chartData",t.chartDataSubject),m.Hb(1),m.uc("ngIf","named"===t.poll.type)}}function B(t,e){1&t&&(m.ac(0,"span"),m.Tc(1,", "),m.Zb())}function X(t,e){if(1&t&&(m.ac(0,"span"),m.Tc(1),m.nc(2,"translate"),m.Rc(3,B,2,0,"span",2),m.Zb()),2&t){const t=e.$implicit,o=e.index,c=m.mc(4);m.Hb(1),m.Vc(" ",m.oc(2,2,t.getTitle()),""),m.Hb(2),m.uc("ngIf",o<c.poll.groups.length-1)}}function W(t,e){if(1&t&&(m.ac(0,"small"),m.Tc(1),m.nc(2,"translate"),m.Rc(3,X,4,4,"span",25),m.Zb()),2&t){const t=m.mc(3);m.Hb(1),m.Vc(" ",m.oc(2,2,"Groups"),": "),m.Hb(2),m.uc("ngForOf",t.poll.groups)}}function E(t,e){if(1&t&&(m.Yb(0),m.ac(1,"h1"),m.Tc(2),m.nc(3,"translate"),m.Zb(),m.ac(4,"div"),m.Rc(5,M,3,3,"span",2),m.ac(6,"span"),m.Tc(7),m.nc(8,"translate"),m.Zb(),m.Zb(),m.Rc(9,_,3,3,"p",2),m.Rc(10,K,3,3,"div",2),m.ac(11,"div",13),m.Rc(12,W,4,4,"small",2),m.ac(13,"small"),m.Tc(14),m.nc(15,"translate"),m.nc(16,"translate"),m.Zb(),m.Zb(),m.Xb()),2&t){const t=m.mc(2);m.Hb(2),m.Uc(m.oc(3,8,t.poll.title)),m.Hb(3),m.uc("ngIf","analog"!==t.poll.type),m.Hb(2),m.Vc(" ",m.oc(8,10,t.poll.stateVerbose)," "),m.Hb(2),m.uc("ngIf",!t.poll.hasVotes||!t.poll.stateHasVotes),m.Hb(1),m.uc("ngIf",t.poll.stateHasVotes&&(t.hasPerms()||t.poll.isPublished)),m.Hb(2),m.uc("ngIf",t.poll.groups&&t.poll.type&&"analog"!==t.poll.type),m.Hb(2),m.Wc("",m.oc(15,12,"100% base"),": ",m.oc(16,14,t.poll.percentBaseVerbose),"")}}function q(t,e){if(1&t&&m.Rc(0,E,17,16,"ng-container",2),2&t){const t=m.mc();m.uc("ngIf",t.poll)}}function J(t,e){if(1&t&&m.Vb(0,"os-projector-button",26),2&t){const t=m.mc();m.uc("menuItem",!0)("object",t.poll)}}function Q(t,e){if(1&t){const t=m.bc();m.ac(0,"button",27),m.ic("click",(function(){m.Jc(t);const e=m.mc();return e.openDialog(e.poll)})),m.ac(1,"mat-icon"),m.Tc(2,"edit"),m.Zb(),m.ac(3,"span"),m.Tc(4),m.nc(5,"translate"),m.Zb(),m.Zb()}2&t&&(m.Hb(4),m.Uc(m.oc(5,1,"Edit")))}function $(t,e){if(1&t){const t=m.bc();m.ac(0,"button",27),m.ic("click",(function(){return m.Jc(t),m.mc().pseudoanonymizePoll()})),m.ac(1,"mat-icon"),m.Tc(2,"warning"),m.Zb(),m.ac(3,"span"),m.Tc(4),m.nc(5,"translate"),m.Zb(),m.Zb()}2&t&&(m.Hb(4),m.Uc(m.oc(5,1,"Anonymize votes")))}function tt(t,e){if(1&t){const t=m.bc();m.ac(0,"button",27),m.ic("click",(function(){return m.Jc(t),m.mc().deletePoll()})),m.ac(1,"mat-icon",28),m.Tc(2,"delete"),m.Zb(),m.ac(3,"span"),m.Tc(4),m.nc(5,"translate"),m.Zb(),m.Zb()}2&t&&(m.Hb(4),m.Uc(m.oc(5,1,"Delete")))}let et=(()=>{class t extends h.a{constructor(t,e,o,c,n,a,i,l,s,r,b,u,p){super(t,e,o,c,n,a,i,l,s,r),this.operator=u,this.router=p,this.columnDefinition=[{prop:"user",width:"auto",label:"Participant"},{prop:"vote",width:"auto",label:"Vote"}],this.filterProps=["user.getFullName","valueVerbose"],b.get("users_activate_vote_weight").subscribe(t=>this.isVoteWeightActive=t)}createVotesData(){this.setVotesData(this.poll.options[0].votes)}openDialog(){this.pollDialog.openDialog(this.poll)}onDeleted(){this.router.navigate(["motions",this.poll.motion_id])}hasPerms(){return this.operator.hasPerms(l.b.motionsCanManagePolls)}}return t.\u0275fac=function(e){return new(e||t)(m.Ub(g.d),m.Ub(v.k),m.Ub(y.a),m.Ub(s.a),m.Ub(i.a),m.Ub(b.a),m.Ub(p.a),m.Ub(d.a),m.Ub(f.a),m.Ub(r.a),m.Ub(u.a),m.Ub(l.a),m.Ub(i.f))},t.\u0275cmp=m.Ob({type:t,selectors:[["os-motion-poll-detail"]],features:[m.Eb],decls:15,vars:10,consts:[[3,"goBack","nav"],[1,"title-slot"],[4,"ngIf"],["class","menu-slot",4,"osPerms"],[1,"os-card","spacer-bottom-60"],[3,"ngTemplateOutlet"],["viewTemplate",""],["pollDetailMenu","matMenu"],[3,"menuItem","object",4,"osPerms"],["mat-menu-item","",3,"click",4,"osPerms"],["mat-menu-item","",3,"click",4,"osPerms","osPermsAnd"],[1,"menu-slot"],["type","button","mat-icon-button","",3,"matMenuTriggerFor"],[1,"poll-content"],[3,"poll","chartData"],["class","named-result-table",4,"ngIf"],[1,"named-result-table"],["class","single-votes-table","listStorageKey","motion-poll-vote",3,"listObservable","columns","filterProps","allowProjector","fullScreen","vScrollFixed",4,"ngIf"],["listStorageKey","motion-poll-vote",1,"single-votes-table",3,"listObservable","columns","filterProps","allowProjector","fullScreen","vScrollFixed"],[4,"pblNgridHeaderCellDef"],[4,"pblNgridCellDef"],["class","vote-cell",4,"pblNgridCellDef"],[1,"user-subtitle"],[1,"vote-cell"],[1,"vote-cell-icon-container",3,"ngClass"],[4,"ngFor","ngForOf"],[3,"menuItem","object"],["mat-menu-item","",3,"click"],["color","warn"]],template:function(t,e){if(1&t&&(m.ac(0,"os-head-bar",0),m.ac(1,"div",1),m.Rc(2,R,3,4,"h2",2),m.Zb(),m.Rc(3,I,4,1,"div",3),m.Zb(),m.ac(4,"mat-card",4),m.Wb(5,5),m.Zb(),m.Rc(6,q,1,1,"ng-template",null,6,m.Sc),m.ac(8,"mat-menu",null,7),m.Rc(10,J,1,2,"os-projector-button",8),m.Rc(11,Q,6,3,"button",9),m.Rc(12,$,6,3,"button",10),m.Vb(13,"mat-divider"),m.Rc(14,tt,6,3,"button",9),m.Zb()),2&t){const t=m.Fc(7);m.uc("goBack",!0)("nav",!1),m.Hb(2),m.uc("ngIf",e.poll),m.Hb(1),m.uc("osPerms","motions.can_manage_polls"),m.Hb(2),m.uc("ngTemplateOutlet",t),m.Hb(5),m.uc("osPerms","core.can_manage_projector"),m.Hb(1),m.uc("osPerms","motions.can_manage_polls"),m.Hb(1),m.uc("osPerms","motions.can_manage_polls")("osPermsAnd",e.poll&&"named"===e.poll.type),m.Hb(2),m.uc("osPerms","motions.can_manage_polls")}},directives:[H.a,c.t,V.a,P.a,c.A,Z.f,w.a,O.b,Z.e,S.a,T.a,C.a,D.h,D.c,c.q,c.s,k.a,Z.c],pipes:[v.j],styles:[".yes{color:#4caf50}.no{color:#cc6c5b}.abstain{color:#a6a6a6}.voted-yes{background-color:#4caf50;color:#fff}.voted-no{background-color:#cc6c5b;color:#fff}.voted-abstain{background-color:#a6a6a6;color:#fff}.start-poll-button{color:#4caf50}.stop-poll-button{color:#ff5252}.publish-poll-button{color:#e6b100}.poll-content{text-align:right;display:grid;padding-top:20px}.named-result-table{grid-area:names}.named-result-table .mat-form-field{font-size:14px;width:100%}.named-result-table .vote-cell,.named-result-table .vote-cell .vote-cell-icon-container{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.named-result-table .vote-cell .vote-cell-icon-container{margin-right:7px}.single-votes-table{display:block;height:500px}.single-votes-table .list-view-frame{height:100%}.openslides-theme .pbl-ngrid-no-data{top:10%}"],encapsulation:2,changeDetection:0}),t})();const ot=[{path:"new",component:et},{path:":id",component:et}];let ct=(()=>{class t{}return t.\u0275mod=m.Sb({type:t}),t.\u0275inj=m.Rb({factory:function(e){return new(e||t)},imports:[[i.j.forChild(ot)],i.j]}),t})(),nt=(()=>{class t{}return t.\u0275mod=m.Sb({type:t}),t.\u0275inj=m.Rb({factory:function(e){return new(e||t)},imports:[[c.c,n.a,ct,a.PollsModule]]}),t})()},wL0i:function(t,e,o){"use strict";o.d(e,"a",(function(){return n}));var c=o("mV3u");class n extends c.a{constructor(t,e,o,c){super(t,e,o),this.storage=c,this.canMultiSelect=!1,this._multiSelectMode=!1,this.singleButtonWidth="40px",this.badgeButtonWidth="45px",this.selectedRows=[]}onDataSourceChange(t){this.dataSource=t}toggleMultiSelect(){!this.canMultiSelect||this.isMultiSelect?(this._multiSelectMode=!1,this.deselectAll()):this._multiSelectMode=!0}selectAll(){this.dataSource.selection.select(...this.dataSource.filteredData)}deselectAll(){this.dataSource&&this.dataSource.selection.clear()}get isMultiSelect(){return this._multiSelectMode}}}}]);