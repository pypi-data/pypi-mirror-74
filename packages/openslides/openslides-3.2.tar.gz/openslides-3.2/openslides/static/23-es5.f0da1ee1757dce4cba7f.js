function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _createForOfIteratorHelper(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){c=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(c)throw a}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"1NkQ":function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var i,o=n("+KbT"),a=n("Iab2"),r=n("fXoL"),c=((i=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"saveFile",value:function(t,e,n){var i={};n&&(i.type=n);var o=new Blob([t],i);Object(a.saveAs)(o,e,{autoBOM:!0})}},{key:"validateFileName",value:function(t){return new RegExp(/^[^\\\/\?%\*:\|\"\<\>]*[^\.]+$/i).test(t)}},{key:"convertTo8859_15",value:function(t){for(var e=new Uint8Array(new ArrayBuffer(t.length)),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}}]),t}()).\u0275fac=function(t){return new(t||i)},i.\u0275prov=r.Qb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),s=n("sYmb");function l(t){return void 0!==t.property}function u(t){return void 0!==t.map&&void 0!==t.label}var f,b=((f=function(){function t(e,n,i){_classCallCheck(this,t),this.exporter=e,this.translate=n,this.config=i}return _createClass(t,[{key:"export",value:function(t,e,n){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=o.lineSeparator,r=void 0===a?"\r\n":a,c=o.columnSeparator,s=void 0===c?this.config.instant("general_csv_separator"):c,f=o.encoding,b=void 0===f?this.config.instant("general_csv_encoding"):f,p=[];if(r===s)throw new Error("lineseparator and columnseparator must differ from each other");var d=e.map((function(t){var e;return l(t)?e=t.label?t.label:t.property:u(t)&&(e=t.label),e=i.capitalizeTranslate(e)}));p.push(d);var m=(p=p.concat(t.map((function(t){return e.map((function(e){var n;if(l(e)){var o=t[e.property];n="number"==typeof o?o.toString(10):o?!0===o?"1":!1===o?"0":o.toString():""}else u(e)&&(n=e.map(t));return i.checkCsvTextSafety(n)}))})))).map((function(t){return t.join(s)})).join(r),g="text/csv;charset="+b;this.exporter.saveFile("iso-8859-15"===b?this.exporter.convertTo8859_15(m):m,n,g)}},{key:"checkCsvTextSafety",value:function(t){return t?'"'+t.replace(/"/g,'""').replace(/(\r\n\t|\n|\r\t)/gm,"")+'"':""}},{key:"capitalizeTranslate",value:function(t){var e=t.charAt(0).toUpperCase()+t.slice(1);return this.translate.instant(e)}},{key:"dummyCSVExport",value:function(t,e,n){var i=this,o=this.config.instant("general_csv_separator"),a=[t.map((function(t){return i.translate.instant(t)})).join(o)],r=e.map((function(t){return t.map((function(t){var e="";return t||(e=""),e="number"==typeof t?t.toString(10):"boolean"==typeof t?t?"1":"0":t,i.checkCsvTextSafety(e)})).join(o)})),c=a.concat(r).join("\r\n"),s=this.config.instant("general_csv_encoding");this.exporter.saveFile("iso-8859-15"===s?this.exporter.convertTo8859_15(c):c,n,"text/csv")}}]),t}()).\u0275fac=function(t){return new(t||f)(r.ec(c),r.ec(s.k),r.ec(o.a))},f.\u0275prov=r.Qb({token:f,factory:f.\u0275fac,providedIn:"root"}),f)},ePZ9:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n("pSLD"),o=n("+B0n"),a=n("dOok"),r=n("+KbT"),c=n("1NkQ"),s=n("a9XT"),l=n("rHPv"),u=n("jDC6"),f=n("3Y4h"),b=n("fXoL"),p=n("sYmb"),d=function(){var t=function(){function t(e,n,i,o,a,r,c){_classCallCheck(this,t),this.csvExport=e,this.translate=n,this.configService=i,this.linenumberingService=o,this.changeRecoRepo=a,this.motionRepo=r,this.commentRepo=c}return _createClass(t,[{key:"createText",value:function(t,e){var n=this.configService.instant("motions_line_length"),i=Object.assign([],this.changeRecoRepo.getChangeRecoOfMotion(t.id)),o=this.motionRepo.getAmendmentsInstantly(t.id);if(o){var a,r=_createForOfIteratorHelper(o);try{for(r.s();!(a=r.n()).done;){var c,s=a.value,l=this.changeRecoRepo.getChangeRecoOfMotion(s.id).filter((function(t){return t.showInFinalView()})),u=_createForOfIteratorHelper(this.motionRepo.getAmendmentAmendedParagraphs(s,n,l));try{for(u.s();!(c=u.n()).done;){var f=c.value;i.push(f)}}catch(p){u.e(p)}finally{u.f()}}}catch(p){r.e(p)}finally{r.f()}}i.sort((function(t,e){return t.getLineFrom()-e.getLineFrom()}));var b=this.motionRepo.formatMotion(t.id,e,i,n);return this.linenumberingService.stripLineNumbers(b)}},{key:"exportMotionList",value:function(t,e,n,i){var o=this;i||(i=this.configService.instant("motions_recommendation_text_mode"));var a=Object(f.j)(["identifier","title"].concat(e)).map((function(t){return"recommendation"===t?{label:"recommendation",map:function(t){return o.motionRepo.getExtendedRecommendationLabel(t)}}:"state"===t?{label:"state",map:function(t){return o.motionRepo.getExtendedStateLabel(t)}}:"text"===t?{label:"Text",map:function(t){return o.createText(t,i)}}:"motion_block"===t?{label:"Motion block",map:function(t){return t.motion_block?t.motion_block.getTitle():""}}:{property:t}}));a.push.apply(a,_toConsumableArray(n.map((function(t){return{label:o.commentRepo.getViewModel(t).getTitle(),map:function(e){var n=o.commentRepo.getViewModel(t),i=e.getCommentForSection(n);return i&&i.comment?Object(l.a)(Object(u.a)(i.comment)):""}}})))),this.csvExport.export(t,a,this.translate.instant("Motions")+".csv")}},{key:"exportCallList",value:function(t){var e=this;this.csvExport.export(t,[{label:"Called",map:function(t){return t.sort_parent_id?"":t.identifierOrTitle}},{label:"Called with",map:function(t){return t.sort_parent_id?t.identifierOrTitle:""}},{label:"submitters",map:function(t){return t.submittersAsUsers.map((function(t){return t.short_name})).join(",")}},{property:"title"},{label:"recommendation",map:function(t){return t.recommendation?e.motionRepo.getExtendedRecommendationLabel(t):""}},{property:"motion_block",label:"Motion block"}],this.translate.instant("Call list")+".csv")}},{key:"exportDummyMotion",value:function(){this.csvExport.dummyCSVExport(["Identifier","Submitters","Title","Text","Reason","Category","Tags","Motion block","Origin"],[["A1","Submitter A","Title 1","Text 1","Reason 1","Category A","Tag 1, Tag 2","Block A","Last Year Conference A"],["B1","Submitter B","Title 2","Text 2","Reason 2","Category B",null,"Block A","Origin B"],["C2",null,"Title 3","Text 3",null,null,null,null,null]],this.translate.instant("motions-example")+".csv")}}]),t}();return t.\u0275fac=function(e){return new(e||t)(b.ec(c.a),b.ec(p.k),b.ec(r.a),b.ec(s.a),b.ec(i.a),b.ec(a.a),b.ec(o.a))},t.\u0275prov=b.Qb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},mksl:function(t,e,n){"use strict";n.d(e,"a",(function(){return E}));var i=n("fXoL"),o=n("VR2Q"),a=n("7dBR"),r=n("gsQk"),c=n("KL36"),s=n("tyNb"),l=n("/t3+"),u=n("ofXK"),f=n("bTqV"),b=n("NFeN"),p=n("Qu3c"),d=n("sYmb");function m(t,e){if(1&t){var n=i.bc();i.ac(0,"button",12),i.ic("click",(function(){return i.Jc(n),i.mc().clickHamburgerMenu()})),i.ac(1,"mat-icon"),i.Tc(2,"menu"),i.Zb(),i.Zb()}}function g(t,e){if(1&t){var n=i.bc();i.ac(0,"button",12),i.ic("click",(function(){return i.Jc(n),i.mc().onBackButton()})),i.ac(1,"mat-icon"),i.Tc(2,"arrow_back"),i.Zb(),i.Zb()}}function h(t,e){if(1&t){var n=i.bc();i.ac(0,"button",12),i.ic("click",(function(){i.Jc(n);var t=i.mc();return t.isCancelEditUsed?t.sendCancelEditEvent():t.sendMainEvent()})),i.ac(1,"mat-icon"),i.Tc(2,"close"),i.Zb(),i.Zb()}}function v(t,e){1&t&&(i.ac(0,"div",13),i.sc(1,1),i.Zb())}function y(t,e){1&t&&i.Vb(0,"div",6)}function C(t,e){1&t&&(i.ac(0,"div",14),i.sc(1,2),i.Zb())}function k(t,e){if(1&t){var n=i.bc();i.ac(0,"button",12),i.ic("click",(function(){return i.Jc(n),i.mc().openSearch()})),i.ac(1,"mat-icon"),i.Tc(2,"search"),i.Zb(),i.Zb()}}function _(t,e){if(1&t){var n=i.bc();i.ac(0,"button",15),i.ic("click",(function(){return i.Jc(n),i.mc().sendMainEvent()})),i.nc(1,"translate"),i.ac(2,"mat-icon"),i.Tc(3),i.Zb(),i.Zb()}if(2&t){var o=i.mc();i.vc("matTooltip",i.oc(1,3,o.mainActionTooltip)),i.uc("disabled",!o.isMainButtonEnabled),i.Hb(3),i.Uc(o.mainButtonIcon)}}function x(t,e){if(1&t){var n=i.bc();i.ac(0,"button",16),i.ic("click",(function(){return i.Jc(n),i.mc().save()})),i.ac(1,"strong",17),i.Tc(2),i.nc(3,"translate"),i.Zb(),i.Zb()}if(2&t){var o=i.mc();i.uc("disabled",!o.isSaveButtonEnabled),i.Hb(2),i.Uc(i.oc(3,2,o.saveText))}}function T(t,e){1&t&&i.sc(0,3,["*ngIf","!editMode"])}function O(t,e){1&t&&(i.ac(0,"mat-icon"),i.Tc(1," add "),i.Zb())}function M(t,e){if(1&t&&(i.ac(0,"mat-icon"),i.Tc(1),i.Zb()),2&t){var n=i.mc(2);i.Hb(1),i.Vc(" ",n.mainButtonIcon," ")}}function S(t,e){if(1&t){var n=i.bc();i.ac(0,"button",18),i.ic("click",(function(){return i.Jc(n),i.mc().sendMainEvent()})),i.nc(1,"translate"),i.Rc(2,O,2,0,"mat-icon",10),i.Rc(3,M,2,1,"mat-icon",10),i.Zb()}if(2&t){var o=i.mc();i.vc("matTooltip",i.oc(1,4,o.mainActionTooltip)),i.uc("disabled",!o.isMainButtonEnabled),i.Hb(2),i.uc("ngIf","add_circle"===o.mainButtonIcon),i.Hb(1),i.uc("ngIf","add_circle"!==o.mainButtonIcon)}}var F=[[["",8,"extra-controls-slot"]],[["",8,"title-slot"]],[["",8,"central-info-slot"]],[["",8,"menu-slot"]]],w=[".extra-controls-slot",".title-slot",".central-info-slot",".menu-slot"],E=function(){var t=function(){function t(e,n,o,a,r,c){_classCallCheck(this,t),this.vp=e,this.menu=n,this.router=o,this.route=a,this.routingState=r,this.overlayService=c,this.nav=!0,this.mainButtonIcon="add_circle",this.saveText="Save",this.editMode=!1,this.isSearchEnabled=!0,this.isSaveButtonEnabled=!0,this.multiSelectMode=!1,this.hasMainButton=!1,this.isMainButtonEnabled=!0,this.goBack=!1,this.prevUrl="../",this.mainEvent=new i.p,this.cancelEditEvent=new i.p,this.isCancelEditUsed=!1,this.saveEvent=new i.p}return _createClass(t,[{key:"ngOnInit",value:function(){this.isCancelEditUsed=this.cancelEditEvent.observers.length>0}},{key:"sendMainEvent",value:function(){this.mainEvent.next()}},{key:"sendCancelEditEvent",value:function(){this.cancelEditEvent.next()}},{key:"clickHamburgerMenu",value:function(){this.menu.toggleMenu()}},{key:"save",value:function(){this.saveEvent.next(!0)}},{key:"openSearch",value:function(){this.overlayService.showSearch()}},{key:"onBackButton",value:function(){this.goBack?this.routingState.goBack():this.router.navigate(this.routingState.customOrigin&&this.routingState.customOrigin!==this.router.url?[this.routingState.customOrigin]:[this.prevUrl],{relativeTo:this.route})}},{key:"showBackButton",get:function(){return!this.nav&&!this.multiSelectMode&&(this.routingState.isSafePrevUrl||!this.goBack)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Ub(c.a),i.Ub(o.a),i.Ub(s.f),i.Ub(s.a),i.Ub(r.a),i.Ub(a.a))},t.\u0275cmp=i.Ob({type:t,selectors:[["os-head-bar"]],inputs:{nav:"nav",mainButtonIcon:"mainButtonIcon",saveText:"saveText",editMode:"editMode",isSearchEnabled:"isSearchEnabled",isSaveButtonEnabled:"isSaveButtonEnabled",multiSelectMode:"multiSelectMode",hasMainButton:"hasMainButton",isMainButtonEnabled:"isMainButtonEnabled",goBack:"goBack",prevUrl:"prevUrl",mainActionTooltip:"mainActionTooltip"},outputs:{mainEvent:"mainEvent",cancelEditEvent:"cancelEditEvent",saveEvent:"saveEvent"},ngContentSelectors:w,decls:16,vars:12,consts:[["color","primary",1,"sticky-toolbar",3,"ngClass"],[1,"toolbar-left"],["mat-icon-button","",3,"click",4,"ngIf"],["class","toolbar-left-text",4,"ngIf"],["class","spacer",4,"ngIf"],["class","toolbar-centered",4,"ngIf"],[1,"spacer"],[1,"toolbar-right"],["mat-icon-button","",3,"disabled","matTooltip","click",4,"ngIf"],["mat-button","",3,"disabled","click",4,"ngIf"],[4,"ngIf"],["mat-fab","","class","head-button",3,"disabled","matTooltip","click",4,"ngIf"],["mat-icon-button","",3,"click"],[1,"toolbar-left-text"],[1,"toolbar-centered"],["mat-icon-button","",3,"disabled","matTooltip","click"],["mat-button","",3,"disabled","click"],[1,"upper"],["mat-fab","",1,"head-button",3,"disabled","matTooltip","click"]],template:function(t,e){1&t&&(i.tc(F),i.ac(0,"mat-toolbar",0),i.ac(1,"div",1),i.Rc(2,m,3,0,"button",2),i.Rc(3,g,3,0,"button",2),i.Rc(4,h,3,0,"button",2),i.Rc(5,v,2,0,"div",3),i.Zb(),i.Rc(6,y,1,0,"div",4),i.Rc(7,C,2,0,"div",5),i.Vb(8,"div",6),i.Rc(9,k,3,0,"button",2),i.ac(10,"div",7),i.sc(11),i.Rc(12,_,4,5,"button",8),i.Rc(13,x,4,4,"button",9),i.Rc(14,T,1,0,void 0,10),i.Zb(),i.Zb(),i.Rc(15,S,4,6,"button",11)),2&t&&(i.uc("ngClass",e.multiSelectMode?"multi-select":""),i.Hb(2),i.uc("ngIf",e.vp.isMobile&&!e.showBackButton&&!e.editMode),i.Hb(1),i.uc("ngIf",e.showBackButton&&!e.editMode),i.Hb(1),i.uc("ngIf",e.editMode),i.Hb(1),i.uc("ngIf",!e.multiSelectMode),i.Hb(1),i.uc("ngIf",!e.multiSelectMode),i.Hb(1),i.uc("ngIf",e.multiSelectMode),i.Hb(2),i.uc("ngIf",!e.editMode&&e.isSearchEnabled),i.Hb(3),i.uc("ngIf",e.hasMainButton&&!e.editMode&&!e.vp.isMobile&&!e.multiSelectMode),i.Hb(1),i.uc("ngIf",e.editMode),i.Hb(1),i.uc("ngIf",!e.editMode),i.Hb(1),i.uc("ngIf",e.hasMainButton&&!e.editMode&&e.vp.isMobile&&!e.multiSelectMode))},directives:[l.a,u.q,u.t,f.b,b.a,p.c],pipes:[d.j],styles:[".head-button{position:fixed;z-index:10;right:20px;bottom:55px}.sticky-toolbar{top:0;z-index:5;position:-webkit-sticky;position:sticky;height:64px!important}.sticky-toolbar .toolbar-left{display:-ms-flexbox;display:flex;max-width:calc(100% - 100px)}.sticky-toolbar .toolbar-left button{margin:12px 0}.sticky-toolbar .toolbar-left .toolbar-left-text{margin-left:10px;width:100%;overflow:hidden}.sticky-toolbar .toolbar-left .toolbar-left-text .title-slot{margin:16px 0;display:block}.sticky-toolbar .toolbar-left .toolbar-left-text .title-slot h2{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.sticky-toolbar .toolbar-centered{margin:auto;vertical-align:baseline}.sticky-toolbar .toolbar-right,.sticky-toolbar .toolbar-right .extra-controls-slot{display:-ms-flexbox;display:flex}mat-toolbar.multi-select{background-color:#757575!important}"],encapsulation:2}),t}()},rHPv:function(t,e,n){"use strict";function i(t){return t.replace(/&auml;|&#228;/g,"\xe4").replace(/&Auml;|&#196;/g,"\xc4").replace(/&ouml;|&#246;/g,"\xf6").replace(/&Ouml;|&#214;/g,"\xd6").replace(/&uuml;/g,"\xfc").replace(/&Uuml;/g,"\xdc").replace(/&aring;|&#229;/g,"\xe5").replace(/&Aring;|&#197;/g,"\xc5").replace(/&szlig;|&#223;/g,"\xdf")}n.d(e,"a",(function(){return i}))},ssNq:function(t,e,n){"use strict";n.r(e),n.d(e,"CallListModule",(function(){return N}));var i=n("ofXK"),o=n("PCNd"),a=n("tyNb"),r=n("+QJK"),c=n("mrSG"),s=n("2Vo4"),l=n("iTQr"),u=n("dOok"),f=n("lv9T"),b=n("F48D"),p=n("Qy/R"),d=n("ePZ9"),m=n("y50V"),g=n("fXoL"),h=n("jhN1"),v=n("sYmb"),y=n("dNgK"),C=n("mksl"),k=n("bTqV"),_=n("STbY"),x=n("NFeN"),T=n("Wp6s"),O=n("/tkw"),M=n("f0Cb"),S=n("TU8p");function F(t,e){if(1&t){var n=g.bc();g.ac(0,"div",17),g.ac(1,"div"),g.ac(2,"span"),g.Tc(3),g.nc(4,"translate"),g.Zb(),g.Tc(5,":\xa0 "),g.Zb(),g.ac(6,"div"),g.ac(7,"button",18),g.ic("click",(function(){return g.Jc(n),g.mc().resetFilters()})),g.ac(8,"mat-icon",19),g.Tc(9,"cancel"),g.Zb(),g.ac(10,"span"),g.Tc(11),g.nc(12,"translate"),g.Zb(),g.Zb(),g.Zb(),g.Zb()}2&t&&(g.Hb(3),g.Uc(g.oc(4,2,"Active filters")),g.Hb(8),g.Uc(g.oc(12,4,"Clear all")))}function w(t,e){if(1&t&&(g.ac(0,"div"),g.ac(1,"button",20),g.ac(2,"span",21),g.Tc(3),g.nc(4,"translate"),g.Zb(),g.Zb(),g.Zb()),2&t){var n=g.mc(),i=g.Fc(23);g.Hb(1),g.uc("matMenuTriggerFor",i),g.Hb(1),g.uc("matBadge",n.activeCatFilterCount>0?n.activeCatFilterCount:null)("matBadgeOverlap",!1),g.Hb(1),g.Vc(" ",g.oc(4,4,"Categories")," ")}}function E(t,e){if(1&t&&(g.ac(0,"div"),g.ac(1,"button",20),g.ac(2,"span",21),g.Tc(3),g.nc(4,"translate"),g.Zb(),g.Zb(),g.Zb()),2&t){var n=g.mc(),i=g.Fc(26);g.Hb(1),g.uc("matMenuTriggerFor",i),g.Hb(1),g.uc("matBadge",n.activeTagFilterCount>0?n.activeTagFilterCount:null)("matBadgeOverlap",!1),g.Hb(1),g.Vc(" ",g.oc(4,4,"Tags")," ")}}function R(t,e){1&t&&(g.ac(0,"mat-icon"),g.Tc(1,"checked"),g.Zb())}function Z(t,e){if(1&t){var n=g.bc();g.ac(0,"div"),g.ac(1,"button",16),g.ic("click",(function(){g.Jc(n);var t=e.$implicit;return g.mc().onFilterChange("category",t.id)})),g.Rc(2,R,2,0,"mat-icon",8),g.ac(3,"span"),g.Tc(4),g.Zb(),g.Zb(),g.Zb()}if(2&t){var i=e.$implicit;g.Hb(2),g.uc("ngIf",i.state),g.Hb(2),g.Uc(i.label)}}function I(t,e){1&t&&(g.ac(0,"mat-icon"),g.Tc(1,"checked"),g.Zb())}function B(t,e){if(1&t){var n=g.bc();g.ac(0,"div"),g.ac(1,"button",16),g.ic("click",(function(){g.Jc(n);var t=e.$implicit;return g.mc().onFilterChange("tag",t.id)})),g.Rc(2,I,2,0,"mat-icon",8),g.ac(3,"span"),g.Tc(4),g.Zb(),g.Zb(),g.Zb()}if(2&t){var i=e.$implicit;g.Hb(2),g.uc("ngIf",i.state),g.Hb(2),g.Uc(i.label)}}function P(t,e){if(1&t&&(g.ac(0,"span"),g.ac(1,"mat-icon",19),g.Tc(2,"local_offer"),g.Zb(),g.Tc(3),g.Zb()),2&t){var n=e.$implicit;g.Hb(3),g.Vc(" ",n.getTitle()," ")}}function H(t,e){if(1&t&&(g.ac(0,"div",22),g.ac(1,"div",23),g.Tc(2),g.Zb(),g.ac(3,"div",24),g.Rc(4,P,4,1,"span",10),g.Zb(),g.Zb()),2&t){var n=e.item,i=g.mc();g.Hb(2),g.Vc(" ",n.getTitle()," "),g.Hb(2),g.uc("ngForOf",i.getTags(n))}}var A,U,j,L=[{path:"",component:(A=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,o,a,r,c,l,u,f){var b;return _classCallCheck(this,n),(b=e.call(this,t,i,o,f)).translate=i,b.motionRepo=a,b.motionCsvExport=r,b.motionPdfExport=c,b.tagRepo=l,b.categoryRepo=u,b.motions=[],b.hasChanged=!1,b.tagFilterOptions=[],b.activeTagFilterCount=0,b.categoryFilterOptions=[],b.activeCatFilterCount=0,b.activeTagFilters=new s.a([]),b.activeCatFilters=new s.a([]),b.motionsObservable=b.motionRepo.getViewModelListObservable(),b.motionsObservable.subscribe((function(t){b.motions=t.map((function(t){return t})).sort((function(t,e){return t.weight-e.weight}))})),b}return _createClass(n,[{key:"ngOnInit",value:function(){var t=this;this.subscriptions.push(this.activeTagFilters.subscribe((function(e){return t.onSubscribedFilterChange("tag",e)}))),this.subscriptions.push(this.activeCatFilters.subscribe((function(e){return t.onSubscribedFilterChange("category",e)}))),this.subscriptions.push(this.tagRepo.getViewModelListBehaviorSubject().subscribe((function(e){e&&e.length?(t.tagFilterOptions=e.map((function(e){return{label:e.name,id:e.id,state:t.tagFilterOptions&&t.tagFilterOptions.some((function(t){return t.id===e.id&&!0===t.state}))}})),t.tagFilterOptions.push({label:t.translate.instant("No tags"),id:0,state:t.tagFilterOptions&&t.tagFilterOptions.some((function(t){return 0===t.id&&!0===t.state}))})):t.tagFilterOptions=[]}))),this.subscriptions.push(this.categoryRepo.getViewModelListBehaviorSubject().subscribe((function(e){e&&e.length?(t.categoryFilterOptions=e.map((function(e){return{label:e.prefixedName,id:e.id,state:t.categoryFilterOptions&&t.categoryFilterOptions.some((function(t){return t.id===e.id&&!0===t.state}))}})),t.categoryFilterOptions.push({label:t.translate.instant("No category"),id:0,state:t.categoryFilterOptions&&t.categoryFilterOptions.some((function(t){return 0===t.id&&!0===t.state}))})):t.categoryFilterOptions=[]})))}},{key:"onSave",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.motionRepo.sortMotions(this.osSortTree.getTreeData()).then((function(){return e.osSortTree.setSubscription()}),this.raiseError);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"onCancel",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.canDeactivate();case 2:if(t.t0=t.sent,!t.t0){t.next=5;break}this.osSortTree.setSubscription();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"receiveChanges",value:function(t){this.hasChanged=t}},{key:"csvExportCallList",value:function(){this.motionCsvExport.exportCallList(this.motions)}},{key:"pdfExportCallList",value:function(){this.motionPdfExport.exportPdfCallList(this.motions)}},{key:"getTags",value:function(t){var e=this.motionRepo.getViewModel(t.id);return e?e.tags:[]}},{key:"onFilterChange",value:function(t,e){var n="tag"===t?this.activeTagFilters.value:this.activeCatFilters.value;n.includes(e)?n.splice(n.indexOf(e),1):n.push(e),"tag"===t?this.activeTagFilters.next(n):this.activeCatFilters.next(n)}},{key:"resetFilters",value:function(){this.activeTagFilters.next([]),this.activeCatFilters.next([])}},{key:"sortMotionsByIdentifier",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.translate.instant("Do you really want to go ahead?"),n=this.translate.instant("This will reset all made changes and sort the call list."),t.next=3,this.promptService.open(e,n);case 3:if(t.t0=t.sent,!t.t0){t.next=6;break}this.forceSort.emit("identifier");case 6:case"end":return t.stop()}}),t,this)})))}},{key:"onSubscribedFilterChange",value:function(t,e){"tag"===t?(this.activeTagFilterCount=e.length,this.tagFilterOptions.forEach((function(t){t.state=e&&e.some((function(e){return e===t.id}))}))):(this.activeCatFilterCount=e.length,this.categoryFilterOptions.forEach((function(t){t.state=e&&e.some((function(e){return e===t.id}))}))),this.hasActiveFilter=this.activeCatFilterCount>0||this.activeTagFilterCount>0;var n=this.tagFilterOptions.filter((function(t){return!0===t.state})),i=this.categoryFilterOptions.filter((function(t){return!0===t.state}));this.changeFilter.emit((function(t){if(n.length)if(t.tags&&t.tags.length){if(!t.tags.some((function(t){return n.some((function(e){return e.id===t.id}))})))return!0}else if(!n.some((function(t){return 0===t.id})))return!0;if(i.length){var e=t.category_id||0;return!i.some((function(t){return t.id===e}))}return!1}))}}]),n}(p.a),A.\u0275fac=function(t){return new(t||A)(g.Ub(h.d),g.Ub(v.k),g.Ub(y.a),g.Ub(u.a),g.Ub(d.a),g.Ub(m.a),g.Ub(f.a),g.Ub(l.a),g.Ub(b.a))},A.\u0275cmp=g.Ob({type:A,selectors:[["os-call-list"]],features:[g.Eb],decls:54,vars:28,consts:[["prevUrl","../..",3,"nav","editMode","mainEvent","saveEvent"],[1,"title-slot"],[1,"menu-slot"],["type","button","mat-icon-button","",3,"matMenuTriggerFor"],[1,"custom-table-header","flex-spaced"],[1,"filter-count"],["class","current-filters",4,"ngIf"],[1,"flex-spaced","margin-right-5"],[4,"ngIf"],["catFilterMenu","matMenu"],[4,"ngFor","ngForOf"],["tagFilterMenu","matMenu"],["parentKey","sort_parent_id","weightKey","weight",3,"model","filterChange","sortingDefinition","visibleNodes","hasChanged"],["osSortedTree",""],["innerNode",""],["mainMenu","matMenu"],["mat-menu-item","",3,"click"],[1,"current-filters"],["mat-button","",3,"click"],["inline",""],["mat-button","",3,"matMenuTriggerFor"],["matBadgeColor","accent",1,"upper",3,"matBadge","matBadgeOverlap"],[1,"line"],[1,"left"],[1,"right"]],template:function(t,e){if(1&t&&(g.ac(0,"os-head-bar",0),g.ic("mainEvent",(function(){return e.onCancel()}))("saveEvent",(function(){return e.onSave()})),g.ac(1,"div",1),g.ac(2,"h2"),g.Tc(3),g.nc(4,"translate"),g.Zb(),g.Zb(),g.ac(5,"div",2),g.ac(6,"button",3),g.ac(7,"mat-icon"),g.Tc(8,"more_vert"),g.Zb(),g.Zb(),g.Zb(),g.Zb(),g.ac(9,"div",4),g.ac(10,"div",5),g.ac(11,"span"),g.Tc(12),g.Zb(),g.ac(13,"span"),g.Tc(14),g.nc(15,"translate"),g.Zb(),g.ac(16,"span"),g.Tc(17),g.Zb(),g.Zb(),g.Rc(18,F,13,6,"div",6),g.ac(19,"div",7),g.Rc(20,w,5,6,"div",8),g.Rc(21,E,5,6,"div",8),g.Zb(),g.Zb(),g.ac(22,"mat-menu",null,9),g.Rc(24,Z,5,2,"div",10),g.Zb(),g.ac(25,"mat-menu",null,11),g.Rc(27,B,5,2,"div",10),g.Zb(),g.ac(28,"mat-card"),g.ac(29,"os-sorting-tree",12,13),g.ic("visibleNodes",(function(t){return e.onChangeAmountOfItems(t)}))("hasChanged",(function(t){return e.receiveChanges(t)})),g.Rc(31,H,5,2,"ng-template",null,14,g.Sc),g.Zb(),g.Zb(),g.ac(33,"mat-menu",null,15),g.ac(35,"button",16),g.ic("click",(function(){return e.sortMotionsByIdentifier()})),g.ac(36,"mat-icon"),g.Tc(37,"sort"),g.Zb(),g.ac(38,"span"),g.Tc(39),g.nc(40,"translate"),g.Zb(),g.Zb(),g.Vb(41,"mat-divider"),g.ac(42,"button",16),g.ic("click",(function(){return e.pdfExportCallList()})),g.ac(43,"mat-icon"),g.Tc(44,"picture_as_pdf"),g.Zb(),g.ac(45,"span"),g.Tc(46),g.nc(47,"translate"),g.Zb(),g.Zb(),g.ac(48,"button",16),g.ic("click",(function(){return e.csvExportCallList()})),g.ac(49,"mat-icon"),g.Tc(50,"archive"),g.Zb(),g.ac(51,"span"),g.Tc(52),g.nc(53,"translate"),g.Zb(),g.Zb(),g.Zb()),2&t){var n=g.Fc(34);g.uc("nav",!1)("editMode",e.hasChanged),g.Hb(3),g.Uc(g.oc(4,18,"Call list")),g.Hb(3),g.uc("matMenuTriggerFor",n),g.Hb(6),g.Vc(" ",e.seenNodes[0],"\xa0"),g.Hb(2),g.Uc(g.oc(15,20,"of")),g.Hb(3),g.Vc("\xa0",e.seenNodes[1],""),g.Hb(1),g.uc("ngIf",e.hasActiveFilter),g.Hb(2),g.uc("ngIf",e.categoryFilterOptions.length),g.Hb(1),g.uc("ngIf",e.tagFilterOptions.length),g.Hb(3),g.uc("ngForOf",e.categoryFilterOptions),g.Hb(3),g.uc("ngForOf",e.tagFilterOptions),g.Hb(2),g.uc("model",e.motionsObservable)("filterChange",e.changeFilter)("sortingDefinition",e.forceSort),g.Hb(10),g.Uc(g.oc(40,22,"Sort by identifier")),g.Hb(7),g.Uc(g.oc(47,24,"Export as PDF")),g.Hb(6),g.Uc(g.oc(53,26,"Export as CSV"))}},directives:[C.a,k.b,_.e,x.a,i.t,_.f,i.s,T.a,O.a,_.c,M.a,S.a],pipes:[v.j],styles:[".line[_ngcontent-%COMP%]{display:table;width:100%;font-size:14px;min-height:50px;margin-bottom:5px}.line[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{max-width:100%}.line[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .line[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.line[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{padding-right:10px;width:auto;white-space:nowrap}.margin-right-5[_ngcontent-%COMP%]{margin-right:5px!important}",".filter-menu-head[_ngcontent-%COMP%]{padding-left:5px}.filter-menu-head[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]{margin:0 auto}.filter-menu-head[_ngcontent-%COMP%]:hover{cursor:pointer}.action-buttons[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}.action-buttons[_ngcontent-%COMP%]   os-rounded-input[_ngcontent-%COMP%]{margin:0 10px}@media (max-width:500px){.action-buttons[_ngcontent-%COMP%]   os-rounded-input[_ngcontent-%COMP%]{display:none}}.active-filter[_ngcontent-%COMP%]{white-space:pre}span.right-with-margin[_ngcontent-%COMP%]{margin-right:25px}.filter-count[_ngcontent-%COMP%]{font-style:italic;margin-left:24px;margin-right:5px}.current-filters[_ngcontent-%COMP%]{width:100%;display:-ms-flexbox;display:flex}.current-filters[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inherit}.current-filters[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px;margin:auto 5px;font-size:75%}.current-filters[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:12px;height:12px;width:12px}"]}),A),pathMatch:"full",canDeactivate:[r.a]}],V=((j=function t(){_classCallCheck(this,t)}).\u0275mod=g.Sb({type:j}),j.\u0275inj=g.Rb({factory:function(t){return new(t||j)},imports:[[a.j.forChild(L)],a.j]}),j),N=((U=function t(){_classCallCheck(this,t)}).\u0275mod=g.Sb({type:U}),U.\u0275inj=g.Rb({factory:function(t){return new(t||U)},imports:[[i.c,V,o.a]]}),U)}}]);