function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function _get(t,e,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=_superPropBase(t,e);if(o){var a=Object.getOwnPropertyDescriptor(o,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,o=_getPrototypeOf(t);if(e){var a=_getPrototypeOf(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[9,38],{"76GY":function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var o=n("ykax"),a=n("fXoL"),c=n("ofXK"),r=n("vYAO"),i=n("iCsr"),l=n("sYmb"),s=n("j7f2"),u=n("6ako"),b=n("QUb3");function p(t,e){if(1&t&&(a.ac(0,"os-icon-container",9),a.Tc(1),a.nc(2,"translate"),a.nc(3,"pollKeyVerbose"),a.Zb()),2&t){var n=a.mc().$implicit,o=a.mc(2);a.uc("icon",n.value[0].icon)("size",o.iconSize),a.Hb(1),a.Vc(" ",a.oc(2,3,a.oc(3,5,n.votingOption))," ")}}function f(t,e){if(1&t&&(a.ac(0,"span"),a.Tc(1),a.nc(2,"translate"),a.nc(3,"pollKeyVerbose"),a.Zb()),2&t){var n=a.mc().$implicit;a.Hb(1),a.Vc(" ",a.oc(2,1,a.oc(3,3,n.votingOption))," ")}}function d(t,e){if(1&t&&(a.ac(0,"span"),a.Tc(1),a.nc(2,"pollPercentBase"),a.Zb()),2&t){var n=a.mc().$implicit,o=a.mc(2);a.Hb(1),a.Vc(" ",a.pc(2,1,n.value[0].amount,o.poll)," ")}}function v(t,e){if(1&t&&(a.ac(0,"tr"),a.ac(1,"td"),a.Rc(2,p,4,7,"os-icon-container",6),a.Rc(3,f,4,5,"span",7),a.Zb(),a.ac(4,"td",8),a.Rc(5,d,3,4,"span",7),a.Zb(),a.ac(6,"td",8),a.Tc(7),a.nc(8,"parsePollNumber"),a.Zb(),a.Zb()),2&t){var n=e.$implicit;a.Jb(n.votingOption),a.Hb(2),a.uc("ngIf",n.value[0].icon),a.Hb(1),a.uc("ngIf",!n.value[0].icon),a.Hb(2),a.uc("ngIf",n.value[0].showPercent),a.Hb(2),a.Vc(" ",a.oc(8,6,n.value[0].amount)," ")}}function m(t,e){if(1&t&&(a.ac(0,"div",10),a.Vb(1,"os-charts",11),a.nc(2,"async"),a.Zb()),2&t){var n=a.mc(2);a.Hb(1),a.uc("data",a.oc(2,1,n.chartData))}}function h(t,e){if(1&t&&(a.ac(0,"div",1),a.ac(1,"table",2),a.ac(2,"tbody"),a.ac(3,"tr"),a.Vb(4,"th"),a.ac(5,"th",3),a.Tc(6),a.nc(7,"translate"),a.Zb(),a.Zb(),a.Rc(8,v,9,8,"tr",4),a.Zb(),a.Zb(),a.Rc(9,m,3,3,"div",5),a.Zb()),2&t){var n=a.mc();a.Hb(6),a.Uc(a.oc(7,3,"Votes")),a.Hb(2),a.uc("ngForOf",n.getTableData()),a.Hb(1),a.uc("ngIf",n.showChart)}}var g=function(){var t=function(){function t(e){_classCallCheck(this,t),this.motionPollService=e,this.iconSize="large"}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"getTableData",value:function(){return this.motionPollService.generateTableData(this.poll)}},{key:"hasVotes",get:function(){return this.poll&&!!this.poll.options}},{key:"showChart",get:function(){return this.motionPollService.showChart(this.poll)&&this.chartData&&!!this.chartData.value}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Ub(o.a))},t.\u0275cmp=a.Ob({type:t,selectors:[["os-motion-poll-detail-content"]],inputs:{poll:"poll",chartData:"chartData",iconSize:"iconSize"},decls:1,vars:1,consts:[["class","result-wrapper",4,"ngIf"],[1,"result-wrapper"],[1,"result-table"],["colspan","2"],[3,"class",4,"ngFor","ngForOf"],["class","doughnut-chart",4,"ngIf"],[3,"icon","size",4,"ngIf"],[4,"ngIf"],[1,"result-cell-definition"],[3,"icon","size"],[1,"doughnut-chart"],["type","doughnut",3,"data"]],template:function(t,e){1&t&&a.Rc(0,h,10,5,"div",0),2&t&&a.uc("ngIf",e.hasVotes)},directives:[c.t,c.s,r.a,i.a],pipes:[l.j,s.a,u.a,b.a,c.b],styles:[".yes[_ngcontent-%COMP%]{color:#4caf50}.no[_ngcontent-%COMP%]{color:#cc6c5b}.abstain[_ngcontent-%COMP%]{color:#a6a6a6}.voted-yes[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.voted-no[_ngcontent-%COMP%]{background-color:#cc6c5b;color:#fff}.voted-abstain[_ngcontent-%COMP%]{background-color:#a6a6a6;color:#fff}.start-poll-button[_ngcontent-%COMP%]{color:#4caf50}.stop-poll-button[_ngcontent-%COMP%]{color:#ff5252}.publish-poll-button[_ngcontent-%COMP%]{color:#e6b100}.result-wrapper[_ngcontent-%COMP%]{display:grid;grid-gap:2em;margin:2em;grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}.result-wrapper[_ngcontent-%COMP%]   .result-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:right;font-weight:400}.result-wrapper[_ngcontent-%COMP%]   .result-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{height:48px;border-bottom:none!important}.result-wrapper[_ngcontent-%COMP%]   .result-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .result-cell-definition[_ngcontent-%COMP%]{text-align:right}.result-wrapper[_ngcontent-%COMP%]   .doughnut-chart[_ngcontent-%COMP%]{display:block}"]}),t}()},DNKu:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n("mrSG"),a=n("TG9O"),c=n("qnZ9"),r=n("Izkr"),i=n("fXoL"),l=n("0IaG"),s=function(){var t=function(){function t(e,n){_classCallCheck(this,t),this.dialog=e,this.mapper=n}return _createClass(t,[{key:"openDialog",value:function(t){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.dialog.open(this.dialogComponent,Object.assign({data:t},r.c)),e.next=3,n.afterClosed().toPromise();case 3:if(!(o=e.sent)){e.next=15;break}if(a=this.mapper.getRepository(t.collectionString),!t.poll){e.next=13;break}return i=o,t.state!==c.e.Created&&(i={title:o.title,onehundred_percent_base:o.onehundred_percent_base,majority_method:o.majority_method,description:o.description},t.type===c.f.Analog&&(i=Object.assign(Object.assign({},i),{votes:o.votes,publish_immediately:o.publish_immediately}))),e.next=11,a.patch(i,t);case 11:e.next=15;break;case 13:return e.next=15,a.create(o);case 15:case"end":return e.stop()}}),e,this)})))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.ec(l.b),i.ec(a.a))},t.\u0275prov=i.Qb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},SHqy:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var o=n("TG9O"),a=n("DNKu"),c=n("cMzF"),r=n("fXoL"),i=n("0IaG"),l=function(){var t=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o){var a;return _classCallCheck(this,n),(a=e.call(this,t,o)).dialogComponent=c.a,a}return n}(a.a);return t.\u0275fac=function(e){return new(e||t)(r.ec(i.b),r.ec(o.a))},t.\u0275prov=r.Qb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},bVYn:function(t,e,n){"use strict";n.r(e),n.d(e,"PollsModule",(function(){return U}));var o,a=n("ofXK"),c=n("tyNb"),r=n("AqIO"),i=n("M0z7"),l=n("wL0i"),s=n("D/ll"),u=n("+8Rz"),b=n("qnZ9"),p=n("fXoL"),f=n("sYmb"),d=((o=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,a){var c;return _classCallCheck(this,n),(c=e.call(this,t,o)).translate=a,c.storageKey="PollList",c}return _createClass(n,[{key:"preFilter",value:function(t){return t.filter((function(t){return!t.isAnalog}))}},{key:"getFilterDefinitions",value:function(){return[{property:"state",label:this.translate.instant("State"),options:[{condition:b.e.Created,label:this.translate.instant("created")},{condition:b.e.Started,label:this.translate.instant("started")},{condition:b.e.Finished,label:this.translate.instant("finished (unpublished)")},{condition:b.e.Published,label:this.translate.instant("published")}]},{property:"hasVote",label:this.translate.instant("Votings"),options:[{condition:!1,label:this.translate.instant("Voting is currently in progress.")},{condition:!0,label:this.translate.instant("You have already voted.")}]}]}}]),n}(u.a)).\u0275fac=function(t){return new(t||o)(p.ec(r.a),p.ec(s.a),p.ec(f.k))},o.\u0275prov=p.Qb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),v=n("PoOO"),m=n("jhN1"),h=n("dNgK"),g=n("mksl"),y=n("0Obk"),_=n("dRZP"),k=n("NFeN"),C=n("Qu3c");function P(t,e){if(1&t&&p.Vb(0,"a",5),2&t){var n=p.mc().row;p.uc("routerLink",n.parentLink)}}function O(t,e){if(1&t&&(p.ac(0,"div",3),p.Rc(1,P,1,1,"a",4),p.ac(2,"span"),p.Tc(3),p.Zb(),p.Zb()),2&t){var n=e.row,o=p.mc();p.Hb(1),p.uc("ngIf",!o.isMultiSelect),p.Hb(2),p.Uc(n.title)}}function w(t,e){if(1&t&&p.Vb(0,"a",5),2&t){var n=p.mc().row;p.uc("routerLink",n.parentLink)}}function H(t,e){if(1&t&&(p.ac(0,"div",3),p.Rc(1,w,1,1,"a",4),p.ac(2,"span"),p.Tc(3),p.Zb(),p.Zb()),2&t){var n=e.row,o=p.mc();p.Hb(1),p.uc("ngIf",!o.isMultiSelect),p.Hb(2),p.Uc(n.getContentObject().getListTitle())}}function S(t,e){if(1&t&&p.Vb(0,"a",5),2&t){var n=p.mc().row;p.uc("routerLink",n.parentLink)}}function T(t,e){if(1&t&&(p.ac(0,"div",3),p.Rc(1,S,1,1,"a",4),p.ac(2,"span"),p.Tc(3),p.nc(4,"translate"),p.Zb(),p.Zb()),2&t){var n=e.row,o=p.mc();p.Hb(1),p.uc("ngIf",!o.isMultiSelect),p.Hb(2),p.Uc(p.oc(4,2,n.stateVerbose))}}function V(t,e){1&t&&(p.ac(0,"mat-icon",8),p.nc(1,"translate"),p.Tc(2," check_circle "),p.Zb()),2&t&&p.vc("matTooltip",p.oc(1,1,"You have already voted."))}function Z(t,e){1&t&&(p.ac(0,"mat-icon",9),p.nc(1,"translate"),p.Tc(2," warning "),p.Zb()),2&t&&p.vc("matTooltip",p.oc(1,1,"Voting is currently in progress."))}function R(t,e){if(1&t&&(p.ac(0,"div",3),p.Rc(1,V,3,3,"mat-icon",6),p.Rc(2,Z,3,3,"mat-icon",7),p.Zb()),2&t){var n=e.row;p.Hb(1),p.uc("ngIf",n.hasVote),p.Hb(1),p.uc("ngIf",!n.hasVote&&null!==n.hasVote)}}var D,I,j,x=[{path:"",component:(D=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,a,c,r,i,l){var s,u;return _classCallCheck(this,n),(u=e.call(this,r,i,l,c)).polls=t,u.filterService=o,u.votingService=a,u.storage=c,u.tableColumnDefinition=[{prop:"title",width:"auto"},{prop:"classType",width:"auto"},{prop:"state",width:"auto"},{prop:"votability",width:"25px"}],u.filterProps=["title","state"],_get((s=_assertThisInitialized(u),_getPrototypeOf(n.prototype)),"setTitle",s).call(s,"List of electronic votes"),u}return n}(l.a),D.\u0275fac=function(t){return new(t||D)(p.Ub(v.a),p.Ub(d),p.Ub(i.b),p.Ub(r.a),p.Ub(m.d),p.Ub(f.k),p.Ub(h.a))},D.\u0275cmp=p.Ob({type:D,selectors:[["os-poll-list"]],features:[p.Eb],decls:9,vars:12,consts:[[1,"title-slot"],["listStorageKey","polls",3,"listObservableProvider","vScrollFixed","columns","filterProps","filterService"],["class","cell-slot fill",4,"pblNgridCellDef"],[1,"cell-slot","fill"],["class","detail-link",3,"routerLink",4,"ngIf"],[1,"detail-link",3,"routerLink"],["color","accent",3,"matTooltip",4,"ngIf"],["color","warn",3,"matTooltip",4,"ngIf"],["color","accent",3,"matTooltip"],["color","warn",3,"matTooltip"]],template:function(t,e){1&t&&(p.ac(0,"os-head-bar"),p.ac(1,"div",0),p.Tc(2),p.nc(3,"translate"),p.Zb(),p.Zb(),p.ac(4,"os-list-view-table",1),p.Rc(5,O,4,2,"div",2),p.Rc(6,H,4,2,"div",2),p.Rc(7,T,5,4,"div",2),p.Rc(8,R,3,2,"div",2),p.Zb()),2&t&&(p.Hb(2),p.Uc(p.oc(3,10,"List of electronic votes")),p.Hb(2),p.uc("listObservableProvider",e.polls)("vScrollFixed",64)("columns",e.tableColumnDefinition)("filterProps",e.filterProps)("filterService",e.filterService),p.Hb(1),p.uc("pblNgridCellDef","title"),p.Hb(1),p.uc("pblNgridCellDef","classType"),p.Hb(1),p.uc("pblNgridCellDef","state"),p.Hb(1),p.uc("pblNgridCellDef","votability"))},directives:[g.a,y.a,_.c,a.t,c.i,k.a,C.c],pipes:[f.j],styles:[""]}),D),pathMatch:"full"}],M=((I=function t(){_classCallCheck(this,t)}).\u0275mod=p.Sb({type:I}),I.\u0275inj=p.Rb({factory:function(t){return new(t||I)},imports:[[c.j.forChild(x)],c.j]}),I),N=n("PCNd"),U=((j=function t(){_classCallCheck(this,t)}).\u0275mod=p.Sb({type:j}),j.\u0275inj=p.Rb({factory:function(t){return new(t||j)},imports:[[a.c,M,N.a]]}),j)},cMzF:function(t,e,n){"use strict";n.d(e,"a",(function(){return P}));var o=n("3Pt+"),a=n("0IaG"),c=n("qnZ9"),r=n("ykax"),i=n("b1ae"),l=n("5NaA"),s=n("8fOK"),u=n("fXoL"),b=n("jhN1"),p=n("sYmb"),f=n("dNgK"),d=n("ofXK"),v=n("bTqV"),m=n("acT5"),h=n("bSwM"),g=n("kmnG"),y=["pollForm"];function _(t,e){1&t&&(u.ac(0,"mat-error"),u.Tc(1),u.nc(2,"translate"),u.Zb()),2&t&&(u.Hb(1),u.Vc(" ",u.oc(2,1,"Error in form field."),""))}function k(t,e){if(1&t){var n=u.bc();u.ac(0,"div"),u.ac(1,"mat-checkbox",14),u.ic("ngModelChange",(function(t){return u.Jc(n),u.mc(2).publishImmediately=t}))("change",(function(t){return u.Jc(n),u.mc(2).publishStateChanged(t.checked)})),u.ac(2,"span"),u.Tc(3),u.nc(4,"translate"),u.Zb(),u.Zb(),u.Rc(5,_,3,3,"mat-error",2),u.Zb()}if(2&t){var o=u.mc(2);u.Hb(1),u.uc("ngModel",o.publishImmediately),u.Hb(2),u.Uc(u.oc(4,3,"Publish immediately")),u.Hb(2),u.uc("ngIf",!o.dialogVoteForm.valid)}}function C(t,e){if(1&t&&(u.Yb(0),u.ac(1,"div",6),u.ac(2,"form",7),u.Vb(3,"os-check-input",8),u.nc(4,"translate"),u.nc(5,"translate"),u.Vb(6,"os-check-input",9),u.nc(7,"translate"),u.nc(8,"translate"),u.Vb(9,"os-check-input",10),u.nc(10,"translate"),u.nc(11,"translate"),u.Vb(12,"os-check-input",11),u.nc(13,"translate"),u.Vb(14,"os-check-input",12),u.nc(15,"translate"),u.Vb(16,"os-check-input",13),u.nc(17,"translate"),u.Zb(),u.Zb(),u.Rc(18,k,6,5,"div",2),u.Xb()),2&t){var n=u.mc();u.Hb(2),u.uc("formGroup",n.dialogVoteForm),u.Hb(1),u.uc("placeholder",u.oc(4,14,"Yes"))("checkboxValue",-1)("checkboxLabel",u.oc(5,16,"majority")),u.Hb(3),u.uc("placeholder",u.oc(7,18,"No"))("checkboxValue",-1)("checkboxLabel",u.oc(8,20,"majority")),u.Hb(3),u.uc("placeholder",u.oc(10,22,"Abstain"))("checkboxValue",-1)("checkboxLabel",u.oc(11,24,"majority")),u.Hb(3),u.uc("placeholder",u.oc(13,26,"Valid votes")),u.Hb(2),u.uc("placeholder",u.oc(15,28,"Invalid votes")),u.Hb(2),u.uc("placeholder",u.oc(17,30,"Total votes cast")),u.Hb(2),u.uc("ngIf",!n.pollData.isPublished)}}var P=function(){var t=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,a,c,r,i,l){var u;return _classCallCheck(this,n),(u=e.call(this,t,o,a,r)).motionPollService=c,u.dialogRef=r,u.formBuilder=i,u.pollData=l,u.PercentBaseVerbose=s.b,u}return _createClass(n,[{key:"ngOnInit",value:function(){this.createDialog()}},{key:"updateDialogVoteForm",value:function(t){if(this.dialogVoteForm){var e=this.undoReplaceEmptyValues({Y:t.options[0].yes,N:t.options[0].no,A:t.options[0].abstain,votesvalid:t.votesvalid,votesinvalid:t.votesinvalid,votescast:t.votescast});this.dialogVoteForm.setValue(e)}}},{key:"createDialog",value:function(){this.dialogVoteForm=this.formBuilder.group({Y:["",[o.G.min(c.b)]],N:["",[o.G.min(c.b)]],A:["",[o.G.min(c.b)]],votesvalid:["",[o.G.min(c.b)]],votesinvalid:["",[o.G.min(c.b)]],votescast:["",[o.G.min(c.b)]]}),this.pollData&&this.pollData.poll&&this.updateDialogVoteForm(this.pollData)}}]),n}(i.a);return t.\u0275fac=function(e){return new(e||t)(u.Ub(b.d),u.Ub(p.k),u.Ub(f.a),u.Ub(r.a),u.Ub(a.h),u.Ub(o.f),u.Ub(a.a))},t.\u0275cmp=u.Ob({type:t,selectors:[["os-motion-poll-dialog"]],viewQuery:function(t,e){var n;1&t&&u.ad(y,!0),2&t&&u.Ec(n=u.jc())&&(e.pollForm=n.first)},features:[u.Eb],decls:12,vars:12,consts:[[3,"data","pollService","percentBases"],["pollForm",""],[4,"ngIf"],["mat-dialog-actions",""],["mat-button","",3,"disabled","click"],["mat-button","",3,"mat-dialog-close"],["mat-dialog-content","",1,"os-form-card-mobile"],[3,"formGroup"],["inputType","number","formControlName","Y",3,"placeholder","checkboxValue","checkboxLabel"],["inputType","number","formControlName","N",3,"placeholder","checkboxValue","checkboxLabel"],["inputType","number","formControlName","A",3,"placeholder","checkboxValue","checkboxLabel"],["inputType","number","formControlName","votesvalid",3,"placeholder"],["inputType","number","formControlName","votesinvalid",3,"placeholder"],["inputType","number","formControlName","votescast",3,"placeholder"],[3,"ngModel","ngModelChange","change"]],template:function(t,e){if(1&t&&(u.Vb(0,"os-poll-form",0,1),u.Rc(2,C,19,32,"ng-container",2),u.ac(3,"div",3),u.ac(4,"button",4),u.ic("click",(function(){return e.submitPoll()})),u.ac(5,"span"),u.Tc(6),u.nc(7,"translate"),u.Zb(),u.Zb(),u.ac(8,"button",5),u.ac(9,"span"),u.Tc(10),u.nc(11,"translate"),u.Zb(),u.Zb(),u.Zb()),2&t){var n=u.Fc(1);u.uc("data",e.pollData)("pollService",e.motionPollService)("percentBases",e.PercentBaseVerbose),u.Hb(2),u.uc("ngIf","analog"===n.contentForm.get("type").value),u.Hb(2),u.uc("disabled",n.contentForm.invalid||e.dialogVoteForm.invalid),u.Hb(2),u.Uc(u.oc(7,8,"Save")),u.Hb(2),u.uc("mat-dialog-close",!1),u.Hb(2),u.Uc(u.oc(11,10,"Cancel"))}},directives:[l.a,d.t,a.c,v.b,a.d,a.f,o.I,o.t,o.k,m.a,o.s,o.i,h.a,o.v,g.b],pipes:[p.j],styles:[""]}),t}()},g4jF:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var o=n("mrSG"),a=n("2Vo4"),c=n("Cfvw"),r=n("pLZG"),i=n("lJxs"),l=n("g96W"),s=n("mV3u"),u=n("fXoL"),b=function(){var t=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,c,r,i,s,u,b,p,f){var d;return _classCallCheck(this,n),(d=e.call(this,t,o,c)).translate=o,d.repo=r,d.route=i,d.groupRepo=s,d.promptService=u,d.pollDialog=b,d.pollService=p,d.votesRepo=f,d.userGroups=[],d.groupObservable=null,d.voteOptionStyle={Y:{css:"yes",icon:"thumb_up"},N:{css:"no",icon:"thumb_down"},A:{css:"abstain",icon:"trip_origin"}},d.poll=null,d.labels=[],d.chartDataSubject=new a.a(null),d.optionsLoaded=new l.a,d.setup(),d}return _createClass(n,[{key:"setup",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.optionsLoaded;case 2:this.votesRepo.getViewModelListObservable().pipe(Object(r.a)((function(){return e.poll&&e.canSeeVotes})),Object(i.a)((function(t){return t.filter((function(t){return t.option.poll_id===e.poll.id}))})),Object(r.a)((function(t){return!!t.length}))).subscribe((function(){e.createVotesData()}));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"ngOnInit",value:function(){var t=this;this.findComponentById(),this.groupObservable=this.groupRepo.getViewModelListObservable(),this.subscriptions.push(this.groupRepo.getViewModelListObservable().subscribe((function(e){return t.userGroups=e})))}},{key:"deletePoll",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.translate.instant("Are you sure you want to delete this vote?"),t.next=3,this.promptService.open(e);case 3:if(t.t0=t.sent,!t.t0){t.next=6;break}this.repo.delete(this.poll).then((function(){return n.onDeleted()}),this.raiseError);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"pseudoanonymizePoll",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.translate.instant("Are you sure you want to anonymize all votes? This cannot be undone."),t.next=3,this.promptService.open(e);case 3:if(t.t0=t.sent,!t.t0){t.next=6;break}this.repo.pseudoanonymize(this.poll).catch(this.raiseError);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"openDialog",value:function(t){this.pollDialog.openDialog(t)}},{key:"onStateChanged",value:function(){}},{key:"setVotesData",value:function(t){this.votesDataObservable=t.every((function(t){return!t.user}))?null:Object(c.a)([t])}},{key:"initChartData",value:function(){this.chartDataSubject.next(this.pollService.generateChartData(this.poll))}},{key:"findComponentById",value:function(){var t=this,e=this.route.snapshot.params;e&&e.id&&this.subscriptions.push(this.repo.getViewModelObservable(e.id).subscribe((function(e){e&&(t.poll=e,t.createVotesData(),t.initChartData(),t.optionsLoaded.resolve())})))}},{key:"canSeeVotes",get:function(){return this.hasPerms&&this.poll.isFinished||this.poll.isPublished}}]),n}(s.a);return t.\u0275fac=function(t){u.hc()},t.\u0275dir=u.Pb({type:t,features:[u.Eb]}),t}()},tSYa:function(t,e,n){"use strict";n.r(e),n.d(e,"MotionPollModule",(function(){return it}));var o=n("ofXK"),a=n("PCNd"),c=n("bVYn"),r=n("tyNb"),i=n("OwvW"),l=n("acQf"),s=n("chQs"),u=n("R+Vs"),b=n("+KbT"),p=n("F48D"),f=n("SHqy"),d=n("ykax"),v=n("g4jF"),m=n("fXoL"),h=n("jhN1"),g=n("sYmb"),y=n("dNgK"),_=n("mksl"),k=n("3Xi6"),C=n("Wp6s"),P=n("STbY"),O=n("f0Cb"),w=n("bTqV"),H=n("NFeN"),S=n("76GY"),T=n("0Obk"),V=n("dRZP"),Z=n("Tp2j");function R(t,e){if(1&t&&(m.ac(0,"h2"),m.Tc(1),m.nc(2,"translate"),m.Zb()),2&t){var n=m.mc();m.Hb(1),m.Wc("",m.oc(2,2,"Motion")," ",n.poll.motion.identifierOrTitle,"")}}function D(t,e){if(1&t&&(m.ac(0,"div",11),m.ac(1,"button",12),m.ac(2,"mat-icon"),m.Tc(3,"more_vert"),m.Zb(),m.Zb(),m.Zb()),2&t){m.mc();var n=m.Fc(9);m.Hb(1),m.uc("matMenuTriggerFor",n)}}function I(t,e){if(1&t&&(m.ac(0,"span"),m.Tc(1),m.nc(2,"translate"),m.Zb()),2&t){var n=m.mc(3);m.Hb(1),m.Vc(" ",m.oc(2,1,n.poll.typeVerbose)," \xb7 ")}}function j(t,e){1&t&&(m.ac(0,"p"),m.Tc(1),m.nc(2,"translate"),m.Zb()),2&t&&(m.Hb(1),m.Uc(m.oc(2,1,"No results yet.")))}function x(t,e){if(1&t&&(m.ac(0,"div"),m.Tc(1),m.nc(2,"translate"),m.Zb()),2&t){var n=e.col;m.Hb(1),m.Vc(" ",m.oc(2,1,n.label)," ")}}function M(t,e){if(1&t&&(m.ac(0,"div"),m.Tc(1),m.Zb()),2&t){var n=m.mc(2).row;m.Hb(1),m.Vc(" ",n.user.getLevelAndNumber()," ")}}function N(t,e){if(1&t&&(m.ac(0,"div"),m.Tc(1),m.nc(2,"translate"),m.Zb()),2&t){var n=m.mc(2).row;m.Hb(1),m.Wc(" ",m.oc(2,2,"Vote weight"),": ",n.user.vote_weight," ")}}function U(t,e){if(1&t&&(m.ac(0,"div"),m.Tc(1),m.ac(2,"div",22),m.Rc(3,M,2,1,"div",2),m.Rc(4,N,3,4,"div",2),m.Zb(),m.Zb()),2&t){var n=m.mc().row,o=m.mc(6);m.Hb(1),m.Vc(" ",n.user.getShortName()," "),m.Hb(2),m.uc("ngIf",n.user.getLevelAndNumber()),m.Hb(1),m.uc("ngIf",o.isVoteWeightActive)}}function A(t,e){1&t&&(m.ac(0,"div"),m.Tc(1),m.nc(2,"translate"),m.Zb()),2&t&&(m.Hb(1),m.Uc(m.oc(2,1,"Anonymous")))}function F(t,e){if(1&t&&(m.ac(0,"div"),m.Rc(1,U,5,3,"div",2),m.Rc(2,A,3,3,"div",2),m.Zb()),2&t){var n=e.row;m.Hb(1),m.uc("ngIf",n.user),m.Hb(1),m.uc("ngIf",!n.user)}}function L(t,e){if(1&t&&(m.ac(0,"div",23),m.ac(1,"div",24),m.ac(2,"mat-icon"),m.Tc(3),m.Zb(),m.Zb(),m.ac(4,"div"),m.Tc(5),m.nc(6,"translate"),m.Zb(),m.Zb()),2&t){var n=e.row,o=m.mc(6);m.Hb(1),m.uc("ngClass",o.voteOptionStyle[n.value].css),m.Hb(2),m.Uc(o.voteOptionStyle[n.value].icon),m.Hb(2),m.Uc(m.oc(6,3,n.valueVerbose))}}function z(t,e){if(1&t&&(m.ac(0,"os-list-view-table",18),m.Rc(1,x,3,3,"div",19),m.Rc(2,F,3,2,"div",20),m.Rc(3,L,7,5,"div",21),m.Zb()),2&t){var n=m.mc(5);m.uc("listObservable",n.votesDataObservable)("columns",n.columnDefinition)("filterProps",n.filterProps)("allowProjector",!1)("fullScreen",!0)("vScrollFixed",-1),m.Hb(1),m.uc("pblNgridHeaderCellDef","*"),m.Hb(1),m.uc("pblNgridCellDef","user"),m.Hb(1),m.uc("pblNgridCellDef","vote")}}function G(t,e){1&t&&(m.ac(0,"div"),m.Tc(1),m.nc(2,"translate"),m.Zb()),2&t&&(m.Hb(1),m.Vc(" ",m.oc(2,1,"The individual votes were anonymized.")," "))}function Y(t,e){if(1&t&&(m.ac(0,"div",16),m.ac(1,"h2"),m.Tc(2),m.nc(3,"translate"),m.Zb(),m.Rc(4,z,4,9,"os-list-view-table",17),m.Rc(5,G,3,3,"div",2),m.Zb()),2&t){var n=m.mc(4);m.Hb(2),m.Uc(m.oc(3,3,"Single votes")),m.Hb(2),m.uc("ngIf",n.votesDataObservable),m.Hb(1),m.uc("ngIf",!n.votesDataObservable)}}function K(t,e){if(1&t&&(m.ac(0,"div"),m.Vb(1,"os-motion-poll-detail-content",14),m.Rc(2,Y,6,5,"div",15),m.Zb()),2&t){var n=m.mc(3);m.Hb(1),m.uc("poll",n.poll)("chartData",n.chartDataSubject),m.Hb(1),m.uc("ngIf","named"===n.poll.type)}}function B(t,e){1&t&&(m.ac(0,"span"),m.Tc(1,", "),m.Zb())}function E(t,e){if(1&t&&(m.ac(0,"span"),m.Tc(1),m.nc(2,"translate"),m.Rc(3,B,2,0,"span",2),m.Zb()),2&t){var n=e.$implicit,o=e.index,a=m.mc(4);m.Hb(1),m.Vc(" ",m.oc(2,2,n.getTitle()),""),m.Hb(2),m.uc("ngIf",o<a.poll.groups.length-1)}}function X(t,e){if(1&t&&(m.ac(0,"small"),m.Tc(1),m.nc(2,"translate"),m.Rc(3,E,4,4,"span",25),m.Zb()),2&t){var n=m.mc(3);m.Hb(1),m.Vc(" ",m.oc(2,2,"Groups"),": "),m.Hb(2),m.uc("ngForOf",n.poll.groups)}}function W(t,e){if(1&t&&(m.Yb(0),m.ac(1,"h1"),m.Tc(2),m.nc(3,"translate"),m.Zb(),m.ac(4,"div"),m.Rc(5,I,3,3,"span",2),m.ac(6,"span"),m.Tc(7),m.nc(8,"translate"),m.Zb(),m.Zb(),m.Rc(9,j,3,3,"p",2),m.Rc(10,K,3,3,"div",2),m.ac(11,"div",13),m.Rc(12,X,4,4,"small",2),m.ac(13,"small"),m.Tc(14),m.nc(15,"translate"),m.nc(16,"translate"),m.Zb(),m.Zb(),m.Xb()),2&t){var n=m.mc(2);m.Hb(2),m.Uc(m.oc(3,8,n.poll.title)),m.Hb(3),m.uc("ngIf","analog"!==n.poll.type),m.Hb(2),m.Vc(" ",m.oc(8,10,n.poll.stateVerbose)," "),m.Hb(2),m.uc("ngIf",!n.poll.hasVotes||!n.poll.stateHasVotes),m.Hb(1),m.uc("ngIf",n.poll.stateHasVotes&&(n.hasPerms()||n.poll.isPublished)),m.Hb(2),m.uc("ngIf",n.poll.groups&&n.poll.type&&"analog"!==n.poll.type),m.Hb(2),m.Wc("",m.oc(15,12,"100% base"),": ",m.oc(16,14,n.poll.percentBaseVerbose),"")}}function q(t,e){if(1&t&&m.Rc(0,W,17,16,"ng-container",2),2&t){var n=m.mc();m.uc("ngIf",n.poll)}}function J(t,e){if(1&t&&m.Vb(0,"os-projector-button",26),2&t){var n=m.mc();m.uc("menuItem",!0)("object",n.poll)}}function Q(t,e){if(1&t){var n=m.bc();m.ac(0,"button",27),m.ic("click",(function(){m.Jc(n);var t=m.mc();return t.openDialog(t.poll)})),m.ac(1,"mat-icon"),m.Tc(2,"edit"),m.Zb(),m.ac(3,"span"),m.Tc(4),m.nc(5,"translate"),m.Zb(),m.Zb()}2&t&&(m.Hb(4),m.Uc(m.oc(5,1,"Edit")))}function $(t,e){if(1&t){var n=m.bc();m.ac(0,"button",27),m.ic("click",(function(){return m.Jc(n),m.mc().pseudoanonymizePoll()})),m.ac(1,"mat-icon"),m.Tc(2,"warning"),m.Zb(),m.ac(3,"span"),m.Tc(4),m.nc(5,"translate"),m.Zb(),m.Zb()}2&t&&(m.Hb(4),m.Uc(m.oc(5,1,"Anonymize votes")))}function tt(t,e){if(1&t){var n=m.bc();m.ac(0,"button",27),m.ic("click",(function(){return m.Jc(n),m.mc().deletePoll()})),m.ac(1,"mat-icon",28),m.Tc(2,"delete"),m.Zb(),m.ac(3,"span"),m.Tc(4),m.nc(5,"translate"),m.Zb(),m.Zb()}2&t&&(m.Hb(4),m.Uc(m.oc(5,1,"Delete")))}var et,nt,ot,at=((et=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,a,c,r,i,l,s,u,b,p,f,d){var v;return _classCallCheck(this,n),(v=e.call(this,t,o,a,c,r,i,l,s,u,b)).operator=f,v.router=d,v.columnDefinition=[{prop:"user",width:"auto",label:"Participant"},{prop:"vote",width:"auto",label:"Vote"}],v.filterProps=["user.getFullName","valueVerbose"],p.get("users_activate_vote_weight").subscribe((function(t){return v.isVoteWeightActive=t})),v}return _createClass(n,[{key:"createVotesData",value:function(){this.setVotesData(this.poll.options[0].votes)}},{key:"openDialog",value:function(){this.pollDialog.openDialog(this.poll)}},{key:"onDeleted",value:function(){this.router.navigate(["motions",this.poll.motion_id])}},{key:"hasPerms",value:function(){return this.operator.hasPerms(i.b.motionsCanManagePolls)}}]),n}(v.a)).\u0275fac=function(t){return new(t||et)(m.Ub(h.d),m.Ub(g.k),m.Ub(y.a),m.Ub(l.a),m.Ub(r.a),m.Ub(u.a),m.Ub(p.a),m.Ub(f.a),m.Ub(d.a),m.Ub(s.a),m.Ub(b.a),m.Ub(i.a),m.Ub(r.f))},et.\u0275cmp=m.Ob({type:et,selectors:[["os-motion-poll-detail"]],features:[m.Eb],decls:15,vars:10,consts:[[3,"goBack","nav"],[1,"title-slot"],[4,"ngIf"],["class","menu-slot",4,"osPerms"],[1,"os-card","spacer-bottom-60"],[3,"ngTemplateOutlet"],["viewTemplate",""],["pollDetailMenu","matMenu"],[3,"menuItem","object",4,"osPerms"],["mat-menu-item","",3,"click",4,"osPerms"],["mat-menu-item","",3,"click",4,"osPerms","osPermsAnd"],[1,"menu-slot"],["type","button","mat-icon-button","",3,"matMenuTriggerFor"],[1,"poll-content"],[3,"poll","chartData"],["class","named-result-table",4,"ngIf"],[1,"named-result-table"],["class","single-votes-table","listStorageKey","motion-poll-vote",3,"listObservable","columns","filterProps","allowProjector","fullScreen","vScrollFixed",4,"ngIf"],["listStorageKey","motion-poll-vote",1,"single-votes-table",3,"listObservable","columns","filterProps","allowProjector","fullScreen","vScrollFixed"],[4,"pblNgridHeaderCellDef"],[4,"pblNgridCellDef"],["class","vote-cell",4,"pblNgridCellDef"],[1,"user-subtitle"],[1,"vote-cell"],[1,"vote-cell-icon-container",3,"ngClass"],[4,"ngFor","ngForOf"],[3,"menuItem","object"],["mat-menu-item","",3,"click"],["color","warn"]],template:function(t,e){if(1&t&&(m.ac(0,"os-head-bar",0),m.ac(1,"div",1),m.Rc(2,R,3,4,"h2",2),m.Zb(),m.Rc(3,D,4,1,"div",3),m.Zb(),m.ac(4,"mat-card",4),m.Wb(5,5),m.Zb(),m.Rc(6,q,1,1,"ng-template",null,6,m.Sc),m.ac(8,"mat-menu",null,7),m.Rc(10,J,1,2,"os-projector-button",8),m.Rc(11,Q,6,3,"button",9),m.Rc(12,$,6,3,"button",10),m.Vb(13,"mat-divider"),m.Rc(14,tt,6,3,"button",9),m.Zb()),2&t){var n=m.Fc(7);m.uc("goBack",!0)("nav",!1),m.Hb(2),m.uc("ngIf",e.poll),m.Hb(1),m.uc("osPerms","motions.can_manage_polls"),m.Hb(2),m.uc("ngTemplateOutlet",n),m.Hb(5),m.uc("osPerms","core.can_manage_projector"),m.Hb(1),m.uc("osPerms","motions.can_manage_polls"),m.Hb(1),m.uc("osPerms","motions.can_manage_polls")("osPermsAnd",e.poll&&"named"===e.poll.type),m.Hb(2),m.uc("osPerms","motions.can_manage_polls")}},directives:[_.a,o.t,k.a,C.a,o.A,P.f,O.a,w.b,P.e,H.a,S.a,T.a,V.h,V.c,o.q,o.s,Z.a,P.c],pipes:[g.j],styles:[".yes{color:#4caf50}.no{color:#cc6c5b}.abstain{color:#a6a6a6}.voted-yes{background-color:#4caf50;color:#fff}.voted-no{background-color:#cc6c5b;color:#fff}.voted-abstain{background-color:#a6a6a6;color:#fff}.start-poll-button{color:#4caf50}.stop-poll-button{color:#ff5252}.publish-poll-button{color:#e6b100}.poll-content{text-align:right;display:grid;padding-top:20px}.named-result-table{grid-area:names}.named-result-table .mat-form-field{font-size:14px;width:100%}.named-result-table .vote-cell,.named-result-table .vote-cell .vote-cell-icon-container{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.named-result-table .vote-cell .vote-cell-icon-container{margin-right:7px}.single-votes-table{display:block;height:500px}.single-votes-table .list-view-frame{height:100%}.openslides-theme .pbl-ngrid-no-data{top:10%}"],encapsulation:2,changeDetection:0}),et),ct=[{path:"new",component:at},{path:":id",component:at}],rt=((ot=function t(){_classCallCheck(this,t)}).\u0275mod=m.Sb({type:ot}),ot.\u0275inj=m.Rb({factory:function(t){return new(t||ot)},imports:[[r.j.forChild(ct)],r.j]}),ot),it=((nt=function t(){_classCallCheck(this,t)}).\u0275mod=m.Sb({type:nt}),nt.\u0275inj=m.Rb({factory:function(t){return new(t||nt)},imports:[[o.c,a.a,rt,c.PollsModule]]}),nt)},wL0i:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,a,c){var r;return _classCallCheck(this,n),(r=e.call(this,t,o,a)).storage=c,r.canMultiSelect=!1,r._multiSelectMode=!1,r.singleButtonWidth="40px",r.badgeButtonWidth="45px",r.selectedRows=[],r}return _createClass(n,[{key:"onDataSourceChange",value:function(t){this.dataSource=t}},{key:"toggleMultiSelect",value:function(){!this.canMultiSelect||this.isMultiSelect?(this._multiSelectMode=!1,this.deselectAll()):this._multiSelectMode=!0}},{key:"selectAll",value:function(){var t;(t=this.dataSource.selection).select.apply(t,_toConsumableArray(this.dataSource.filteredData))}},{key:"deselectAll",value:function(){this.dataSource&&this.dataSource.selection.clear()}},{key:"isMultiSelect",get:function(){return this._multiSelectMode}}]),n}(n("mV3u").a)}}]);