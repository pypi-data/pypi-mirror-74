function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,o=_getPrototypeOf(t);if(e){var a=_getPrototypeOf(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _createForOfIteratorHelper(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,r=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){r=!0,c=t},f:function(){try{i||null==n.return||n.return()}finally{if(r)throw c}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{Iab2:function(t,e,n){var o,a;void 0===(a="function"==typeof(o=function(){"use strict";function e(t,e,n){var o=new XMLHttpRequest;o.open("GET",t),o.responseType="blob",o.onload=function(){c(o.response,e,n)},o.onerror=function(){console.error("could not download file")},o.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,c=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype?function(t,c,i){var r=a.URL||a.webkitURL,l=document.createElement("a");l.download=c=c||t.name||"download",l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?o(l):n(l.href)?e(t,c,i):o(l,l.target="_blank")):(l.href=r.createObjectURL(t),setTimeout((function(){r.revokeObjectURL(l.href)}),4e4),setTimeout((function(){o(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,a,c){if(a=a||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,c),a);else if(n(t))e(t,a,c);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout((function(){o(i)}))}}:function(t,n,o,c){if((c=c||open("","_blank"))&&(c.document.title=c.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,o);var i="application/octet-stream"===t.type,r=/constructor/i.test(a.HTMLElement)||a.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||i&&r)&&"object"==typeof FileReader){var s=new FileReader;s.onloadend=function(){var t=s.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=t:location=t,c=null},s.readAsDataURL(t)}else{var u=a.URL||a.webkitURL,f=u.createObjectURL(t);c?c.location=f:location.href=f,c=null,setTimeout((function(){u.revokeObjectURL(f)}),4e4)}});a.saveAs=c.saveAs=c,t.exports=c})?o.apply(e,[]):o)||(t.exports=a)},ePZ9:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var o=n("pSLD"),a=n("+B0n"),c=n("dOok"),i=n("+KbT"),r=n("1NkQ"),l=n("a9XT"),s=n("rHPv"),u=n("jDC6"),f=n("3Y4h"),m=n("fXoL"),b=n("sYmb"),d=function(){var t=function(){function t(e,n,o,a,c,i,r){_classCallCheck(this,t),this.csvExport=e,this.translate=n,this.configService=o,this.linenumberingService=a,this.changeRecoRepo=c,this.motionRepo=i,this.commentRepo=r}return _createClass(t,[{key:"createText",value:function(t,e){var n=this.configService.instant("motions_line_length"),o=Object.assign([],this.changeRecoRepo.getChangeRecoOfMotion(t.id)),a=this.motionRepo.getAmendmentsInstantly(t.id);if(a){var c,i=_createForOfIteratorHelper(a);try{for(i.s();!(c=i.n()).done;){var r,l=c.value,s=this.changeRecoRepo.getChangeRecoOfMotion(l.id).filter((function(t){return t.showInFinalView()})),u=_createForOfIteratorHelper(this.motionRepo.getAmendmentAmendedParagraphs(l,n,s));try{for(u.s();!(r=u.n()).done;){var f=r.value;o.push(f)}}catch(b){u.e(b)}finally{u.f()}}}catch(b){i.e(b)}finally{i.f()}}o.sort((function(t,e){return t.getLineFrom()-e.getLineFrom()}));var m=this.motionRepo.formatMotion(t.id,e,o,n);return this.linenumberingService.stripLineNumbers(m)}},{key:"exportMotionList",value:function(t,e,n,o){var a=this;o||(o=this.configService.instant("motions_recommendation_text_mode"));var c=Object(f.j)(["identifier","title"].concat(e)).map((function(t){return"recommendation"===t?{label:"recommendation",map:function(t){return a.motionRepo.getExtendedRecommendationLabel(t)}}:"state"===t?{label:"state",map:function(t){return a.motionRepo.getExtendedStateLabel(t)}}:"text"===t?{label:"Text",map:function(t){return a.createText(t,o)}}:"motion_block"===t?{label:"Motion block",map:function(t){return t.motion_block?t.motion_block.getTitle():""}}:{property:t}}));c.push.apply(c,_toConsumableArray(n.map((function(t){return{label:a.commentRepo.getViewModel(t).getTitle(),map:function(e){var n=a.commentRepo.getViewModel(t),o=e.getCommentForSection(n);return o&&o.comment?Object(s.a)(Object(u.a)(o.comment)):""}}})))),this.csvExport.export(t,c,this.translate.instant("Motions")+".csv")}},{key:"exportCallList",value:function(t){var e=this;this.csvExport.export(t,[{label:"Called",map:function(t){return t.sort_parent_id?"":t.identifierOrTitle}},{label:"Called with",map:function(t){return t.sort_parent_id?t.identifierOrTitle:""}},{label:"submitters",map:function(t){return t.submittersAsUsers.map((function(t){return t.short_name})).join(",")}},{property:"title"},{label:"recommendation",map:function(t){return t.recommendation?e.motionRepo.getExtendedRecommendationLabel(t):""}},{property:"motion_block",label:"Motion block"}],this.translate.instant("Call list")+".csv")}},{key:"exportDummyMotion",value:function(){this.csvExport.dummyCSVExport(["Identifier","Submitters","Title","Text","Reason","Category","Tags","Motion block","Origin"],[["A1","Submitter A","Title 1","Text 1","Reason 1","Category A","Tag 1, Tag 2","Block A","Last Year Conference A"],["B1","Submitter B","Title 2","Text 2","Reason 2","Category B",null,"Block A","Origin B"],["C2",null,"Title 3","Text 3",null,null,null,null,null]],this.translate.instant("motions-example")+".csv")}}]),t}();return t.\u0275fac=function(e){return new(e||t)(m.ec(r.a),m.ec(b.k),m.ec(i.a),m.ec(l.a),m.ec(o.a),m.ec(c.a),m.ec(a.a))},t.\u0275prov=m.Qb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},mksl:function(t,e,n){"use strict";n.d(e,"a",(function(){return I}));var o=n("fXoL"),a=n("VR2Q"),c=n("7dBR"),i=n("gsQk"),r=n("KL36"),l=n("tyNb"),s=n("/t3+"),u=n("ofXK"),f=n("bTqV"),m=n("NFeN"),b=n("Qu3c"),d=n("sYmb");function p(t,e){if(1&t){var n=o.bc();o.ac(0,"button",12),o.ic("click",(function(){return o.Jc(n),o.mc().clickHamburgerMenu()})),o.ac(1,"mat-icon"),o.Tc(2,"menu"),o.Zb(),o.Zb()}}function v(t,e){if(1&t){var n=o.bc();o.ac(0,"button",12),o.ic("click",(function(){return o.Jc(n),o.mc().onBackButton()})),o.ac(1,"mat-icon"),o.Tc(2,"arrow_back"),o.Zb(),o.Zb()}}function h(t,e){if(1&t){var n=o.bc();o.ac(0,"button",12),o.ic("click",(function(){o.Jc(n);var t=o.mc();return t.isCancelEditUsed?t.sendCancelEditEvent():t.sendMainEvent()})),o.ac(1,"mat-icon"),o.Tc(2,"close"),o.Zb(),o.Zb()}}function g(t,e){1&t&&(o.ac(0,"div",13),o.sc(1,1),o.Zb())}function y(t,e){1&t&&o.Vb(0,"div",6)}function w(t,e){1&t&&(o.ac(0,"div",14),o.sc(1,2),o.Zb())}function k(t,e){if(1&t){var n=o.bc();o.ac(0,"button",12),o.ic("click",(function(){return o.Jc(n),o.mc().openSearch()})),o.ac(1,"mat-icon"),o.Tc(2,"search"),o.Zb(),o.Zb()}}function T(t,e){if(1&t){var n=o.bc();o.ac(0,"button",15),o.ic("click",(function(){return o.Jc(n),o.mc().sendMainEvent()})),o.nc(1,"translate"),o.ac(2,"mat-icon"),o.Tc(3),o.Zb(),o.Zb()}if(2&t){var a=o.mc();o.vc("matTooltip",o.oc(1,3,a.mainActionTooltip)),o.uc("disabled",!a.isMainButtonEnabled),o.Hb(3),o.Uc(a.mainButtonIcon)}}function R(t,e){if(1&t){var n=o.bc();o.ac(0,"button",16),o.ic("click",(function(){return o.Jc(n),o.mc().save()})),o.ac(1,"strong",17),o.Tc(2),o.nc(3,"translate"),o.Zb(),o.Zb()}if(2&t){var a=o.mc();o.uc("disabled",!a.isSaveButtonEnabled),o.Hb(2),o.Uc(o.oc(3,2,a.saveText))}}function C(t,e){1&t&&o.sc(0,3,["*ngIf","!editMode"])}function x(t,e){1&t&&(o.ac(0,"mat-icon"),o.Tc(1," add "),o.Zb())}function H(t,e){if(1&t&&(o.ac(0,"mat-icon"),o.Tc(1),o.Zb()),2&t){var n=o.mc(2);o.Hb(1),o.Vc(" ",n.mainButtonIcon," ")}}function E(t,e){if(1&t){var n=o.bc();o.ac(0,"button",18),o.ic("click",(function(){return o.Jc(n),o.mc().sendMainEvent()})),o.nc(1,"translate"),o.Rc(2,x,2,0,"mat-icon",10),o.Rc(3,H,2,1,"mat-icon",10),o.Zb()}if(2&t){var a=o.mc();o.vc("matTooltip",o.oc(1,4,a.mainActionTooltip)),o.uc("disabled",!a.isMainButtonEnabled),o.Hb(2),o.uc("ngIf","add_circle"===a.mainButtonIcon),o.Hb(1),o.uc("ngIf","add_circle"!==a.mainButtonIcon)}}var Z=[[["",8,"extra-controls-slot"]],[["",8,"title-slot"]],[["",8,"central-info-slot"]],[["",8,"menu-slot"]]],S=[".extra-controls-slot",".title-slot",".central-info-slot",".menu-slot"],I=function(){var t=function(){function t(e,n,a,c,i,r){_classCallCheck(this,t),this.vp=e,this.menu=n,this.router=a,this.route=c,this.routingState=i,this.overlayService=r,this.nav=!0,this.mainButtonIcon="add_circle",this.saveText="Save",this.editMode=!1,this.isSearchEnabled=!0,this.isSaveButtonEnabled=!0,this.multiSelectMode=!1,this.hasMainButton=!1,this.isMainButtonEnabled=!0,this.goBack=!1,this.prevUrl="../",this.mainEvent=new o.p,this.cancelEditEvent=new o.p,this.isCancelEditUsed=!1,this.saveEvent=new o.p}return _createClass(t,[{key:"ngOnInit",value:function(){this.isCancelEditUsed=this.cancelEditEvent.observers.length>0}},{key:"sendMainEvent",value:function(){this.mainEvent.next()}},{key:"sendCancelEditEvent",value:function(){this.cancelEditEvent.next()}},{key:"clickHamburgerMenu",value:function(){this.menu.toggleMenu()}},{key:"save",value:function(){this.saveEvent.next(!0)}},{key:"openSearch",value:function(){this.overlayService.showSearch()}},{key:"onBackButton",value:function(){this.goBack?this.routingState.goBack():this.router.navigate(this.routingState.customOrigin&&this.routingState.customOrigin!==this.router.url?[this.routingState.customOrigin]:[this.prevUrl],{relativeTo:this.route})}},{key:"showBackButton",get:function(){return!this.nav&&!this.multiSelectMode&&(this.routingState.isSafePrevUrl||!this.goBack)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Ub(r.a),o.Ub(a.a),o.Ub(l.f),o.Ub(l.a),o.Ub(i.a),o.Ub(c.a))},t.\u0275cmp=o.Ob({type:t,selectors:[["os-head-bar"]],inputs:{nav:"nav",mainButtonIcon:"mainButtonIcon",saveText:"saveText",editMode:"editMode",isSearchEnabled:"isSearchEnabled",isSaveButtonEnabled:"isSaveButtonEnabled",multiSelectMode:"multiSelectMode",hasMainButton:"hasMainButton",isMainButtonEnabled:"isMainButtonEnabled",goBack:"goBack",prevUrl:"prevUrl",mainActionTooltip:"mainActionTooltip"},outputs:{mainEvent:"mainEvent",cancelEditEvent:"cancelEditEvent",saveEvent:"saveEvent"},ngContentSelectors:S,decls:16,vars:12,consts:[["color","primary",1,"sticky-toolbar",3,"ngClass"],[1,"toolbar-left"],["mat-icon-button","",3,"click",4,"ngIf"],["class","toolbar-left-text",4,"ngIf"],["class","spacer",4,"ngIf"],["class","toolbar-centered",4,"ngIf"],[1,"spacer"],[1,"toolbar-right"],["mat-icon-button","",3,"disabled","matTooltip","click",4,"ngIf"],["mat-button","",3,"disabled","click",4,"ngIf"],[4,"ngIf"],["mat-fab","","class","head-button",3,"disabled","matTooltip","click",4,"ngIf"],["mat-icon-button","",3,"click"],[1,"toolbar-left-text"],[1,"toolbar-centered"],["mat-icon-button","",3,"disabled","matTooltip","click"],["mat-button","",3,"disabled","click"],[1,"upper"],["mat-fab","",1,"head-button",3,"disabled","matTooltip","click"]],template:function(t,e){1&t&&(o.tc(Z),o.ac(0,"mat-toolbar",0),o.ac(1,"div",1),o.Rc(2,p,3,0,"button",2),o.Rc(3,v,3,0,"button",2),o.Rc(4,h,3,0,"button",2),o.Rc(5,g,2,0,"div",3),o.Zb(),o.Rc(6,y,1,0,"div",4),o.Rc(7,w,2,0,"div",5),o.Vb(8,"div",6),o.Rc(9,k,3,0,"button",2),o.ac(10,"div",7),o.sc(11),o.Rc(12,T,4,5,"button",8),o.Rc(13,R,4,4,"button",9),o.Rc(14,C,1,0,void 0,10),o.Zb(),o.Zb(),o.Rc(15,E,4,6,"button",11)),2&t&&(o.uc("ngClass",e.multiSelectMode?"multi-select":""),o.Hb(2),o.uc("ngIf",e.vp.isMobile&&!e.showBackButton&&!e.editMode),o.Hb(1),o.uc("ngIf",e.showBackButton&&!e.editMode),o.Hb(1),o.uc("ngIf",e.editMode),o.Hb(1),o.uc("ngIf",!e.multiSelectMode),o.Hb(1),o.uc("ngIf",!e.multiSelectMode),o.Hb(1),o.uc("ngIf",e.multiSelectMode),o.Hb(2),o.uc("ngIf",!e.editMode&&e.isSearchEnabled),o.Hb(3),o.uc("ngIf",e.hasMainButton&&!e.editMode&&!e.vp.isMobile&&!e.multiSelectMode),o.Hb(1),o.uc("ngIf",e.editMode),o.Hb(1),o.uc("ngIf",!e.editMode),o.Hb(1),o.uc("ngIf",e.hasMainButton&&!e.editMode&&e.vp.isMobile&&!e.multiSelectMode))},directives:[s.a,u.q,u.t,f.b,m.a,b.c],pipes:[d.j],styles:[".head-button{position:fixed;z-index:10;right:20px;bottom:55px}.sticky-toolbar{top:0;z-index:5;position:-webkit-sticky;position:sticky;height:64px!important}.sticky-toolbar .toolbar-left{display:-ms-flexbox;display:flex;max-width:calc(100% - 100px)}.sticky-toolbar .toolbar-left button{margin:12px 0}.sticky-toolbar .toolbar-left .toolbar-left-text{margin-left:10px;width:100%;overflow:hidden}.sticky-toolbar .toolbar-left .toolbar-left-text .title-slot{margin:16px 0;display:block}.sticky-toolbar .toolbar-left .toolbar-left-text .title-slot h2{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.sticky-toolbar .toolbar-centered{margin:auto;vertical-align:baseline}.sticky-toolbar .toolbar-right,.sticky-toolbar .toolbar-right .extra-controls-slot{display:-ms-flexbox;display:flex}mat-toolbar.multi-select{background-color:#757575!important}"],encapsulation:2}),t}()},rHPv:function(t,e,n){"use strict";function o(t){return t.replace(/&auml;|&#228;/g,"\xe4").replace(/&Auml;|&#196;/g,"\xc4").replace(/&ouml;|&#246;/g,"\xf6").replace(/&Ouml;|&#214;/g,"\xd6").replace(/&uuml;/g,"\xfc").replace(/&Uuml;/g,"\xdc").replace(/&aring;|&#229;/g,"\xe5").replace(/&Aring;|&#197;/g,"\xc5").replace(/&szlig;|&#223;/g,"\xdf")}n.d(e,"a",(function(){return o}))},xoFW:function(t,e,n){"use strict";n.r(e),n.d(e,"MotionImportModule",(function(){return Nt}));var o,a=n("ofXK"),c=n("PCNd"),i=n("tyNb"),r=n("gjbj"),l=n("ePZ9"),s=n("mrSG"),u=n("iTQr"),f=n("D5Qf"),m=n("dOok"),b=n("lv9T"),d=n("ZDbo"),p=n("E2rH"),v=n("73vO"),h=n("h2Fo"),g=n("XNtA"),y=n("VaoK"),w=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"solveMotionBlocks",value:function(t){var e=this;if(this.csvMotionblock){if(this.csvMotionblock.id)return this.motion_block_id=this.csvMotionblock.id,0;var n=t.find((function(t){return t.name===e.csvMotionblock.name}));return n?(this.csvMotionblock=n,this.motion_block_id=n.id,0):1}return 0}},{key:"solveCategory",value:function(t){var e=this;if(this.csvCategory){if(this.csvCategory.id)return this.category_id=this.csvCategory.id,0;var n=t.find((function(t){return t.name===e.csvCategory.name}));return n?(this.csvCategory=n,this.category_id=n.id,0):1}return 0}},{key:"solveSubmitters",value:function(t){var e=0,n=[];return this.csvSubmitters.forEach((function(o){if(o.id)n.push(o.id);else if(t.length){var a=t.find((function(t){return t.name===o.name}));a?(o.id=a.id,n.push(a.id)):e+=1}else e+=1})),this.submitters_id=n,e}},{key:"solveTags",value:function(t){var e,n=0,o=[],a=_createForOfIteratorHelper(this.csvTags);try{var c=function(){var a=e.value;if(a.id)return o.push(a.id),"continue";if(!t.length)return++n,"continue";var c=t.find((function(t){return t.name===a.name}));c?(a.id=c.id,o.push(c.id)):++n};for(a.s();!(e=a.n()).done;)c()}catch(i){a.e(i)}finally{a.f()}return this.tags_id=o,n}}]),n}(y.a),k=n("3Y4h"),T=n("fXoL"),R=n("sYmb"),C=n("P6Fj"),x=n("dNgK"),H=((o=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,a,c,i,r,l,s){var u;return _classCallCheck(this,n),(u=e.call(this,r,l,s)).repo=t,u.categoryRepo=o,u.motionBlockRepo=a,u.userRepo=c,u.tagRepo=i,u.errorList={MotionBlock:"Could not resolve the motion block",Category:"Could not resolve the category",Submitters:"Could not resolve the submitters",Tags:"Could not resolve the tags",Title:"A title is required",Text:"A content in the 'text' column is required",Duplicates:"A motion with this identifier already exists."},u.requiredHeaderLength=3,u.newSubmitters=[],u.newCategories=[],u.newMotionBlocks=[],u.newTags=[],u.expectedHeader=k.h.filter((function(t){return!k.g.includes(t)})),u}return _createClass(n,[{key:"clearData",value:function(){this.newSubmitters=[],this.newCategories=[],this.newMotionBlocks=[],this.newTags=[]}},{key:"mapData",value:function(t){for(var e=new w(new y.a),n=Math.min(this.expectedHeader.length,t.length),o=0;o<n;o++)switch(this.expectedHeader[o]){case"submitters":e.csvSubmitters=this.getSubmitters(t[o]);break;case"category":e.csvCategory=this.getCategory(t[o]);break;case"motion_block":e.csvMotionblock=this.getMotionBlock(t[o]);break;case"tags":e.csvTags=this.getTags(t[o]);break;default:e[this.expectedHeader[o]]=t[o]}var a=this.repo.getViewModelList().some((function(t){return t.identifier===e.identifier})),c={newEntry:e,hasDuplicates:a,status:a?"error":"new",errors:a?["Duplicates"]:[]};return c.newEntry.title||this.setError(c,"Title"),c.newEntry.text||this.setError(c,"Title"),c}},{key:"doImport",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.createNewMotionBlocks();case 2:return this.newMotionBlocks=t.sent,t.next=5,this.createNewCategories();case 5:return this.newCategories=t.sent,t.next=8,this.createNewUsers();case 8:return this.newSubmitters=t.sent,t.next=11,this.createNewTags();case 11:this.newTags=t.sent,e=_createForOfIteratorHelper(this.entries),t.prev=13,e.s();case 15:if((n=e.n()).done){t.next=40;break}if(o=n.value,t.t0="new"===o.status,!t.t0){t.next=38;break}if(!o.newEntry.solveMotionBlocks(this.newMotionBlocks)){t.next=23;break}this.setError(o,"MotionBlock"),this.updatePreview(),t.next=38;break;case 23:if(!o.newEntry.solveCategory(this.newCategories)){t.next=27;break}this.setError(o,"Category"),this.updatePreview(),t.next=38;break;case 27:if(!o.newEntry.solveSubmitters(this.newSubmitters)){t.next=31;break}this.setError(o,"Submitters"),this.updatePreview(),t.next=38;break;case 31:if(!o.newEntry.solveTags(this.newTags)){t.next=35;break}this.setError(o,"Tags"),this.updatePreview(),t.next=38;break;case 35:return t.next=37,this.repo.create(o.newEntry);case 37:o.status="done";case 38:t.next=15;break;case 40:t.next=45;break;case 42:t.prev=42,t.t1=t.catch(13),e.e(t.t1);case 45:return t.prev=45,e.f(),t.finish(45);case 48:this.updatePreview();case 49:case"end":return t.stop()}}),t,this,[[13,42,45,48]])})))}},{key:"getSubmitters",value:function(t){var e=this,n=[];if(!t)return n;var o,a=_createForOfIteratorHelper(t.split(","));try{var c=function(){var t=o.value,a=e.userRepo.getUsersByName(t.trim());a.length||(e.newSubmitters.find((function(e){return e.name===t}))||e.newSubmitters.push({name:t}),n.push({name:t})),1===a.length&&n.push({name:a[0].short_name,id:a[0].id}),a.length>1&&(n.push({name:t,multiId:a.map((function(t){return t.id}))}),e.matSnackbar.open("TODO: multiple possible users found for this string","ok"))};for(a.s();!(o=a.n()).done;)c()}catch(i){a.e(i)}finally{a.f()}return n}},{key:"getCategory",value:function(t){var e=this;if(!t)return null;var n=this.splitCategoryString(t),o=this.categoryRepo.getViewModelList().find((function(t){return!(n.prefix&&t.prefix!==n.prefix||t.name!==n.name&&e.translate.instant(t.name)!==n.name)}));return o?{name:o.prefixedName,id:o.id}:(this.newCategories.find((function(e){return e.name===t}))||this.newCategories.push({name:t}),{name:t})}},{key:"getMotionBlock",value:function(t){if(!t)return null;t=t.trim();var e=this.motionBlockRepo.getMotionBlocksByTitle(t);return e.length||(e=this.motionBlockRepo.getMotionBlocksByTitle(this.translate.instant(t))),e.length?{id:e[0].id,name:e[0].title}:(this.newMotionBlocks.find((function(e){return e.name===t}))||this.newMotionBlocks.push({name:t}),{name:t})}},{key:"getTags",value:function(t){var e=this,n=[];if(!t)return n;var o,a=_createForOfIteratorHelper(t.split(","));try{var c=function(){var t=o.value;t=t.trim();var a=e.tagRepo.getViewModelList().find((function(e){return e.name===t}));a?n.push({id:a.id,name:a.name}):(e.newTags.find((function(e){return e.name===t}))||e.newTags.push({name:t}),n.push({name:t}))};for(a.s();!(o=a.n()).done;)c()}catch(i){a.e(i)}finally{a.f()}return n}},{key:"createNewUsers",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],n=_createForOfIteratorHelper(this.newSubmitters);try{for(n.s();!(o=n.n()).done;)a=o.value,e.push(this.userRepo.createFromString(a.name))}catch(c){n.e(c)}finally{n.f()}return t.next=5,Promise.all(e);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"createNewMotionBlocks",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,o,a,c=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],n=_createForOfIteratorHelper(this.newMotionBlocks);try{for(a=function(){var t=o.value;e.push(c.motionBlockRepo.create(new g.a({title:t.name})).then((function(e){return{name:t.name,id:e.id}})))},n.s();!(o=n.n()).done;)a()}catch(i){n.e(i)}finally{n.f()}return t.next=5,Promise.all(e);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"createNewCategories",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,o,a,c=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],n=_createForOfIteratorHelper(this.newCategories);try{for(a=function(){var t=o.value,n=c.splitCategoryString(t.name);e.push(c.categoryRepo.create(new h.a({name:n.name,prefix:n.prefix?n.prefix:null})).then((function(e){return{name:t.name,id:e.id}})))},n.s();!(o=n.n()).done;)a()}catch(i){n.e(i)}finally{n.f()}return t.next=5,Promise.all(e);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"createNewTags",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,o,a,c=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],n=_createForOfIteratorHelper(this.newTags);try{for(a=function(){var t=o.value;e.push(c.tagRepo.create(new v.a({name:t.name})).then((function(e){return{name:t.name,id:e.id}})))},n.s();!(o=n.n()).done;)a()}catch(i){n.e(i)}finally{n.f()}return t.next=5,Promise.all(e);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"splitCategoryString",value:function(t){var e=" - ";t.startsWith(e)&&(e=e.substring(1));var n="",o=(t=t.trim()).indexOf(e);return o>=0&&o<6&&(n=t.substring(0,o),t=t.substring(o+e.length)),{prefix:n,name:t}}}]),n}(p.a)).\u0275fac=function(t){return new(t||o)(T.ec(m.a),T.ec(u.a),T.ec(f.a),T.ec(d.a),T.ec(b.a),T.ec(R.k),T.ec(C.a),T.ec(x.a))},o.\u0275prov=T.Qb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),E=n("jhN1"),Z=n("mksl"),S=n("Wp6s"),I=n("bTqV"),_=n("kmnG"),M=n("d3UM"),B=n("IZUe"),O=n("FKr1"),U=n("+0xr"),A=n("Dh3D"),V=n("NFeN"),j=n("Qu3c");function D(t,e){if(1&t){var n=T.bc();T.ac(0,"button",17),T.ic("click",(function(){return T.Jc(n),T.mc().doImport()})),T.ac(1,"span",18),T.Tc(2),T.nc(3,"translate"),T.Zb(),T.Zb()}2&t&&(T.Hb(2),T.Uc(T.oc(3,1,"Import")))}function F(t,e){1&t&&(T.ac(0,"span"),T.Tc(1,",\xa0"),T.Zb())}function L(t,e){if(1&t&&(T.ac(0,"span"),T.ac(1,"span"),T.Tc(2),T.nc(3,"translate"),T.Zb(),T.Rc(4,F,2,0,"span",19),T.Zb()),2&t){var n=e.$implicit,o=e.last;T.Hb(2),T.Uc(T.oc(3,2,n)),T.Hb(2),T.uc("ngIf",!o)}}function P(t,e){if(1&t&&(T.ac(0,"mat-option",20),T.Tc(1),T.nc(2,"translate"),T.Zb()),2&t){var n=e.$implicit;T.uc("value",n.value),T.Hb(1),T.Vc(" ",T.oc(2,2,n.label)," ")}}function $(t,e){if(1&t&&(T.ac(0,"mat-option",20),T.Tc(1),T.nc(2,"translate"),T.Zb()),2&t){var n=e.$implicit;T.uc("value",n.value),T.Hb(1),T.Vc(" ",T.oc(2,2,n.label)," ")}}function N(t,e){if(1&t&&(T.ac(0,"mat-option",20),T.Tc(1),T.nc(2,"translate"),T.Zb()),2&t){var n=e.$implicit;T.uc("value",n.value),T.Hb(1),T.Vc(" ",T.oc(2,2,n.label)," ")}}function X(t,e){if(1&t&&(T.ac(0,"div"),T.Tc(1," \xa0 "),T.ac(2,"mat-icon",45),T.Tc(3,"playlist_add"),T.Zb(),T.ac(4,"span"),T.Tc(5),T.Zb(),T.ac(6,"span"),T.Tc(7),T.nc(8,"translate"),T.Zb(),T.Zb()),2&t){var n=T.mc(2);T.Hb(5),T.Vc("\xa0",n.newCount,"\xa0"),T.Hb(2),T.Uc(T.oc(8,2,"Motion(s) will be imported."))}}function Y(t,e){if(1&t&&(T.ac(0,"div",46),T.Tc(1," \xa0 "),T.ac(2,"mat-icon",45),T.Tc(3,"warning"),T.Zb(),T.ac(4,"span"),T.Tc(5),T.Zb(),T.ac(6,"span"),T.Tc(7),T.nc(8,"translate"),T.Zb(),T.Zb()),2&t){var n=T.mc(2);T.Hb(5),T.Vc("\xa0",n.nonImportableCount,"\xa0"),T.Hb(2),T.Uc(T.oc(8,2,"entries will be ommitted."))}}function J(t,e){if(1&t&&(T.ac(0,"div",47),T.Tc(1," \xa0 "),T.ac(2,"mat-icon",45),T.Tc(3,"done"),T.Zb(),T.ac(4,"span"),T.Tc(5),T.Zb(),T.ac(6,"span"),T.Tc(7),T.nc(8,"translate"),T.Zb(),T.Zb()),2&t){var n=T.mc(2);T.Hb(5),T.Vc("\xa0",n.doneCount,"\xa0"),T.Hb(2),T.Uc(T.oc(8,2,"Motions have been imported."))}}function q(t,e){1&t&&(T.ac(0,"div"),T.ac(1,"span"),T.Tc(2),T.nc(3,"translate"),T.Zb(),T.Zb()),2&t&&(T.Hb(2),T.Uc(T.oc(3,1,'After verifiy the preview click on "import" please (see top right).')))}function Q(t,e){if(1&t){var n=T.bc();T.ac(0,"mat-select",48),T.ic("valueChange",(function(t){return T.Jc(n),T.mc(2).shown=t}))("selectionChange",(function(){return T.Jc(n),T.mc(2).setFilter()})),T.ac(1,"mat-option",49),T.Tc(2),T.nc(3,"translate"),T.Zb(),T.ac(4,"mat-option",50),T.Tc(5),T.nc(6,"translate"),T.Zb(),T.ac(7,"mat-option",51),T.Tc(8),T.nc(9,"translate"),T.Zb(),T.Zb()}if(2&t){var o=T.mc(2);T.uc("value",o.shown),T.Hb(2),T.Uc(T.oc(3,4,"Show all")),T.Hb(3),T.Uc(T.oc(6,6,"Show errors only")),T.Hb(3),T.Uc(T.oc(9,8,"Show correct entries"))}}function K(t,e){1&t&&T.Vb(0,"mat-header-cell",52)}function z(t,e){if(1&t&&(T.ac(0,"div"),T.ac(1,"mat-icon",53),T.nc(2,"translate"),T.Tc(3),T.Zb(),T.Zb()),2&t){var n=T.mc().$implicit,o=T.mc(2);T.Hb(1),T.xc("matTooltip","",n.errors.length," ",T.oc(2,3,"errors"),""),T.Hb(2),T.Vc(" ",o.getActionIcon(n)," ")}}function W(t,e){if(1&t&&(T.ac(0,"div"),T.ac(1,"mat-icon",54),T.nc(2,"translate"),T.Tc(3),T.Zb(),T.Zb()),2&t){var n=T.mc().$implicit,o=T.mc(2);T.Hb(1),T.vc("matTooltip",T.oc(2,2,"Motion will be imported")),T.Hb(2),T.Vc(" ",o.getActionIcon(n)," ")}}function G(t,e){if(1&t&&(T.ac(0,"div"),T.ac(1,"mat-icon",54),T.nc(2,"translate"),T.Tc(3),T.Zb(),T.Zb()),2&t){var n=T.mc().$implicit,o=T.mc(2);T.Hb(1),T.vc("matTooltip",T.oc(2,2,"Motion has been imported")),T.Hb(2),T.Vc(" ",o.getActionIcon(n)," ")}}function tt(t,e){if(1&t&&(T.ac(0,"mat-cell",52),T.Rc(1,z,4,5,"div",19),T.Rc(2,W,4,4,"div",19),T.Rc(3,G,4,4,"div",19),T.Zb()),2&t){var n=e.$implicit;T.Hb(1),T.uc("ngIf","error"===n.status),T.Hb(1),T.uc("ngIf","new"===n.status),T.Hb(1),T.uc("ngIf","done"===n.status)}}function et(t,e){1&t&&(T.ac(0,"mat-header-cell"),T.Tc(1),T.nc(2,"translate"),T.Zb()),2&t&&(T.Hb(1),T.Uc(T.oc(2,1,"Identifier")))}function nt(t,e){if(1&t&&(T.ac(0,"mat-icon",56),T.nc(1,"translate"),T.Tc(2," warning "),T.Zb()),2&t){var n=T.mc(3);T.vc("matTooltip",T.oc(1,1,n.getVerboseError("Duplicates")))}}function ot(t,e){if(1&t&&(T.ac(0,"mat-cell"),T.Rc(1,nt,3,3,"mat-icon",55),T.Tc(2),T.Zb()),2&t){var n=e.$implicit,o=T.mc(2);T.Hb(1),T.uc("ngIf",o.hasError(n,"Duplicates")),T.Hb(1),T.Vc(" ",n.newEntry.identifier," ")}}function at(t,e){1&t&&(T.ac(0,"mat-header-cell"),T.Tc(1),T.nc(2,"translate"),T.Zb()),2&t&&(T.Hb(1),T.Uc(T.oc(2,1,"Title")))}function ct(t,e){if(1&t&&(T.ac(0,"mat-icon",58),T.nc(1,"translate"),T.Tc(2," warning "),T.Zb()),2&t){var n=T.mc(3);T.vc("matTooltip",T.oc(1,1,n.getVerboseError("Title")))}}function it(t,e){if(1&t&&(T.ac(0,"mat-cell"),T.Rc(1,ct,3,3,"mat-icon",57),T.Tc(2),T.Zb()),2&t){var n=e.$implicit,o=T.mc(2);T.Hb(1),T.uc("ngIf",o.hasError(n,"Title")),T.Hb(1),T.Vc(" ",n.newEntry.title," ")}}function rt(t,e){1&t&&(T.ac(0,"mat-header-cell"),T.Tc(1),T.nc(2,"translate"),T.Zb()),2&t&&(T.Hb(1),T.Uc(T.oc(2,1,"Motion text")))}function lt(t,e){if(1&t&&(T.ac(0,"mat-icon",58),T.nc(1,"translate"),T.Tc(2," warning "),T.Zb()),2&t){var n=T.mc(3);T.vc("matTooltip",T.oc(1,1,n.getVerboseError("Text")))}}function st(t,e){if(1&t&&(T.ac(0,"mat-cell",54),T.Rc(1,lt,3,3,"mat-icon",57),T.Tc(2),T.Zb()),2&t){var n=e.$implicit,o=T.mc(2);T.vc("matTooltip",o.getLongPreview(n.newEntry.text)),T.Hb(1),T.uc("ngIf",o.hasError(n,"Text")),T.Hb(1),T.Vc(" ",o.getShortPreview(n.newEntry.text)," ")}}function ut(t,e){1&t&&(T.ac(0,"mat-header-cell"),T.Tc(1),T.nc(2,"translate"),T.Zb()),2&t&&(T.Hb(1),T.Uc(T.oc(2,1,"Reason")))}function ft(t,e){if(1&t&&(T.ac(0,"mat-cell",54),T.Tc(1),T.Zb()),2&t){var n=e.$implicit,o=T.mc(2);T.vc("matTooltip",o.getLongPreview(n.newEntry.reason)),T.Hb(1),T.Vc(" ",o.getShortPreview(n.newEntry.reason)," ")}}function mt(t,e){1&t&&(T.ac(0,"mat-header-cell"),T.Tc(1),T.nc(2,"translate"),T.Zb()),2&t&&(T.Hb(1),T.Uc(T.oc(2,1,"Submitters")))}function bt(t,e){if(1&t&&(T.ac(0,"mat-icon",58),T.nc(1,"translate"),T.Tc(2," warning "),T.Zb()),2&t){var n=T.mc(4);T.vc("matTooltip",T.oc(1,1,n.getVerboseError("Submitters")))}}function dt(t,e){1&t&&(T.ac(0,"mat-icon",60),T.Tc(1,"add"),T.Zb())}function pt(t,e){if(1&t&&(T.ac(0,"div"),T.Tc(1),T.Rc(2,dt,2,0,"mat-icon",59),T.Tc(3," \xa0 "),T.Zb()),2&t){var n=e.$implicit;T.Hb(1),T.Vc(" ",n.name," "),T.Hb(1),T.uc("ngIf",!n.id)}}function vt(t,e){if(1&t&&(T.ac(0,"div"),T.Rc(1,bt,3,3,"mat-icon",57),T.Rc(2,pt,4,2,"div",6),T.Zb()),2&t){var n=T.mc().$implicit,o=T.mc(2);T.Hb(1),T.uc("ngIf",o.hasError(n,"Submitters")),T.Hb(1),T.uc("ngForOf",n.newEntry.csvSubmitters)}}function ht(t,e){if(1&t&&(T.ac(0,"mat-cell"),T.Rc(1,vt,3,2,"div",19),T.Zb()),2&t){var n=e.$implicit;T.Hb(1),T.uc("ngIf",n.newEntry.csvSubmitters&&n.newEntry.csvSubmitters.length)}}function gt(t,e){1&t&&(T.ac(0,"mat-header-cell"),T.Tc(1),T.nc(2,"translate"),T.Zb()),2&t&&(T.Hb(1),T.Uc(T.oc(2,1,"Category")))}function yt(t,e){if(1&t&&(T.ac(0,"mat-icon",58),T.nc(1,"translate"),T.Tc(2," warning "),T.Zb()),2&t){var n=T.mc(4);T.vc("matTooltip",T.oc(1,1,n.getVerboseError("Category")))}}function wt(t,e){1&t&&(T.ac(0,"mat-icon",60),T.Tc(1,"add"),T.Zb())}function kt(t,e){if(1&t&&(T.ac(0,"div"),T.Rc(1,yt,3,3,"mat-icon",57),T.Tc(2),T.Rc(3,wt,2,0,"mat-icon",59),T.Tc(4,"\xa0 "),T.Zb()),2&t){var n=T.mc().$implicit,o=T.mc(2);T.Hb(1),T.uc("ngIf",o.hasError(n,"Category")),T.Hb(1),T.Vc(" ",n.newEntry.csvCategory.name," "),T.Hb(1),T.uc("ngIf",!n.newEntry.csvCategory.id)}}function Tt(t,e){if(1&t&&(T.ac(0,"mat-cell"),T.Rc(1,kt,5,3,"div",19),T.Zb()),2&t){var n=e.$implicit;T.Hb(1),T.uc("ngIf",n.newEntry.csvCategory)}}function Rt(t,e){1&t&&(T.ac(0,"mat-header-cell"),T.Tc(1),T.nc(2,"translate"),T.Zb()),2&t&&(T.Hb(1),T.Uc(T.oc(2,1,"Tags")))}function Ct(t,e){if(1&t&&(T.ac(0,"mat-icon",58),T.nc(1,"translate"),T.Tc(2," warning "),T.Zb()),2&t){var n=T.mc(4);T.vc("matTooltip",T.oc(1,1,n.getVerboseError("Tags")))}}function xt(t,e){1&t&&(T.ac(0,"mat-icon",60),T.Tc(1,"add"),T.Zb())}function Ht(t,e){if(1&t&&(T.ac(0,"div"),T.Tc(1),T.Rc(2,xt,2,0,"mat-icon",59),T.Zb()),2&t){var n=e.$implicit;T.Hb(1),T.Vc(" ",n.name," "),T.Hb(1),T.uc("ngIf",!n.id)}}function Et(t,e){if(1&t&&(T.ac(0,"div"),T.Rc(1,Ct,3,3,"mat-icon",57),T.Rc(2,Ht,3,2,"div",6),T.Zb()),2&t){var n=T.mc().$implicit,o=T.mc(2);T.Hb(1),T.uc("ngIf",o.hasError(n,"Tags")),T.Hb(1),T.uc("ngForOf",n.newEntry.csvTags)}}function Zt(t,e){if(1&t&&(T.ac(0,"mat-cell"),T.Rc(1,Et,3,2,"div",19),T.Zb()),2&t){var n=e.$implicit;T.Hb(1),T.uc("ngIf",n.newEntry.csvTags)}}function St(t,e){1&t&&(T.ac(0,"mat-header-cell"),T.Tc(1),T.nc(2,"translate"),T.Zb()),2&t&&(T.Hb(1),T.Uc(T.oc(2,1,"Origin")))}function It(t,e){if(1&t&&(T.ac(0,"mat-cell"),T.Tc(1),T.Zb()),2&t){var n=e.$implicit;T.Hb(1),T.Uc(n.newEntry.origin)}}function _t(t,e){1&t&&(T.ac(0,"mat-header-cell"),T.Tc(1),T.nc(2,"translate"),T.Zb()),2&t&&(T.Hb(1),T.Uc(T.oc(2,1,"Motion block")))}function Mt(t,e){if(1&t&&(T.ac(0,"mat-icon",58),T.nc(1,"translate"),T.Tc(2," warning "),T.Zb()),2&t){var n=T.mc(4);T.vc("matTooltip",T.oc(1,1,n.getVerboseError("MotionBlock")))}}function Bt(t,e){1&t&&(T.ac(0,"mat-icon",60),T.Tc(1," add "),T.Zb())}function Ot(t,e){if(1&t&&(T.ac(0,"div"),T.Rc(1,Mt,3,3,"mat-icon",57),T.Tc(2),T.Rc(3,Bt,2,0,"mat-icon",59),T.Tc(4," \xa0 "),T.Zb()),2&t){var n=T.mc().$implicit,o=T.mc(2);T.Hb(1),T.uc("ngIf",o.hasError(n,"MotionBlock")),T.Hb(1),T.Vc(" ",n.newEntry.csvMotionblock.name," "),T.Hb(1),T.uc("ngIf",!n.newEntry.csvMotionblock.id)}}function Ut(t,e){if(1&t&&(T.ac(0,"mat-cell"),T.Rc(1,Ot,5,3,"div",19),T.Zb()),2&t){var n=e.$implicit;T.Hb(1),T.uc("ngIf",n.newEntry.csvMotionblock)}}function At(t,e){1&t&&T.Vb(0,"mat-header-row")}function Vt(t,e){if(1&t&&T.Vb(0,"mat-row",61),2&t){var n=e.$implicit,o=T.mc(2);T.uc("ngClass",o.getStateClass(n))}}function jt(t,e){if(1&t&&(T.ac(0,"mat-card",21),T.ac(1,"h3"),T.Tc(2),T.nc(3,"translate"),T.Zb(),T.ac(4,"div",22),T.Rc(5,X,9,4,"div",19),T.Rc(6,Y,9,4,"div",23),T.Rc(7,J,9,4,"div",24),T.Zb(),T.Rc(8,q,4,3,"div",19),T.ac(9,"div"),T.Rc(10,Q,10,10,"mat-select",25),T.Zb(),T.ac(11,"div",26),T.ac(12,"table",27),T.Yb(13,28),T.Rc(14,K,1,0,"mat-header-cell",29),T.Rc(15,tt,4,3,"mat-cell",30),T.Xb(),T.Yb(16,31),T.Rc(17,et,3,3,"mat-header-cell",32),T.Rc(18,ot,3,2,"mat-cell",33),T.Xb(),T.Yb(19,34),T.Rc(20,at,3,3,"mat-header-cell",32),T.Rc(21,it,3,2,"mat-cell",33),T.Xb(),T.Yb(22,35),T.Rc(23,rt,3,3,"mat-header-cell",32),T.Rc(24,st,3,3,"mat-cell",36),T.Xb(),T.Yb(25,37),T.Rc(26,ut,3,3,"mat-header-cell",32),T.Rc(27,ft,2,2,"mat-cell",36),T.Xb(),T.Yb(28,38),T.Rc(29,mt,3,3,"mat-header-cell",32),T.Rc(30,ht,2,1,"mat-cell",33),T.Xb(),T.Yb(31,39),T.Rc(32,gt,3,3,"mat-header-cell",32),T.Rc(33,Tt,2,1,"mat-cell",33),T.Xb(),T.Yb(34,40),T.Rc(35,Rt,3,3,"mat-header-cell",32),T.Rc(36,Zt,2,1,"mat-cell",33),T.Xb(),T.Yb(37,41),T.Rc(38,St,3,3,"mat-header-cell",32),T.Rc(39,It,2,1,"mat-cell",33),T.Xb(),T.Yb(40,42),T.Rc(41,_t,3,3,"mat-header-cell",32),T.Rc(42,Ut,2,1,"mat-cell",33),T.Xb(),T.Rc(43,At,1,0,"mat-header-row",43),T.Rc(44,Vt,1,1,"mat-row",44),T.Zb(),T.Zb(),T.Zb()),2&t){var n=T.mc();T.Hb(2),T.Uc(T.oc(3,9,"Preview")),T.Hb(3),T.uc("ngIf",n.newCount),T.Hb(1),T.uc("ngIf",n.nonImportableCount),T.Hb(1),T.uc("ngIf",n.doneCount),T.Hb(1),T.uc("ngIf",n.newCount),T.Hb(2),T.uc("ngIf",n.nonImportableCount),T.Hb(2),T.uc("dataSource",n.dataSource),T.Hb(31),T.uc("matHeaderRowDef",n.getColumnDefinition()),T.Hb(1),T.uc("matRowDefColumns",n.getColumnDefinition())}}var Dt,Ft,Lt,Pt=[{path:"",component:(Dt=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,a,c,i){var r;return _classCallCheck(this,n),(r=e.call(this,c,t,a,o)).motionCSVExport=i,r}return _createClass(n,[{key:"downloadCsvExample",value:function(){this.motionCSVExport.exportDummyMotion()}},{key:"expectedHeader",get:function(){return this.importer.expectedHeader.map((function(t){return"motion_block"===t?"Motion block":t.charAt(0).toUpperCase()+t.slice(1)}))}}]),n}(r.a),Dt.\u0275fac=function(t){return new(t||Dt)(T.Ub(E.d),T.Ub(x.a),T.Ub(R.k),T.Ub(H),T.Ub(l.a))},Dt.\u0275cmp=T.Ob({type:Dt,selectors:[["os-motion-import-list"]],features:[T.Eb],decls:52,vars:35,consts:[["prevUrl","../..",3,"nav"],[1,"title-slot"],[1,"menu-slot"],["mat-button","",3,"click",4,"ngIf"],[1,"os-form-card","import-table","spacer-bottom-60"],[1,"code","red-warning-text"],[4,"ngFor","ngForOf"],["mat-button","","color","accent",3,"click"],[1,"wrapper"],[1,"selection",3,"value","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["value","",1,"selection",3,"selectionChange"],["value",'"',1,"selection",3,"selectionChange"],["id","motion-import-file-input","type","file","accept","text",1,"hidden-input",3,"change"],["fileInput",""],["mat-button","","osAutofocus","","onclick","document.getElementById('motion-import-file-input').click()"],["class","os-form-card import-table",4,"ngIf"],["mat-button","",3,"click"],[1,"upper"],[4,"ngIf"],[3,"value"],[1,"os-form-card","import-table"],[1,"summary"],["class","red-warning-text",4,"ngIf"],["class","green-text",4,"ngIf"],["class","filter-imports",3,"value","valueChange","selectionChange",4,"ngIf"],[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","status","sticky",""],["class","first-column",4,"matHeaderCellDef"],["class","first-column",4,"matCellDef"],["matColumnDef","identifier"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","title"],["matColumnDef","text"],[3,"matTooltip",4,"matCellDef"],["matColumnDef","reason"],["matColumnDef","submitters"],["matColumnDef","category"],["matColumnDef","tags"],["matColumnDef","origin"],["matColumnDef","motion_block"],[4,"matHeaderRowDef"],[3,"ngClass",4,"matRowDef","matRowDefColumns"],["inline",""],[1,"red-warning-text"],[1,"green-text"],[1,"filter-imports",3,"value","valueChange","selectionChange"],["value","all"],["value","error"],["value","noerror"],[1,"first-column"],[1,"red-warning-text",3,"matTooltip"],[3,"matTooltip"],["color","warn","inline","",3,"matTooltip",4,"ngIf"],["color","warn","inline","",3,"matTooltip"],["color","warn",3,"matTooltip",4,"ngIf"],["color","warn",3,"matTooltip"],["class","newBadge","color","accent","inline","",4,"ngIf"],["color","accent","inline","",1,"newBadge"],[3,"ngClass"]],template:function(t,e){1&t&&(T.ac(0,"os-head-bar",0),T.ac(1,"div",1),T.ac(2,"h2"),T.Tc(3),T.nc(4,"translate"),T.Zb(),T.Zb(),T.ac(5,"div",2),T.Rc(6,D,4,3,"button",3),T.Zb(),T.Zb(),T.ac(7,"mat-card",4),T.ac(8,"span"),T.Tc(9),T.nc(10,"translate"),T.Zb(),T.Vb(11,"br"),T.ac(12,"div",5),T.Rc(13,L,5,4,"span",6),T.Zb(),T.ac(14,"ul"),T.ac(15,"li"),T.Tc(16),T.nc(17,"translate"),T.Zb(),T.ac(18,"li"),T.Tc(19),T.nc(20,"translate"),T.Zb(),T.Zb(),T.ac(21,"button",7),T.ic("click",(function(){return e.downloadCsvExample()})),T.Tc(22),T.nc(23,"translate"),T.Zb(),T.ac(24,"div",8),T.ac(25,"mat-form-field"),T.ac(26,"mat-label"),T.Tc(27),T.nc(28,"translate"),T.Zb(),T.ac(29,"mat-select",9),T.ic("selectionChange",(function(t){return e.selectEncoding(t)})),T.Rc(30,P,3,4,"mat-option",10),T.Zb(),T.Zb(),T.ac(31,"mat-form-field"),T.ac(32,"mat-label"),T.Tc(33),T.nc(34,"translate"),T.Zb(),T.ac(35,"mat-select",11),T.ic("selectionChange",(function(t){return e.selectColSep(t)})),T.Rc(36,$,3,4,"mat-option",10),T.Zb(),T.Zb(),T.ac(37,"mat-form-field"),T.ac(38,"mat-label"),T.Tc(39),T.nc(40,"translate"),T.Zb(),T.ac(41,"mat-select",12),T.ic("selectionChange",(function(t){return e.selectTextSep(t)})),T.Rc(42,N,3,4,"mat-option",10),T.Zb(),T.Zb(),T.Zb(),T.ac(43,"div"),T.ac(44,"div"),T.ac(45,"input",13,14),T.ic("change",(function(t){return e.onSelectFile(t)})),T.Zb(),T.ac(47,"button",15),T.ac(48,"span"),T.Tc(49),T.nc(50,"translate"),T.Zb(),T.Zb(),T.Zb(),T.Zb(),T.Zb(),T.Rc(51,jt,45,11,"mat-card",16)),2&t&&(T.uc("nav",!1),T.Hb(3),T.Uc(T.oc(4,17,"Import motions")),T.Hb(3),T.uc("ngIf",e.hasFile&&e.newCount),T.Hb(3),T.Uc(T.oc(10,19,"Required comma or semicolon separated values with these column header names in the first row:")),T.Hb(4),T.uc("ngForOf",e.expectedHeader),T.Hb(3),T.Vc(" ",T.oc(17,21,"Identifier, reason, submitter, category, origin and motion block are optional and may be empty.")," "),T.Hb(3),T.Vc(" ",T.oc(20,23,"Additional columns after the required ones may be present and will not affect the import.")," "),T.Hb(3),T.Vc(" ",T.oc(23,25,"Download CSV example file")," "),T.Hb(5),T.Uc(T.oc(28,27,"Encoding of the file")),T.Hb(2),T.uc("value",e.encodings[0].value),T.Hb(1),T.uc("ngForOf",e.encodings),T.Hb(3),T.Uc(T.oc(34,29,"Column separator")),T.Hb(3),T.uc("ngForOf",e.columnSeparators),T.Hb(3),T.Uc(T.oc(40,31,"Text separator")),T.Hb(3),T.uc("ngForOf",e.textSeparators),T.Hb(7),T.Uc(T.oc(50,33,"Select file")),T.Hb(2),T.uc("ngIf",e.hasFile))},directives:[Z.a,a.t,S.a,a.s,I.b,_.c,_.g,M.a,B.a,O.n,U.n,A.a,U.c,U.i,U.b,U.k,U.m,V.a,U.h,U.a,j.c,U.j,U.l,a.q],pipes:[R.j],encapsulation:2}),Dt),pathMatch:"full"}],$t=((Lt=function t(){_classCallCheck(this,t)}).\u0275mod=T.Sb({type:Lt}),Lt.\u0275inj=T.Rb({factory:function(t){return new(t||Lt)},imports:[[i.j.forChild(Pt)],i.j]}),Lt),Nt=((Ft=function t(){_classCallCheck(this,t)}).\u0275mod=T.Sb({type:Ft}),Ft.\u0275inj=T.Rb({factory:function(t){return new(t||Ft)},imports:[[a.c,$t,c.a]]}),Ft)}}]);