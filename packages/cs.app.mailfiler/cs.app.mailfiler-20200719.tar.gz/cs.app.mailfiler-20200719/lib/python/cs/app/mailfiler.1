.TH MAILFILER 1
.SH NAME
.PP
mailfiler \- a Maildir monitor for filing email messages
.SH SYNOPSIS
.PP
mailfiler monitor [\-1] [\-d delay] [\-n] [\-N] [\-R rules_pattern] maildirs...
.SH DESCRIPTION
.PP
The 
.BR mailfiler (1cs) 
command files email messages in Maildirs
according to simple text rules as described in 
.BR mailfiler (5cs).
.SH MODES
.SS monitor
.PP
In the \fB\fCmonitor\fR mode \fB\fCmailfiler\fR watches the specified \fImaildirs\fP
for email messages
and files each according to a sequence of rules in the matching rules file
(see 
.BR mailfiler (5cs)).
.PP
The matching rule file is named:
.PP
.RS
.nf
$HOME/.mailfiler/`*maildir.basename*
.fi
.RE
.PP
where \fImaildir.basename\fP is the basename of the named Maildir.
.PP
Each Maildir is consulted in turn, so filings which deliver messages
into Maildirs named later on the command line will cause the filed
message to be processed in this run when that later Maildir is
reached.
.PP
The following options are available in monitor mode:
.PP
\fB\fC\-1\fR: file at most 1 message per Maildir.
.TP
\fB\fC\-d\fR \fIdelay\fP:
delay \fIdelay\fP seconds between runs.
The default is to make only one pass over the Maildirs.
.TP
\fB\fC\-n\fR: no remove.
File messages but do not remove successfully filed messages
from the source Maildir.
.TP
\fB\fC\-R\fR \fIrules_pattern\fP
Specify the rules file pattern used to specify rules files from Maildir names.
Default: \fB\fC$HOME/.mailfiler/\fR\fImaildir.basename\fP
.SH EXAMPLE
.PP
My standard invocation of mailfiler is this:
.PP
.RS
.nf
mailfiler monitor \-d 1 ~/mail/spool ~/mail/spool\-in ~/mail/spool\-out ~/mail/spool\-xref
.fi
.RE
.PP
My mail collection delivers email to my \fB\fCspool\fR folder.
The rules there divert probable spam and then pass what remains to \fB\fCspool\-in\fR
where my main rules live, which can presume a message is not spam.
.PP
My mailer's message send facility takes a copy to \fB\fCspool\-out\fR, whose rules say:
.PP
.RS
.nf
< env
out,me,$PHONE,spool\-xref,"| cs\-aliases\-add\-email sent" . .
.fi
.RE
.PP
This copies the message to \fB\fCout\fR as a record,
to my primary inbox \fB\fCme\fR for later reference,
to \fB\fC$PHONE\fR (an email address defined in \fB\fCenv\fR) which is consulted by my phone,
and pipes a copy to my \fB\fCcs\-aliases\-add\-email\fR
to learn the address for whitelisting purposes.
.SH SEE ALSO
.PP
.BR mailfiler (5cs), 
.BR procmail (1)
.SH AUTHOR
.PP
Cameron Simpson \[la]cs@cskk.id.au\[ra]
